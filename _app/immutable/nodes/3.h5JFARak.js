import{a as D,e as S,V as j,f as F,h as B,j as k,W as R,l as Y,m as w,X as ze,x as ft,n as Xe,r as mt,v as re,d as ae,Y as Fe,z as I,B as Ye,Z as H,A as ee,c as Ae,C as tt,u as Le,g as Me,b as Se,_ as te,q as T,o as dt,t as ht,k as pt,p as gt,w as He,$ as wt,a0 as _t}from"../chunks/scheduler.J3HtxzZH.js";import{S as G,i as K,d as _,v as Z,b as g,f as d,c as v,e as L,p as ie,t as b,k as W,a as A,h as J,g as ne,q as Ne,l as Be,m as Ee,n as Ce,o as Ve,u as kt,r as vt,s as bt}from"../chunks/index.MIe1TYhU.js";import{d as Qe}from"../chunks/index.Rnsz-MMY.js";import{t as De,c as Ge,b as Ke,d as le,L as M,a as X,l as se,h as yt,e as Ze,m as We,i as ce}from"../chunks/stores.dYNDiA1t.js";/* empty css                    */const nt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,At=!1,It=Object.freeze(Object.defineProperty({__proto__:null,ssr:At},Symbol.toStringTag,{value:"Module"})),{console:Lt}=nt,y="src/lib/Map/Toolbar.svelte";function ot(s){let e;const i={c:function(){e=j("path"),this.h()},l:function(a){e=R(a,"path",{d:!0}),k(e).forEach(g),this.h()},h:function(){d(e,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),w(e,y,26,3,817)},m:function(a,o){v(a,e,o)},d:function(a){a&&g(e)}};return _("SvelteRegisterBlock",{block:i,id:ot.name,type:"else",source:"(26:2) {:else}",ctx:s}),i}function it(s){let e,i;const t={c:function(){e=j("path"),i=j("path"),this.h()},l:function(o){e=R(o,"path",{d:!0}),k(e).forEach(g),i=R(o,"path",{d:!0}),k(i).forEach(g),this.h()},h:function(){d(e,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),w(e,y,24,3,616),d(i,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),w(i,y,24,53,666)},m:function(o,n){v(o,e,n),v(o,i,n)},d:function(o){o&&(g(e),g(i))}};return _("SvelteRegisterBlock",{block:t,id:it.name,type:"if",source:"(24:2) {#if eye}",ctx:s}),t}function ue(s){let e,i,t,a,o,n,l,c,u,r,f,m,p,E,C,q,h;function Q(O,V){return O[0]?it:ot}let x=Q(s),U=x(s);const Pe={c:function(){e=S("div"),i=S("button"),t=j("svg"),U.c(),o=F(),n=S("button"),l=j("svg"),c=j("path"),u=F(),r=S("button"),f=j("svg"),m=j("mask"),p=j("rect"),E=j("g"),C=j("path"),this.h()},l:function(V){e=B(V,"DIV",{class:!0});var P=k(e);i=B(P,"BUTTON",{type:!0,title:!0,class:!0});var je=k(i);t=R(je,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var Re=k(t);U.l(Re),Re.forEach(g),je.forEach(g),o=Y(P),n=B(P,"BUTTON",{class:!0,title:!0});var Te=k(n);l=R(Te,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var Ue=k(l);c=R(Ue,"path",{d:!0,fill:!0}),k(c).forEach(g),Ue.forEach(g),Te.forEach(g),u=Y(P),r=B(P,"BUTTON",{class:!0});var qe=k(r);f=R(qe,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var oe=k(f);m=R(oe,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var Oe=k(m);p=R(Oe,"rect",{width:!0,height:!0,fill:!0}),k(p).forEach(g),Oe.forEach(g),E=R(oe,"g",{mask:!0});var Ie=k(E);C=R(Ie,"path",{d:!0,fill:!0}),k(C).forEach(g),Ie.forEach(g),oe.forEach(g),qe.forEach(g),P.forEach(g),this.h()},h:function(){d(t,"fill","none"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"stroke-width",a=s[0]?2:1),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),w(t,y,22,2,465),d(i,"type","button"),d(i,"title","Show Markers"),d(i,"class","s-X67GN01QUXjj"),ze(i,"selected",s[0]),w(i,y,21,1,378),d(c,"d","M0.800017 9.54074L15.8136 16.3514C16.2519 16.5506 16.7475 16.5506 17.1858 16.3514L32.1993 9.54074C33.266 9.0567 33.266 7.44474 32.1993 6.96071L17.1864 0.149366C16.9711 0.0509415 16.7371 0 16.5003 0C16.2636 0 16.0296 0.0509415 15.8142 0.149366L0.800017 6.96006C-0.266672 7.4441 -0.266672 9.0567 0.800017 9.54074ZM32.2 15.2306L28.4559 13.5336L18.0378 18.256C17.5506 18.4771 17.033 18.5892 16.5 18.5892C15.967 18.5892 15.4501 18.4771 14.9622 18.256L4.54471 13.5336L0.800017 15.2306C-0.266672 15.714 -0.266672 17.3253 0.800017 17.8087L15.8136 24.6142C16.2519 24.8128 16.7475 24.8128 17.1858 24.6142L32.2 17.8087C33.2667 17.3253 33.2667 15.714 32.2 15.2306ZM32.2 23.4676L28.4701 21.777L18.0378 26.5059C17.5506 26.727 17.033 26.8391 16.5 26.8391C15.967 26.8391 15.4501 26.727 14.9622 26.5059L4.53053 21.777L0.800017 23.4676C-0.266672 23.951 -0.266672 25.5623 0.800017 26.0457L15.8136 32.8513C16.2519 33.0498 16.7475 33.0498 17.1858 32.8513L32.2 26.0457C33.2667 25.5623 33.2667 23.951 32.2 23.4676Z"),d(c,"fill","black"),w(c,y,33,3,1361),d(l,"class","svgSize s-X67GN01QUXjj"),d(l,"width","33"),d(l,"height","33"),d(l,"viewBox","0 0 33 33"),d(l,"fill","none"),d(l,"xmlns","http://www.w3.org/2000/svg"),w(l,y,32,2,1246),d(n,"class","selected s-X67GN01QUXjj"),d(n,"title","Cycle Map Style"),w(n,y,31,1,1162),d(p,"width","54"),d(p,"height","54"),d(p,"fill","#D9D9D9"),w(p,y,40,3,2688),d(m,"id","mask0_14_196"),ft(m,"mask-type","alpha"),d(m,"maskUnits","userSpaceOnUse"),d(m,"x","0"),d(m,"y","0"),d(m,"width","54"),d(m,"height","54"),w(m,y,39,3,2574),d(C,"d","M24.75 47.25V32.4L14.2875 42.9188L11.0813 39.7125L21.6 29.25H6.75V24.75H21.6L11.0813 14.2875L14.2875 11.0813L24.75 21.6V6.75H29.25V21.6L39.7125 11.0813L42.9188 14.2875L32.4 24.75H47.25V29.25H32.4L42.9188 39.7125L39.7125 42.9188L29.25 32.4V47.25H24.75Z"),d(C,"fill","white"),w(C,y,43,3,2781),d(E,"mask","url(#mask0_14_196)"),w(E,y,42,3,2748),d(f,"class","svgSize s-X67GN01QUXjj"),d(f,"width","54"),d(f,"height","54"),d(f,"viewBox","0 0 54 54"),d(f,"fill","none"),d(f,"xmlns","http://www.w3.org/2000/svg"),w(f,y,38,2,2459),d(r,"class","selected s-X67GN01QUXjj"),w(r,y,37,1,2402),d(e,"class","flex flex-col s-X67GN01QUXjj"),w(e,y,19,0,348)},m:function(V,P){v(V,e,P),L(e,i),L(i,t),U.m(t,null),L(e,o),L(e,n),L(n,l),L(l,c),L(e,u),L(e,r),L(r,f),L(f,m),L(m,p),L(f,E),L(E,C),q||(h=[ie(i,"click",s[1],!1,!1,!1,!1),ie(n,"click",s[2],!1,!1,!1,!1),ie(r,"click",s[3],!1,!1,!1,!1)],q=!0)},p:function(V,[P]){x!==(x=Q(V))&&(U.d(1),U=x(V),U&&(U.c(),U.m(t,null))),P&1&&a!==(a=V[0]?2:1)&&d(t,"stroke-width",a),P&1&&ze(i,"selected",V[0])},i:Xe,o:Xe,d:function(V){V&&g(e),U.d(),q=!1,mt(h)}};return _("SvelteRegisterBlock",{block:Pe,id:ue.name,type:"component",source:"",ctx:s}),Pe}function Mt(s,e,i){let{$$slots:t={},$$scope:a}=e;Z("Toolbar",t,[]);let o=!0;function n(){i(0,o=!o),De(o)}function l(){Ge(),console.log("triggerCycleMapStyle")}function c(){Ke()}const u=[];return Object.keys(e).forEach(r=>{!~u.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&Lt.warn(`<Toolbar> was created with unknown prop '${r}'`)}),s.$capture_state=()=>({toggleMarkerVisibility:De,cycleMapStyle:Ge,toggleDarkMode:Ke,eye:o,clickEye:n,triggerCycleMapStyle:l,toggleMarkerColor:c}),s.$inject_state=r=>{"eye"in r&&i(0,o=r.eye)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[o,n,l,c]}class Je extends G{constructor(e){super(e),K(this,e,Mt,ue,D,{}),_("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:e,id:ue.name})}}const{Error:z,console:St}=nt,Bt="src/lib/Map/Leaflet.svelte";function fe(s){let e;const i=s[8].default,t=Ae(i,s,s[7],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,l){t&&t.m(n,l),e=!0},p:function(n,l){t&&t.p&&(!e||l&128)&&Le(t,i,n,n[7],e?Se(i,n[7],l,null):Me(n[7]),null)},i:function(n){e||(b(t,n),e=!0)},o:function(n){A(t,n),e=!1},d:function(n){t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:fe.name,type:"if",source:"(132:2) {#if map}",ctx:s}),a}function me(s){let e,i,t=s[0]&&fe(s);const a={c:function(){e=S("div"),t&&t.c(),this.h()},l:function(n){e=B(n,"DIV",{class:!0});var l=k(e);t&&t.l(l),l.forEach(g),this.h()},h:function(){d(e,"class","w-full h-full"),w(e,Bt,130,0,3455)},m:function(n,l){v(n,e,l),t&&t.m(e,null),s[9](e),i=!0},p:function(n,[l]){n[0]?t?(t.p(n,l),l&1&&b(t,1)):(t=fe(n),t.c(),b(t,1),t.m(e,null)):t&&(W(),A(t,1,1,()=>{t=null}),J())},i:function(n){i||(b(t),i=!0)},o:function(n){A(t),i=!1},d:function(n){n&&g(e),t&&t.d(),s[9](null)}};return _("SvelteRegisterBlock",{block:a,id:me.name,type:"component",source:"",ctx:s}),a}function Et(s,e,i){let t;re(le,"currentMapStyleId"),ae(s,le,h=>i(6,t=h));let{$$slots:a={},$$scope:o}=e;Z("Leaflet",a,["default"]);let{bounds:n=void 0}=e,{view:l=void 0}=e,{zoom:c=void 0}=e;const u=Fe();let r,f,m;const p=M.Control.extend({onAdd(h){const Q=M.DomUtil.create("div","map-toolbar-container");return new Je({target:Q,props:{}}),Q}});I(()=>{if(!n&&(!l||!c))throw new Error("Must set either bounds, or view and zoom.");i(0,r=M.map(f)),n?(r.fitBounds(n),X.set(n)):l&&c&&r.setView(l,c),r.whenReady(()=>{if(!n){const h=r.getBounds();console.log("Initial bounds set:",h),X.set(h)}i(5,m=new se({Language:"fr",style:M.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(r)),new p({position:"topright"}).addTo(r)}),r.on("zoom",h=>u("zoom",h)).on("moveend",()=>{const h=r.getBounds();X.set(h)}).on("popupopen",async h=>{await Ye(),h.popup.update()})}),H(()=>{r==null||r.remove(),i(0,r=void 0)}),ee("map",{getMap:()=>r});function E(h){r&&m&&(r.removeLayer(m),i(5,m=new se({style:h,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(r)))}const C=["bounds","view","zoom"];Object.keys(e).forEach(h=>{!~C.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&St.warn(`<Leaflet> was created with unknown prop '${h}'`)});function q(h){tt[h?"unshift":"push"](()=>{f=h,i(1,f)})}return s.$$set=h=>{"bounds"in h&&i(2,n=h.bounds),"view"in h&&i(3,l=h.view),"zoom"in h&&i(4,c=h.zoom),"$$scope"in h&&i(7,o=h.$$scope)},s.$capture_state=()=>({onMount:I,onDestroy:H,setContext:ee,createEventDispatcher:Fe,tick:Ye,L:M,MaptilerLayer:se,MaptilerStyle:yt,Toolbar:Je,currentMapStyleId:le,mapBoundsStore:X,bounds:n,view:l,zoom:c,dispatch:u,map:r,mapElement:f,mtLayer:m,ToolbarControl:p,updateMapStyle:E,$currentMapStyleId:t}),s.$inject_state=h=>{"bounds"in h&&i(2,n=h.bounds),"view"in h&&i(3,l=h.view),"zoom"in h&&i(4,c=h.zoom),"map"in h&&i(0,r=h.map),"mapElement"in h&&i(1,f=h.mapElement),"mtLayer"in h&&i(5,m=h.mtLayer)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&29&&r&&(n?r.fitBounds(n):l&&c&&r.setView(l,c)),s.$$.dirty&97&&t&&(console.log("UUUUUpdating map style to",t),r&&m&&E(t)),s.$$.dirty&64&&console.log("LEAFLET Current Map Style Index:",t)},[r,f,n,l,c,m,t,o,a,q]}class lt extends G{constructor(e){super(e),K(this,e,Et,me,D,{bounds:2,view:3,zoom:4}),_("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:e,id:me.name})}get bounds(){throw new z("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(e){throw new z("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new z("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(e){throw new z("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new z("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(e){throw new z("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const xe="data:image/png;base64,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",$e=""+new URL("../assets/custom-marker-white-outline.ja7aQokX.png",import.meta.url).href;function de(s){let e;const i=s[5].default,t=Ae(i,s,s[4],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,l){t&&t.m(n,l),e=!0},p:function(n,l){t&&t.p&&(!e||l&16)&&Le(t,i,n,n[4],e?Se(i,n[4],l,null):Me(n[4]),null)},i:function(n){e||(b(t,n),e=!0)},o:function(n){A(t,n),e=!1},d:function(n){t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:de.name,type:"if",source:"(53:0) {#if marker}",ctx:s}),a}function he(s){let e,i,t=s[0]&&de(s);const a={c:function(){t&&t.c(),e=T()},l:function(n){t&&t.l(n),e=T()},m:function(n,l){t&&t.m(n,l),v(n,e,l),i=!0},p:function(n,[l]){n[0]?t?(t.p(n,l),l&1&&b(t,1)):(t=de(n),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(W(),A(t,1,1,()=>{t=null}),J())},i:function(n){i||(b(t),i=!0)},o:function(n){A(t),i=!1},d:function(n){n&&g(e),t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:he.name,type:"component",source:"",ctx:s}),a}function Ct(s,e,i){let{$$slots:t={},$$scope:a}=e;Z("Marker",t,["default"]);let{width:o}=e,{height:n}=e,{latLng:l}=e,c,u;const r=te("map");ee("layer",{getLayer:()=>c});function f(p){let C=`<img src="${p==="dark"?$e:xe}" style="width: ${o}px; height: ${n}px;">`,q=M.divIcon({html:C,className:"map-marker",iconSize:M.point(o,n)});c?c.setIcon(q):u&&i(0,c=M.marker(l,{icon:q}).addTo(u))}I(()=>{u=r.getMap(),Ze.subscribe(p=>{f(p)})}),H(()=>{c&&(c.remove(),i(0,c=void 0))}),s.$$.on_mount.push(function(){o===void 0&&!("width"in e||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),n===void 0&&!("height"in e||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in e||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const m=["width","height","latLng"];return Object.keys(e).forEach(p=>{!~m.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Marker> was created with unknown prop '${p}'`)}),s.$$set=p=>{"width"in p&&i(1,o=p.width),"height"in p&&i(2,n=p.height),"latLng"in p&&i(3,l=p.latLng),"$$scope"in p&&i(4,a=p.$$scope)},s.$capture_state=()=>({onMount:I,onDestroy:H,getContext:te,setContext:ee,darkMode:Ze,L:M,customMarker:xe,customMarkerWhite:$e,width:o,height:n,latLng:l,marker:c,mapInstance:u,mapContext:r,createOrUpdateMarker:f}),s.$inject_state=p=>{"width"in p&&i(1,o=p.width),"height"in p&&i(2,n=p.height),"latLng"in p&&i(3,l=p.latLng),"marker"in p&&i(0,c=p.marker),"mapInstance"in p&&(u=p.mapInstance)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[c,o,n,l,a,t]}class st extends G{constructor(e){super(e),K(this,e,Ct,he,D,{width:1,height:2,latLng:3}),_("SvelteRegisterComponent",{component:this,tagName:"Marker",options:e,id:he.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Vt="src/lib/Map/Popup.svelte";function pe(s){let e;const i=s[3].default,t=Ae(i,s,s[2],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,l){t&&t.m(n,l),e=!0},p:function(n,l){t&&t.p&&(!e||l&4)&&Le(t,i,n,n[2],e?Se(i,n[2],l,null):Me(n[2]),null)},i:function(n){e||(b(t,n),e=!0)},o:function(n){A(t,n),e=!1},d:function(n){t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:pe.name,type:"if",source:"(36:2) {#if open}",ctx:s}),a}function ge(s){let e,i,t=s[1]&&pe(s);const a={c:function(){e=S("div"),t&&t.c(),this.h()},l:function(n){e=B(n,"DIV",{});var l=k(e);t&&t.l(l),l.forEach(g),this.h()},h:function(){w(e,Vt,34,0,671)},m:function(n,l){v(n,e,l),t&&t.m(e,null),s[4](e),i=!0},p:function(n,[l]){n[1]?t?(t.p(n,l),l&2&&b(t,1)):(t=pe(n),t.c(),b(t,1),t.m(e,null)):t&&(W(),A(t,1,1,()=>{t=null}),J())},i:function(n){i||(b(t),i=!0)},o:function(n){A(t),i=!1},d:function(n){n&&g(e),t&&t.d(),s[4](null)}};return _("SvelteRegisterBlock",{block:a,id:ge.name,type:"component",source:"",ctx:s}),a}function Pt(s,e,i){let{$$slots:t={},$$scope:a}=e;Z("Popup",t,["default"]);let o,n,l=!1;const c=te("layer"),u=c.getLayer();I(()=>{o=M.popup().setContent(n),u&&(u.bindPopup(o),u.on("popupopen",()=>i(1,l=!0)),u.on("popupclose",()=>i(1,l=!1)))}),H(()=>{u&&u.unbindPopup(),o&&(o.remove(),o=void 0)});const r=[];Object.keys(e).forEach(m=>{!~r.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Popup> was created with unknown prop '${m}'`)});function f(m){tt[m?"unshift":"push"](()=>{n=m,i(0,n)})}return s.$$set=m=>{"$$scope"in m&&i(2,a=m.$$scope)},s.$capture_state=()=>({onMount:I,onDestroy:H,getContext:te,L:M,popup:o,popupElement:n,open:l,layerContext:c,layer:u}),s.$inject_state=m=>{"popup"in m&&(o=m.popup),"popupElement"in m&&i(0,n=m.popupElement),"open"in m&&i(1,l=m.open)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[n,l,a,t,f]}class ct extends G{constructor(e){super(e),K(this,e,Pt,ge,D,{}),_("SvelteRegisterComponent",{component:this,tagName:"Popup",options:e,id:ge.name})}}const N="src/routes/map/+page.svelte";function $(s,e,i){const t=s.slice();return t[3]=e[i].latLng,t[4]=e[i].visible,t[5]=e[i].name,t[6]=e[i].description,t[7]=e[i].photos,t[9]=i,t}function et(s,e,i){const t=s.slice();return t[10]=e[i].url,t[11]=e[i].alt,t}function we(s){let e,i;e=new st({props:{latLng:s[3],width:20,height:20,$$slots:{default:[at]},$$scope:{ctx:s}},$$inline:!0});const t={c:function(){Be(e.$$.fragment)},l:function(o){Ee(e.$$.fragment,o)},m:function(o,n){Ce(e,o,n),i=!0},p:function(o,n){const l={};n&2&&(l.latLng=o[3]),n&16386&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i:function(o){i||(b(e.$$.fragment,o),i=!0)},o:function(o){A(e.$$.fragment,o),i=!1},d:function(o){Ve(e,o)}};return _("SvelteRegisterBlock",{block:t,id:we.name,type:"if",source:"(30:12) {#if visible}",ctx:s}),t}function _e(s){let e,i=ne(s[7]),t=[];for(let o=0;o<i.length;o+=1)t[o]=ke(et(s,i,o));const a={c:function(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l:function(n){e=B(n,"DIV",{class:!0});var l=k(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(g),this.h()},h:function(){d(e,"class","flex flex-row overflow-x-auto"),w(e,N,37,24,1366)},m:function(n,l){v(n,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p:function(n,l){if(l&2){i=ne(n[7]);let c;for(c=0;c<i.length;c+=1){const u=et(n,i,c);t[c]?t[c].p(u,l):(t[c]=ke(u),t[c].c(),t[c].m(e,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=i.length}},d:function(n){n&&g(e),gt(t,n)}};return _("SvelteRegisterBlock",{block:a,id:_e.name,type:"if",source:"(37:24) {#if photos && photos.length}",ctx:s}),a}function ke(s){let e,i,t;const a={c:function(){e=S("img"),this.h()},l:function(n){e=B(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){He(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${s[10]}`)||d(e,"src",i),d(e,"alt",t=s[11]),d(e,"class","s-_HdLFogMzSo7"),w(e,N,39,36,1507)},m:function(n,l){v(n,e,l)},p:function(n,l){l&2&&!He(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${n[10]}`)&&d(e,"src",i),l&2&&t!==(t=n[11])&&d(e,"alt",t)},d:function(n){n&&g(e)}};return _("SvelteRegisterBlock",{block:a,id:ke.name,type:"each",source:"(39:32) {#each photos as {url, alt}}",ctx:s}),a}function ve(s){let e,i,t=s[6]+"";const a={c:function(){e=S("p"),i=new wt(!1),this.h()},l:function(n){e=B(n,"P",{class:!0});var l=k(e);i=_t(l,!1),l.forEach(g),this.h()},h:function(){i.a=null,d(e,"class","description max-h-32 overflow-y-auto s-_HdLFogMzSo7"),w(e,N,45,28,1814)},m:function(n,l){v(n,e,l),i.m(t,e)},p:function(n,l){l&2&&t!==(t=n[6]+"")&&i.p(t)},d:function(n){n&&g(e)}};return _("SvelteRegisterBlock",{block:a,id:ve.name,type:"if",source:"(45:24) {#if description}",ctx:s}),a}function rt(s){let e,i=s[5]+"",t,a,o,n,l=s[7]&&s[7].length&&_e(s),c=s[6]&&ve(s);const u={c:function(){e=S("h3"),t=ht(i),a=F(),l&&l.c(),o=F(),c&&c.c(),n=T(),this.h()},l:function(f){e=B(f,"H3",{});var m=k(e);t=pt(m,i),m.forEach(g),a=Y(f),l&&l.l(f),o=Y(f),c&&c.l(f),n=T(),this.h()},h:function(){w(e,N,32,24,1217)},m:function(f,m){v(f,e,m),L(e,t),v(f,a,m),l&&l.m(f,m),v(f,o,m),c&&c.m(f,m),v(f,n,m)},p:function(f,m){m&2&&i!==(i=f[5]+"")&&bt(t,i),f[7]&&f[7].length?l?l.p(f,m):(l=_e(f),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null),f[6]?c?c.p(f,m):(c=ve(f),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d:function(f){f&&(g(e),g(a),g(o),g(n)),l&&l.d(f),c&&c.d(f)}};return _("SvelteRegisterBlock",{block:u,id:rt.name,type:"slot",source:"(32:20) <Popup>",ctx:s}),u}function at(s){let e,i,t;e=new ct({props:{$$slots:{default:[rt]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){Be(e.$$.fragment),i=F()},l:function(n){Ee(e.$$.fragment,n),i=Y(n)},m:function(n,l){Ce(e,n,l),v(n,i,l),t=!0},p:function(n,l){const c={};l&16386&&(c.$$scope={dirty:l,ctx:n}),e.$set(c)},i:function(n){t||(b(e.$$.fragment,n),t=!0)},o:function(n){A(e.$$.fragment,n),t=!1},d:function(n){n&&g(i),Ve(e,n)}};return _("SvelteRegisterBlock",{block:a,id:at.name,type:"slot",source:"(31:16) <Marker {latLng} width={20} height={20}>",ctx:s}),a}function be(s,e){let i,t,a,o=e[4]&&we(e);const n={key:s,first:null,c:function(){i=T(),o&&o.c(),t=T(),this.h()},l:function(c){i=T(),o&&o.l(c),t=T(),this.h()},h:function(){this.first=i},m:function(c,u){v(c,i,u),o&&o.m(c,u),v(c,t,u),a=!0},p:function(c,u){e=c,e[4]?o?(o.p(e,u),u&2&&b(o,1)):(o=we(e),o.c(),b(o,1),o.m(t.parentNode,t)):o&&(W(),A(o,1,1,()=>{o=null}),J())},i:function(c){a||(b(o),a=!0)},o:function(c){A(o),a=!1},d:function(c){c&&(g(i),g(t)),o&&o.d(c)}};return _("SvelteRegisterBlock",{block:n,id:be.name,type:"each",source:"(29:8) {#each $visibleMarkers as { latLng, visible, name, description, photos }",ctx:e}),n}function ut(s){let e=[],i=new Map,t,a,o=ne(s[1]);const n=c=>c[3].join(",")+"-"+c[9];Ne(s,o,$,n);for(let c=0;c<o.length;c+=1){let u=$(s,o,c),r=n(u);i.set(r,e[c]=be(r,u))}const l={c:function(){for(let u=0;u<e.length;u+=1)e[u].c();t=T()},l:function(u){for(let r=0;r<e.length;r+=1)e[r].l(u);t=T()},m:function(u,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(u,r);v(u,t,r),a=!0},p:function(u,r){r&2&&(o=ne(u[1]),W(),Ne(u,o,$,n),e=kt(e,r,n,1,u,o,i,t.parentNode,vt,be,t,$),J())},i:function(u){if(!a){for(let r=0;r<o.length;r+=1)b(e[r]);a=!0}},o:function(u){for(let r=0;r<e.length;r+=1)A(e[r]);a=!1},d:function(u){u&&g(t);for(let r=0;r<e.length;r+=1)e[r].d(u)}};return _("SvelteRegisterBlock",{block:l,id:ut.name,type:"slot",source:"(28:4) <Leaflet view={$initialViewStore} zoom={4}>",ctx:s}),l}function ye(s){let e,i="counter*map",t,a,o,n;o=new lt({props:{view:s[0],zoom:4,$$slots:{default:[ut]},$$scope:{ctx:s}},$$inline:!0});const l={c:function(){e=S("h1"),e.textContent=i,t=F(),a=S("div"),Be(o.$$.fragment),this.h()},l:function(u){e=B(u,"H1",{class:!0,"data-svelte-h":!0}),dt(e)!=="svelte-1p1kd7m"&&(e.textContent=i),t=Y(u),a=B(u,"DIV",{class:!0});var r=k(a);Ee(o.$$.fragment,r),r.forEach(g),this.h()},h:function(){d(e,"class","s-_HdLFogMzSo7"),w(e,N,22,0,854),d(a,"class","w-full h-screen"),w(a,N,25,0,881)},m:function(u,r){v(u,e,r),v(u,t,r),v(u,a,r),Ce(o,a,null),n=!0},p:function(u,[r]){const f={};r&1&&(f.view=u[0]),r&16386&&(f.$$scope={dirty:r,ctx:u}),o.$set(f)},i:function(u){n||(b(o.$$.fragment,u),n=!0)},o:function(u){A(o.$$.fragment,u),n=!1},d:function(u){u&&(g(e),g(t),g(a)),Ve(o)}};return _("SvelteRegisterBlock",{block:l,id:ye.name,type:"component",source:"",ctx:s}),l}function jt(s,e,i){let t,a;re(ce,"initialViewStore"),ae(s,ce,u=>i(0,t=u));let{$$slots:o={},$$scope:n}=e;Z("Page",o,[]);const l=Qe([We,X],([u,r])=>!r||typeof r.contains!="function"?[]:u.filter(f=>{const[m,p]=f.latLng;return r.contains(M.latLng(m,p))}));re(l,"visibleMarkers"),ae(s,l,u=>i(1,a=u));const c=[];return Object.keys(e).forEach(u=>{!~c.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)}),s.$capture_state=()=>({derived:Qe,onMount:I,L:M,Leaflet:lt,Marker:st,Popup:ct,markersStore:We,initialViewStore:ce,mapBoundsStore:X,visibleMarkers:l,$initialViewStore:t,$visibleMarkers:a}),[t,a,l]}class zt extends G{constructor(e){super(e),K(this,e,jt,ye,D,{}),_("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:ye.name})}}export{zt as component,It as universal};
