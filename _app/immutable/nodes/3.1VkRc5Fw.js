import{a as me,v as Q,d as K,$ as _e,o as Pe,G as It,D as Ee,F as Ze,c as kt,e as z,h as R,j as V,m as T,z as Zt,u as Ct,g as Mt,b as St,a0 as Ne,A as fe,f as F,t as ie,l as q,k as oe,p as Nt,w as ue,q as he,a1 as mn,a2 as pn,n as Ye,C as Vt,r as gn,a3 as Ot}from"../chunks/scheduler.8doqxhoJ.js";import{S as pe,i as ge,d as D,v as ve,b as O,j as U,c as W,t as E,o as J,a as G,k as Y,e as b,l as Me,s as de,g as $,h as ee,m as te,n as ne,f as Ve,u as He,w as Ht,x as Ft,p as qt,q as Wt}from"../chunks/index.B-UXCcAk.js";import{g as Pt,m as ye}from"../chunks/object-view.cE-W-Naz.js";import{d as Ut}from"../chunks/index.XXZ5sPHA.js";import{n as vn,t as we,o as Ae,p as qe,d as le,q as We,r as Xe,u as ce,L as X,T as Bt,v as Ge,a as Ce,b as At,w as Qe,x as Gt,y as zt,z as Rt,A as yn,B as Ke,C as Je,D as Se,I as Xt,E as xe,F as Qt,S as Kt,m as Tt,f as $e,e as Jt,M as Yt,g as xt,j as $t,k as en,c as Re,s as Be,h as tn}from"../chunks/ToolsSidebar.FEHMQZKY.js";const Ln=!1,Zn=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ln},Symbol.toStringTag,{value:"Module"}));var jt={exports:{}};(function(s,i){(function(r,a){a(i)})(vn,function(r){var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,u=this.options.chunkInterval,f=this.options.chunkProgress,p=e.length,d=0,v=!0;if(this._map){var m=new Date().getTime(),S=L.bind(function(){var I=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<p;d++){if(c&&d%200==0){var Z=new Date().getTime()-I;if(u<Z)break}if((n=e[d])instanceof L.LayerGroup)v&&(e=e.slice(),v=!1),this._extractNonGroupLayers(n,e),p=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&n.__parent.getChildCount()===2)){var B=n.__parent.getAllChildMarkers(),P=B[0]===n?B[1]:B[0];o.removeLayer(P)}}else l.addLayer(n),t||this.fire("layeradd",{layer:n})}f&&f(d,p,new Date().getTime()-m),d===p?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(S,this.options.chunkDelay)},this);S()}else for(var A=this._needsClustering;d<p;d++)(n=e[d])instanceof L.LayerGroup?(v&&(e=e.slice(),v=!1),this._extractNonGroupLayers(n,e),p=e.length):n.getLatLng?this.hasLayer(n)||A.push(n):l.addLayer(n);return this},removeLayers:function(e){var t,n,o=e.length,l=this._featureGroup,c=this._nonPointGroup,u=!0;if(!this._map){for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(n,e),o=e.length):(this._arraySplice(this._needsClustering,n),c.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var f=e.slice(),p=o;for(t=0;t<p;t++)(n=f[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,f),p=f.length):this._unspiderfyLayer(n)}for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(n,e),o=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),l.hasLayer(n)&&(l.removeLayer(n),n.clusterShow&&n.clusterShow())):(c.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,o,l,c=this._needsClustering.slice(),u=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),o=c.length-1;0<=o;o--){for(n=!0,l=u.length-1;0<=l;l--)if(u[l].layer===c[o]){n=!1;break}n&&e.call(t,c[o])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;typeof t!="function"&&(t=function(){});var o=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",o,this),this.off("animationend",o,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,o;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(o=this._needsRemoving[t]).newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)o=this._needsRemoving[t],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,o=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());l<=t&&o[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var o=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,u=this._map,f=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var p,d=e.__parent,v=d._markers;for(this._arraySplice(v,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<f));)t&&d._childCount<=1?(p=d._markers[0]===e?d._markers[1]:d._markers[0],o[d._zoom].removeObject(d,u.project(d._cLatLng,d._zoom)),l[d._zoom].addObject(p,u.project(p.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(p),p.__parent=d.__parent,d._icon&&(c.removeLayer(d),n||c.addLayer(p))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||o||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;n._childClusters.length===1;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,l=this._map;(e||n||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,o=n;typeof n!="function"&&(o=function(){return n}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;t<=l;l--)this._gridClusters[l]=new L.DistanceGrid(o(l)),this._gridUnclustered[l]=new L.DistanceGrid(o(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,o,l=this._gridClusters,c=this._gridUnclustered,u=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);u<=t;t--){n=this._map.project(e.getLatLng(),t);var f=l[t].getNearObject(n);if(f)return f._addChild(e),void(e.__parent=f);if(f=c[t].getNearObject(n)){var p=f.__parent;p&&this._removeLayer(f,!1);var d=new this._markerCluster(this,t,f,e);l[t].addObject(d,this._map.project(d._cLatLng,t)),f.__parent=d;var v=e.__parent=d;for(o=t-1;o>p._zoom;o--)v=new this._markerCluster(this,o,v),l[o].addObject(v,this._map.project(f.getLatLng(),o));return p._addChild(v),void this._removeFromGridUnclustered(f,t)}c[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,o=e.getLayers(),l=0;for(t=t||[];l<o.length;l++)(n=o[l])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,e,c,function(u){var f,p=u._latlng,d=u._markers;for(o.contains(p)||(p=null),u._isSingleParent()&&e+1===t?(l.removeLayer(u),u._recursivelyAddChildrenToMap(null,t,o)):(u.clusterHide(),u._recursivelyAddChildrenToMap(p,t,o)),n=d.length-1;0<=n;n--)f=d[n],o.contains(f._latlng)||l.removeLayer(f)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,t),l.eachLayer(function(u){u instanceof L.MarkerCluster||!u._icon||u.clusterShow()}),this._topClusterLevel._recursively(o,e,t,function(u){u._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,e,c,function(u){l.removeLayer(u),u.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,o=this._featureGroup;o.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){o.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var o=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,l,t+1,n);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(o,n),this._enqueue(function(){if(e._childCount===1){var u=e._markers[0];this._ignoreMove=!0,u.setLatLng(u.getLatLng()),this._ignoreMove=!1,u.clusterShow&&u.clusterShow()}else e._recursively(o,n,l,function(f){f._recursivelyRemoveChildrenFromMap(o,l,t+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var h=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,o){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),o&&this._addChild(o)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var o=this._markers.length-1;0<=o;o--)t&&this._markers[o].__dragStart||e.push(this._markers[o]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,u=o.getZoom();0<n.length&&c<l;){c++;var f=[];for(t=0;t<n.length;t++)f=f.concat(n[t]._childClusters);n=f}c<l?this._group._map.setView(this._latlng,c):l<=u?this._group._map.setView(this._latlng,u+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,o,l=this._markers,c=this._childClusters,u=0,f=0,p=this._childCount;if(p!==0){for(this._resetBounds(),e=0;e<l.length;e++)n=l[e]._latlng,this._bounds.extend(n),u+=n.lat,f+=n.lng;for(e=0;e<c.length;e++)(t=c[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,o=t._childCount,u+=n.lat*o,f+=n.lng*o;this._latlng=this._wLatLng=new L.LatLng(u/p,f/p),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(o){var l,c,u=o._markers;for(l=u.length-1;0<=l;l--)(c=u[l])._icon&&(c._setPos(t),c.clusterHide())},function(o){var l,c,u=o._childClusters;for(l=u.length-1;0<=l;l--)(c=u[l])._icon&&(c._setPos(t),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,o){this._recursively(e,o,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),n),l._isSingleParent()&&n-1===o?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,n)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(o){if(t!==o._zoom)for(var l=o._markers.length-1;0<=l;l--){var c=o._markers[l];n.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),o._group._featureGroup.addLayer(c))}},function(o){o._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._restorePosition();else for(var l=this._childClusters.length-1;0<=l;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,o){var l,c;this._recursively(e,t-1,n-1,function(u){for(c=u._markers.length-1;0<=c;c--)l=u._markers[c],o&&o.contains(l._latlng)||(u._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(u){for(c=u._childClusters.length-1;0<=c;c--)l=u._childClusters[c],o&&o.contains(l._latlng)||(u._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,n,o,l){var c,u,f=this._childClusters,p=this._zoom;if(t<=p&&(o&&o(this),l&&p===n&&l(this)),p<t||p<n)for(c=f.length-1;0<=c;c--)(u=f[c])._boundsNeedUpdate&&u._recalculateBounds(),e.intersects(u._bounds)&&u._recursively(e,t,n,o,l)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),o=this._getCoord(t.y),l=this._grid,c=l[o]=l[o]||{},u=c[n]=c[n]||[],f=L.Util.stamp(e);this._objectPoint[f]=t,u.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,o,l=this._getCoord(t.x),c=this._getCoord(t.y),u=this._grid,f=u[c]=u[c]||{},p=f[l]=f[l]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,o=p.length;n<o;n++)if(p[n]===e)return p.splice(n,1),o===1&&delete f[l],!0},eachObject:function(e,t){var n,o,l,c,u,f,p=this._grid;for(n in p)for(o in u=p[n])for(l=0,c=(f=u[o]).length;l<c;l++)e.call(t,f[l])&&(l--,c--)},getNearObject:function(e){var t,n,o,l,c,u,f,p,d=this._getCoord(e.x),v=this._getCoord(e.y),m=this._objectPoint,S=this._sqCellSize,A=null;for(t=v-1;t<=v+1;t++)if(l=this._grid[t]){for(n=d-1;n<=d+1;n++)if(c=l[n])for(o=0,u=c.length;o<u;o++)f=c[o],((p=this._sqDist(m[L.Util.stamp(f)],e))<S||p<=S&&A===null)&&(S=p,A=f)}return A},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,o,l,c=0,u=null,f=[];for(n=t.length-1;0<=n;n--)o=t[n],0<(l=this.getDistant(o,e))&&(f.push(o),c<l&&(c=l,u=o));return{maxPoint:u,newPoints:f}},buildConvexHull:function(e,t){var n=[],o=this.findMostDistantPointFromBaseLine(e,t);return o.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],o.maxPoint],o.newPoints))).concat(this.buildConvexHull([o.maxPoint,e[1]],o.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,o=!1,l=!1,c=!1,u=null,f=null,p=null,d=null,v=null,m=null;for(t=e.length-1;0<=t;t--){var S=e[t];(n===!1||S.lat>n)&&(n=(u=S).lat),(o===!1||S.lat<o)&&(o=(f=S).lat),(l===!1||S.lng>l)&&(l=(p=S).lng),(c===!1||S.lng<c)&&(c=(d=S).lng)}return v=o!==n?(m=f,u):(m=d,p),[].concat(this.buildConvexHull([m,v],e),this.buildConvexHull([v,m],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),o=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),o.push(e);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,o,l=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,c=this._2PI/e,u=[];for(l=Math.max(l,35),u.length=e,n=0;n<e;n++)o=this._circleStartAngle+n*c,u[n]=new L.Point(t.x+l*Math.cos(o),t.y+l*Math.sin(o))._round();return u},_generatePointsSpiral:function(e,t){var n,o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,u=o*this._spiralLengthFactor*this._2PI,f=0,p=[];for(n=p.length=e;0<=n;n--)n<e&&(p[n]=new L.Point(t.x+l*Math.cos(f),t.y+l*Math.sin(f))._round()),l+=u/(f+=c/l+5e-4*n);return p},_noanimationUnspiderfy:function(){var e,t,n=this._group,o=n._map,l=n._featureGroup,c=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=c.length-1;0<=t;t--)e=c[t],l.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(o.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:c}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,o,l,c,u=this._group,f=u._map,p=u._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(u._ignoreMove=!0,n=0;n<e.length;n++)c=f.layerPointToLatLng(t[n]),o=e[n],l=new L.Polyline([this._latlng,c],d),f.addLayer(l),o._spiderLeg=l,o._preSpiderfyLatlng=o._latlng,o.setLatLng(c),o.setZIndexOffset&&o.setZIndexOffset(1e6),p.addLayer(o);this.setOpacity(.3),u._ignoreMove=!1,u.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,o,l,c,u,f,p=this,d=this._group,v=d._map,m=d._featureGroup,S=this._latlng,A=v.latLngToLayerPoint(S),I=L.Path.SVG,Z=L.extend({},this._group.options.spiderLegPolylineOptions),B=Z.opacity;for(B===void 0&&(B=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),I?(Z.opacity=0,Z.className=(Z.className||"")+" leaflet-cluster-spider-leg"):Z.opacity=B,d._ignoreMove=!0,n=0;n<e.length;n++)o=e[n],f=v.layerPointToLatLng(t[n]),l=new L.Polyline([S,f],Z),v.addLayer(l),o._spiderLeg=l,I&&(u=(c=l._path).getTotalLength()+.1,c.style.strokeDasharray=u,c.style.strokeDashoffset=u),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),m.addLayer(o),o._setPos&&o._setPos(A);for(d._forceLayout(),d._animationStart(),n=e.length-1;0<=n;n--)f=v.layerPointToLatLng(t[n]),(o=e[n])._preSpiderfyLatlng=o._latlng,o.setLatLng(f),o.clusterShow&&o.clusterShow(),I&&((c=(l=o._spiderLeg)._path).style.strokeDashoffset=0,l.setStyle({opacity:B}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:p,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,o,l,c,u,f=this,p=this._group,d=p._map,v=p._featureGroup,m=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),S=this.getAllChildMarkers(null,!0),A=L.Path.SVG;for(p._ignoreMove=!0,p._animationStart(),this.setOpacity(1),n=S.length-1;0<=n;n--)(t=S[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,u=!0,t._setPos&&(t._setPos(m),u=!1),t.clusterHide&&(t.clusterHide(),u=!1),u&&v.removeLayer(t),A&&(c=(l=(o=t._spiderLeg)._path).getTotalLength()+.1,l.style.strokeDashoffset=c,o.setStyle({opacity:0})));p._ignoreMove=!1,setTimeout(function(){var I=0;for(n=S.length-1;0<=n;n--)(t=S[n])._spiderLeg&&I++;for(n=S.length-1;0<=n;n--)(t=S[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<I&&v.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);p._animationEnd(),p.fire("unspiderfied",{cluster:f,markers:S})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),r.MarkerClusterGroup=a,r.MarkerCluster=h,Object.defineProperty(r,"__esModule",{value:!0})})})(jt,jt.exports);const{Error:be,console:wn}=Pt,bn="src/lib/Map/Leaflet.svelte";function et(s){let i;const r=s[15].default,a=kt(r,s,s[14],null),h={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,n){a&&a.m(t,n),i=!0},p:function(t,n){a&&a.p&&(!i||n&16384)&&Ct(a,r,t,t[14],i?St(r,t[14],n,null):Mt(t[14]),null)},i:function(t){i||(E(a,t),i=!0)},o:function(t){G(a,t),i=!1},d:function(t){a&&a.d(t)}};return D("SvelteRegisterBlock",{block:h,id:et.name,type:"if",source:"(268:2) {#if map}",ctx:s}),h}function tt(s){let i,r,a=s[0]&&et(s);const h={c:function(){i=z("div"),a&&a.c(),this.h()},l:function(t){i=R(t,"DIV",{class:!0});var n=V(i);a&&a.l(n),n.forEach(O),this.h()},h:function(){U(i,"class","w-full h-full"),T(i,bn,266,0,7231)},m:function(t,n){W(t,i,n),a&&a.m(i,null),s[16](i),r=!0},p:function(t,[n]){t[0]?a?(a.p(t,n),n&1&&E(a,1)):(a=et(t),a.c(),E(a,1),a.m(i,null)):a&&(J(),G(a,1,1,()=>{a=null}),Y())},i:function(t){r||(E(a),r=!0)},o:function(t){G(a),r=!1},d:function(t){t&&O(i),a&&a.d(),s[16](null)}};return D("SvelteRegisterBlock",{block:h,id:tt.name,type:"component",source:"",ctx:s}),h}function kn(s,i,r){let a,h,e,t,n,o,l;Q(we,"territoriesVisible"),K(s,we,_=>r(7,a=_)),Q(Ae,"filteredStore"),K(s,Ae,_=>r(8,h=_)),Q(qe,"filtersActive"),K(s,qe,_=>r(9,e=_)),Q(le,"currentSidebar"),K(s,le,_=>r(10,t=_)),Q(We,"currentMapStyleId"),K(s,We,_=>r(11,n=_)),Q(Xe,"currentMapStyleIndex"),K(s,Xe,_=>r(12,o=_)),Q(ce,"darkMode"),K(s,ce,_=>r(13,l=_));let{$$slots:c={},$$scope:u}=i;ve("Leaflet",c,["default"]);let{bounds:f=void 0}=i,{view:p=void 0}=i,{zoom:d=void 0}=i;const v=_e();let m,S,A,I=null,Z=null,B,P,j=null;async function k(_){if(!j)try{j=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),I=await zt(_,j),Z=await Rt(_,j)}catch(M){console.error("Error fetching territories data:",M)}}const C=X.Control.extend({onAdd(_){const M=X.DomUtil.create("div","map-toolbar-container");return new Bt({target:M,props:{mapInstance:_}}),M}});Pe(()=>{if(!f&&(!p||!d))throw new Error("Must set either bounds, or view and zoom.");r(0,m=X.map(S,{maxZoom:18,zoomControl:!1}));const _=X.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});m.addLayer(_),Ge.set(_),f?(m.fitBounds(f),Ce.set(f)):p&&d&&m.setView(p,d),m.whenReady(()=>{if(!f){const M=m.getBounds();Ce.set(M)}At.set(m),r(5,A=new Qe({Language:"fr",style:X.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(m)),new C({position:"topright"}).addTo(m)}),m.on("click",function(M){t==="submissions"&&(Gt.set(M.latlng),B&&m.removeLayer(B),r(6,B=X.marker([M.latlng.lat,M.latlng.lng],{icon:P}).addTo(m)))}).on("zoom",M=>v("zoom",M)).on("moveend",()=>{const M=m.getBounds();Ce.set(M)}).on("popupopen",async M=>{M.popup.update(),await It()})});function g(){console.log("Adding territories"),m&&(!I||!Z?k(m):(m.addLayer(I),m.addLayer(Z)))}function y(){m&&(I&&m.removeLayer(I),Z&&m.removeLayer(Z),console.log("Territories removed"))}Ee(()=>{m==null||m.remove(),r(0,m=void 0),y()}),Ze("map",{getMap:()=>m});function N(_){m&&A&&(m.removeLayer(A),r(5,A=new Qe({style:_,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(m)))}const H=["bounds","view","zoom"];Object.keys(i).forEach(_=>{!~H.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&wn.warn(`<Leaflet> was created with unknown prop '${_}'`)});function w(_){Zt[_?"unshift":"push"](()=>{S=_,r(1,S)})}return s.$$set=_=>{"bounds"in _&&r(2,f=_.bounds),"view"in _&&r(3,p=_.view),"zoom"in _&&r(4,d=_.zoom),"$$scope"in _&&r(14,u=_.$$scope)},s.$capture_state=()=>({onMount:Pe,onDestroy:Ee,setContext:Ze,createEventDispatcher:_e,tick:It,L:X,addTerritoriesLayer:zt,addTerritoriesLabels:Rt,MaptilerLayer:Qe,MaptilerStyle:yn,pinSvg:Ke,Toolbar:Bt,currentMapStyleId:We,currentMapStyleIndex:Xe,mapBoundsStore:Ce,territoriesVisible:we,clusterGroupStore:Ge,darkMode:ce,currentSidebar:le,filteredStore:Ae,filtersActive:qe,userLatLng:Gt,mapInstanceStore:At,bounds:f,view:p,zoom:d,dispatch:v,map:m,mapElement:S,mtLayer:A,territoriesLayer:I,labelsLayer:Z,marker:B,icon:P,territoriesData:j,initializeTerritories:k,ToolbarControl:C,addTerritories:g,removeTerritories:y,updateMapStyle:N,$territoriesVisible:a,$filteredStore:h,$filtersActive:e,$currentSidebar:t,$currentMapStyleId:n,$currentMapStyleIndex:o,$darkMode:l}),s.$inject_state=_=>{"bounds"in _&&r(2,f=_.bounds),"view"in _&&r(3,p=_.view),"zoom"in _&&r(4,d=_.zoom),"map"in _&&r(0,m=_.map),"mapElement"in _&&r(1,S=_.mapElement),"mtLayer"in _&&r(5,A=_.mtLayer),"territoriesLayer"in _&&(I=_.territoriesLayer),"labelsLayer"in _&&(Z=_.labelsLayer),"marker"in _&&r(6,B=_.marker),"icon"in _&&(P=_.icon),"territoriesData"in _&&(j=_.territoriesData)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{if(s.$$.dirty&8192){let _=l==="dark"?`<div style="width: 30px; height: 40px; filter: invert(100%);">
        <img src="${Ke}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`:`<div style="width: 30px; height: 40px;">
        <img src="${Ke}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`;P=X.divIcon({html:_,className:"map-marker",iconSize:X.point(25,65)})}if(s.$$.dirty&1089&&t!=="submissions"&&B&&(m.removeLayer(B),r(6,B=null)),s.$$.dirty&29&&m&&(f?m.fitBounds(f):p&&d&&m.setView(p,d)),s.$$.dirty&6177&&n&&(o===2?(we.set(!0),ce.set("light"),console.log("setting territoriesVisible to true")):o===0?(we.set(!1),ce.set("dark")):(we.set(!1),ce.set("light")),m&&A&&N(n)),s.$$.dirty&1793&&m&&t==="tools"&&h.length>0&&e){const _=X.latLngBounds(h.map(M=>X.latLng(M.latLng)));m.fitBounds(_,{padding:[50,50]})}s.$$.dirty&128&&(a?g():y())},[m,S,f,p,d,A,B,a,h,e,t,n,o,l,u,c,w]}class nn extends pe{constructor(i){super(i),ge(this,i,kn,tt,me,{bounds:2,view:3,zoom:4}),D("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:i,id:tt.name})}get bounds(){throw new be("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(i){throw new be("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new be("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(i){throw new be("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new be("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(i){throw new be("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function nt(s){let i;const r=s[7].default,a=kt(r,s,s[6],null),h={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,n){a&&a.m(t,n),i=!0},p:function(t,n){a&&a.p&&(!i||n&64)&&Ct(a,r,t,t[6],i?St(r,t[6],n,null):Mt(t[6]),null)},i:function(t){i||(E(a,t),i=!0)},o:function(t){G(a,t),i=!1},d:function(t){a&&a.d(t)}};return D("SvelteRegisterBlock",{block:h,id:nt.name,type:"if",source:"(69:0) {#if marker}",ctx:s}),h}function it(s){let i,r,a=s[0]&&nt(s);const h={c:function(){a&&a.c(),i=fe()},l:function(t){a&&a.l(t),i=fe()},m:function(t,n){a&&a.m(t,n),W(t,i,n),r=!0},p:function(t,[n]){t[0]?a?(a.p(t,n),n&1&&E(a,1)):(a=nt(t),a.c(),E(a,1),a.m(i.parentNode,i)):a&&(J(),G(a,1,1,()=>{a=null}),Y())},i:function(t){r||(E(a),r=!0)},o:function(t){G(a),r=!1},d:function(t){t&&O(i),a&&a.d(t)}};return D("SvelteRegisterBlock",{block:h,id:it.name,type:"component",source:"",ctx:s}),h}function Cn(s,i,r){let a,h;Q(Ge,"clusterGroupStore"),K(s,Ge,d=>r(4,a=d)),Q(Je,"isMarkersVisible"),K(s,Je,d=>r(5,h=d));let{$$slots:e={},$$scope:t}=i;ve("Marker",e,["default"]);let{width:n}=i,{height:o}=i,{latLng:l}=i,c,u=Ne("map").getMap();Ze("layer",{getLayer:()=>c});function f(d){let v=d==="dark"?`<div style="width: ${n}px; height: ${o}px; filter: invert(100%);">
          <img src="${ye}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`:`<div style="width: ${n}px; height: ${o}px;">
          <img src="${ye}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`,m=X.divIcon({html:v,className:"map-marker",iconSize:X.point(n,o)});c?(a.removeLayer(c),c.setIcon(m)):r(0,c=X.marker(l,{icon:m})),a.addLayer(c)}Pe(()=>{u&&a&&ce.subscribe(d=>{f(d)})}),Ee(()=>{c&&a&&(a.removeLayer(c),c.remove(),r(0,c=void 0))}),s.$$.on_mount.push(function(){n===void 0&&!("width"in i||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),o===void 0&&!("height"in i||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in i||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const p=["width","height","latLng"];return Object.keys(i).forEach(d=>{!~p.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Marker> was created with unknown prop '${d}'`)}),s.$$set=d=>{"width"in d&&r(1,n=d.width),"height"in d&&r(2,o=d.height),"latLng"in d&&r(3,l=d.latLng),"$$scope"in d&&r(6,t=d.$$scope)},s.$capture_state=()=>({onMount:Pe,onDestroy:Ee,getContext:Ne,setContext:Ze,darkMode:ce,clusterGroupStore:Ge,isMarkersVisible:Je,L:X,monumentSvg:ye,width:n,height:o,latLng:l,marker:c,mapInstance:u,createOrUpdateMarker:f,$clusterGroupStore:a,$isMarkersVisible:h}),s.$inject_state=d=>{"width"in d&&r(1,n=d.width),"height"in d&&r(2,o=d.height),"latLng"in d&&r(3,l=d.latLng),"marker"in d&&r(0,c=d.marker),"mapInstance"in d&&(u=d.mapInstance)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{s.$$.dirty&49&&c&&a&&(h?a.addLayer(c):a.removeLayer(c))},[c,n,o,l,a,h,t,e]}class on extends pe{constructor(i){super(i),ge(this,i,Cn,it,me,{width:1,height:2,latLng:3}),D("SvelteRegisterComponent",{component:this,tagName:"Marker",options:i,id:it.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Mn="src/lib/Map/Popup.svelte",Sn=s=>({popup:s&1}),Dt=s=>({popup:s[0]});function ot(s){let i;const r=s[4].default,a=kt(r,s,s[3],Dt),h={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,n){a&&a.m(t,n),i=!0},p:function(t,n){a&&a.p&&(!i||n&9)&&Ct(a,r,t,t[3],i?St(r,t[3],n,Sn):Mt(t[3]),Dt)},i:function(t){i||(E(a,t),i=!0)},o:function(t){G(a,t),i=!1},d:function(t){a&&a.d(t)}};return D("SvelteRegisterBlock",{block:h,id:ot.name,type:"if",source:"(47:2) {#if open}",ctx:s}),h}function rt(s){let i,r,a=s[2]&&ot(s);const h={c:function(){i=z("div"),a&&a.c(),this.h()},l:function(t){i=R(t,"DIV",{class:!0});var n=V(i);a&&a.l(n),n.forEach(O),this.h()},h:function(){U(i,"class","popPadding s-vUHHe_W0o0FW"),T(i,Mn,45,0,857)},m:function(t,n){W(t,i,n),a&&a.m(i,null),s[5](i),r=!0},p:function(t,[n]){t[2]?a?(a.p(t,n),n&4&&E(a,1)):(a=ot(t),a.c(),E(a,1),a.m(i,null)):a&&(J(),G(a,1,1,()=>{a=null}),Y())},i:function(t){r||(E(a),r=!0)},o:function(t){G(a),r=!1},d:function(t){t&&O(i),a&&a.d(),s[5](null)}};return D("SvelteRegisterBlock",{block:h,id:rt.name,type:"component",source:"",ctx:s}),h}function Pn(s,i,r){let{$$slots:a={},$$scope:h}=i;ve("Popup",a,["default"]);let e,t,n=!1;const o=Ne("layer"),l=o.getLayer();Pe(()=>{r(0,e=X.popup().setContent(t)),e._initLayout(),l&&(l.bindPopup(e),l.on("popupopen",()=>{r(2,n=!0),Se.set(!0)}),l.on("popupclose",()=>{r(2,n=!1),Se.set(!1)}))}),Ee(()=>{l&&l.unbindPopup(),e&&(e.remove(),r(0,e=void 0))});const c=[];Object.keys(i).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Popup> was created with unknown prop '${f}'`)});function u(f){Zt[f?"unshift":"push"](()=>{t=f,r(1,t)})}return s.$$set=f=>{"$$scope"in f&&r(3,h=f.$$scope)},s.$capture_state=()=>({onMount:Pe,onDestroy:Ee,getContext:Ne,L:X,isPopupOpen:Se,popup:e,popupElement:t,open:n,layerContext:o,layer:l}),s.$inject_state=f=>{"popup"in f&&r(0,e=f.popup),"popupElement"in f&&r(1,t=f.popupElement),"open"in f&&r(2,n=f.open)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[e,t,n,h,a,u]}class rn extends pe{constructor(i){super(i),ge(this,i,Pn,rt,me,{}),D("SvelteRegisterComponent",{component:this,tagName:"Popup",options:i,id:rt.name})}}const x="src/lib/Map/PopupContent.svelte";function st(s){let i,r;i=new Xt({props:{photos:s[6],baseUrl:s[7]},$$inline:!0});const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},p:function(e,t){const n={};t&64&&(n.photos=e[6]),t&128&&(n.baseUrl=e[7]),i.$set(n)},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:st.name,type:"if",source:"(24:2) {#if photos && photos.length}",ctx:s}),a}function at(s){let i,r,a;const h={c:function(){i=z("div"),r=z("p"),a=new mn(!1),this.h()},l:function(t){i=R(t,"DIV",{class:!0});var n=V(i);r=R(n,"P",{class:!0});var o=V(r);a=pn(o,!1),o.forEach(O),n.forEach(O),this.h()},h:function(){a.a=null,U(r,"class","description"),T(r,x,42,8,1149),U(i,"class","text-truncate"),T(i,x,41,6,1113)},m:function(t,n){W(t,i,n),b(i,r),a.m(s[5],r)},p:function(t,n){n&32&&a.p(t[5])},d:function(t){t&&O(i)}};return D("SvelteRegisterBlock",{block:h,id:at.name,type:"if",source:"(41:4) {#if description}",ctx:s}),h}function lt(s){let i,r,a,h,e,t,n,o,l,c,u,f,p,d,v,m,S,A,I,Z,B,P,j="learn more",k,C,g,y=s[6]&&s[6].length&&st(s),N=s[5]&&at(s);const H={c:function(){y&&y.c(),i=F(),r=z("div"),a=z("div"),h=z("h2"),e=ie(s[2]),t=F(),n=z("h3"),o=ie(s[3]),l=F(),c=z("div"),u=z("div"),f=ie("#"),p=ie(s[4]),d=F(),v=z("div"),m=z("img"),A=F(),I=z("div"),N&&N.c(),Z=F(),B=z("div"),P=z("button"),P.textContent=j,this.h()},l:function(_){y&&y.l(_),i=q(_),r=R(_,"DIV",{class:!0});var M=V(r);a=R(M,"DIV",{class:!0});var re=V(a);h=R(re,"H2",{});var Ie=V(h);e=oe(Ie,s[2]),Ie.forEach(O),t=q(re),n=R(re,"H3",{});var Oe=V(n);o=oe(Oe,s[3]),Oe.forEach(O),re.forEach(O),l=q(M),c=R(M,"DIV",{class:!0});var se=V(c);u=R(se,"DIV",{class:!0});var Le=V(u);f=oe(Le,"#"),p=oe(Le,s[4]),Le.forEach(O),d=q(se),v=R(se,"DIV",{style:!0});var Ue=V(v);m=R(Ue,"IMG",{src:!0,alt:!0,style:!0}),Ue.forEach(O),se.forEach(O),M.forEach(O),A=q(_),I=R(_,"DIV",{class:!0});var ze=V(I);N&&N.l(ze),Z=q(ze),B=R(ze,"DIV",{class:!0});var Et=V(B);P=R(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),Nt(P)!=="svelte-1h1xepw"&&(P.textContent=j),Et.forEach(O),ze.forEach(O),this.h()},h:function(){T(h,x,28,6,703),T(n,x,29,6,725),U(a,"class","flex flex-col items-start"),T(a,x,27,4,657),U(u,"class","monument-id"),T(u,x,32,8,813),ue(m.src,S=ye)||U(m,"src",S),U(m,"alt","Monument Marker"),he(m,"width","100%"),he(m,"height","100%"),T(m,x,34,12,922),he(v,"width",s[0]+"px"),he(v,"height",s[1]+"px"),T(v,x,33,8,858),U(c,"class","flex flex-row items-center"),T(c,x,31,4,764),U(r,"class","flex flex-row items-center"),T(r,x,26,2,612),U(P,"class","learn-more-button"),T(P,x,46,6,1264),U(B,"class","learn-more-container"),T(B,x,45,4,1223),U(I,"class","description-container"),T(I,x,39,2,1049)},m:function(_,M){y&&y.m(_,M),W(_,i,M),W(_,r,M),b(r,a),b(a,h),b(h,e),b(a,t),b(a,n),b(n,o),b(r,l),b(r,c),b(c,u),b(u,f),b(u,p),b(c,d),b(c,v),b(v,m),W(_,A,M),W(_,I,M),N&&N.m(I,null),b(I,Z),b(I,B),b(B,P),k=!0,C||(g=Me(P,"click",s[8],!1,!1,!1,!1),C=!0)},p:function(_,[M]){_[6]&&_[6].length?y?(y.p(_,M),M&64&&E(y,1)):(y=st(_),y.c(),E(y,1),y.m(i.parentNode,i)):y&&(J(),G(y,1,1,()=>{y=null}),Y()),(!k||M&4)&&de(e,_[2]),(!k||M&8)&&de(o,_[3]),(!k||M&16)&&de(p,_[4]),(!k||M&1)&&he(v,"width",_[0]+"px"),(!k||M&2)&&he(v,"height",_[1]+"px"),_[5]?N?N.p(_,M):(N=at(_),N.c(),N.m(I,Z)):N&&(N.d(1),N=null)},i:function(_){k||(E(y),k=!0)},o:function(_){G(y),k=!1},d:function(_){_&&(O(i),O(r),O(A),O(I)),y&&y.d(_),N&&N.d(),C=!1,g()}};return D("SvelteRegisterBlock",{block:H,id:lt.name,type:"component",source:"",ctx:s}),H}function En(s,i,r){let{$$slots:a={},$$scope:h}=i;ve("PopupContent",a,[]);let{width:e}=i,{height:t}=i,{name:n}=i,{municipality:o}=i,{id:l}=i,{description:c}=i,{photos:u}=i,{baseUrl:f}=i;const p=_e();function d(m){p("closeAndShowDetails",{id:l,event:m})}s.$$.on_mount.push(function(){e===void 0&&!("width"in i||s.$$.bound[s.$$.props.width])&&console.warn("<PopupContent> was created without expected prop 'width'"),t===void 0&&!("height"in i||s.$$.bound[s.$$.props.height])&&console.warn("<PopupContent> was created without expected prop 'height'"),n===void 0&&!("name"in i||s.$$.bound[s.$$.props.name])&&console.warn("<PopupContent> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||s.$$.bound[s.$$.props.municipality])&&console.warn("<PopupContent> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||s.$$.bound[s.$$.props.id])&&console.warn("<PopupContent> was created without expected prop 'id'"),c===void 0&&!("description"in i||s.$$.bound[s.$$.props.description])&&console.warn("<PopupContent> was created without expected prop 'description'"),u===void 0&&!("photos"in i||s.$$.bound[s.$$.props.photos])&&console.warn("<PopupContent> was created without expected prop 'photos'"),f===void 0&&!("baseUrl"in i||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<PopupContent> was created without expected prop 'baseUrl'")});const v=["width","height","name","municipality","id","description","photos","baseUrl"];return Object.keys(i).forEach(m=>{!~v.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<PopupContent> was created with unknown prop '${m}'`)}),s.$$set=m=>{"width"in m&&r(0,e=m.width),"height"in m&&r(1,t=m.height),"name"in m&&r(2,n=m.name),"municipality"in m&&r(3,o=m.municipality),"id"in m&&r(4,l=m.id),"description"in m&&r(5,c=m.description),"photos"in m&&r(6,u=m.photos),"baseUrl"in m&&r(7,f=m.baseUrl)},s.$capture_state=()=>({createEventDispatcher:_e,ImageArray:Xt,monumentSvg:ye,width:e,height:t,name:n,municipality:o,id:l,description:c,photos:u,baseUrl:f,dispatch:p,handleLearnMoreClick:d}),s.$inject_state=m=>{"width"in m&&r(0,e=m.width),"height"in m&&r(1,t=m.height),"name"in m&&r(2,n=m.name),"municipality"in m&&r(3,o=m.municipality),"id"in m&&r(4,l=m.id),"description"in m&&r(5,c=m.description),"photos"in m&&r(6,u=m.photos),"baseUrl"in m&&r(7,f=m.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[e,t,n,o,l,c,u,f,d]}class sn extends pe{constructor(i){super(i),ge(this,i,En,lt,me,{width:0,height:1,name:2,municipality:3,id:4,description:5,photos:6,baseUrl:7}),D("SvelteRegisterComponent",{component:this,tagName:"PopupContent",options:i,id:lt.name})}get width(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Fe="src/lib/UI/ImagePreview.svelte";function an(s){let i,r,a,h,e,t,n;const o={c:function(){i=z("img"),h=F(),e=z("img"),this.h()},l:function(c){i=R(c,"IMG",{src:!0,alt:!0,class:!0}),h=q(c),e=R(c,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){ue(i.src,r=`${s[1]}${s[0][0].url}`)||U(i,"src",r),U(i,"alt",a=s[0][0].alt),U(i,"class","base-photo s-LLFXHRRAcbiM"),T(i,Fe,13,8,325),ue(e.src,t=`${s[1]}${s[0][1].url}`)||U(e,"src",t),U(e,"alt",n=s[0][1].alt),U(e,"class","overlay s-LLFXHRRAcbiM"),T(e,Fe,18,8,459)},m:function(c,u){W(c,i,u),W(c,h,u),W(c,e,u)},p:function(c,u){u&3&&!ue(i.src,r=`${c[1]}${c[0][0].url}`)&&U(i,"src",r),u&1&&a!==(a=c[0][0].alt)&&U(i,"alt",a),u&3&&!ue(e.src,t=`${c[1]}${c[0][1].url}`)&&U(e,"src",t),u&1&&n!==(n=c[0][1].alt)&&U(e,"alt",n)},d:function(c){c&&(O(i),O(h),O(e))}};return D("SvelteRegisterBlock",{block:o,id:an.name,type:"if",source:"(13:33) ",ctx:s}),o}function ln(s){let i,r,a;const h={c:function(){i=z("img"),this.h()},l:function(t){i=R(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){ue(i.src,r=`${s[1]}${s[0][0].url}`)||U(i,"src",r),U(i,"alt",a=s[0][0].alt),U(i,"class","single-photo s-LLFXHRRAcbiM"),T(i,Fe,7,8,155)},m:function(t,n){W(t,i,n)},p:function(t,n){n&3&&!ue(i.src,r=`${t[1]}${t[0][0].url}`)&&U(i,"src",r),n&1&&a!==(a=t[0][0].alt)&&U(i,"alt",a)},d:function(t){t&&O(i)}};return D("SvelteRegisterBlock",{block:h,id:ln.name,type:"if",source:"(7:4) {#if photos && photos.length === 1}",ctx:s}),h}function ct(s){let i;function r(t,n){if(t[0]&&t[0].length===1)return ln;if(t[0].length>=2)return an}let a=r(s),h=a&&a(s);const e={c:function(){i=z("div"),h&&h.c(),this.h()},l:function(n){i=R(n,"DIV",{class:!0});var o=V(i);h&&h.l(o),o.forEach(O),this.h()},h:function(){U(i,"class","image-container s-LLFXHRRAcbiM"),T(i,Fe,5,0,77)},m:function(n,o){W(n,i,o),h&&h.m(i,null)},p:function(n,[o]){a===(a=r(n))&&h?h.p(n,o):(h&&h.d(1),h=a&&a(n),h&&(h.c(),h.m(i,null)))},i:Ye,o:Ye,d:function(n){n&&O(i),h&&h.d()}};return D("SvelteRegisterBlock",{block:e,id:ct.name,type:"component",source:"",ctx:s}),e}function In(s,i,r){let{$$slots:a={},$$scope:h}=i;ve("ImagePreview",a,[]);let{photos:e={}}=i,{baseUrl:t=""}=i;const n=["photos","baseUrl"];return Object.keys(i).forEach(o=>{!~n.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<ImagePreview> was created with unknown prop '${o}'`)}),s.$$set=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},s.$capture_state=()=>({photos:e,baseUrl:t}),s.$inject_state=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[e,t]}class cn extends pe{constructor(i){super(i),ge(this,i,In,ct,me,{photos:0,baseUrl:1}),D("SvelteRegisterComponent",{component:this,tagName:"ImagePreview",options:i,id:ct.name})}get photos(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ae="src/lib/UI/SearchItem.svelte";function ut(s){let i,r;i=new cn({props:{photos:s[3],baseUrl:s[4]},$$inline:!0});const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},p:function(e,t){const n={};t&8&&(n.photos=e[3]),t&16&&(n.baseUrl=e[4]),i.$set(n)},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:ut.name,type:"if",source:"(26:4) {#if photos && photos.length}",ctx:s}),a}function ht(s){let i,r,a,h,e,t,n,o,l,c,u,f,p,d,v,m,S,A,I,Z,B,P,j="learn more",k,C,g,y=s[3]&&s[3].length&&ut(s);const N={c:function(){i=z("div"),y&&y.c(),r=F(),a=z("div"),h=z("div"),e=ie("#"),t=ie(s[2]),n=F(),o=z("h2"),l=ie(s[0]),c=F(),u=z("h3"),f=ie(s[1]),p=F(),d=z("div"),v=z("div"),m=z("img"),A=F(),I=z("div"),Z=F(),B=z("div"),P=z("button"),P.textContent=j,this.h()},l:function(w){i=R(w,"DIV",{class:!0});var _=V(i);y&&y.l(_),r=q(_),a=R(_,"DIV",{class:!0});var M=V(a);h=R(M,"DIV",{class:!0});var re=V(h);e=oe(re,"#"),t=oe(re,s[2]),re.forEach(O),n=q(M),o=R(M,"H2",{});var Ie=V(o);l=oe(Ie,s[0]),Ie.forEach(O),c=q(M),u=R(M,"H3",{});var Oe=V(u);f=oe(Oe,s[1]),Oe.forEach(O),M.forEach(O),p=q(_),d=R(_,"DIV",{class:!0});var se=V(d);v=R(se,"DIV",{style:!0});var Le=V(v);m=R(Le,"IMG",{src:!0,alt:!0,style:!0}),Le.forEach(O),A=q(se),I=R(se,"DIV",{class:!0}),V(I).forEach(O),Z=q(se),B=R(se,"DIV",{});var Ue=V(B);P=R(Ue,"BUTTON",{class:!0,"data-svelte-h":!0}),Nt(P)!=="svelte-1h1xepw"&&(P.textContent=j),Ue.forEach(O),se.forEach(O),_.forEach(O),this.h()},h:function(){U(h,"class","monument-id"),T(h,ae,30,8,790),T(o,ae,31,8,835),T(u,ae,32,8,859),U(a,"class","flex flex-col items-start ml-7 space-y-2"),T(a,ae,29,4,727),ue(m.src,S=ye)||U(m,"src",S),U(m,"alt","Monument Marker"),he(m,"width","100%"),he(m,"height","100%"),T(m,ae,37,12,1043),he(v,"width",s[5]+"px"),he(v,"height",s[6]+"px"),T(v,ae,36,8,979),U(I,"class","flex-grow"),T(I,ae,39,8,1151),U(P,"class","learn-more-button s-bEGFb-JhA8_4"),T(P,ae,41,12,1207),T(B,ae,40,8,1189),U(d,"class","flex flex-col flex-wrap justify-between items-end"),T(d,ae,35,4,899),U(i,"class","result-container flex flex-row justify-between items-stretch p-3 lg:p-4 border border-black bg-white m-2 rounded-sm"),T(i,ae,24,0,504)},m:function(w,_){W(w,i,_),y&&y.m(i,null),b(i,r),b(i,a),b(a,h),b(h,e),b(h,t),b(a,n),b(a,o),b(o,l),b(a,c),b(a,u),b(u,f),b(i,p),b(i,d),b(d,v),b(v,m),b(d,A),b(d,I),b(d,Z),b(d,B),b(B,P),k=!0,C||(g=Me(P,"click",s[7],!1,!1,!1,!1),C=!0)},p:function(w,[_]){w[3]&&w[3].length?y?(y.p(w,_),_&8&&E(y,1)):(y=ut(w),y.c(),E(y,1),y.m(i,r)):y&&(J(),G(y,1,1,()=>{y=null}),Y()),(!k||_&4)&&de(t,w[2]),(!k||_&1)&&de(l,w[0]),(!k||_&2)&&de(f,w[1])},i:function(w){k||(E(y),k=!0)},o:function(w){G(y),k=!1},d:function(w){w&&O(i),y&&y.d(),C=!1,g()}};return D("SvelteRegisterBlock",{block:N,id:ht.name,type:"component",source:"",ctx:s}),N}function On(s,i,r){let{$$slots:a={},$$scope:h}=i;ve("SearchItem",a,[]);let e=30,t=30,{name:n}=i,{municipality:o}=i,{id:l}=i,{photos:c}=i,{baseUrl:u}=i;const f=_e();function p(v){f("closeAndShowDetails",{id:l,event:v})}s.$$.on_mount.push(function(){n===void 0&&!("name"in i||s.$$.bound[s.$$.props.name])&&console.warn("<SearchItem> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||s.$$.bound[s.$$.props.municipality])&&console.warn("<SearchItem> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||s.$$.bound[s.$$.props.id])&&console.warn("<SearchItem> was created without expected prop 'id'"),c===void 0&&!("photos"in i||s.$$.bound[s.$$.props.photos])&&console.warn("<SearchItem> was created without expected prop 'photos'"),u===void 0&&!("baseUrl"in i||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<SearchItem> was created without expected prop 'baseUrl'")});const d=["name","municipality","id","photos","baseUrl"];return Object.keys(i).forEach(v=>{!~d.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<SearchItem> was created with unknown prop '${v}'`)}),s.$$set=v=>{"name"in v&&r(0,n=v.name),"municipality"in v&&r(1,o=v.municipality),"id"in v&&r(2,l=v.id),"photos"in v&&r(3,c=v.photos),"baseUrl"in v&&r(4,u=v.baseUrl)},s.$capture_state=()=>({createEventDispatcher:_e,ImagePreview:cn,monumentSvg:ye,width:e,height:t,name:n,municipality:o,id:l,photos:c,baseUrl:u,dispatch:f,handleLearnMoreClick:p}),s.$inject_state=v=>{"width"in v&&r(5,e=v.width),"height"in v&&r(6,t=v.height),"name"in v&&r(0,n=v.name),"municipality"in v&&r(1,o=v.municipality),"id"in v&&r(2,l=v.id),"photos"in v&&r(3,c=v.photos),"baseUrl"in v&&r(4,u=v.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[n,o,l,c,u,e,t,p]}class un extends pe{constructor(i){super(i),ge(this,i,On,ht,me,{name:0,municipality:1,id:2,photos:3,baseUrl:4}),D("SvelteRegisterComponent",{component:this,tagName:"SearchItem",options:i,id:ht.name})}get name(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Un}=Pt,Te="src/lib/UI/SearchResults.svelte";function je(s,i,r){const a=s.slice();return a[6]=i[r].name,a[7]=i[r].photos,a[8]=i[r].municipality,a[9]=i[r].id,a[11]=r,a}function ft(s,i){let r,a,h;a=new un({props:{name:i[6],photos:i[7],municipality:i[8],id:i[9],baseUrl:i[1]},$$inline:!0}),a.$on("closeAndShowDetails",i[4]);const e={key:s,first:null,c:function(){r=fe(),$(a.$$.fragment),this.h()},l:function(n){r=fe(),ee(a.$$.fragment,n),this.h()},h:function(){this.first=r},m:function(n,o){W(n,r,o),te(a,n,o),h=!0},p:function(n,o){i=n;const l={};o&1&&(l.name=i[6]),o&1&&(l.photos=i[7]),o&1&&(l.municipality=i[8]),o&1&&(l.id=i[9]),o&2&&(l.baseUrl=i[1]),a.$set(l)},i:function(n){h||(E(a.$$.fragment,n),h=!0)},o:function(n){G(a.$$.fragment,n),h=!1},d:function(n){n&&O(r),ne(a,n)}};return D("SvelteRegisterBlock",{block:e,id:ft.name,type:"each",source:"(40:2) {#each results as { name, photos, municipality, id }",ctx:i}),e}function dt(s){let i,r,a,h,e,t,n=s[0].length+"",o,l,c=s[0].length>1?"places ":"place ",u,f,p,d=[],v=new Map,m,S,A,I,Z,B=Ve(s[0]);const P=k=>k[9]+"-"+k[11];He(s,B,je,P);for(let k=0;k<B.length;k+=1){let C=je(s,B,k),g=P(C);v.set(g,d[k]=ft(g,C))}const j={c:function(){i=z("div"),r=z("button"),a=z("img"),e=F(),t=z("p"),o=ie(n),l=F(),u=ie(c),f=ie(`
    replied to your call...`),p=F();for(let C=0;C<d.length;C+=1)d[C].c();this.h()},l:function(C){i=R(C,"DIV",{class:!0});var g=V(i);r=R(g,"BUTTON",{class:!0});var y=V(r);a=R(y,"IMG",{src:!0,alt:!0}),y.forEach(O),e=q(g),t=R(g,"P",{});var N=V(t);o=oe(N,n),l=q(N),u=oe(N,c),f=oe(N,`
    replied to your call...`),N.forEach(O),p=q(g);for(let H=0;H<d.length;H+=1)d[H].l(g);g.forEach(O),this.h()},h:function(){ue(a.src,h=Qt)||U(a,"src",h),U(a,"alt","Close Sidebar"),T(a,Te,32,4,736),U(r,"class","close-button s-VgsW2gEiy9eW"),T(r,Te,31,2,679),T(t,Te,34,2,795),U(i,"class","sidebar s-VgsW2gEiy9eW"),T(i,Te,26,0,577)},m:function(C,g){W(C,i,g),b(i,r),b(r,a),b(i,e),b(i,t),b(t,o),b(t,l),b(t,u),b(t,f),b(i,p);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(i,null);A=!0,I||(Z=Me(r,"click",s[3],!1,!1,!1,!1),I=!0)},p:function(C,[g]){(!A||g&1)&&n!==(n=C[0].length+"")&&de(o,n),(!A||g&1)&&c!==(c=C[0].length>1?"places ":"place ")&&de(u,c),g&7&&(B=Ve(C[0]),J(),He(C,B,je,P),d=Ht(d,g,P,1,C,B,v,i,Ft,ft,null,je),Y())},i:function(C){if(!A){for(let g=0;g<B.length;g+=1)E(d[g]);C&&Vt(()=>{A&&(S&&S.end(1),m=qt(i,xe,{x:300,duration:800}),m.start())}),A=!0}},o:function(C){for(let g=0;g<d.length;g+=1)G(d[g]);m&&m.invalidate(),C&&(S=Wt(i,xe,{x:300,duration:800})),A=!1},d:function(C){C&&O(i);for(let g=0;g<d.length;g+=1)d[g].d();C&&S&&S.end(),I=!1,Z()}};return D("SvelteRegisterBlock",{block:j,id:dt.name,type:"component",source:"",ctx:s}),j}function Bn(s,i,r){let{$$slots:a={},$$scope:h}=i;ve("SearchResults",a,[]);const e=_e();let{results:t={}}=i,{baseUrl:n=""}=i;function o(f){e("closeAndShowDetails",{id:f.detail.id,event:f})}function l(){le.set(null)}const c=["results","baseUrl"];Object.keys(i).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&Un.warn(`<SearchResults> was created with unknown prop '${f}'`)});const u=f=>o(f);return s.$$set=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,n=f.baseUrl)},s.$capture_state=()=>({fly:xe,createEventDispatcher:_e,currentSidebar:le,closeImage:Qt,dispatch:e,SearchItem:un,results:t,baseUrl:n,handleDetails:o,closeSearch:l}),s.$inject_state=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,n=f.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{s.$$.dirty&1&&console.log("results",t)},[t,n,o,l,u]}class hn extends pe{constructor(i){super(i),ge(this,i,Bn,dt,me,{results:0,baseUrl:1}),D("SvelteRegisterComponent",{component:this,tagName:"SearchResults",options:i,id:dt.name})}get results(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set results(i){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:An}=Pt,ke="src/routes/map/+page.svelte";function De(s,i,r){const a=s.slice();return a[20]=i[r].latLng,a[21]=i[r].visible,a[22]=i[r].name,a[23]=i[r].description,a[24]=i[r].photos,a[25]=i[r].municipality,a[26]=i[r].id,a[28]=r,a}function _t(s){let i,r,a,h,e,t;const n={c:function(){i=z("h1"),r=ie("*countermap"),this.h()},l:function(l){i=R(l,"H1",{class:!0});var c=V(i);r=oe(c,"*countermap"),c.forEach(O),this.h()},h:function(){U(i,"class",a=Ot(s[3]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),T(i,ke,112,2,3133)},m:function(l,c){W(l,i,c),b(i,r),t=!0},p:function(l,c){(!t||c&8&&a!==(a=Ot(l[3]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&U(i,"class",a)},i:function(l){t||(l&&Vt(()=>{t&&(e&&e.end(1),h=qt(i,$e,{duration:300}),h.start())}),t=!0)},o:function(l){h&&h.invalidate(),l&&(e=Wt(i,$e,{duration:300})),t=!1},d:function(l){l&&O(i),l&&e&&e.end()}};return D("SvelteRegisterBlock",{block:n,id:_t.name,type:"if",source:"(112:0) {#if $isPopupOpen === false}",ctx:s}),n}function mt(s){let i,r;i=new on({props:{latLng:s[20],width:s[7],height:s[8],$$slots:{default:[dn]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},p:function(e,t){const n={};t&32&&(n.latLng=e[20]),t&1073741856&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:mt.name,type:"if",source:"(126:6) {#if visible}",ctx:s}),a}function fn(s){let i,r;function a(...e){return s[17](s[29],...e)}i=new sn({props:{width:s[7],height:s[8],name:s[22],municipality:s[25],id:s[26],description:s[23],photos:s[24],baseUrl:s[9]},$$inline:!0}),i.$on("closeAndShowDetails",a);const h={c:function(){$(i.$$.fragment)},l:function(t){ee(i.$$.fragment,t)},m:function(t,n){te(i,t,n),r=!0},p:function(t,n){s=t;const o={};n&32&&(o.name=s[22]),n&32&&(o.municipality=s[25]),n&32&&(o.id=s[26]),n&32&&(o.description=s[23]),n&32&&(o.photos=s[24]),i.$set(o)},i:function(t){r||(E(i.$$.fragment,t),r=!0)},o:function(t){G(i.$$.fragment,t),r=!1},d:function(t){ne(i,t)}};return D("SvelteRegisterBlock",{block:h,id:fn.name,type:"slot",source:"(128:10) <Popup let:popup>",ctx:s}),h}function dn(s){let i,r,a;i=new rn({props:{$$slots:{default:[fn,({popup:e})=>({29:e}),({popup:e})=>e?536870912:0]},$$scope:{ctx:s}},$$inline:!0});const h={c:function(){$(i.$$.fragment),r=F()},l:function(t){ee(i.$$.fragment,t),r=q(t)},m:function(t,n){te(i,t,n),W(t,r,n),a=!0},p:function(t,n){const o={};n&1610612768&&(o.$$scope={dirty:n,ctx:t}),i.$set(o)},i:function(t){a||(E(i.$$.fragment,t),a=!0)},o:function(t){G(i.$$.fragment,t),a=!1},d:function(t){t&&O(r),ne(i,t)}};return D("SvelteRegisterBlock",{block:h,id:dn.name,type:"slot",source:"(127:8) <Marker {latLng} {width} {height}>",ctx:s}),h}function pt(s,i){let r,a,h,e=i[21]&&mt(i);const t={key:s,first:null,c:function(){r=fe(),e&&e.c(),a=fe(),this.h()},l:function(o){r=fe(),e&&e.l(o),a=fe(),this.h()},h:function(){this.first=r},m:function(o,l){W(o,r,l),e&&e.m(o,l),W(o,a,l),h=!0},p:function(o,l){i=o,i[21]?e?(e.p(i,l),l&32&&E(e,1)):(e=mt(i),e.c(),E(e,1),e.m(a.parentNode,a)):e&&(J(),G(e,1,1,()=>{e=null}),Y())},i:function(o){h||(E(e),h=!0)},o:function(o){G(e),h=!1},d:function(o){o&&(O(r),O(a)),e&&e.d(o)}};return D("SvelteRegisterBlock",{block:t,id:pt.name,type:"each",source:"(125:4) {#each $visibleMarkers as { latLng, visible, name, description, photos, municipality, id }",ctx:i}),t}function _n(s){let i=[],r=new Map,a,h,e=Ve(s[5]);const t=o=>o[20].join(",")+"-"+o[28];He(s,e,De,t);for(let o=0;o<e.length;o+=1){let l=De(s,e,o),c=t(l);r.set(c,i[o]=pt(c,l))}const n={c:function(){for(let l=0;l<i.length;l+=1)i[l].c();a=fe()},l:function(l){for(let c=0;c<i.length;c+=1)i[c].l(l);a=fe()},m:function(l,c){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,c);W(l,a,c),h=!0},p:function(l,c){c&536875936&&(e=Ve(l[5]),J(),He(l,e,De,t),i=Ht(i,c,t,1,l,e,r,a.parentNode,Ft,pt,a,De),Y())},i:function(l){if(!h){for(let c=0;c<e.length;c+=1)E(i[c]);h=!0}},o:function(l){for(let c=0;c<i.length;c+=1)G(i[c]);h=!1},d:function(l){l&&O(a);for(let c=0;c<i.length;c+=1)i[c].d(l)}};return D("SvelteRegisterBlock",{block:n,id:_n.name,type:"slot",source:"(124:2) <Leaflet view={$currentViewStore} zoom={zoomLevel}>",ctx:s}),n}function gt(s){let i,r;i=new Jt({$$inline:!0});const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:gt.name,type:"if",source:"(158:0) {#if $selectedMarkerId !== null && $currentSidebar === 'sidebar'}",ctx:s}),a}function vt(s){let i,r;i=new Yt({$$inline:!0});const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:vt.name,type:"if",source:"(162:0) {#if $currentSidebar === 'menu'}",ctx:s}),a}function yt(s){let i,r;i=new xt({$$inline:!0}),i.$on("closeSideBar",s[14]);const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},p:Ye,i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:yt.name,type:"if",source:"(166:0) {#if $currentSidebar === 'submissions'}",ctx:s}),a}function Lt(s){let i,r;i=new tn({$$inline:!0});const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:Lt.name,type:"if",source:"(170:0) {#if $currentSidebar === 'tools'}",ctx:s}),a}function wt(s){let i,r;i=new hn({props:{results:s[5],baseUrl:s[9]},$$inline:!0}),i.$on("closeAndShowDetails",s[18]);const a={c:function(){$(i.$$.fragment)},l:function(e){ee(i.$$.fragment,e)},m:function(e,t){te(i,e,t),r=!0},p:function(e,t){const n={};t&32&&(n.results=e[5]),i.$set(n)},i:function(e){r||(E(i.$$.fragment,e),r=!0)},o:function(e){G(i.$$.fragment,e),r=!1},d:function(e){ne(i,e)}};return D("SvelteRegisterBlock",{block:a,id:wt.name,type:"if",source:"(174:0) {#if $currentSidebar === 'search'}",ctx:s}),a}function bt(s){let i,r,a,h,e,t,n,o,l,c,u,f,p,d,v,m,S,A,I,Z,B,P=s[2]===!1&&_t(s);a=new Kt({$$inline:!0}),a.$on("updateView",s[11]),e=new nn({props:{view:s[4],zoom:s[1],$$slots:{default:[_n]},$$scope:{ctx:s}},$$inline:!0});let j=s[6]!==null&&s[0]==="sidebar"&&gt(s),k=s[0]==="menu"&&vt(s),C=s[0]==="submissions"&&yt(s),g=s[0]==="tools"&&Lt(s),y=s[0]==="search"&&wt(s);const N={c:function(){P&&P.c(),i=F(),r=z("div"),$(a.$$.fragment),h=F(),$(e.$$.fragment),t=F(),n=z("button"),o=z("img"),c=F(),u=z("button"),f=z("img"),d=F(),j&&j.c(),v=F(),k&&k.c(),m=F(),C&&C.c(),S=F(),g&&g.c(),A=F(),y&&y.c(),this.h()},l:function(w){P&&P.l(w),i=q(w),r=R(w,"DIV",{class:!0});var _=V(r);ee(a.$$.fragment,_),h=q(_),ee(e.$$.fragment,_),t=q(_),n=R(_,"BUTTON",{class:!0});var M=V(n);o=R(M,"IMG",{src:!0,alt:!0}),M.forEach(O),c=q(_),u=R(_,"BUTTON",{class:!0});var re=V(u);f=R(re,"IMG",{src:!0,alt:!0}),re.forEach(O),d=q(_),j&&j.l(_),v=q(_),k&&k.l(_),m=q(_),C&&C.l(_),S=q(_),g&&g.l(_),A=q(_),y&&y.l(_),_.forEach(O),this.h()},h:function(){ue(o.src,l=$t)||U(o,"src",l),U(o,"alt","Open Menu Sidebar"),T(o,ke,151,2,4343),U(n,"class","menu-button sdbbtn"),T(n,ke,150,0,4285),ue(f.src,p=en)||U(f,"src",p),U(f,"alt","Open Filter Sidebar"),T(f,ke,154,2,4464),U(u,"class","filter-button sdbbtn"),T(u,ke,153,0,4403),U(r,"class","w-full h-screen"),T(r,ke,121,0,3400)},m:function(w,_){P&&P.m(w,_),W(w,i,_),W(w,r,_),te(a,r,null),b(r,h),te(e,r,null),b(r,t),b(r,n),b(n,o),b(r,c),b(r,u),b(u,f),b(r,d),j&&j.m(r,null),b(r,v),k&&k.m(r,null),b(r,m),C&&C.m(r,null),b(r,S),g&&g.m(r,null),b(r,A),y&&y.m(r,null),I=!0,Z||(B=[Me(n,"click",s[15],!1,!1,!1,!1),Me(u,"click",s[16],!1,!1,!1,!1),Me(r,"click",s[13],!1,!1,!1,!1)],Z=!0)},p:function(w,[_]){w[2]===!1?P?(P.p(w,_),_&4&&E(P,1)):(P=_t(w),P.c(),E(P,1),P.m(i.parentNode,i)):P&&(J(),G(P,1,1,()=>{P=null}),Y());const M={};_&16&&(M.view=w[4]),_&2&&(M.zoom=w[1]),_&1073741856&&(M.$$scope={dirty:_,ctx:w}),e.$set(M),w[6]!==null&&w[0]==="sidebar"?j?_&65&&E(j,1):(j=gt(w),j.c(),E(j,1),j.m(r,v)):j&&(J(),G(j,1,1,()=>{j=null}),Y()),w[0]==="menu"?k?_&1&&E(k,1):(k=vt(w),k.c(),E(k,1),k.m(r,m)):k&&(J(),G(k,1,1,()=>{k=null}),Y()),w[0]==="submissions"?C?(C.p(w,_),_&1&&E(C,1)):(C=yt(w),C.c(),E(C,1),C.m(r,S)):C&&(J(),G(C,1,1,()=>{C=null}),Y()),w[0]==="tools"?g?_&1&&E(g,1):(g=Lt(w),g.c(),E(g,1),g.m(r,A)):g&&(J(),G(g,1,1,()=>{g=null}),Y()),w[0]==="search"?y?(y.p(w,_),_&1&&E(y,1)):(y=wt(w),y.c(),E(y,1),y.m(r,null)):y&&(J(),G(y,1,1,()=>{y=null}),Y())},i:function(w){I||(E(P),E(a.$$.fragment,w),E(e.$$.fragment,w),E(j),E(k),E(C),E(g),E(y),I=!0)},o:function(w){G(P),G(a.$$.fragment,w),G(e.$$.fragment,w),G(j),G(k),G(C),G(g),G(y),I=!1},d:function(w){w&&(O(i),O(r)),P&&P.d(w),ne(a),ne(e),j&&j.d(),k&&k.d(),C&&C.d(),g&&g.d(),y&&y.d(),Z=!1,gn(B)}};return D("SvelteRegisterBlock",{block:N,id:bt.name,type:"component",source:"",ctx:s}),N}function Gn(s,i,r){let a,h,e,t,n,o;Q(le,"currentSidebar"),K(s,le,g=>r(0,a=g)),Q(Se,"isPopupOpen"),K(s,Se,g=>r(2,h=g)),Q(ce,"darkMode"),K(s,ce,g=>r(3,e=g)),Q(Re,"currentViewStore"),K(s,Re,g=>r(4,t=g)),Q(Be,"selectedMarkerId"),K(s,Be,g=>r(6,o=g));let{$$slots:l={},$$scope:c}=i;ve("Page",l,[]);let u=25,f=25,p=10,d="https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/";const v=Ut([Tt,Ce,le,Ae],([g,y,N,H])=>N==="tools"&&H.length>0?H:g.filter(w=>{const[_,M]=w.latLng;return y.contains(X.latLng(_,M))}));Q(v,"visibleMarkers"),K(s,v,g=>r(5,n=g));function m(g){console.log("updating view");const{latLng:y}=g.detail;r(1,p=12),Re.set({lat:y[0],lng:y[1]}),le.set("search")}function S(g,y){console.log("showing details"),g&&typeof g.stopPropagation=="function"&&g.stopPropagation(),I("sidebar"),Be.set(y)}function A(g){a!=="search"&&a!=="submissions"&&!g.target.closest(".sdbbtn")&&!g.target.closest(".sidebar")&&(I(null),Be.set(null))}function I(g){le.set(g)}function Z(){console.log("closing sidebar"),I(null)}function B(){I(a==="menu"?null:"menu")}function P(){I(a==="tools"?null:"tools")}const j=[];Object.keys(i).forEach(g=>{!~j.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&An.warn(`<Page> was created with unknown prop '${g}'`)});const k=(g,{detail:y})=>{console.log(y),S(y.event,y.id),g.close()},C=({detail:g})=>{console.log(g),S(g.event,g.id)};return s.$capture_state=()=>({derived:Ut,L:X,fade:$e,Leaflet:nn,Marker:on,Popup:rn,PopupContent:sn,Sidebar:Jt,MenuSidebar:Yt,Search:Kt,SearchResults:hn,SubmissionSidebar:xt,menuIconPath:$t,filterIconPath:en,markersStore:Tt,filteredStore:Ae,currentViewStore:Re,mapBoundsStore:Ce,darkMode:ce,selectedMarkerId:Be,currentSidebar:le,isPopupOpen:Se,ToolsSidebar:tn,width:u,height:f,zoomLevel:p,baseUrl:d,visibleMarkers:v,handleUpdateView:m,showDetails:S,handleDivClick:A,setCurrentSidebar:I,closeSidebar:Z,showMenu:B,showTools:P,$currentSidebar:a,$isPopupOpen:h,$darkMode:e,$currentViewStore:t,$visibleMarkers:n,$selectedMarkerId:o}),s.$inject_state=g=>{"width"in g&&r(7,u=g.width),"height"in g&&r(8,f=g.height),"zoomLevel"in g&&r(1,p=g.zoomLevel),"baseUrl"in g&&r(9,d=g.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{s.$$.dirty&1&&console.log(a)},[a,p,h,e,t,n,o,u,f,d,v,m,S,A,Z,B,P,k,C]}class Nn extends pe{constructor(i){super(i),ge(this,i,Gn,bt,me,{}),D("SvelteRegisterComponent",{component:this,tagName:"Page",options:i,id:bt.name})}}export{Nn as component,Zn as universal};
