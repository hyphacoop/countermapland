import{a as ae,v as G,d as H,e as O,f as X,h as q,j as R,o as le,l as E,m as M,p as ee,q as F,w as J,x as Q}from"../chunks/scheduler.GwtdfoWy.js";import{S as se,i as re,d as $,f as I,v as ie,b,g as v,c as C,e as y,l as te,t as j,a as D,h as ce,j as fe,k as ue,m as me,n as de,o as he}from"../chunks/index.WEK-V2la.js";import{g as _e}from"../chunks/monument.gLt56nMn.js";import{b as ne}from"../chunks/paths.g76A6DiP.js";import{d as U}from"../chunks/index.TvN-jqTT.js";import{m as W,a as Y,s as B,S as oe}from"../chunks/Sidebar.G0plzeA9.js";const pe=!1,we=Object.freeze(Object.defineProperty({__proto__:null,ssr:pe},Symbol.toStringTag,{value:"Module"})),{console:ge}=_e,w="src/routes/objects/+page.svelte";function Z(n,e,t){const o=n.slice();return o[6]=e[t],o[8]=t,o}function x(n,e,t){const o=n.slice();return o[9]=e[t].url,o[10]=e[t].alt,o[12]=t,o}function P(n){let e,t,o=I(n[6].photos),a=[];for(let i=0;i<o.length;i+=1)a[i]=T(x(n,o,i));const l={c:function(){e=O("div");for(let c=0;c<a.length;c+=1)a[c].c();t=X(),this.h()},l:function(c){e=q(c,"DIV",{class:!0,key:!0});var m=R(e);for(let r=0;r<a.length;r+=1)a[r].l(m);t=E(m),m.forEach(b),this.h()},h:function(){v(e,"class","image-container s-BO-laqXqKOol"),v(e,"key",n[8]),M(e,w,65,8,2267)},m:function(c,m){C(c,e,m);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null);y(e,t)},p:function(c,m){if(m&9){o=I(c[6].photos);let r;for(r=0;r<o.length;r+=1){const p=x(c,o,r);a[r]?a[r].p(p,m):(a[r]=T(p),a[r].c(),a[r].m(e,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}},d:function(c){c&&b(e),ee(a,c)}};return $("SvelteRegisterBlock",{block:l,id:P.name,type:"if",source:"(65:6) {#if marker.photos && marker.photos.length}",ctx:n}),l}function T(n){let e,t,o,a,l,i;function c(){return n[5](n[6])}const m={c:function(){e=O("div"),t=O("img"),this.h()},l:function(p){e=q(p,"DIV",{class:!0,style:!0});var _=R(e);t=q(_,"IMG",{src:!0,alt:!0,key:!0,class:!0}),_.forEach(b),this.h()},h:function(){J(t.src,o=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${n[9]}`)||v(t,"src",o),v(t,"alt",a=n[10]),v(t,"key",n[12]),v(t,"class","s-BO-laqXqKOol"),M(t,w,72,14,2593),v(e,"class","photo-wrapper s-BO-laqXqKOol"),Q(e,"top",z(n[12],n[8]).top+"px"),Q(e,"left",z(n[12],n[8]).left+"px"),M(e,w,67,12,2381)},m:function(p,_){C(p,e,_),y(e,t),l||(i=te(t,"click",c,!1,!1,!1,!1),l=!0)},p:function(p,_){n=p,_&1&&!J(t.src,o=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${n[9]}`)&&v(t,"src",o),_&1&&a!==(a=n[10])&&v(t,"alt",a)},d:function(p){p&&b(e),l=!1,i()}};return $("SvelteRegisterBlock",{block:m,id:T.name,type:"each",source:"(67:10) {#each marker.photos as { url, alt }",ctx:n}),m}function N(n){let e,t=n[6].photos&&n[6].photos.length&&P(n);const o={c:function(){t&&t.c(),e=F()},l:function(l){t&&t.l(l),e=F()},m:function(l,i){t&&t.m(l,i),C(l,e,i)},p:function(l,i){l[6].photos&&l[6].photos.length?t?t.p(l,i):(t=P(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d:function(l){l&&b(e),t&&t.d(l)}};return $("SvelteRegisterBlock",{block:o,id:N.name,type:"each",source:"(64:4) {#each $visibleRandomMarkers as marker, index}",ctx:n}),o}function V(n){let e,t;e=new oe({$$inline:!0});const o={c:function(){fe(e.$$.fragment)},l:function(l){ue(e.$$.fragment,l)},m:function(l,i){me(e,l,i),t=!0},i:function(l){t||(j(e.$$.fragment,l),t=!0)},o:function(l){D(e.$$.fragment,l),t=!1},d:function(l){de(e,l)}};return $("SvelteRegisterBlock",{block:o,id:V.name,type:"if",source:"(85:2) {#if $selectedMarkerId}",ctx:n}),o}function A(n){let e,t,o,a="*countermap",l,i,c,m,r,p,_=I(n[0]),s=[];for(let d=0;d<_.length;d+=1)s[d]=N(Z(n,_,d));let f=n[1]&&V(n);const k={c:function(){e=O("main"),t=O("h1"),o=O("a"),o.textContent=a,l=X(),i=O("div");for(let u=0;u<s.length;u+=1)s[u].c();c=X(),f&&f.c(),this.h()},l:function(u){e=q(u,"MAIN",{class:!0});var g=R(e);t=q(g,"H1",{class:!0});var h=R(t);o=q(h,"A",{href:!0,class:!0,"data-svelte-h":!0}),le(o)!=="svelte-hi9bqo"&&(o.textContent=a),h.forEach(b),l=E(g),i=q(g,"DIV",{class:!0});var S=R(i);for(let K=0;K<s.length;K+=1)s[K].l(S);S.forEach(b),c=E(g),f&&f.l(g),g.forEach(b),this.h()},h:function(){v(o,"href",ne+"/map"),v(o,"class","s-BO-laqXqKOol"),M(o,w,61,6,2089),v(t,"class","s-BO-laqXqKOol"),M(t,w,61,2,2085),v(i,"class","image-grid s-BO-laqXqKOol"),M(i,w,62,2,2133),v(e,"class","s-BO-laqXqKOol"),M(e,w,60,0,2049)},m:function(u,g){C(u,e,g),y(e,t),y(t,o),y(e,l),y(e,i);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(i,null);y(e,c),f&&f.m(e,null),m=!0,r||(p=te(e,"click",n[4],!1,!1,!1,!1),r=!0)},p:function(u,[g]){if(g&9){_=I(u[0]);let h;for(h=0;h<_.length;h+=1){const S=Z(u,_,h);s[h]?s[h].p(S,g):(s[h]=N(S),s[h].c(),s[h].m(i,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=_.length}u[1]?f?g&2&&j(f,1):(f=V(u),f.c(),j(f,1),f.m(e,null)):f&&(he(),D(f,1,1,()=>{f=null}),ce())},i:function(u){m||(j(f),m=!0)},o:function(u){D(f),m=!1},d:function(u){u&&b(e),ee(s,u),f&&f.d(),r=!1,p()}};return $("SvelteRegisterBlock",{block:k,id:A.name,type:"component",source:"",ctx:n}),k}function z(n,e){const t=Math.random()*10,o=Math.random()*50,a=Math.random()>.5?1:-1,l=n*150+t,i=e*100+(n*50+o)*a;return{top:l,left:i}}function ve(n,e,t){let o,a;G(B,"selectedMarkerId"),H(n,B,s=>t(1,a=s));let{$$slots:l={},$$scope:i}=e;ie("Page",l,[]);const c=U([W,Y],([s,f])=>{if(!f||typeof f.contains!="function")return[];const k=s.filter(d=>{const[u,g]=d.latLng;return f.contains(L.latLng(u,g))});for(let d=k.length-1;d>0;d--){const u=Math.floor(Math.random()*(d+1));[k[d],k[u]]=[k[u],k[d]]}return k.slice(0,4)});G(c,"visibleRandomMarkers"),H(n,c,s=>t(0,o=s));function m(s){B.set(s.id),console.log("selectedObject",selectedObject)}function r(s){s.target===s.currentTarget&&B.set(null)}const p=[];Object.keys(e).forEach(s=>{!~p.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&ge.warn(`<Page> was created with unknown prop '${s}'`)});const _=s=>m(s);return n.$capture_state=()=>({base:ne,derived:U,markersStore:W,mapBoundsStore:Y,selectedMarkerId:B,Sidebar:oe,getTransformation:z,visibleRandomMarkers:c,handleImageClick:m,handleMainClick:r,$visibleRandomMarkers:o,$selectedMarkerId:a}),[o,a,c,m,r,_]}class $e extends se{constructor(e){super(e),re(this,e,ve,A,ae,{}),$("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:A.name})}}export{$e as component,we as universal};
