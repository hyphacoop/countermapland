import{a as ge,v as K,d as J,$ as pe,o as Ie,G as Ot,D as Be,F as Ze,c as Mt,e as T,h as j,j as H,m as D,z as Vt,u as St,g as Pt,b as Et,a0 as Ne,A as de,f as q,t as re,l as W,k as se,p as Ht,w as he,q as fe,a1 as vn,a2 as yn,n as Ve,C as Ft,r as Ln,a3 as Ut}from"../chunks/scheduler.8doqxhoJ.js";import{S as ve,i as ye,d as V,v as Le,b as P,j as B,c as X,t as M,o as x,a as z,k as $,e as b,l as Pe,s as me,g as ee,h as te,m as ne,n as ie,f as He,u as Fe,w as qt,x as Wt,p as Xt,q as Qt}from"../chunks/index.B-UXCcAk.js";import{g as It,m as be}from"../chunks/object-view.cE-W-Naz.js";import{d as At}from"../chunks/index.XXZ5sPHA.js";import{o as wn,t as Ce,p as Ae,q as We,d as ce,r as Xe,u as Qe,v as ue,L as Q,T as Gt,w as Ge,a as Se,b as zt,x as Ke,y as Rt,z as Tt,A as jt,C as bn,D as Je,E as Ye,F as Ee,I as Kt,G as $e,H as Jt,S as Yt,m as Dt,f as et,g as xt,M as $t,h as en,B as tn,k as nn,n as on,c as Re,s as Ue,e as xe,j as rn}from"../chunks/ToolsSidebar.I2Y0t_pV.js";const kn=!1,Hn=Object.freeze(Object.defineProperty({__proto__:null,ssr:kn},Symbol.toStringTag,{value:"Module"}));var Zt={exports:{}};(function(s,i){(function(r,a){a(i)})(wn,function(r){var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,h=this.options.chunkInterval,f=this.options.chunkProgress,p=e.length,d=0,g=!0;if(this._map){var _=new Date().getTime(),E=L.bind(function(){var A=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<p;d++){if(c&&d%200==0){var R=new Date().getTime()-A;if(h<R)break}if((n=e[d])instanceof L.LayerGroup)g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(n,e),p=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&n.__parent.getChildCount()===2)){var O=n.__parent.getAllChildMarkers(),N=O[0]===n?O[1]:O[0];o.removeLayer(N)}}else l.addLayer(n),t||this.fire("layeradd",{layer:n})}f&&f(d,p,new Date().getTime()-_),d===p?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(E,this.options.chunkDelay)},this);E()}else for(var G=this._needsClustering;d<p;d++)(n=e[d])instanceof L.LayerGroup?(g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(n,e),p=e.length):n.getLatLng?this.hasLayer(n)||G.push(n):l.addLayer(n);return this},removeLayers:function(e){var t,n,o=e.length,l=this._featureGroup,c=this._nonPointGroup,h=!0;if(!this._map){for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(n,e),o=e.length):(this._arraySplice(this._needsClustering,n),c.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var f=e.slice(),p=o;for(t=0;t<p;t++)(n=f[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,f),p=f.length):this._unspiderfyLayer(n)}for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(n,e),o=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),l.hasLayer(n)&&(l.removeLayer(n),n.clusterShow&&n.clusterShow())):(c.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,o,l,c=this._needsClustering.slice(),h=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),o=c.length-1;0<=o;o--){for(n=!0,l=h.length-1;0<=l;l--)if(h[l].layer===c[o]){n=!1;break}n&&e.call(t,c[o])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;typeof t!="function"&&(t=function(){});var o=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",o,this),this.off("animationend",o,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,o;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(o=this._needsRemoving[t]).newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)o=this._needsRemoving[t],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,o=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());l<=t&&o[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var o=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,h=this._map,f=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var p,d=e.__parent,g=d._markers;for(this._arraySplice(g,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<f));)t&&d._childCount<=1?(p=d._markers[0]===e?d._markers[1]:d._markers[0],o[d._zoom].removeObject(d,h.project(d._cLatLng,d._zoom)),l[d._zoom].addObject(p,h.project(p.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(p),p.__parent=d.__parent,d._icon&&(c.removeLayer(d),n||c.addLayer(p))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||o||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;n._childClusters.length===1;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,l=this._map;(e||n||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,o=n;typeof n!="function"&&(o=function(){return n}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;t<=l;l--)this._gridClusters[l]=new L.DistanceGrid(o(l)),this._gridUnclustered[l]=new L.DistanceGrid(o(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,o,l=this._gridClusters,c=this._gridUnclustered,h=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);h<=t;t--){n=this._map.project(e.getLatLng(),t);var f=l[t].getNearObject(n);if(f)return f._addChild(e),void(e.__parent=f);if(f=c[t].getNearObject(n)){var p=f.__parent;p&&this._removeLayer(f,!1);var d=new this._markerCluster(this,t,f,e);l[t].addObject(d,this._map.project(d._cLatLng,t)),f.__parent=d;var g=e.__parent=d;for(o=t-1;o>p._zoom;o--)g=new this._markerCluster(this,o,g),l[o].addObject(g,this._map.project(f.getLatLng(),o));return p._addChild(g),void this._removeFromGridUnclustered(f,t)}c[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,o=e.getLayers(),l=0;for(t=t||[];l<o.length;l++)(n=o[l])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,e,c,function(h){var f,p=h._latlng,d=h._markers;for(o.contains(p)||(p=null),h._isSingleParent()&&e+1===t?(l.removeLayer(h),h._recursivelyAddChildrenToMap(null,t,o)):(h.clusterHide(),h._recursivelyAddChildrenToMap(p,t,o)),n=d.length-1;0<=n;n--)f=d[n],o.contains(f._latlng)||l.removeLayer(f)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,t),l.eachLayer(function(h){h instanceof L.MarkerCluster||!h._icon||h.clusterShow()}),this._topClusterLevel._recursively(o,e,t,function(h){h._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,e,c,function(h){l.removeLayer(h),h.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,o=this._featureGroup;o.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){o.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var o=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,l,t+1,n);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(o,n),this._enqueue(function(){if(e._childCount===1){var h=e._markers[0];this._ignoreMove=!0,h.setLatLng(h.getLatLng()),this._ignoreMove=!1,h.clusterShow&&h.clusterShow()}else e._recursively(o,n,l,function(f){f._recursivelyRemoveChildrenFromMap(o,l,t+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var u=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,o){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),o&&this._addChild(o)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var o=this._markers.length-1;0<=o;o--)t&&this._markers[o].__dragStart||e.push(this._markers[o]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,h=o.getZoom();0<n.length&&c<l;){c++;var f=[];for(t=0;t<n.length;t++)f=f.concat(n[t]._childClusters);n=f}c<l?this._group._map.setView(this._latlng,c):l<=h?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,o,l=this._markers,c=this._childClusters,h=0,f=0,p=this._childCount;if(p!==0){for(this._resetBounds(),e=0;e<l.length;e++)n=l[e]._latlng,this._bounds.extend(n),h+=n.lat,f+=n.lng;for(e=0;e<c.length;e++)(t=c[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,o=t._childCount,h+=n.lat*o,f+=n.lng*o;this._latlng=this._wLatLng=new L.LatLng(h/p,f/p),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(o){var l,c,h=o._markers;for(l=h.length-1;0<=l;l--)(c=h[l])._icon&&(c._setPos(t),c.clusterHide())},function(o){var l,c,h=o._childClusters;for(l=h.length-1;0<=l;l--)(c=h[l])._icon&&(c._setPos(t),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,o){this._recursively(e,o,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),n),l._isSingleParent()&&n-1===o?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,n)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(o){if(t!==o._zoom)for(var l=o._markers.length-1;0<=l;l--){var c=o._markers[l];n.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),o._group._featureGroup.addLayer(c))}},function(o){o._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._restorePosition();else for(var l=this._childClusters.length-1;0<=l;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,o){var l,c;this._recursively(e,t-1,n-1,function(h){for(c=h._markers.length-1;0<=c;c--)l=h._markers[c],o&&o.contains(l._latlng)||(h._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(h){for(c=h._childClusters.length-1;0<=c;c--)l=h._childClusters[c],o&&o.contains(l._latlng)||(h._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,n,o,l){var c,h,f=this._childClusters,p=this._zoom;if(t<=p&&(o&&o(this),l&&p===n&&l(this)),p<t||p<n)for(c=f.length-1;0<=c;c--)(h=f[c])._boundsNeedUpdate&&h._recalculateBounds(),e.intersects(h._bounds)&&h._recursively(e,t,n,o,l)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),o=this._getCoord(t.y),l=this._grid,c=l[o]=l[o]||{},h=c[n]=c[n]||[],f=L.Util.stamp(e);this._objectPoint[f]=t,h.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,o,l=this._getCoord(t.x),c=this._getCoord(t.y),h=this._grid,f=h[c]=h[c]||{},p=f[l]=f[l]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,o=p.length;n<o;n++)if(p[n]===e)return p.splice(n,1),o===1&&delete f[l],!0},eachObject:function(e,t){var n,o,l,c,h,f,p=this._grid;for(n in p)for(o in h=p[n])for(l=0,c=(f=h[o]).length;l<c;l++)e.call(t,f[l])&&(l--,c--)},getNearObject:function(e){var t,n,o,l,c,h,f,p,d=this._getCoord(e.x),g=this._getCoord(e.y),_=this._objectPoint,E=this._sqCellSize,G=null;for(t=g-1;t<=g+1;t++)if(l=this._grid[t]){for(n=d-1;n<=d+1;n++)if(c=l[n])for(o=0,h=c.length;o<h;o++)f=c[o],((p=this._sqDist(_[L.Util.stamp(f)],e))<E||p<=E&&G===null)&&(E=p,G=f)}return G},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,o,l,c=0,h=null,f=[];for(n=t.length-1;0<=n;n--)o=t[n],0<(l=this.getDistant(o,e))&&(f.push(o),c<l&&(c=l,h=o));return{maxPoint:h,newPoints:f}},buildConvexHull:function(e,t){var n=[],o=this.findMostDistantPointFromBaseLine(e,t);return o.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],o.maxPoint],o.newPoints))).concat(this.buildConvexHull([o.maxPoint,e[1]],o.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,o=!1,l=!1,c=!1,h=null,f=null,p=null,d=null,g=null,_=null;for(t=e.length-1;0<=t;t--){var E=e[t];(n===!1||E.lat>n)&&(n=(h=E).lat),(o===!1||E.lat<o)&&(o=(f=E).lat),(l===!1||E.lng>l)&&(l=(p=E).lng),(c===!1||E.lng<c)&&(c=(d=E).lng)}return g=o!==n?(_=f,h):(_=d,p),[].concat(this.buildConvexHull([_,g],e),this.buildConvexHull([g,_],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),o=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),o.push(e);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,o,l=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,c=this._2PI/e,h=[];for(l=Math.max(l,35),h.length=e,n=0;n<e;n++)o=this._circleStartAngle+n*c,h[n]=new L.Point(t.x+l*Math.cos(o),t.y+l*Math.sin(o))._round();return h},_generatePointsSpiral:function(e,t){var n,o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,h=o*this._spiralLengthFactor*this._2PI,f=0,p=[];for(n=p.length=e;0<=n;n--)n<e&&(p[n]=new L.Point(t.x+l*Math.cos(f),t.y+l*Math.sin(f))._round()),l+=h/(f+=c/l+5e-4*n);return p},_noanimationUnspiderfy:function(){var e,t,n=this._group,o=n._map,l=n._featureGroup,c=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=c.length-1;0<=t;t--)e=c[t],l.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(o.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:c}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,o,l,c,h=this._group,f=h._map,p=h._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(h._ignoreMove=!0,n=0;n<e.length;n++)c=f.layerPointToLatLng(t[n]),o=e[n],l=new L.Polyline([this._latlng,c],d),f.addLayer(l),o._spiderLeg=l,o._preSpiderfyLatlng=o._latlng,o.setLatLng(c),o.setZIndexOffset&&o.setZIndexOffset(1e6),p.addLayer(o);this.setOpacity(.3),h._ignoreMove=!1,h.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,o,l,c,h,f,p=this,d=this._group,g=d._map,_=d._featureGroup,E=this._latlng,G=g.latLngToLayerPoint(E),A=L.Path.SVG,R=L.extend({},this._group.options.spiderLegPolylineOptions),O=R.opacity;for(O===void 0&&(O=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),A?(R.opacity=0,R.className=(R.className||"")+" leaflet-cluster-spider-leg"):R.opacity=O,d._ignoreMove=!0,n=0;n<e.length;n++)o=e[n],f=g.layerPointToLatLng(t[n]),l=new L.Polyline([E,f],R),g.addLayer(l),o._spiderLeg=l,A&&(h=(c=l._path).getTotalLength()+.1,c.style.strokeDasharray=h,c.style.strokeDashoffset=h),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),_.addLayer(o),o._setPos&&o._setPos(G);for(d._forceLayout(),d._animationStart(),n=e.length-1;0<=n;n--)f=g.layerPointToLatLng(t[n]),(o=e[n])._preSpiderfyLatlng=o._latlng,o.setLatLng(f),o.clusterShow&&o.clusterShow(),A&&((c=(l=o._spiderLeg)._path).style.strokeDashoffset=0,l.setStyle({opacity:O}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:p,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,o,l,c,h,f=this,p=this._group,d=p._map,g=p._featureGroup,_=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),E=this.getAllChildMarkers(null,!0),G=L.Path.SVG;for(p._ignoreMove=!0,p._animationStart(),this.setOpacity(1),n=E.length-1;0<=n;n--)(t=E[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,h=!0,t._setPos&&(t._setPos(_),h=!1),t.clusterHide&&(t.clusterHide(),h=!1),h&&g.removeLayer(t),G&&(c=(l=(o=t._spiderLeg)._path).getTotalLength()+.1,l.style.strokeDashoffset=c,o.setStyle({opacity:0})));p._ignoreMove=!1,setTimeout(function(){var A=0;for(n=E.length-1;0<=n;n--)(t=E[n])._spiderLeg&&A++;for(n=E.length-1;0<=n;n--)(t=E[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<A&&g.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);p._animationEnd(),p.fire("unspiderfied",{cluster:f,markers:E})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),r.MarkerClusterGroup=a,r.MarkerCluster=u,Object.defineProperty(r,"__esModule",{value:!0})})})(Zt,Zt.exports);const{Error:Me,console:Cn}=It,Mn="src/lib/Map/Leaflet.svelte";function tt(s){let i;const r=s[15].default,a=Mt(r,s,s[14],null),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,n){a&&a.m(t,n),i=!0},p:function(t,n){a&&a.p&&(!i||n&16384)&&St(a,r,t,t[14],i?Et(r,t[14],n,null):Pt(t[14]),null)},i:function(t){i||(M(a,t),i=!0)},o:function(t){z(a,t),i=!1},d:function(t){a&&a.d(t)}};return V("SvelteRegisterBlock",{block:u,id:tt.name,type:"if",source:"(268:2) {#if map}",ctx:s}),u}function nt(s){let i,r,a=s[0]&&tt(s);const u={c:function(){i=T("div"),a&&a.c(),this.h()},l:function(t){i=j(t,"DIV",{class:!0});var n=H(i);a&&a.l(n),n.forEach(P),this.h()},h:function(){B(i,"class","w-full h-full"),D(i,Mn,266,0,7231)},m:function(t,n){X(t,i,n),a&&a.m(i,null),s[16](i),r=!0},p:function(t,[n]){t[0]?a?(a.p(t,n),n&1&&M(a,1)):(a=tt(t),a.c(),M(a,1),a.m(i,null)):a&&(x(),z(a,1,1,()=>{a=null}),$())},i:function(t){r||(M(a),r=!0)},o:function(t){z(a),r=!1},d:function(t){t&&P(i),a&&a.d(),s[16](null)}};return V("SvelteRegisterBlock",{block:u,id:nt.name,type:"component",source:"",ctx:s}),u}function Sn(s,i,r){let a,u,e,t,n,o,l;K(Ce,"territoriesVisible"),J(s,Ce,m=>r(7,a=m)),K(Ae,"filteredStore"),J(s,Ae,m=>r(8,u=m)),K(We,"filtersActive"),J(s,We,m=>r(9,e=m)),K(ce,"currentSidebar"),J(s,ce,m=>r(10,t=m)),K(Xe,"currentMapStyleId"),J(s,Xe,m=>r(11,n=m)),K(Qe,"currentMapStyleIndex"),J(s,Qe,m=>r(12,o=m)),K(ue,"darkMode"),J(s,ue,m=>r(13,l=m));let{$$slots:c={},$$scope:h}=i;Le("Leaflet",c,["default"]);let{bounds:f=void 0}=i,{view:p=void 0}=i,{zoom:d=void 0}=i;const g=pe();let _,E,G,A=null,R=null,O,N,Z=null;async function C(m){if(!Z)try{Z=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),A=await Tt(m,Z),R=await jt(m,Z)}catch(y){console.error("Error fetching territories data:",y)}}const S=Q.Control.extend({onAdd(m){const y=Q.DomUtil.create("div","map-toolbar-container");return new Gt({target:y,props:{mapInstance:m}}),y}});Ie(()=>{if(!f&&(!p||!d))throw new Error("Must set either bounds, or view and zoom.");r(0,_=Q.map(E,{maxZoom:18,zoomControl:!1}));const m=Q.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});_.addLayer(m),Ge.set(m),f?(_.fitBounds(f),Se.set(f)):p&&d&&_.setView(p,d),_.whenReady(()=>{if(!f){const y=_.getBounds();Se.set(y)}zt.set(_),r(5,G=new Ke({Language:"fr",style:Q.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(_)),new S({position:"topright"}).addTo(_)}),_.on("click",function(y){t==="submissions"&&(Rt.set(y.latlng),O&&_.removeLayer(O),r(6,O=Q.marker([y.latlng.lat,y.latlng.lng],{icon:N}).addTo(_)))}).on("zoom",y=>g("zoom",y)).on("moveend",()=>{const y=_.getBounds();Se.set(y)}).on("popupopen",async y=>{y.popup.update(),await Ot()})});function k(){console.log("Adding territories"),_&&(!A||!R?C(_):(_.addLayer(A),_.addLayer(R)))}function w(){_&&(A&&_.removeLayer(A),R&&_.removeLayer(R),console.log("Territories removed"))}Be(()=>{_==null||_.remove(),r(0,_=void 0),w()}),Ze("map",{getMap:()=>_});function v(m){_&&G&&(_.removeLayer(G),r(5,G=new Ke({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(_)))}const U=["bounds","view","zoom"];Object.keys(i).forEach(m=>{!~U.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Cn.warn(`<Leaflet> was created with unknown prop '${m}'`)});function F(m){Vt[m?"unshift":"push"](()=>{E=m,r(1,E)})}return s.$$set=m=>{"bounds"in m&&r(2,f=m.bounds),"view"in m&&r(3,p=m.view),"zoom"in m&&r(4,d=m.zoom),"$$scope"in m&&r(14,h=m.$$scope)},s.$capture_state=()=>({onMount:Ie,onDestroy:Be,setContext:Ze,createEventDispatcher:pe,tick:Ot,L:Q,addTerritoriesLayer:Tt,addTerritoriesLabels:jt,MaptilerLayer:Ke,MaptilerStyle:bn,pinSvg:Je,Toolbar:Gt,currentMapStyleId:Xe,currentMapStyleIndex:Qe,mapBoundsStore:Se,territoriesVisible:Ce,clusterGroupStore:Ge,darkMode:ue,currentSidebar:ce,filteredStore:Ae,filtersActive:We,userLatLng:Rt,mapInstanceStore:zt,bounds:f,view:p,zoom:d,dispatch:g,map:_,mapElement:E,mtLayer:G,territoriesLayer:A,labelsLayer:R,marker:O,icon:N,territoriesData:Z,initializeTerritories:C,ToolbarControl:S,addTerritories:k,removeTerritories:w,updateMapStyle:v,$territoriesVisible:a,$filteredStore:u,$filtersActive:e,$currentSidebar:t,$currentMapStyleId:n,$currentMapStyleIndex:o,$darkMode:l}),s.$inject_state=m=>{"bounds"in m&&r(2,f=m.bounds),"view"in m&&r(3,p=m.view),"zoom"in m&&r(4,d=m.zoom),"map"in m&&r(0,_=m.map),"mapElement"in m&&r(1,E=m.mapElement),"mtLayer"in m&&r(5,G=m.mtLayer),"territoriesLayer"in m&&(A=m.territoriesLayer),"labelsLayer"in m&&(R=m.labelsLayer),"marker"in m&&r(6,O=m.marker),"icon"in m&&(N=m.icon),"territoriesData"in m&&(Z=m.territoriesData)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{if(s.$$.dirty&8192){let m=l==="dark"?`<div style="width: 30px; height: 40px; filter: invert(100%);">
        <img src="${Je}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`:`<div style="width: 30px; height: 40px;">
        <img src="${Je}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`;N=Q.divIcon({html:m,className:"map-marker",iconSize:Q.point(25,65)})}if(s.$$.dirty&1089&&t!=="submissions"&&O&&(_.removeLayer(O),r(6,O=null)),s.$$.dirty&29&&_&&(f?_.fitBounds(f):p&&d&&_.setView(p,d)),s.$$.dirty&6177&&n&&(o===2?(Ce.set(!0),ue.set("light"),console.log("setting territoriesVisible to true")):o===0?(Ce.set(!1),ue.set("dark")):(Ce.set(!1),ue.set("light")),_&&G&&v(n)),s.$$.dirty&1793&&_&&t==="tools"&&u.length>0&&e){const m=Q.latLngBounds(u.map(y=>Q.latLng(y.latLng)));_.fitBounds(m,{padding:[50,50]})}s.$$.dirty&128&&(a?k():w())},[_,E,f,p,d,G,O,a,u,e,t,n,o,l,h,c,F]}class sn extends ve{constructor(i){super(i),ye(this,i,Sn,nt,ge,{bounds:2,view:3,zoom:4}),V("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:i,id:nt.name})}get bounds(){throw new Me("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(i){throw new Me("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new Me("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(i){throw new Me("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new Me("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(i){throw new Me("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function it(s){let i;const r=s[7].default,a=Mt(r,s,s[6],null),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,n){a&&a.m(t,n),i=!0},p:function(t,n){a&&a.p&&(!i||n&64)&&St(a,r,t,t[6],i?Et(r,t[6],n,null):Pt(t[6]),null)},i:function(t){i||(M(a,t),i=!0)},o:function(t){z(a,t),i=!1},d:function(t){a&&a.d(t)}};return V("SvelteRegisterBlock",{block:u,id:it.name,type:"if",source:"(69:0) {#if marker}",ctx:s}),u}function ot(s){let i,r,a=s[0]&&it(s);const u={c:function(){a&&a.c(),i=de()},l:function(t){a&&a.l(t),i=de()},m:function(t,n){a&&a.m(t,n),X(t,i,n),r=!0},p:function(t,[n]){t[0]?a?(a.p(t,n),n&1&&M(a,1)):(a=it(t),a.c(),M(a,1),a.m(i.parentNode,i)):a&&(x(),z(a,1,1,()=>{a=null}),$())},i:function(t){r||(M(a),r=!0)},o:function(t){z(a),r=!1},d:function(t){t&&P(i),a&&a.d(t)}};return V("SvelteRegisterBlock",{block:u,id:ot.name,type:"component",source:"",ctx:s}),u}function Pn(s,i,r){let a,u;K(Ge,"clusterGroupStore"),J(s,Ge,d=>r(4,a=d)),K(Ye,"isMarkersVisible"),J(s,Ye,d=>r(5,u=d));let{$$slots:e={},$$scope:t}=i;Le("Marker",e,["default"]);let{width:n}=i,{height:o}=i,{latLng:l}=i,c,h=Ne("map").getMap();Ze("layer",{getLayer:()=>c});function f(d){let g=d==="dark"?`<div style="width: ${n}px; height: ${o}px; filter: invert(100%);">
          <img src="${be}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`:`<div style="width: ${n}px; height: ${o}px;">
          <img src="${be}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`,_=Q.divIcon({html:g,className:"map-marker",iconSize:Q.point(n,o)});c?(a.removeLayer(c),c.setIcon(_)):r(0,c=Q.marker(l,{icon:_})),a.addLayer(c)}Ie(()=>{h&&a&&ue.subscribe(d=>{f(d)})}),Be(()=>{c&&a&&(a.removeLayer(c),c.remove(),r(0,c=void 0))}),s.$$.on_mount.push(function(){n===void 0&&!("width"in i||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),o===void 0&&!("height"in i||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in i||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const p=["width","height","latLng"];return Object.keys(i).forEach(d=>{!~p.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Marker> was created with unknown prop '${d}'`)}),s.$$set=d=>{"width"in d&&r(1,n=d.width),"height"in d&&r(2,o=d.height),"latLng"in d&&r(3,l=d.latLng),"$$scope"in d&&r(6,t=d.$$scope)},s.$capture_state=()=>({onMount:Ie,onDestroy:Be,getContext:Ne,setContext:Ze,darkMode:ue,clusterGroupStore:Ge,isMarkersVisible:Ye,L:Q,monumentSvg:be,width:n,height:o,latLng:l,marker:c,mapInstance:h,createOrUpdateMarker:f,$clusterGroupStore:a,$isMarkersVisible:u}),s.$inject_state=d=>{"width"in d&&r(1,n=d.width),"height"in d&&r(2,o=d.height),"latLng"in d&&r(3,l=d.latLng),"marker"in d&&r(0,c=d.marker),"mapInstance"in d&&(h=d.mapInstance)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{s.$$.dirty&49&&c&&a&&(u?a.addLayer(c):a.removeLayer(c))},[c,n,o,l,a,u,t,e]}class an extends ve{constructor(i){super(i),ye(this,i,Pn,ot,ge,{width:1,height:2,latLng:3}),V("SvelteRegisterComponent",{component:this,tagName:"Marker",options:i,id:ot.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const En="src/lib/Map/Popup.svelte",In=s=>({popup:s&1}),Nt=s=>({popup:s[0]});function rt(s){let i;const r=s[4].default,a=Mt(r,s,s[3],Nt),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,n){a&&a.m(t,n),i=!0},p:function(t,n){a&&a.p&&(!i||n&9)&&St(a,r,t,t[3],i?Et(r,t[3],n,In):Pt(t[3]),Nt)},i:function(t){i||(M(a,t),i=!0)},o:function(t){z(a,t),i=!1},d:function(t){a&&a.d(t)}};return V("SvelteRegisterBlock",{block:u,id:rt.name,type:"if",source:"(47:2) {#if open}",ctx:s}),u}function st(s){let i,r,a=s[2]&&rt(s);const u={c:function(){i=T("div"),a&&a.c(),this.h()},l:function(t){i=j(t,"DIV",{class:!0});var n=H(i);a&&a.l(n),n.forEach(P),this.h()},h:function(){B(i,"class","popPadding s-vUHHe_W0o0FW"),D(i,En,45,0,857)},m:function(t,n){X(t,i,n),a&&a.m(i,null),s[5](i),r=!0},p:function(t,[n]){t[2]?a?(a.p(t,n),n&4&&M(a,1)):(a=rt(t),a.c(),M(a,1),a.m(i,null)):a&&(x(),z(a,1,1,()=>{a=null}),$())},i:function(t){r||(M(a),r=!0)},o:function(t){z(a),r=!1},d:function(t){t&&P(i),a&&a.d(),s[5](null)}};return V("SvelteRegisterBlock",{block:u,id:st.name,type:"component",source:"",ctx:s}),u}function Bn(s,i,r){let{$$slots:a={},$$scope:u}=i;Le("Popup",a,["default"]);let e,t,n=!1;const o=Ne("layer"),l=o.getLayer();Ie(()=>{r(0,e=Q.popup().setContent(t)),e._initLayout(),l&&(l.bindPopup(e),l.on("popupopen",()=>{r(2,n=!0),Ee.set(!0)}),l.on("popupclose",()=>{r(2,n=!1),Ee.set(!1)}))}),Be(()=>{l&&l.unbindPopup(),e&&(e.remove(),r(0,e=void 0))});const c=[];Object.keys(i).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Popup> was created with unknown prop '${f}'`)});function h(f){Vt[f?"unshift":"push"](()=>{t=f,r(1,t)})}return s.$$set=f=>{"$$scope"in f&&r(3,u=f.$$scope)},s.$capture_state=()=>({onMount:Ie,onDestroy:Be,getContext:Ne,L:Q,isPopupOpen:Ee,popup:e,popupElement:t,open:n,layerContext:o,layer:l}),s.$inject_state=f=>{"popup"in f&&r(0,e=f.popup),"popupElement"in f&&r(1,t=f.popupElement),"open"in f&&r(2,n=f.open)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[e,t,n,u,a,h]}class ln extends ve{constructor(i){super(i),ye(this,i,Bn,st,ge,{}),V("SvelteRegisterComponent",{component:this,tagName:"Popup",options:i,id:st.name})}}const oe="src/lib/Map/PopupContent.svelte";function at(s){let i,r;i=new Kt({props:{photos:s[6],baseUrl:s[7]},$$inline:!0});const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},p:function(e,t){const n={};t&64&&(n.photos=e[6]),t&128&&(n.baseUrl=e[7]),i.$set(n)},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:at.name,type:"if",source:"(24:2) {#if photos && photos.length}",ctx:s}),a}function lt(s){let i,r,a;const u={c:function(){i=T("div"),r=T("p"),a=new vn(!1),this.h()},l:function(t){i=j(t,"DIV",{class:!0});var n=H(i);r=j(n,"P",{class:!0});var o=H(r);a=yn(o,!1),o.forEach(P),n.forEach(P),this.h()},h:function(){a.a=null,B(r,"class","description"),D(r,oe,42,8,1149),B(i,"class","text-truncate"),D(i,oe,41,6,1113)},m:function(t,n){X(t,i,n),b(i,r),a.m(s[5],r)},p:function(t,n){n&32&&a.p(t[5])},d:function(t){t&&P(i)}};return V("SvelteRegisterBlock",{block:u,id:lt.name,type:"if",source:"(41:4) {#if description}",ctx:s}),u}function ct(s){let i,r,a,u,e,t,n,o,l,c,h,f,p,d,g,_,E,G,A,R,O,N,Z="learn more",C,S,k,w=s[6]&&s[6].length&&at(s),v=s[5]&&lt(s);const U={c:function(){w&&w.c(),i=q(),r=T("div"),a=T("div"),u=T("h2"),e=re(s[2]),t=q(),n=T("h3"),o=re(s[3]),l=q(),c=T("div"),h=T("div"),f=re("#"),p=re(s[4]),d=q(),g=T("div"),_=T("img"),G=q(),A=T("div"),v&&v.c(),R=q(),O=T("div"),N=T("button"),N.textContent=Z,this.h()},l:function(m){w&&w.l(m),i=W(m),r=j(m,"DIV",{class:!0});var y=H(r);a=j(y,"DIV",{class:!0});var I=H(a);u=j(I,"H2",{});var Y=H(u);e=se(Y,s[2]),Y.forEach(P),t=W(I),n=j(I,"H3",{});var _e=H(n);o=se(_e,s[3]),_e.forEach(P),I.forEach(P),l=W(y),c=j(y,"DIV",{class:!0});var ae=H(c);h=j(ae,"DIV",{class:!0});var ke=H(h);f=se(ke,"#"),p=se(ke,s[4]),ke.forEach(P),d=W(ae),g=j(ae,"DIV",{style:!0});var Oe=H(g);_=j(Oe,"IMG",{src:!0,alt:!0,style:!0}),Oe.forEach(P),ae.forEach(P),y.forEach(P),G=W(m),A=j(m,"DIV",{class:!0});var ze=H(A);v&&v.l(ze),R=W(ze),O=j(ze,"DIV",{class:!0});var Bt=H(O);N=j(Bt,"BUTTON",{class:!0,"data-svelte-h":!0}),Ht(N)!=="svelte-1h1xepw"&&(N.textContent=Z),Bt.forEach(P),ze.forEach(P),this.h()},h:function(){D(u,oe,28,6,703),D(n,oe,29,6,725),B(a,"class","flex flex-col items-start"),D(a,oe,27,4,657),B(h,"class","monument-id"),D(h,oe,32,8,813),he(_.src,E=be)||B(_,"src",E),B(_,"alt","Monument Marker"),fe(_,"width","100%"),fe(_,"height","100%"),D(_,oe,34,12,922),fe(g,"width",s[0]+"px"),fe(g,"height",s[1]+"px"),D(g,oe,33,8,858),B(c,"class","flex flex-row items-center"),D(c,oe,31,4,764),B(r,"class","flex flex-row items-center"),D(r,oe,26,2,612),B(N,"class","learn-more-button"),D(N,oe,46,6,1264),B(O,"class","learn-more-container"),D(O,oe,45,4,1223),B(A,"class","description-container"),D(A,oe,39,2,1049)},m:function(m,y){w&&w.m(m,y),X(m,i,y),X(m,r,y),b(r,a),b(a,u),b(u,e),b(a,t),b(a,n),b(n,o),b(r,l),b(r,c),b(c,h),b(h,f),b(h,p),b(c,d),b(c,g),b(g,_),X(m,G,y),X(m,A,y),v&&v.m(A,null),b(A,R),b(A,O),b(O,N),C=!0,S||(k=Pe(N,"click",s[8],!1,!1,!1,!1),S=!0)},p:function(m,[y]){m[6]&&m[6].length?w?(w.p(m,y),y&64&&M(w,1)):(w=at(m),w.c(),M(w,1),w.m(i.parentNode,i)):w&&(x(),z(w,1,1,()=>{w=null}),$()),(!C||y&4)&&me(e,m[2]),(!C||y&8)&&me(o,m[3]),(!C||y&16)&&me(p,m[4]),(!C||y&1)&&fe(g,"width",m[0]+"px"),(!C||y&2)&&fe(g,"height",m[1]+"px"),m[5]?v?v.p(m,y):(v=lt(m),v.c(),v.m(A,R)):v&&(v.d(1),v=null)},i:function(m){C||(M(w),C=!0)},o:function(m){z(w),C=!1},d:function(m){m&&(P(i),P(r),P(G),P(A)),w&&w.d(m),v&&v.d(),S=!1,k()}};return V("SvelteRegisterBlock",{block:U,id:ct.name,type:"component",source:"",ctx:s}),U}function On(s,i,r){let{$$slots:a={},$$scope:u}=i;Le("PopupContent",a,[]);let{width:e}=i,{height:t}=i,{name:n}=i,{municipality:o}=i,{id:l}=i,{description:c}=i,{photos:h}=i,{baseUrl:f}=i;const p=pe();function d(_){p("closeAndShowDetails",{id:l,event:_})}s.$$.on_mount.push(function(){e===void 0&&!("width"in i||s.$$.bound[s.$$.props.width])&&console.warn("<PopupContent> was created without expected prop 'width'"),t===void 0&&!("height"in i||s.$$.bound[s.$$.props.height])&&console.warn("<PopupContent> was created without expected prop 'height'"),n===void 0&&!("name"in i||s.$$.bound[s.$$.props.name])&&console.warn("<PopupContent> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||s.$$.bound[s.$$.props.municipality])&&console.warn("<PopupContent> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||s.$$.bound[s.$$.props.id])&&console.warn("<PopupContent> was created without expected prop 'id'"),c===void 0&&!("description"in i||s.$$.bound[s.$$.props.description])&&console.warn("<PopupContent> was created without expected prop 'description'"),h===void 0&&!("photos"in i||s.$$.bound[s.$$.props.photos])&&console.warn("<PopupContent> was created without expected prop 'photos'"),f===void 0&&!("baseUrl"in i||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<PopupContent> was created without expected prop 'baseUrl'")});const g=["width","height","name","municipality","id","description","photos","baseUrl"];return Object.keys(i).forEach(_=>{!~g.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&console.warn(`<PopupContent> was created with unknown prop '${_}'`)}),s.$$set=_=>{"width"in _&&r(0,e=_.width),"height"in _&&r(1,t=_.height),"name"in _&&r(2,n=_.name),"municipality"in _&&r(3,o=_.municipality),"id"in _&&r(4,l=_.id),"description"in _&&r(5,c=_.description),"photos"in _&&r(6,h=_.photos),"baseUrl"in _&&r(7,f=_.baseUrl)},s.$capture_state=()=>({createEventDispatcher:pe,ImageArray:Kt,monumentSvg:be,width:e,height:t,name:n,municipality:o,id:l,description:c,photos:h,baseUrl:f,dispatch:p,handleLearnMoreClick:d}),s.$inject_state=_=>{"width"in _&&r(0,e=_.width),"height"in _&&r(1,t=_.height),"name"in _&&r(2,n=_.name),"municipality"in _&&r(3,o=_.municipality),"id"in _&&r(4,l=_.id),"description"in _&&r(5,c=_.description),"photos"in _&&r(6,h=_.photos),"baseUrl"in _&&r(7,f=_.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[e,t,n,o,l,c,h,f,d]}class cn extends ve{constructor(i){super(i),ye(this,i,On,ct,ge,{width:0,height:1,name:2,municipality:3,id:4,description:5,photos:6,baseUrl:7}),V("SvelteRegisterComponent",{component:this,tagName:"PopupContent",options:i,id:ct.name})}get width(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const qe="src/lib/UI/ImagePreview.svelte";function un(s){let i,r,a,u,e,t,n;const o={c:function(){i=T("img"),u=q(),e=T("img"),this.h()},l:function(c){i=j(c,"IMG",{src:!0,alt:!0,class:!0}),u=W(c),e=j(c,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){he(i.src,r=`${s[1]}${s[0][0].url}`)||B(i,"src",r),B(i,"alt",a=s[0][0].alt),B(i,"class","base-photo s-LLFXHRRAcbiM"),D(i,qe,13,8,325),he(e.src,t=`${s[1]}${s[0][1].url}`)||B(e,"src",t),B(e,"alt",n=s[0][1].alt),B(e,"class","overlay s-LLFXHRRAcbiM"),D(e,qe,18,8,459)},m:function(c,h){X(c,i,h),X(c,u,h),X(c,e,h)},p:function(c,h){h&3&&!he(i.src,r=`${c[1]}${c[0][0].url}`)&&B(i,"src",r),h&1&&a!==(a=c[0][0].alt)&&B(i,"alt",a),h&3&&!he(e.src,t=`${c[1]}${c[0][1].url}`)&&B(e,"src",t),h&1&&n!==(n=c[0][1].alt)&&B(e,"alt",n)},d:function(c){c&&(P(i),P(u),P(e))}};return V("SvelteRegisterBlock",{block:o,id:un.name,type:"if",source:"(13:33) ",ctx:s}),o}function hn(s){let i,r,a;const u={c:function(){i=T("img"),this.h()},l:function(t){i=j(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){he(i.src,r=`${s[1]}${s[0][0].url}`)||B(i,"src",r),B(i,"alt",a=s[0][0].alt),B(i,"class","single-photo s-LLFXHRRAcbiM"),D(i,qe,7,8,155)},m:function(t,n){X(t,i,n)},p:function(t,n){n&3&&!he(i.src,r=`${t[1]}${t[0][0].url}`)&&B(i,"src",r),n&1&&a!==(a=t[0][0].alt)&&B(i,"alt",a)},d:function(t){t&&P(i)}};return V("SvelteRegisterBlock",{block:u,id:hn.name,type:"if",source:"(7:4) {#if photos && photos.length === 1}",ctx:s}),u}function ut(s){let i;function r(t,n){if(t[0]&&t[0].length===1)return hn;if(t[0].length>=2)return un}let a=r(s),u=a&&a(s);const e={c:function(){i=T("div"),u&&u.c(),this.h()},l:function(n){i=j(n,"DIV",{class:!0});var o=H(i);u&&u.l(o),o.forEach(P),this.h()},h:function(){B(i,"class","image-container s-LLFXHRRAcbiM"),D(i,qe,5,0,77)},m:function(n,o){X(n,i,o),u&&u.m(i,null)},p:function(n,[o]){a===(a=r(n))&&u?u.p(n,o):(u&&u.d(1),u=a&&a(n),u&&(u.c(),u.m(i,null)))},i:Ve,o:Ve,d:function(n){n&&P(i),u&&u.d()}};return V("SvelteRegisterBlock",{block:e,id:ut.name,type:"component",source:"",ctx:s}),e}function Un(s,i,r){let{$$slots:a={},$$scope:u}=i;Le("ImagePreview",a,[]);let{photos:e={}}=i,{baseUrl:t=""}=i;const n=["photos","baseUrl"];return Object.keys(i).forEach(o=>{!~n.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<ImagePreview> was created with unknown prop '${o}'`)}),s.$$set=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},s.$capture_state=()=>({photos:e,baseUrl:t}),s.$inject_state=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[e,t]}class fn extends ve{constructor(i){super(i),ye(this,i,Un,ut,ge,{photos:0,baseUrl:1}),V("SvelteRegisterComponent",{component:this,tagName:"ImagePreview",options:i,id:ut.name})}get photos(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const le="src/lib/UI/SearchItem.svelte";function ht(s){let i,r;i=new fn({props:{photos:s[3],baseUrl:s[4]},$$inline:!0});const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},p:function(e,t){const n={};t&8&&(n.photos=e[3]),t&16&&(n.baseUrl=e[4]),i.$set(n)},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:ht.name,type:"if",source:"(26:4) {#if photos && photos.length}",ctx:s}),a}function ft(s){let i,r,a,u,e,t,n,o,l,c,h,f,p,d,g,_,E,G,A,R,O,N,Z="learn more",C,S,k,w=s[3]&&s[3].length&&ht(s);const v={c:function(){i=T("div"),w&&w.c(),r=q(),a=T("div"),u=T("div"),e=re("#"),t=re(s[2]),n=q(),o=T("h2"),l=re(s[0]),c=q(),h=T("h3"),f=re(s[1]),p=q(),d=T("div"),g=T("div"),_=T("img"),G=q(),A=T("div"),R=q(),O=T("div"),N=T("button"),N.textContent=Z,this.h()},l:function(F){i=j(F,"DIV",{class:!0});var m=H(i);w&&w.l(m),r=W(m),a=j(m,"DIV",{class:!0});var y=H(a);u=j(y,"DIV",{class:!0});var I=H(u);e=se(I,"#"),t=se(I,s[2]),I.forEach(P),n=W(y),o=j(y,"H2",{});var Y=H(o);l=se(Y,s[0]),Y.forEach(P),c=W(y),h=j(y,"H3",{});var _e=H(h);f=se(_e,s[1]),_e.forEach(P),y.forEach(P),p=W(m),d=j(m,"DIV",{class:!0});var ae=H(d);g=j(ae,"DIV",{style:!0});var ke=H(g);_=j(ke,"IMG",{src:!0,alt:!0,style:!0}),ke.forEach(P),G=W(ae),A=j(ae,"DIV",{class:!0}),H(A).forEach(P),R=W(ae),O=j(ae,"DIV",{});var Oe=H(O);N=j(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ht(N)!=="svelte-1h1xepw"&&(N.textContent=Z),Oe.forEach(P),ae.forEach(P),m.forEach(P),this.h()},h:function(){B(u,"class","monument-id"),D(u,le,30,8,790),D(o,le,31,8,835),D(h,le,32,8,859),B(a,"class","flex flex-col items-start ml-7 space-y-2"),D(a,le,29,4,727),he(_.src,E=be)||B(_,"src",E),B(_,"alt","Monument Marker"),fe(_,"width","100%"),fe(_,"height","100%"),D(_,le,37,12,1043),fe(g,"width",s[5]+"px"),fe(g,"height",s[6]+"px"),D(g,le,36,8,979),B(A,"class","flex-grow"),D(A,le,39,8,1151),B(N,"class","learn-more-button s-bEGFb-JhA8_4"),D(N,le,41,12,1207),D(O,le,40,8,1189),B(d,"class","flex flex-col flex-wrap justify-between items-end"),D(d,le,35,4,899),B(i,"class","result-container flex flex-row justify-between items-stretch p-3 lg:p-4 border border-black bg-white m-2 rounded-sm"),D(i,le,24,0,504)},m:function(F,m){X(F,i,m),w&&w.m(i,null),b(i,r),b(i,a),b(a,u),b(u,e),b(u,t),b(a,n),b(a,o),b(o,l),b(a,c),b(a,h),b(h,f),b(i,p),b(i,d),b(d,g),b(g,_),b(d,G),b(d,A),b(d,R),b(d,O),b(O,N),C=!0,S||(k=Pe(N,"click",s[7],!1,!1,!1,!1),S=!0)},p:function(F,[m]){F[3]&&F[3].length?w?(w.p(F,m),m&8&&M(w,1)):(w=ht(F),w.c(),M(w,1),w.m(i,r)):w&&(x(),z(w,1,1,()=>{w=null}),$()),(!C||m&4)&&me(t,F[2]),(!C||m&1)&&me(l,F[0]),(!C||m&2)&&me(f,F[1])},i:function(F){C||(M(w),C=!0)},o:function(F){z(w),C=!1},d:function(F){F&&P(i),w&&w.d(),S=!1,k()}};return V("SvelteRegisterBlock",{block:v,id:ft.name,type:"component",source:"",ctx:s}),v}function An(s,i,r){let{$$slots:a={},$$scope:u}=i;Le("SearchItem",a,[]);let e=30,t=30,{name:n}=i,{municipality:o}=i,{id:l}=i,{photos:c}=i,{baseUrl:h}=i;const f=pe();function p(g){f("closeAndShowDetails",{id:l,event:g})}s.$$.on_mount.push(function(){n===void 0&&!("name"in i||s.$$.bound[s.$$.props.name])&&console.warn("<SearchItem> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||s.$$.bound[s.$$.props.municipality])&&console.warn("<SearchItem> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||s.$$.bound[s.$$.props.id])&&console.warn("<SearchItem> was created without expected prop 'id'"),c===void 0&&!("photos"in i||s.$$.bound[s.$$.props.photos])&&console.warn("<SearchItem> was created without expected prop 'photos'"),h===void 0&&!("baseUrl"in i||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<SearchItem> was created without expected prop 'baseUrl'")});const d=["name","municipality","id","photos","baseUrl"];return Object.keys(i).forEach(g=>{!~d.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&console.warn(`<SearchItem> was created with unknown prop '${g}'`)}),s.$$set=g=>{"name"in g&&r(0,n=g.name),"municipality"in g&&r(1,o=g.municipality),"id"in g&&r(2,l=g.id),"photos"in g&&r(3,c=g.photos),"baseUrl"in g&&r(4,h=g.baseUrl)},s.$capture_state=()=>({createEventDispatcher:pe,ImagePreview:fn,monumentSvg:be,width:e,height:t,name:n,municipality:o,id:l,photos:c,baseUrl:h,dispatch:f,handleLearnMoreClick:p}),s.$inject_state=g=>{"width"in g&&r(5,e=g.width),"height"in g&&r(6,t=g.height),"name"in g&&r(0,n=g.name),"municipality"in g&&r(1,o=g.municipality),"id"in g&&r(2,l=g.id),"photos"in g&&r(3,c=g.photos),"baseUrl"in g&&r(4,h=g.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),[n,o,l,c,h,e,t,p]}class dn extends ve{constructor(i){super(i),ye(this,i,An,ft,ge,{name:0,municipality:1,id:2,photos:3,baseUrl:4}),V("SvelteRegisterComponent",{component:this,tagName:"SearchItem",options:i,id:ft.name})}get name(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Gn}=It,Te="src/lib/UI/SearchResults.svelte";function je(s,i,r){const a=s.slice();return a[6]=i[r].name,a[7]=i[r].photos,a[8]=i[r].municipality,a[9]=i[r].id,a[11]=r,a}function dt(s,i){let r,a,u;a=new dn({props:{name:i[6],photos:i[7],municipality:i[8],id:i[9],baseUrl:i[1]},$$inline:!0}),a.$on("closeAndShowDetails",i[4]);const e={key:s,first:null,c:function(){r=de(),ee(a.$$.fragment),this.h()},l:function(n){r=de(),te(a.$$.fragment,n),this.h()},h:function(){this.first=r},m:function(n,o){X(n,r,o),ne(a,n,o),u=!0},p:function(n,o){i=n;const l={};o&1&&(l.name=i[6]),o&1&&(l.photos=i[7]),o&1&&(l.municipality=i[8]),o&1&&(l.id=i[9]),o&2&&(l.baseUrl=i[1]),a.$set(l)},i:function(n){u||(M(a.$$.fragment,n),u=!0)},o:function(n){z(a.$$.fragment,n),u=!1},d:function(n){n&&P(r),ie(a,n)}};return V("SvelteRegisterBlock",{block:e,id:dt.name,type:"each",source:"(40:2) {#each results as { name, photos, municipality, id }",ctx:i}),e}function _t(s){let i,r,a,u,e,t,n=s[0].length+"",o,l,c=s[0].length>1?"places ":"place ",h,f,p,d=[],g=new Map,_,E,G,A,R,O=He(s[0]);const N=C=>C[9]+"-"+C[11];Fe(s,O,je,N);for(let C=0;C<O.length;C+=1){let S=je(s,O,C),k=N(S);g.set(k,d[C]=dt(k,S))}const Z={c:function(){i=T("div"),r=T("button"),a=T("img"),e=q(),t=T("p"),o=re(n),l=q(),h=re(c),f=re(`
    replied to your call...`),p=q();for(let S=0;S<d.length;S+=1)d[S].c();this.h()},l:function(S){i=j(S,"DIV",{class:!0});var k=H(i);r=j(k,"BUTTON",{class:!0});var w=H(r);a=j(w,"IMG",{src:!0,alt:!0}),w.forEach(P),e=W(k),t=j(k,"P",{});var v=H(t);o=se(v,n),l=W(v),h=se(v,c),f=se(v,`
    replied to your call...`),v.forEach(P),p=W(k);for(let U=0;U<d.length;U+=1)d[U].l(k);k.forEach(P),this.h()},h:function(){he(a.src,u=Jt)||B(a,"src",u),B(a,"alt","Close Sidebar"),D(a,Te,32,4,736),B(r,"class","close-button"),D(r,Te,31,2,679),D(t,Te,34,2,795),B(i,"class","sidebar s-VgsW2gEiy9eW"),D(i,Te,26,0,577)},m:function(S,k){X(S,i,k),b(i,r),b(r,a),b(i,e),b(i,t),b(t,o),b(t,l),b(t,h),b(t,f),b(i,p);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(i,null);G=!0,A||(R=Pe(r,"click",s[3],!1,!1,!1,!1),A=!0)},p:function(S,[k]){(!G||k&1)&&n!==(n=S[0].length+"")&&me(o,n),(!G||k&1)&&c!==(c=S[0].length>1?"places ":"place ")&&me(h,c),k&7&&(O=He(S[0]),x(),Fe(S,O,je,N),d=qt(d,k,N,1,S,O,g,i,Wt,dt,null,je),$())},i:function(S){if(!G){for(let k=0;k<O.length;k+=1)M(d[k]);S&&Ft(()=>{G&&(E&&E.end(1),_=Xt(i,$e,{x:300,duration:800}),_.start())}),G=!0}},o:function(S){for(let k=0;k<d.length;k+=1)z(d[k]);_&&_.invalidate(),S&&(E=Qt(i,$e,{x:300,duration:800})),G=!1},d:function(S){S&&P(i);for(let k=0;k<d.length;k+=1)d[k].d();S&&E&&E.end(),A=!1,R()}};return V("SvelteRegisterBlock",{block:Z,id:_t.name,type:"component",source:"",ctx:s}),Z}function zn(s,i,r){let{$$slots:a={},$$scope:u}=i;Le("SearchResults",a,[]);const e=pe();let{results:t={}}=i,{baseUrl:n=""}=i;function o(f){e("closeAndShowDetails",{id:f.detail.id,event:f})}function l(){ce.set(null)}const c=["results","baseUrl"];Object.keys(i).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&Gn.warn(`<SearchResults> was created with unknown prop '${f}'`)});const h=f=>o(f);return s.$$set=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,n=f.baseUrl)},s.$capture_state=()=>({fly:$e,createEventDispatcher:pe,currentSidebar:ce,closeImage:Jt,dispatch:e,SearchItem:dn,results:t,baseUrl:n,handleDetails:o,closeSearch:l}),s.$inject_state=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,n=f.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{s.$$.dirty&1&&console.log("results",t)},[t,n,o,l,h]}class _n extends ve{constructor(i){super(i),ye(this,i,zn,_t,ge,{results:0,baseUrl:1}),V("SvelteRegisterComponent",{component:this,tagName:"SearchResults",options:i,id:_t.name})}get results(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set results(i){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Rn}=It,we="src/routes/map/+page.svelte";function De(s,i,r){const a=s.slice();return a[22]=i[r].latLng,a[23]=i[r].visible,a[24]=i[r].name,a[25]=i[r].description,a[26]=i[r].photos,a[27]=i[r].municipality,a[28]=i[r].id,a[30]=r,a}function mt(s){let i,r,a,u,e,t;const n={c:function(){i=T("h1"),r=re("*countermap"),this.h()},l:function(l){i=j(l,"H1",{class:!0});var c=H(i);r=se(c,"*countermap"),c.forEach(P),this.h()},h:function(){B(i,"class",a=Ut(s[3]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),D(i,we,119,2,3272)},m:function(l,c){X(l,i,c),b(i,r),t=!0},p:function(l,c){(!t||c[0]&8&&a!==(a=Ut(l[3]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&B(i,"class",a)},i:function(l){t||(l&&Ft(()=>{t&&(e&&e.end(1),u=Xt(i,et,{duration:300}),u.start())}),t=!0)},o:function(l){u&&u.invalidate(),l&&(e=Qt(i,et,{duration:300})),t=!1},d:function(l){l&&P(i),l&&e&&e.end()}};return V("SvelteRegisterBlock",{block:n,id:mt.name,type:"if",source:"(119:0) {#if $isPopupOpen === false}",ctx:s}),n}function pt(s){let i,r;i=new an({props:{latLng:s[22],width:s[8],height:s[9],$$slots:{default:[pn]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},p:function(e,t){const n={};t[0]&32&&(n.latLng=e[22]),t[0]&32|t[1]&2&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:pt.name,type:"if",source:"(133:6) {#if visible}",ctx:s}),a}function mn(s){let i,r;function a(...e){return s[19](s[31],...e)}i=new cn({props:{width:s[8],height:s[9],name:s[24],municipality:s[27],id:s[28],description:s[25],photos:s[26],baseUrl:s[10]},$$inline:!0}),i.$on("closeAndShowDetails",a);const u={c:function(){ee(i.$$.fragment)},l:function(t){te(i.$$.fragment,t)},m:function(t,n){ne(i,t,n),r=!0},p:function(t,n){s=t;const o={};n[0]&32&&(o.name=s[24]),n[0]&32&&(o.municipality=s[27]),n[0]&32&&(o.id=s[28]),n[0]&32&&(o.description=s[25]),n[0]&32&&(o.photos=s[26]),i.$set(o)},i:function(t){r||(M(i.$$.fragment,t),r=!0)},o:function(t){z(i.$$.fragment,t),r=!1},d:function(t){ie(i,t)}};return V("SvelteRegisterBlock",{block:u,id:mn.name,type:"slot",source:"(135:10) <Popup let:popup>",ctx:s}),u}function pn(s){let i,r,a;i=new ln({props:{$$slots:{default:[mn,({popup:e})=>({31:e}),({popup:e})=>[0,e?1:0]]},$$scope:{ctx:s}},$$inline:!0});const u={c:function(){ee(i.$$.fragment),r=q()},l:function(t){te(i.$$.fragment,t),r=W(t)},m:function(t,n){ne(i,t,n),X(t,r,n),a=!0},p:function(t,n){const o={};n[0]&32|n[1]&3&&(o.$$scope={dirty:n,ctx:t}),i.$set(o)},i:function(t){a||(M(i.$$.fragment,t),a=!0)},o:function(t){z(i.$$.fragment,t),a=!1},d:function(t){t&&P(r),ie(i,t)}};return V("SvelteRegisterBlock",{block:u,id:pn.name,type:"slot",source:"(134:8) <Marker {latLng} {width} {height}>",ctx:s}),u}function gt(s,i){let r,a,u,e=i[23]&&pt(i);const t={key:s,first:null,c:function(){r=de(),e&&e.c(),a=de(),this.h()},l:function(o){r=de(),e&&e.l(o),a=de(),this.h()},h:function(){this.first=r},m:function(o,l){X(o,r,l),e&&e.m(o,l),X(o,a,l),u=!0},p:function(o,l){i=o,i[23]?e?(e.p(i,l),l[0]&32&&M(e,1)):(e=pt(i),e.c(),M(e,1),e.m(a.parentNode,a)):e&&(x(),z(e,1,1,()=>{e=null}),$())},i:function(o){u||(M(e),u=!0)},o:function(o){z(e),u=!1},d:function(o){o&&(P(r),P(a)),e&&e.d(o)}};return V("SvelteRegisterBlock",{block:t,id:gt.name,type:"each",source:"(132:4) {#each $visibleMarkers as { latLng, visible, name, description, photos, municipality, id }",ctx:i}),t}function gn(s){let i=[],r=new Map,a,u,e=He(s[5]);const t=o=>o[22].join(",")+"-"+o[30];Fe(s,e,De,t);for(let o=0;o<e.length;o+=1){let l=De(s,e,o),c=t(l);r.set(c,i[o]=gt(c,l))}const n={c:function(){for(let l=0;l<i.length;l+=1)i[l].c();a=de()},l:function(l){for(let c=0;c<i.length;c+=1)i[c].l(l);a=de()},m:function(l,c){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(l,c);X(l,a,c),u=!0},p:function(l,c){c[0]&10016|c[1]&1&&(e=He(l[5]),x(),Fe(l,e,De,t),i=qt(i,c,t,1,l,e,r,a.parentNode,Wt,gt,a,De),$())},i:function(l){if(!u){for(let c=0;c<e.length;c+=1)M(i[c]);u=!0}},o:function(l){for(let c=0;c<i.length;c+=1)z(i[c]);u=!1},d:function(l){l&&P(a);for(let c=0;c<i.length;c+=1)i[c].d(l)}};return V("SvelteRegisterBlock",{block:n,id:gn.name,type:"slot",source:"(131:2) <Leaflet view={$currentViewStore} zoom={zoomLevel}>",ctx:s}),n}function vt(s){let i,r;i=new xt({$$inline:!0});const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:vt.name,type:"if",source:"(165:0) {#if $selectedMarkerId !== null && $currentSidebar === 'sidebar'}",ctx:s}),a}function yt(s){let i,r;i=new $t({$$inline:!0});const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:yt.name,type:"if",source:"(169:0) {#if $currentSidebar === 'menu'}",ctx:s}),a}function Lt(s){let i,r;i=new en({$$inline:!0}),i.$on("closeSideBar",s[15]);const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},p:Ve,i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:Lt.name,type:"if",source:"(173:0) {#if $currentSidebar === 'submissions'}",ctx:s}),a}function wt(s){let i,r;i=new rn({$$inline:!0});const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:wt.name,type:"if",source:"(177:0) {#if $currentSidebar === 'tools'}",ctx:s}),a}function bt(s){let i,r;i=new _n({props:{results:s[5],baseUrl:s[10]},$$inline:!0}),i.$on("closeAndShowDetails",s[20]);const a={c:function(){ee(i.$$.fragment)},l:function(e){te(i.$$.fragment,e)},m:function(e,t){ne(i,e,t),r=!0},p:function(e,t){const n={};t[0]&32&&(n.results=e[5]),i.$set(n)},i:function(e){r||(M(i.$$.fragment,e),r=!0)},o:function(e){z(i.$$.fragment,e),r=!1},d:function(e){ie(i,e)}};return V("SvelteRegisterBlock",{block:a,id:bt.name,type:"if",source:"(181:0) {#if $currentSidebar === 'search'}",ctx:s}),a}function kt(s){let i,r,a;r=new tn({$$inline:!0}),r.$on("openSubmissions",s[18]);const u={c:function(){i=T("div"),ee(r.$$.fragment),this.h()},l:function(t){i=j(t,"DIV",{class:!0});var n=H(i);te(r.$$.fragment,n),n.forEach(P),this.h()},h:function(){B(i,"class","banner-container s-_HdLFogMzSo7"),D(i,we,187,2,5215)},m:function(t,n){X(t,i,n),ne(r,i,null),a=!0},p:Ve,i:function(t){a||(M(r.$$.fragment,t),a=!0)},o:function(t){z(r.$$.fragment,t),a=!1},d:function(t){t&&P(i),ie(r)}};return V("SvelteRegisterBlock",{block:u,id:kt.name,type:"if",source:"(187:0) {#if $bannerClosed === false}",ctx:s}),u}function Ct(s){let i,r,a,u,e,t,n,o,l,c,h,f,p,d,g,_,E,G,A,R,O,N,Z=s[2]===!1&&mt(s);a=new Yt({$$inline:!0}),a.$on("updateView",s[12]),e=new sn({props:{view:s[4],zoom:s[1],$$slots:{default:[gn]},$$scope:{ctx:s}},$$inline:!0});let C=s[6]!==null&&s[0]==="sidebar"&&vt(s),S=s[0]==="menu"&&yt(s),k=s[0]==="submissions"&&Lt(s),w=s[0]==="tools"&&wt(s),v=s[0]==="search"&&bt(s),U=s[7]===!1&&kt(s);const F={c:function(){Z&&Z.c(),i=q(),r=T("div"),ee(a.$$.fragment),u=q(),ee(e.$$.fragment),t=q(),n=T("button"),o=T("img"),c=q(),h=T("button"),f=T("img"),d=q(),C&&C.c(),g=q(),S&&S.c(),_=q(),k&&k.c(),E=q(),w&&w.c(),G=q(),v&&v.c(),A=q(),U&&U.c(),this.h()},l:function(y){Z&&Z.l(y),i=W(y),r=j(y,"DIV",{class:!0});var I=H(r);te(a.$$.fragment,I),u=W(I),te(e.$$.fragment,I),t=W(I),n=j(I,"BUTTON",{class:!0});var Y=H(n);o=j(Y,"IMG",{src:!0,alt:!0}),Y.forEach(P),c=W(I),h=j(I,"BUTTON",{class:!0});var _e=H(h);f=j(_e,"IMG",{src:!0,alt:!0}),_e.forEach(P),d=W(I),C&&C.l(I),g=W(I),S&&S.l(I),_=W(I),k&&k.l(I),E=W(I),w&&w.l(I),G=W(I),v&&v.l(I),A=W(I),U&&U.l(I),I.forEach(P),this.h()},h:function(){he(o.src,l=nn)||B(o,"src",l),B(o,"alt","Open Menu Sidebar"),D(o,we,158,2,4482),B(n,"class","menu-button sdbbtn"),D(n,we,157,0,4424),he(f.src,p=on)||B(f,"src",p),B(f,"alt","Open Filter Sidebar"),D(f,we,161,2,4603),B(h,"class","filter-button sdbbtn"),D(h,we,160,0,4542),B(r,"class","w-full h-screen"),D(r,we,128,0,3539)},m:function(y,I){Z&&Z.m(y,I),X(y,i,I),X(y,r,I),ne(a,r,null),b(r,u),ne(e,r,null),b(r,t),b(r,n),b(n,o),b(r,c),b(r,h),b(h,f),b(r,d),C&&C.m(r,null),b(r,g),S&&S.m(r,null),b(r,_),k&&k.m(r,null),b(r,E),w&&w.m(r,null),b(r,G),v&&v.m(r,null),b(r,A),U&&U.m(r,null),R=!0,O||(N=[Pe(n,"click",s[16],!1,!1,!1,!1),Pe(h,"click",s[17],!1,!1,!1,!1),Pe(r,"click",s[14],!1,!1,!1,!1)],O=!0)},p:function(y,I){y[2]===!1?Z?(Z.p(y,I),I[0]&4&&M(Z,1)):(Z=mt(y),Z.c(),M(Z,1),Z.m(i.parentNode,i)):Z&&(x(),z(Z,1,1,()=>{Z=null}),$());const Y={};I[0]&16&&(Y.view=y[4]),I[0]&2&&(Y.zoom=y[1]),I[0]&32|I[1]&2&&(Y.$$scope={dirty:I,ctx:y}),e.$set(Y),y[6]!==null&&y[0]==="sidebar"?C?I[0]&65&&M(C,1):(C=vt(y),C.c(),M(C,1),C.m(r,g)):C&&(x(),z(C,1,1,()=>{C=null}),$()),y[0]==="menu"?S?I[0]&1&&M(S,1):(S=yt(y),S.c(),M(S,1),S.m(r,_)):S&&(x(),z(S,1,1,()=>{S=null}),$()),y[0]==="submissions"?k?(k.p(y,I),I[0]&1&&M(k,1)):(k=Lt(y),k.c(),M(k,1),k.m(r,E)):k&&(x(),z(k,1,1,()=>{k=null}),$()),y[0]==="tools"?w?I[0]&1&&M(w,1):(w=wt(y),w.c(),M(w,1),w.m(r,G)):w&&(x(),z(w,1,1,()=>{w=null}),$()),y[0]==="search"?v?(v.p(y,I),I[0]&1&&M(v,1)):(v=bt(y),v.c(),M(v,1),v.m(r,A)):v&&(x(),z(v,1,1,()=>{v=null}),$()),y[7]===!1?U?(U.p(y,I),I[0]&128&&M(U,1)):(U=kt(y),U.c(),M(U,1),U.m(r,null)):U&&(x(),z(U,1,1,()=>{U=null}),$())},i:function(y){R||(M(Z),M(a.$$.fragment,y),M(e.$$.fragment,y),M(C),M(S),M(k),M(w),M(v),M(U),R=!0)},o:function(y){z(Z),z(a.$$.fragment,y),z(e.$$.fragment,y),z(C),z(S),z(k),z(w),z(v),z(U),R=!1},d:function(y){y&&(P(i),P(r)),Z&&Z.d(y),ie(a),ie(e),C&&C.d(),S&&S.d(),k&&k.d(),w&&w.d(),v&&v.d(),U&&U.d(),O=!1,Ln(N)}};return V("SvelteRegisterBlock",{block:F,id:Ct.name,type:"component",source:"",ctx:s}),F}function Tn(s,i,r){let a,u,e,t,n,o,l;K(ce,"currentSidebar"),J(s,ce,v=>r(0,a=v)),K(Ee,"isPopupOpen"),J(s,Ee,v=>r(2,u=v)),K(ue,"darkMode"),J(s,ue,v=>r(3,e=v)),K(Re,"currentViewStore"),J(s,Re,v=>r(4,t=v)),K(Ue,"selectedMarkerId"),J(s,Ue,v=>r(6,o=v)),K(xe,"bannerClosed"),J(s,xe,v=>r(7,l=v));let{$$slots:c={},$$scope:h}=i;Le("Page",c,[]);let f=25,p=25,d=10,g="https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/";const _=At([Dt,Se,ce,Ae],([v,U,F,m])=>F==="tools"&&m.length>0?m:v.filter(y=>{const[I,Y]=y.latLng;return U.contains(Q.latLng(I,Y))}));K(_,"visibleMarkers"),J(s,_,v=>r(5,n=v));function E(v){console.log("updating view");const{latLng:U}=v.detail;r(1,d=12),Re.set({lat:U[0],lng:U[1]}),ce.set("search")}function G(v,U){console.log("showing details"),v&&typeof v.stopPropagation=="function"&&v.stopPropagation(),R("sidebar"),Ue.set(U)}function A(v){a!=="search"&&a!=="submissions"&&!v.target.closest(".sdbbtn")&&!v.target.closest(".sidebar")&&(R(null),Ue.set(null))}function R(v){ce.set(v)}function O(){console.log("closing sidebar"),R(null)}function N(){R(a==="menu"?null:"menu")}function Z(){R(a==="tools"?null:"tools")}function C(){R("submissions")}const S=[];Object.keys(i).forEach(v=>{!~S.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&Rn.warn(`<Page> was created with unknown prop '${v}'`)});const k=(v,{detail:U})=>{console.log(U),G(U.event,U.id),v.close()},w=({detail:v})=>{console.log(v),G(v.event,v.id)};return s.$capture_state=()=>({derived:At,L:Q,fade:et,Leaflet:sn,Marker:an,Popup:ln,PopupContent:cn,Sidebar:xt,MenuSidebar:$t,Search:Yt,SearchResults:_n,SubmissionSidebar:en,Banner:tn,menuIconPath:nn,filterIconPath:on,markersStore:Dt,filteredStore:Ae,currentViewStore:Re,mapBoundsStore:Se,darkMode:ue,selectedMarkerId:Ue,currentSidebar:ce,isPopupOpen:Ee,bannerClosed:xe,ToolsSidebar:rn,width:f,height:p,zoomLevel:d,baseUrl:g,visibleMarkers:_,handleUpdateView:E,showDetails:G,handleDivClick:A,setCurrentSidebar:R,closeSidebar:O,showMenu:N,showTools:Z,openSubmissions:C,$currentSidebar:a,$isPopupOpen:u,$darkMode:e,$currentViewStore:t,$visibleMarkers:n,$selectedMarkerId:o,$bannerClosed:l}),s.$inject_state=v=>{"width"in v&&r(8,f=v.width),"height"in v&&r(9,p=v.height),"zoomLevel"in v&&r(1,d=v.zoomLevel),"baseUrl"in v&&r(10,g=v.baseUrl)},i&&"$$inject"in i&&s.$inject_state(i.$$inject),s.$$.update=()=>{s.$$.dirty[0]&1&&console.log(a)},[a,d,u,e,t,n,o,l,f,p,g,_,E,G,A,O,N,Z,C,k,w]}class Fn extends ve{constructor(i){super(i),ye(this,i,Tn,Ct,ge,{},null,[-1,-1]),V("SvelteRegisterComponent",{component:this,tagName:"Page",options:i,id:Ct.name})}}export{Fn as component,Hn as universal};
