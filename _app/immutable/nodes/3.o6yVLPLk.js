import{a as x,e as j,f as X,$ as I,h as T,j as b,o as ct,l as F,a0 as U,m as w,a1 as Ye,A as vt,n as De,r as kt,v as se,d as le,a2 as Qe,q as H,x as Ge,a3 as Z,w as ae,c as Ce,z as ut,u as Ve,g as je,b as Te,a4 as ce,y as N,t as bt,k as yt,D as Lt,E as Ke,H as At,F as Mt}from"../chunks/scheduler.Q2N5D7Aa.js";import{S as $,i as ee,d as v,v as te,b as g,f as d,c as y,e as E,x as ie,t as A,j as ne,a as B,g as oe,o as ue,p as Ze,k as Pe,l as Re,m as Oe,n as qe,u as Et,y as St,s as Bt}from"../chunks/index.o_UTksgX.js";import{d as We}from"../chunks/index.ootanyEp.js";import{t as Je,c as xe,b as $e,d as et,g as Ct,e as me,f as de,L as P,a as K,l as he,h as Vt,i as tt,m as nt,j as pe}from"../chunks/stores.2AgWH0MQ.js";/* empty css                    */const jt=!1,Qt=Object.freeze(Object.defineProperty({__proto__:null,ssr:jt},Symbol.toStringTag,{value:"Module"}));function Tt(s){let e=0,i=0,t=s.length;return s.forEach(a=>{e+=a[0],i+=a[1]}),[e/t,i/t]}async function ot(s){const e="https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories";try{const t=await(await fetch(e)).json(),a=L.geoJSON(t,{style:o=>({color:o.properties.color,weight:2,opacity:.25,fillOpacity:.25})});return a.addTo(s),a}catch(i){console.error("Error fetching territories data:",i)}}function it(s,e){let i=L.layerGroup();return L.geoJSON(e,{onEachFeature:(t,a)=>{if(t.geometry.type==="Polygon"){const o=Tt(t.geometry.coordinates[0]);!isNaN(o[0])&&!isNaN(o[1])&&L.marker([o[1],o[0]],{icon:L.divIcon({className:"territory-label",html:t.properties.Name,iconSize:L.point(100,40)})}).addTo(i)}}}),i.addTo(s),i}const S="src/lib/Map/Toolbar.svelte";function ft(s){let e;const i={c:function(){e=I("path"),this.h()},l:function(a){e=U(a,"path",{d:!0}),b(e).forEach(g),this.h()},h:function(){d(e,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),w(e,S,28,3,953)},m:function(a,o){y(a,e,o)},d:function(a){a&&g(e)}};return v("SvelteRegisterBlock",{block:i,id:ft.name,type:"else",source:"(28:2) {:else}",ctx:s}),i}function mt(s){let e,i;const t={c:function(){e=I("path"),i=I("path"),this.h()},l:function(o){e=U(o,"path",{d:!0}),b(e).forEach(g),i=U(o,"path",{d:!0}),b(i).forEach(g),this.h()},h:function(){d(e,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),w(e,S,26,3,752),d(i,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),w(i,S,26,53,802)},m:function(o,n){y(o,e,n),y(o,i,n)},d:function(o){o&&(g(e),g(i))}};return v("SvelteRegisterBlock",{block:t,id:mt.name,type:"if",source:"(26:2) {#if eye}",ctx:s}),t}function ge(s){let e,i,t="🗺️",a,o,n,r,l,c,f,u,p,h,k,_,M,R,z,Y,D;function J(C,q){return C[0]?mt:ft}let Q=J(s),O=Q(s);const m={c:function(){e=j("div"),i=j("button"),i.textContent=t,a=X(),o=j("button"),n=I("svg"),O.c(),l=X(),c=j("button"),f=I("svg"),u=I("path"),p=X(),h=j("button"),k=I("svg"),_=I("mask"),M=I("rect"),R=I("g"),z=I("path"),this.h()},l:function(q){e=T(q,"DIV",{class:!0});var V=b(e);i=T(V,"BUTTON",{class:!0,"data-svelte-h":!0}),ct(i)!=="svelte-1q7jlwb"&&(i.textContent=t),a=F(V),o=T(V,"BUTTON",{type:!0,title:!0,class:!0});var Ie=b(o);n=U(Ie,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var Ue=b(n);O.l(Ue),Ue.forEach(g),Ie.forEach(g),l=F(V),c=T(V,"BUTTON",{class:!0,title:!0});var ze=b(c);f=U(ze,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var Ne=b(f);u=U(Ne,"path",{d:!0,fill:!0}),b(u).forEach(g),Ne.forEach(g),ze.forEach(g),p=F(V),h=T(V,"BUTTON",{class:!0});var Xe=b(h);k=U(Xe,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var fe=b(k);_=U(fe,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var Fe=b(_);M=U(Fe,"rect",{width:!0,height:!0,fill:!0}),b(M).forEach(g),Fe.forEach(g),R=U(fe,"g",{mask:!0});var He=b(R);z=U(He,"path",{d:!0,fill:!0}),b(z).forEach(g),He.forEach(g),fe.forEach(g),Xe.forEach(g),V.forEach(g),this.h()},h:function(){d(i,"class","selected s-X67GN01QUXjj"),w(i,S,22,1,441),d(n,"fill","none"),d(n,"stroke-linecap","round"),d(n,"stroke-linejoin","round"),d(n,"stroke-width",r=s[0]?2:1),d(n,"viewBox","0 0 24 24"),d(n,"stroke","currentColor"),w(n,S,24,2,601),d(o,"type","button"),d(o,"title","Show Markers"),d(o,"class","s-X67GN01QUXjj"),Ye(o,"selected",s[0]),w(o,S,23,1,514),d(u,"d","M0.800017 9.54074L15.8136 16.3514C16.2519 16.5506 16.7475 16.5506 17.1858 16.3514L32.1993 9.54074C33.266 9.0567 33.266 7.44474 32.1993 6.96071L17.1864 0.149366C16.9711 0.0509415 16.7371 0 16.5003 0C16.2636 0 16.0296 0.0509415 15.8142 0.149366L0.800017 6.96006C-0.266672 7.4441 -0.266672 9.0567 0.800017 9.54074ZM32.2 15.2306L28.4559 13.5336L18.0378 18.256C17.5506 18.4771 17.033 18.5892 16.5 18.5892C15.967 18.5892 15.4501 18.4771 14.9622 18.256L4.54471 13.5336L0.800017 15.2306C-0.266672 15.714 -0.266672 17.3253 0.800017 17.8087L15.8136 24.6142C16.2519 24.8128 16.7475 24.8128 17.1858 24.6142L32.2 17.8087C33.2667 17.3253 33.2667 15.714 32.2 15.2306ZM32.2 23.4676L28.4701 21.777L18.0378 26.5059C17.5506 26.727 17.033 26.8391 16.5 26.8391C15.967 26.8391 15.4501 26.727 14.9622 26.5059L4.53053 21.777L0.800017 23.4676C-0.266672 23.951 -0.266672 25.5623 0.800017 26.0457L15.8136 32.8513C16.2519 33.0498 16.7475 33.0498 17.1858 32.8513L32.2 26.0457C33.2667 25.5623 33.2667 23.951 32.2 23.4676Z"),d(u,"fill","black"),w(u,S,35,3,1497),d(f,"class","svgSize s-X67GN01QUXjj"),d(f,"width","33"),d(f,"height","33"),d(f,"viewBox","0 0 33 33"),d(f,"fill","none"),d(f,"xmlns","http://www.w3.org/2000/svg"),w(f,S,34,2,1382),d(c,"class","selected s-X67GN01QUXjj"),d(c,"title","Cycle Map Style"),w(c,S,33,1,1298),d(M,"width","54"),d(M,"height","54"),d(M,"fill","#D9D9D9"),w(M,S,42,3,2824),d(_,"id","mask0_14_196"),vt(_,"mask-type","alpha"),d(_,"maskUnits","userSpaceOnUse"),d(_,"x","0"),d(_,"y","0"),d(_,"width","54"),d(_,"height","54"),w(_,S,41,3,2710),d(z,"d","M24.75 47.25V32.4L14.2875 42.9188L11.0813 39.7125L21.6 29.25H6.75V24.75H21.6L11.0813 14.2875L14.2875 11.0813L24.75 21.6V6.75H29.25V21.6L39.7125 11.0813L42.9188 14.2875L32.4 24.75H47.25V29.25H32.4L42.9188 39.7125L39.7125 42.9188L29.25 32.4V47.25H24.75Z"),d(z,"fill","black"),w(z,S,45,3,2917),d(R,"mask","url(#mask0_14_196)"),w(R,S,44,3,2884),d(k,"class","svgSize s-X67GN01QUXjj"),d(k,"width","54"),d(k,"height","24"),d(k,"viewBox","0 0 54 54"),d(k,"fill","#000"),d(k,"xmlns","http://www.w3.org/2000/svg"),w(k,S,40,2,2595),d(h,"class","selected s-X67GN01QUXjj"),w(h,S,39,1,2538),d(e,"class","flex flex-col s-X67GN01QUXjj"),w(e,S,21,0,412)},m:function(q,V){y(q,e,V),E(e,i),E(e,a),E(e,o),E(o,n),O.m(n,null),E(e,l),E(e,c),E(c,f),E(f,u),E(e,p),E(e,h),E(h,k),E(k,_),E(_,M),E(k,R),E(R,z),Y||(D=[ie(i,"click",s[4],!1,!1,!1,!1),ie(o,"click",s[1],!1,!1,!1,!1),ie(c,"click",s[2],!1,!1,!1,!1),ie(h,"click",s[3],!1,!1,!1,!1)],Y=!0)},p:function(q,[V]){Q!==(Q=J(q))&&(O.d(1),O=Q(q),O&&(O.c(),O.m(n,null))),V&1&&r!==(r=q[0]?2:1)&&d(n,"stroke-width",r),V&1&&Ye(o,"selected",q[0])},i:De,o:De,d:function(q){q&&g(e),O.d(),Y=!1,kt(D)}};return v("SvelteRegisterBlock",{block:m,id:ge.name,type:"component",source:"",ctx:s}),m}function Pt(s,e,i){let{$$slots:t={},$$scope:a}=e;te("Toolbar",t,[]);let o=!0;function n(){i(0,o=!o),Je(o)}function r(){xe()}function l(){$e()}function c(){et()}const f=[];return Object.keys(e).forEach(u=>{!~f.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${u}'`)}),s.$capture_state=()=>({toggleMarkerVisibility:Je,cycleMapStyle:xe,toggleDarkMode:$e,toggleTerritoriesVisibility:et,eye:o,clickEye:n,triggerCycleMapStyle:r,toggleMarkerColor:l,toggleTerritoriesLayer:c}),s.$inject_state=u=>{"eye"in u&&i(0,o=u.eye)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[o,n,r,l,c]}class rt extends ${constructor(e){super(e),ee(this,e,Pt,ge,x,{}),v("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:e,id:ge.name})}}const{Error:G,console:Rt}=Ct,Ot="src/lib/Map/Leaflet.svelte";function we(s){let e;const i=s[9].default,t=Ce(i,s,s[8],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,r){t&&t.m(n,r),e=!0},p:function(n,r){t&&t.p&&(!e||r&256)&&Ve(t,i,n,n[8],e?Te(i,n[8],r,null):je(n[8]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){B(t,n),e=!1},d:function(n){t&&t.d(n)}};return v("SvelteRegisterBlock",{block:a,id:we.name,type:"if",source:"(173:2) {#if map}",ctx:s}),a}function _e(s){let e,i,t=s[0]&&we(s);const a={c:function(){e=j("div"),t&&t.c(),this.h()},l:function(n){e=T(n,"DIV",{class:!0});var r=b(e);t&&t.l(r),r.forEach(g),this.h()},h:function(){d(e,"class","w-full h-full"),w(e,Ot,171,0,4839)},m:function(n,r){y(n,e,r),t&&t.m(e,null),s[10](e),i=!0},p:function(n,[r]){n[0]?t?(t.p(n,r),r&1&&A(t,1)):(t=we(n),t.c(),A(t,1),t.m(e,null)):t&&(ne(),B(t,1,1,()=>{t=null}),oe())},i:function(n){i||(A(t),i=!0)},o:function(n){B(t),i=!1},d:function(n){n&&g(e),t&&t.d(),s[10](null)}};return v("SvelteRegisterBlock",{block:a,id:_e.name,type:"component",source:"",ctx:s}),a}function qt(s,e,i){let t,a;se(me,"currentMapStyleId"),le(s,me,m=>i(6,t=m)),se(de,"territoriesVisible"),le(s,de,m=>i(7,a=m));let{$$slots:o={},$$scope:n}=e;te("Leaflet",o,["default"]);let{bounds:r=void 0}=e,{view:l=void 0}=e,{zoom:c=void 0}=e;const f=Qe();let u,p,h,k=null,_=null,M=null;async function R(m){if(!M)try{M=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),k=await ot(m,M),_=await it(m,M)}catch(C){console.error("Error fetching territories data:",C)}}const z=P.Control.extend({onAdd(m){const C=P.DomUtil.create("div","map-toolbar-container");return new rt({target:C,props:{}}),C}});H(()=>{if(!r&&(!l||!c))throw new Error("Must set either bounds, or view and zoom.");i(0,u=P.map(p)),r?(u.fitBounds(r),K.set(r)):l&&c&&u.setView(l,c),u.whenReady(()=>{if(!r){const m=u.getBounds();K.set(m)}R(u),i(5,h=new he({Language:"fr",style:P.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(u)),new z({position:"topright"}).addTo(u)}),u.on("zoom",m=>f("zoom",m)).on("moveend",()=>{const m=u.getBounds();K.set(m)}).on("popupopen",async m=>{await Ge(),m.popup.update()})});function Y(){u&&(!k||!_?R(u):(u.addLayer(k),u.addLayer(_)))}function D(){u&&(k&&u.removeLayer(k),_&&u.removeLayer(_),console.log("Territories removed"))}Z(()=>{u==null||u.remove(),i(0,u=void 0),D()}),ae("map",{getMap:()=>u});function J(m){u&&h&&(u.removeLayer(h),i(5,h=new he({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(u)))}const Q=["bounds","view","zoom"];Object.keys(e).forEach(m=>{!~Q.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Rt.warn(`<Leaflet> was created with unknown prop '${m}'`)});function O(m){ut[m?"unshift":"push"](()=>{p=m,i(1,p)})}return s.$$set=m=>{"bounds"in m&&i(2,r=m.bounds),"view"in m&&i(3,l=m.view),"zoom"in m&&i(4,c=m.zoom),"$$scope"in m&&i(8,n=m.$$scope)},s.$capture_state=()=>({onMount:H,onDestroy:Z,setContext:ae,createEventDispatcher:Qe,tick:Ge,L:P,addTerritoriesLayer:ot,addTerritoriesLabels:it,MaptilerLayer:he,MaptilerStyle:Vt,Toolbar:rt,currentMapStyleId:me,mapBoundsStore:K,territoriesVisible:de,bounds:r,view:l,zoom:c,dispatch:f,map:u,mapElement:p,mtLayer:h,territoriesLayer:k,labelsLayer:_,territoriesData:M,initializeTerritories:R,ToolbarControl:z,addTerritories:Y,removeTerritories:D,updateMapStyle:J,$currentMapStyleId:t,$territoriesVisible:a}),s.$inject_state=m=>{"bounds"in m&&i(2,r=m.bounds),"view"in m&&i(3,l=m.view),"zoom"in m&&i(4,c=m.zoom),"map"in m&&i(0,u=m.map),"mapElement"in m&&i(1,p=m.mapElement),"mtLayer"in m&&i(5,h=m.mtLayer),"territoriesLayer"in m&&(k=m.territoriesLayer),"labelsLayer"in m&&(_=m.labelsLayer),"territoriesData"in m&&(M=m.territoriesData)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&128&&(a?Y():D()),s.$$.dirty&29&&u&&(r?u.fitBounds(r):l&&c&&u.setView(l,c)),s.$$.dirty&97&&t&&(console.log("MAP TILE NAME",t.name),u&&h&&J(t))},[u,p,r,l,c,h,t,a,n,o,O]}class dt extends ${constructor(e){super(e),ee(this,e,qt,_e,x,{bounds:2,view:3,zoom:4}),v("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:e,id:_e.name})}get bounds(){throw new G("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(e){throw new G("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new G("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(e){throw new G("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new G("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(e){throw new G("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const st="data:image/png;base64,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",lt=""+new URL("../assets/custom-marker-white-outline.ja7aQokX.png",import.meta.url).href;function ve(s){let e;const i=s[5].default,t=Ce(i,s,s[4],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,r){t&&t.m(n,r),e=!0},p:function(n,r){t&&t.p&&(!e||r&16)&&Ve(t,i,n,n[4],e?Te(i,n[4],r,null):je(n[4]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){B(t,n),e=!1},d:function(n){t&&t.d(n)}};return v("SvelteRegisterBlock",{block:a,id:ve.name,type:"if",source:"(53:0) {#if marker}",ctx:s}),a}function ke(s){let e,i,t=s[0]&&ve(s);const a={c:function(){t&&t.c(),e=N()},l:function(n){t&&t.l(n),e=N()},m:function(n,r){t&&t.m(n,r),y(n,e,r),i=!0},p:function(n,[r]){n[0]?t?(t.p(n,r),r&1&&A(t,1)):(t=ve(n),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(ne(),B(t,1,1,()=>{t=null}),oe())},i:function(n){i||(A(t),i=!0)},o:function(n){B(t),i=!1},d:function(n){n&&g(e),t&&t.d(n)}};return v("SvelteRegisterBlock",{block:a,id:ke.name,type:"component",source:"",ctx:s}),a}function It(s,e,i){let{$$slots:t={},$$scope:a}=e;te("Marker",t,["default"]);let{width:o}=e,{height:n}=e,{latLng:r}=e,l,c;const f=ce("map");ae("layer",{getLayer:()=>l});function u(h){let _=`<img src="${h==="dark"?lt:st}" style="width: ${o}px; height: ${n}px;">`,M=P.divIcon({html:_,className:"map-marker",iconSize:P.point(o,n)});l?l.setIcon(M):c&&i(0,l=P.marker(r,{icon:M}).addTo(c))}H(()=>{c=f.getMap(),tt.subscribe(h=>{u(h)})}),Z(()=>{l&&(l.remove(),i(0,l=void 0))}),s.$$.on_mount.push(function(){o===void 0&&!("width"in e||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),n===void 0&&!("height"in e||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),r===void 0&&!("latLng"in e||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const p=["width","height","latLng"];return Object.keys(e).forEach(h=>{!~p.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Marker> was created with unknown prop '${h}'`)}),s.$$set=h=>{"width"in h&&i(1,o=h.width),"height"in h&&i(2,n=h.height),"latLng"in h&&i(3,r=h.latLng),"$$scope"in h&&i(4,a=h.$$scope)},s.$capture_state=()=>({onMount:H,onDestroy:Z,getContext:ce,setContext:ae,darkMode:tt,L:P,customMarker:st,customMarkerWhite:lt,width:o,height:n,latLng:r,marker:l,mapInstance:c,mapContext:f,createOrUpdateMarker:u}),s.$inject_state=h=>{"width"in h&&i(1,o=h.width),"height"in h&&i(2,n=h.height),"latLng"in h&&i(3,r=h.latLng),"marker"in h&&i(0,l=h.marker),"mapInstance"in h&&(c=h.mapInstance)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[l,o,n,r,a,t]}class ht extends ${constructor(e){super(e),ee(this,e,It,ke,x,{width:1,height:2,latLng:3}),v("SvelteRegisterComponent",{component:this,tagName:"Marker",options:e,id:ke.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ut="src/lib/Map/Popup.svelte";function be(s){let e;const i=s[3].default,t=Ce(i,s,s[2],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,r){t&&t.m(n,r),e=!0},p:function(n,r){t&&t.p&&(!e||r&4)&&Ve(t,i,n,n[2],e?Te(i,n[2],r,null):je(n[2]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){B(t,n),e=!1},d:function(n){t&&t.d(n)}};return v("SvelteRegisterBlock",{block:a,id:be.name,type:"if",source:"(36:2) {#if open}",ctx:s}),a}function ye(s){let e,i,t=s[1]&&be(s);const a={c:function(){e=j("div"),t&&t.c(),this.h()},l:function(n){e=T(n,"DIV",{});var r=b(e);t&&t.l(r),r.forEach(g),this.h()},h:function(){w(e,Ut,34,0,671)},m:function(n,r){y(n,e,r),t&&t.m(e,null),s[4](e),i=!0},p:function(n,[r]){n[1]?t?(t.p(n,r),r&2&&A(t,1)):(t=be(n),t.c(),A(t,1),t.m(e,null)):t&&(ne(),B(t,1,1,()=>{t=null}),oe())},i:function(n){i||(A(t),i=!0)},o:function(n){B(t),i=!1},d:function(n){n&&g(e),t&&t.d(),s[4](null)}};return v("SvelteRegisterBlock",{block:a,id:ye.name,type:"component",source:"",ctx:s}),a}function zt(s,e,i){let{$$slots:t={},$$scope:a}=e;te("Popup",t,["default"]);let o,n,r=!1;const l=ce("layer"),c=l.getLayer();H(()=>{o=P.popup().setContent(n),c&&(c.bindPopup(o),c.on("popupopen",()=>i(1,r=!0)),c.on("popupclose",()=>i(1,r=!1)))}),Z(()=>{c&&c.unbindPopup(),o&&(o.remove(),o=void 0)});const f=[];Object.keys(e).forEach(p=>{!~f.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Popup> was created with unknown prop '${p}'`)});function u(p){ut[p?"unshift":"push"](()=>{n=p,i(0,n)})}return s.$$set=p=>{"$$scope"in p&&i(2,a=p.$$scope)},s.$capture_state=()=>({onMount:H,onDestroy:Z,getContext:ce,L:P,popup:o,popupElement:n,open:r,layerContext:l,layer:c}),s.$inject_state=p=>{"popup"in p&&(o=p.popup),"popupElement"in p&&i(0,n=p.popupElement),"open"in p&&i(1,r=p.open)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[n,r,a,t,u]}class pt extends ${constructor(e){super(e),ee(this,e,zt,ye,x,{}),v("SvelteRegisterComponent",{component:this,tagName:"Popup",options:e,id:ye.name})}}const W="src/routes/map/+page.svelte";function re(s,e,i){const t=s.slice();return t[3]=e[i].latLng,t[4]=e[i].visible,t[5]=e[i].name,t[6]=e[i].description,t[7]=e[i].photos,t[9]=i,t}function at(s,e,i){const t=s.slice();return t[10]=e[i].url,t[11]=e[i].alt,t}function Le(s){let e,i;e=new ht({props:{latLng:s[3],width:20,height:20,$$slots:{default:[wt]},$$scope:{ctx:s}},$$inline:!0});const t={c:function(){Pe(e.$$.fragment)},l:function(o){Re(e.$$.fragment,o)},m:function(o,n){Oe(e,o,n),i=!0},p:function(o,n){const r={};n&2&&(r.latLng=o[3]),n&16386&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i:function(o){i||(A(e.$$.fragment,o),i=!0)},o:function(o){B(e.$$.fragment,o),i=!1},d:function(o){qe(e,o)}};return v("SvelteRegisterBlock",{block:t,id:Le.name,type:"if",source:"(30:12) {#if visible}",ctx:s}),t}function Ae(s){let e,i=ue(s[7]),t=[];for(let o=0;o<i.length;o+=1)t[o]=Me(at(s,i,o));const a={c:function(){e=j("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l:function(n){e=T(n,"DIV",{class:!0});var r=b(e);for(let l=0;l<t.length;l+=1)t[l].l(r);r.forEach(g),this.h()},h:function(){d(e,"class","flex flex-row overflow-x-auto"),w(e,W,37,24,1366)},m:function(n,r){y(n,e,r);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p:function(n,r){if(r&2){i=ue(n[7]);let l;for(l=0;l<i.length;l+=1){const c=at(n,i,l);t[l]?t[l].p(c,r):(t[l]=Me(c),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=i.length}},d:function(n){n&&g(e),Lt(t,n)}};return v("SvelteRegisterBlock",{block:a,id:Ae.name,type:"if",source:"(37:24) {#if photos && photos.length}",ctx:s}),a}function Me(s){let e,i,t;const a={c:function(){e=j("img"),this.h()},l:function(n){e=T(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){Ke(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${s[10]}`)||d(e,"src",i),d(e,"alt",t=s[11]),d(e,"class","s-_HdLFogMzSo7"),w(e,W,39,36,1507)},m:function(n,r){y(n,e,r)},p:function(n,r){r&2&&!Ke(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${n[10]}`)&&d(e,"src",i),r&2&&t!==(t=n[11])&&d(e,"alt",t)},d:function(n){n&&g(e)}};return v("SvelteRegisterBlock",{block:a,id:Me.name,type:"each",source:"(39:32) {#each photos as {url, alt}}",ctx:s}),a}function Ee(s){let e,i,t=s[6]+"";const a={c:function(){e=j("p"),i=new At(!1),this.h()},l:function(n){e=T(n,"P",{class:!0});var r=b(e);i=Mt(r,!1),r.forEach(g),this.h()},h:function(){i.a=null,d(e,"class","description max-h-32 overflow-y-auto s-_HdLFogMzSo7"),w(e,W,45,28,1814)},m:function(n,r){y(n,e,r),i.m(t,e)},p:function(n,r){r&2&&t!==(t=n[6]+"")&&i.p(t)},d:function(n){n&&g(e)}};return v("SvelteRegisterBlock",{block:a,id:Ee.name,type:"if",source:"(45:24) {#if description}",ctx:s}),a}function gt(s){let e,i=s[5]+"",t,a,o,n,r=s[7]&&s[7].length&&Ae(s),l=s[6]&&Ee(s);const c={c:function(){e=j("h3"),t=bt(i),a=X(),r&&r.c(),o=X(),l&&l.c(),n=N(),this.h()},l:function(u){e=T(u,"H3",{});var p=b(e);t=yt(p,i),p.forEach(g),a=F(u),r&&r.l(u),o=F(u),l&&l.l(u),n=N(),this.h()},h:function(){w(e,W,32,24,1217)},m:function(u,p){y(u,e,p),E(e,t),y(u,a,p),r&&r.m(u,p),y(u,o,p),l&&l.m(u,p),y(u,n,p)},p:function(u,p){p&2&&i!==(i=u[5]+"")&&Bt(t,i),u[7]&&u[7].length?r?r.p(u,p):(r=Ae(u),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null),u[6]?l?l.p(u,p):(l=Ee(u),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d:function(u){u&&(g(e),g(a),g(o),g(n)),r&&r.d(u),l&&l.d(u)}};return v("SvelteRegisterBlock",{block:c,id:gt.name,type:"slot",source:"(32:20) <Popup>",ctx:s}),c}function wt(s){let e,i,t;e=new pt({props:{$$slots:{default:[gt]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){Pe(e.$$.fragment),i=X()},l:function(n){Re(e.$$.fragment,n),i=F(n)},m:function(n,r){Oe(e,n,r),y(n,i,r),t=!0},p:function(n,r){const l={};r&16386&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i:function(n){t||(A(e.$$.fragment,n),t=!0)},o:function(n){B(e.$$.fragment,n),t=!1},d:function(n){n&&g(i),qe(e,n)}};return v("SvelteRegisterBlock",{block:a,id:wt.name,type:"slot",source:"(31:16) <Marker {latLng} width={20} height={20}>",ctx:s}),a}function Se(s,e){let i,t,a,o=e[4]&&Le(e);const n={key:s,first:null,c:function(){i=N(),o&&o.c(),t=N(),this.h()},l:function(l){i=N(),o&&o.l(l),t=N(),this.h()},h:function(){this.first=i},m:function(l,c){y(l,i,c),o&&o.m(l,c),y(l,t,c),a=!0},p:function(l,c){e=l,e[4]?o?(o.p(e,c),c&2&&A(o,1)):(o=Le(e),o.c(),A(o,1),o.m(t.parentNode,t)):o&&(ne(),B(o,1,1,()=>{o=null}),oe())},i:function(l){a||(A(o),a=!0)},o:function(l){B(o),a=!1},d:function(l){l&&(g(i),g(t)),o&&o.d(l)}};return v("SvelteRegisterBlock",{block:n,id:Se.name,type:"each",source:"(29:8) {#each $visibleMarkers as { latLng, visible, name, description, photos }",ctx:e}),n}function _t(s){let e=[],i=new Map,t,a,o=ue(s[1]);const n=l=>l[3].join(",")+"-"+l[9];Ze(s,o,re,n);for(let l=0;l<o.length;l+=1){let c=re(s,o,l),f=n(c);i.set(f,e[l]=Se(f,c))}const r={c:function(){for(let c=0;c<e.length;c+=1)e[c].c();t=N()},l:function(c){for(let f=0;f<e.length;f+=1)e[f].l(c);t=N()},m:function(c,f){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(c,f);y(c,t,f),a=!0},p:function(c,f){f&2&&(o=ue(c[1]),ne(),Ze(c,o,re,n),e=Et(e,f,n,1,c,o,i,t.parentNode,St,Se,t,re),oe())},i:function(c){if(!a){for(let f=0;f<o.length;f+=1)A(e[f]);a=!0}},o:function(c){for(let f=0;f<e.length;f+=1)B(e[f]);a=!1},d:function(c){c&&g(t);for(let f=0;f<e.length;f+=1)e[f].d(c)}};return v("SvelteRegisterBlock",{block:r,id:_t.name,type:"slot",source:"(28:4) <Leaflet view={$initialViewStore} zoom={8}>",ctx:s}),r}function Be(s){let e,i="counter*map",t,a,o,n;o=new dt({props:{view:s[0],zoom:8,$$slots:{default:[_t]},$$scope:{ctx:s}},$$inline:!0});const r={c:function(){e=j("h1"),e.textContent=i,t=X(),a=j("div"),Pe(o.$$.fragment),this.h()},l:function(c){e=T(c,"H1",{class:!0,"data-svelte-h":!0}),ct(e)!=="svelte-1p1kd7m"&&(e.textContent=i),t=F(c),a=T(c,"DIV",{class:!0});var f=b(a);Re(o.$$.fragment,f),f.forEach(g),this.h()},h:function(){d(e,"class","s-_HdLFogMzSo7"),w(e,W,22,0,854),d(a,"class","w-full h-screen"),w(a,W,25,0,881)},m:function(c,f){y(c,e,f),y(c,t,f),y(c,a,f),Oe(o,a,null),n=!0},p:function(c,[f]){const u={};f&1&&(u.view=c[0]),f&16386&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i:function(c){n||(A(o.$$.fragment,c),n=!0)},o:function(c){B(o.$$.fragment,c),n=!1},d:function(c){c&&(g(e),g(t),g(a)),qe(o)}};return v("SvelteRegisterBlock",{block:r,id:Be.name,type:"component",source:"",ctx:s}),r}function Nt(s,e,i){let t,a;se(pe,"initialViewStore"),le(s,pe,c=>i(0,t=c));let{$$slots:o={},$$scope:n}=e;te("Page",o,[]);const r=We([nt,K],([c,f])=>!f||typeof f.contains!="function"?[]:c.filter(u=>{const[p,h]=u.latLng;return f.contains(P.latLng(p,h))}));se(r,"visibleMarkers"),le(s,r,c=>i(1,a=c));const l=[];return Object.keys(e).forEach(c=>{!~l.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Page> was created with unknown prop '${c}'`)}),s.$capture_state=()=>({derived:We,onMount:H,L:P,Leaflet:dt,Marker:ht,Popup:pt,markersStore:nt,initialViewStore:pe,mapBoundsStore:K,visibleMarkers:r,$initialViewStore:t,$visibleMarkers:a}),[t,a,r]}class Gt extends ${constructor(e){super(e),ee(this,e,Nt,Be,x,{}),v("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Be.name})}}export{Gt as component,Qt as universal};
