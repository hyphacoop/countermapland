import{a as W,e as V,f as F,$ as O,h as j,j as k,o as at,l as H,a0 as U,m as w,a1 as Ye,A as vt,n as De,r as kt,v as de,d as he,a2 as Qe,q as Y,x as Ge,a3 as G,w as le,c as Be,z as ct,u as Ce,g as Ve,b as je,a4 as se,y as z,t as bt,k as yt,D as Lt,E as Ke,H as At,F as Mt}from"../chunks/scheduler.Q2N5D7Aa.js";import{S as J,i as x,d as _,v as $,b as g,f as d,c as b,e as M,x as oe,t as A,j as ee,a as E,g as te,o as re,p as Ze,k as Pe,l as Re,m as Te,n as Oe,u as St,y as Et,s as Bt}from"../chunks/index.o_UTksgX.js";import{d as We}from"../chunks/index.ootanyEp.js";import{t as Je,c as xe,b as $e,d as ae,g as ut,e as ue,L as P,a as Q,l as fe,h as Ct,f as et,m as tt,i as me}from"../chunks/stores.U8ca_8wQ.js";/* empty css                    */const Vt=!1,Qt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Vt},Symbol.toStringTag,{value:"Module"}));function jt(s){let e=0,i=0,t=s.length;return s.forEach(a=>{e+=a[0],i+=a[1]}),[e/t,i/t]}async function nt(s){const e="https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories";try{const t=await(await fetch(e)).json();L.geoJSON(t,{style:a=>({color:a.properties.color,weight:2,opacity:.25,fillOpacity:.25})}).addTo(s)}catch(i){console.error("Error fetching territories data:",i)}}function ot(s,e){console.log("Adding territory labels"),L.geoJSON(e,{onEachFeature:(i,t)=>{if(i.geometry.type==="Polygon"){console.log("Adding label for",i.properties.Name);const a=jt(i.geometry.coordinates[0]);console.log("Centroid:",a),!isNaN(a[0])&&!isNaN(a[1])&&L.marker([a[1],a[0]],{icon:L.divIcon({className:"territory-label",html:i.properties.Name,iconSize:L.point(100,40)})}).addTo(s)}}})}const{console:Pt}=ut,S="src/lib/Map/Toolbar.svelte";function ft(s){let e;const i={c:function(){e=O("path"),this.h()},l:function(a){e=U(a,"path",{d:!0}),k(e).forEach(g),this.h()},h:function(){d(e,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),w(e,S,29,3,971)},m:function(a,o){b(a,e,o)},d:function(a){a&&g(e)}};return _("SvelteRegisterBlock",{block:i,id:ft.name,type:"else",source:"(29:2) {:else}",ctx:s}),i}function mt(s){let e,i;const t={c:function(){e=O("path"),i=O("path"),this.h()},l:function(o){e=U(o,"path",{d:!0}),k(e).forEach(g),i=U(o,"path",{d:!0}),k(i).forEach(g),this.h()},h:function(){d(e,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),w(e,S,27,3,770),d(i,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),w(i,S,27,53,820)},m:function(o,n){b(o,e,n),b(o,i,n)},d:function(o){o&&(g(e),g(i))}};return _("SvelteRegisterBlock",{block:t,id:mt.name,type:"if",source:"(27:2) {#if eye}",ctx:s}),t}function pe(s){let e,i,t="ðŸ—ºï¸",a,o,n,l,r,u,c,f,h,p,v,y,B,I,q,Z,ne;function m(X,T){return X[0]?mt:ft}let R=m(s),N=R(s);const Ue={c:function(){e=V("div"),i=V("button"),i.textContent=t,a=F(),o=V("button"),n=O("svg"),N.c(),r=F(),u=V("button"),c=O("svg"),f=O("path"),h=F(),p=V("button"),v=O("svg"),y=O("mask"),B=O("rect"),I=O("g"),q=O("path"),this.h()},l:function(T){e=j(T,"DIV",{class:!0});var C=k(e);i=j(C,"BUTTON",{class:!0,"data-svelte-h":!0}),at(i)!=="svelte-1tkyn7r"&&(i.textContent=t),a=H(C),o=j(C,"BUTTON",{type:!0,title:!0,class:!0});var Ie=k(o);n=U(Ie,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var qe=k(n);N.l(qe),qe.forEach(g),Ie.forEach(g),r=H(C),u=j(C,"BUTTON",{class:!0,title:!0});var ze=k(u);c=U(ze,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var Ne=k(c);f=U(Ne,"path",{d:!0,fill:!0}),k(f).forEach(g),Ne.forEach(g),ze.forEach(g),h=H(C),p=j(C,"BUTTON",{class:!0});var Xe=k(p);v=U(Xe,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var ce=k(v);y=U(ce,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var Fe=k(y);B=U(Fe,"rect",{width:!0,height:!0,fill:!0}),k(B).forEach(g),Fe.forEach(g),I=U(ce,"g",{mask:!0});var He=k(I);q=U(He,"path",{d:!0,fill:!0}),k(q).forEach(g),He.forEach(g),ce.forEach(g),Xe.forEach(g),C.forEach(g),this.h()},h:function(){d(i,"class","s-X67GN01QUXjj"),w(i,S,23,1,476),d(n,"fill","none"),d(n,"stroke-linecap","round"),d(n,"stroke-linejoin","round"),d(n,"stroke-width",l=s[0]?2:1),d(n,"viewBox","0 0 24 24"),d(n,"stroke","currentColor"),w(n,S,25,2,619),d(o,"type","button"),d(o,"title","Show Markers"),d(o,"class","s-X67GN01QUXjj"),Ye(o,"selected",s[0]),w(o,S,24,1,532),d(f,"d","M0.800017 9.54074L15.8136 16.3514C16.2519 16.5506 16.7475 16.5506 17.1858 16.3514L32.1993 9.54074C33.266 9.0567 33.266 7.44474 32.1993 6.96071L17.1864 0.149366C16.9711 0.0509415 16.7371 0 16.5003 0C16.2636 0 16.0296 0.0509415 15.8142 0.149366L0.800017 6.96006C-0.266672 7.4441 -0.266672 9.0567 0.800017 9.54074ZM32.2 15.2306L28.4559 13.5336L18.0378 18.256C17.5506 18.4771 17.033 18.5892 16.5 18.5892C15.967 18.5892 15.4501 18.4771 14.9622 18.256L4.54471 13.5336L0.800017 15.2306C-0.266672 15.714 -0.266672 17.3253 0.800017 17.8087L15.8136 24.6142C16.2519 24.8128 16.7475 24.8128 17.1858 24.6142L32.2 17.8087C33.2667 17.3253 33.2667 15.714 32.2 15.2306ZM32.2 23.4676L28.4701 21.777L18.0378 26.5059C17.5506 26.727 17.033 26.8391 16.5 26.8391C15.967 26.8391 15.4501 26.727 14.9622 26.5059L4.53053 21.777L0.800017 23.4676C-0.266672 23.951 -0.266672 25.5623 0.800017 26.0457L15.8136 32.8513C16.2519 33.0498 16.7475 33.0498 17.1858 32.8513L32.2 26.0457C33.2667 25.5623 33.2667 23.951 32.2 23.4676Z"),d(f,"fill","black"),w(f,S,36,3,1515),d(c,"class","svgSize s-X67GN01QUXjj"),d(c,"width","33"),d(c,"height","33"),d(c,"viewBox","0 0 33 33"),d(c,"fill","none"),d(c,"xmlns","http://www.w3.org/2000/svg"),w(c,S,35,2,1400),d(u,"class","selected s-X67GN01QUXjj"),d(u,"title","Cycle Map Style"),w(u,S,34,1,1316),d(B,"width","54"),d(B,"height","54"),d(B,"fill","#D9D9D9"),w(B,S,43,3,2842),d(y,"id","mask0_14_196"),vt(y,"mask-type","alpha"),d(y,"maskUnits","userSpaceOnUse"),d(y,"x","0"),d(y,"y","0"),d(y,"width","54"),d(y,"height","54"),w(y,S,42,3,2728),d(q,"d","M24.75 47.25V32.4L14.2875 42.9188L11.0813 39.7125L21.6 29.25H6.75V24.75H21.6L11.0813 14.2875L14.2875 11.0813L24.75 21.6V6.75H29.25V21.6L39.7125 11.0813L42.9188 14.2875L32.4 24.75H47.25V29.25H32.4L42.9188 39.7125L39.7125 42.9188L29.25 32.4V47.25H24.75Z"),d(q,"fill","white"),w(q,S,46,3,2935),d(I,"mask","url(#mask0_14_196)"),w(I,S,45,3,2902),d(v,"class","svgSize s-X67GN01QUXjj"),d(v,"width","54"),d(v,"height","54"),d(v,"viewBox","0 0 54 54"),d(v,"fill","none"),d(v,"xmlns","http://www.w3.org/2000/svg"),w(v,S,41,2,2613),d(p,"class","selected s-X67GN01QUXjj"),w(p,S,40,1,2556),d(e,"class","flex flex-col s-X67GN01QUXjj"),w(e,S,22,0,447)},m:function(T,C){b(T,e,C),M(e,i),M(e,a),M(e,o),M(o,n),N.m(n,null),M(e,r),M(e,u),M(u,c),M(c,f),M(e,h),M(e,p),M(p,v),M(v,y),M(y,B),M(v,I),M(I,q),Z||(ne=[oe(i,"click",s[4],!1,!1,!1,!1),oe(o,"click",s[1],!1,!1,!1,!1),oe(u,"click",s[2],!1,!1,!1,!1),oe(p,"click",s[3],!1,!1,!1,!1)],Z=!0)},p:function(T,[C]){R!==(R=m(T))&&(N.d(1),N=R(T),N&&(N.c(),N.m(n,null))),C&1&&l!==(l=T[0]?2:1)&&d(n,"stroke-width",l),C&1&&Ye(o,"selected",T[0])},i:De,o:De,d:function(T){T&&g(e),N.d(),Z=!1,kt(ne)}};return _("SvelteRegisterBlock",{block:Ue,id:pe.name,type:"component",source:"",ctx:s}),Ue}function Rt(s,e,i){let{$$slots:t={},$$scope:a}=e;$("Toolbar",t,[]);let o=!0;function n(){i(0,o=!o),Je(o)}function l(){xe(),console.log("triggerCycleMapStyle")}function r(){$e()}function u(){ae.update(f=>!f)}const c=[];return Object.keys(e).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&Pt.warn(`<Toolbar> was created with unknown prop '${f}'`)}),s.$capture_state=()=>({toggleMarkerVisibility:Je,cycleMapStyle:xe,toggleDarkMode:$e,territoriesVisible:ae,eye:o,clickEye:n,triggerCycleMapStyle:l,toggleMarkerColor:r,toggleTerritoriesLayer:u}),s.$inject_state=f=>{"eye"in f&&i(0,o=f.eye)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[o,n,l,r,u]}class it extends J{constructor(e){super(e),x(this,e,Rt,pe,W,{}),_("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:e,id:pe.name})}}const{Error:D,console:Tt}=ut,Ot="src/lib/Map/Leaflet.svelte";function ge(s){let e;const i=s[8].default,t=Be(i,s,s[7],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,l){t&&t.m(n,l),e=!0},p:function(n,l){t&&t.p&&(!e||l&128)&&Ce(t,i,n,n[7],e?je(i,n[7],l,null):Ve(n[7]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){E(t,n),e=!1},d:function(n){t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:ge.name,type:"if",source:"(163:2) {#if map}",ctx:s}),a}function we(s){let e,i,t=s[0]&&ge(s);const a={c:function(){e=V("div"),t&&t.c(),this.h()},l:function(n){e=j(n,"DIV",{class:!0});var l=k(e);t&&t.l(l),l.forEach(g),this.h()},h:function(){d(e,"class","w-full h-full"),w(e,Ot,161,0,4660)},m:function(n,l){b(n,e,l),t&&t.m(e,null),s[9](e),i=!0},p:function(n,[l]){n[0]?t?(t.p(n,l),l&1&&A(t,1)):(t=ge(n),t.c(),A(t,1),t.m(e,null)):t&&(ee(),E(t,1,1,()=>{t=null}),te())},i:function(n){i||(A(t),i=!0)},o:function(n){E(t),i=!1},d:function(n){n&&g(e),t&&t.d(),s[9](null)}};return _("SvelteRegisterBlock",{block:a,id:we.name,type:"component",source:"",ctx:s}),a}function Ut(s,e,i){let t;de(ue,"currentMapStyleId"),he(s,ue,m=>i(6,t=m));let{$$slots:a={},$$scope:o}=e;$("Leaflet",a,["default"]);let{bounds:n=void 0}=e,{view:l=void 0}=e,{zoom:r=void 0}=e;const u=Qe();let c,f,h,p=null,v=null,y=null;function B(m){y||fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories").then(R=>R.json()).then(R=>{y=R,p=nt(m),v=ot(m,R)})}const I=P.Control.extend({onAdd(m){const R=P.DomUtil.create("div","map-toolbar-container");return new it({target:R,props:{}}),R}});Y(()=>{if(!n&&(!l||!r))throw new Error("Must set either bounds, or view and zoom.");i(0,c=P.map(f)),n?(c.fitBounds(n),Q.set(n)):l&&r&&c.setView(l,r),c.whenReady(()=>{if(!n){const m=c.getBounds();console.log("Initial bounds set:",m),Q.set(m)}i(5,h=new fe({Language:"fr",style:P.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(c)),new I({position:"topright"}).addTo(c)}),c.on("zoom",m=>u("zoom",m)).on("moveend",()=>{const m=c.getBounds();Q.set(m)}).on("popupopen",async m=>{await Ge(),m.popup.update()})}),ae.subscribe(m=>{m?!p||!v?B(c):(c.addLayer(p),c.addLayer(v)):(p&&c.removeLayer(p),v&&c.removeLayer(v))}),G(()=>{c==null||c.remove(),i(0,c=void 0)}),le("map",{getMap:()=>c});function q(m){c&&h&&(c.removeLayer(h),i(5,h=new fe({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(c)))}const Z=["bounds","view","zoom"];Object.keys(e).forEach(m=>{!~Z.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Tt.warn(`<Leaflet> was created with unknown prop '${m}'`)});function ne(m){ct[m?"unshift":"push"](()=>{f=m,i(1,f)})}return s.$$set=m=>{"bounds"in m&&i(2,n=m.bounds),"view"in m&&i(3,l=m.view),"zoom"in m&&i(4,r=m.zoom),"$$scope"in m&&i(7,o=m.$$scope)},s.$capture_state=()=>({onMount:Y,onDestroy:G,setContext:le,createEventDispatcher:Qe,tick:Ge,L:P,addTerritoriesLayer:nt,addTerritoriesLabels:ot,MaptilerLayer:fe,MaptilerStyle:Ct,Toolbar:it,currentMapStyleId:ue,mapBoundsStore:Q,territoriesVisible:ae,bounds:n,view:l,zoom:r,dispatch:u,map:c,mapElement:f,mtLayer:h,territoriesLayer:p,labelsLayer:v,territoriesData:y,initializeTerritories:B,ToolbarControl:I,updateMapStyle:q,$currentMapStyleId:t}),s.$inject_state=m=>{"bounds"in m&&i(2,n=m.bounds),"view"in m&&i(3,l=m.view),"zoom"in m&&i(4,r=m.zoom),"map"in m&&i(0,c=m.map),"mapElement"in m&&i(1,f=m.mapElement),"mtLayer"in m&&i(5,h=m.mtLayer),"territoriesLayer"in m&&(p=m.territoriesLayer),"labelsLayer"in m&&(v=m.labelsLayer),"territoriesData"in m&&(y=m.territoriesData)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&29&&c&&(n?c.fitBounds(n):l&&r&&c.setView(l,r)),s.$$.dirty&97&&t&&(console.log("UUUUUpdating map style to",t),c&&h&&q(t)),s.$$.dirty&64&&console.log("LEAFLET Current Map Style Index:",t)},[c,f,n,l,r,h,t,o,a,ne]}class dt extends J{constructor(e){super(e),x(this,e,Ut,we,W,{bounds:2,view:3,zoom:4}),_("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:e,id:we.name})}get bounds(){throw new D("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(e){throw new D("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new D("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(e){throw new D("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new D("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(e){throw new D("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABCCAYAAADqv6CSAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDs0g4pChOtlFRRxLFYtgobQVWnUwufQLmrQkKS6OgmvBwY/FqoOLs64OroIg+AHi7OCk6CIl/i8ptIjx4Lgf7+497t4BQqvKNLMvBmi6ZaQTcSmXX5WCrxAQQBgiBmVm1pOZxSw8x9c9fHy9i/Is73N/jiG1YDLAJxHHWN2wiDeIZzetOud9YpGVZZX4nHjSoAsSP3JdcfmNc8lhgWeKRjY9TywSS6UeVnqYlQ2NeIY4omo65Qs5l1XOW5y1aoN17slfGCroKxmu0xxDAktIIgUJChqooAoLUVp1UkykaT/u4R91/ClyKeSqgJFjATVokB0/+B/87tYsTk+5SaE4EHix7Y9xILgLtJu2/X1s2+0TwP8MXOldf60FzH2S3uxqkSNgeBu4uO5qyh5wuQOMPNVlQ3YkP02hWATez+ib8kD4FhhYc3vr7OP0AchSV8s3wMEhMFGi7HWPd/f39vbvmU5/P0wzcpc0jseDAAAABmJLR0QAEgASABIPeHnLAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AIFExcWlOq88wAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAeaSURBVHja7Vt/jFxVFf7Ond2yTafzzpvtij+iWYFqm9amIkVFTJCWIFBSTKAmKrENVYFSSoymXbWhLcG2GEOFQoNVbBRjpCLVWCBQEKIQU/lRCjTQoknJ2ojauefONm22O+8e/3BqNsvszHtv3+xs6Zw/J2/eOe+753znO+fNAG1rWxKjVjkOw/BBVb2mziXHRGRKq+IzrXLsva80uGSolRnTMmCIqA1MygdvZ0wbmDbHxMqYug+uqqctx1TGAlybY043YBqVykTNGAqCYBczrwDQ0YpSaibHMPPHmfkP+Xz+PYmAYeYlRHQ5gLuYeW8QBAveDaU0ZcqUM5l5G4DnAVzR0dGxITYwzMwANg77aBYRPcHMO4MgODvDdj2epTQpCIJvd3Z2HgCwbNhzLy0UCvPiZsxtAGql2CIiei0Mw409PT35ZmdMVqXEzIuYeT8R3QGgMDKMXC53d61h2oyYeOcAuKGOnzNUddXQ0NABZv7qGKfzppZSGIYfY+bdAHYCOLvOAXySmZfUBUZV7wGQi+H3fQC2M/NfisXip5oh8NKW0tSpU6cFQXCvqr4EYH7Mr20oFouFmsAw87UALkwYx/ne++eY+efTpk17f5YjQSMOqmGdzLwyl8sdJKIbYh7wSTvTe7+2JjCq2gXApjl8ANdWKpU3wjD8DoAzsuCYJBkThuFlQRDsA7AZAKeRVVVepXcA45zbBuCsKkkdT3HzvKrezsz7mfkLYy2lOBzT3d09IwiCR1X1ESKakZKOdqvqPBH5ShWgd3KMiIi1dpUx5iMA7gcQpXB0FoDfMvPuMAxnN0PgBUEQMvPmKIpeIaLPpwTkeVVdICKXOOdeiCXwSqVSv4hcZ4yZA+B3KR3PV9W9zLylUCgUk3LMKBmVC8PwRiI6CGBlSlV+QFUXi8g859yTqWalUqm0X0SuMsZ8BsCfUwSRA7DcGHMwDMPlwwkxaSkFQbCAmfdWO2d3ilgOq+o3RGSWc25HJkNkqVR6TkQ+C2ARgNdSBFVU1S3V8WJ+EoFXKBTOYeadRPQEgNkpfAsR9eXz+XOccz+OoZ/+31ESZ0FV3K0F8MGUZfYwET2uqlvrXHMXEQ2q6koAk1L4OE5Ed3vvNzrnEnfb1Mq1t7e3y1q7goj6AISYOFYBsD2Xy609cuTIP1KPLBnMIkxEfaq6AsDkFoPyUBRF3x0YGHhjzLNcVhF1d3d/IIqidQCWJFSdWdhT3vvV5XL5r5mtRbKOsLu7e2YURRuqRN1se1FV+5xzj2e+L2pWxMVi8QLv/aYU81cce5OI1lhrfz1crZ4SwAybY65U1Q0AZo31Xqr6T2PMemvttrhtd8ICc1IvVVv8upQtfoCINk2ePPnOw4cPHxuXgMeRIMeS8pMBfOjEiRPBeAU7HqW0sFpKszO43TFV3ZzL5TaVSqXyKQlMsVj8tPf+jiaR7xEAt4vIvQAGTwlgqu36+wCuGoeMPwRgjYj8EoCfkMBUBd5aAEtbIPD2EdFqa+2jEwaY6kiwWlVvngAjwdPe+1XlcnnPWG+U+mR7e3u7VPUWItoB4BIAnQlv4RscjE9xcL1E9LWurq7ZkyZN2js4OFgaz3ZtmHmpiBwgoh8AKCb8fgRgCxEtbyDm7gNwCwBJEePVxpj9QRBs7enpeW/TgQnD8Epm3of/7YPTCLU/EtFcEVkBoGG7FZEfRVE0nYjuQ/L9cwcRXT80NPQmM9828r1RJsAUi8ULmPlPqvr7lNL+kKpeIyIXW2tfrWZE3X0tEXUCwMDAwH+stdcD+ASAZ1L4ngLge977vzFz7KWXadR6mflh7/2zKfXIcQBr8/n8TOfcbxLyW8eI7HlZRC5S1cXVNp3UpgHYzMyvh2H45Ub8ZUZrvcz8kyiKXkmrR4hoBxHNEJF1/f39x2twSEcSYE6ac25HPp+fCeBWAGnmpg+r6gPM/GKhULg0FjDMzGEYboyi6CCA61J2rX0APmetXWytfWtUx8bEKqVa1t/ff1xE1htjPqqqv0rZeOYaYx5j5ieDIDhvVGCCIFgG4O+quiqlHikR0U0icq6IPD1WqRAjo1Aqlfqdc18iogsBvJASoIuJaA8zP4Bar2iJaBDpltqRqm713k+31t4Tt3ukLaVaZq19VkTOV9VlAN5OKXT/hVqvaEXkF0j+Uu0ZIjrXOXdjuVxOJKayBOakIHTO/bT6evmHSPb7mreJaF098r0p5om/papfFJGLrLX7mqG663FMg/Iqi8i3vPezAOyK+bU+a60bFRgReRnA1gbtd30+n5/hnHtwTBuyBuQbh2PqWblcPigiC40xl6nq63Uu3SMi2+O06zXVehtpDwGYKSK31mq/idd52ZfSaBn0mHNuDoBvAnAjw/Der0CN7aKpIcMFwOphH72qqvNF5GoROYTsrFFX6szQ15CI3FmpVKYT0bZhu5ufjTaJm1FmlO2q+giAm0VkrnPuqaz3AzFGgsx/eH306NF/W2u/DuA8ALsqlUpf0nRV59wVzVycGGM6VLXppTTKwb8EYGHWa4esMqaRqu5EC62Vf8tpalc6ZYFpBcecEsAYY9ql1Eod867jmNMZmHYptUspW/JtKTBta1sy+y8kYEEcpPyOxwAAAABJRU5ErkJggg==",st=""+new URL("../assets/custom-marker-white-outline.ja7aQokX.png",import.meta.url).href;function _e(s){let e;const i=s[5].default,t=Be(i,s,s[4],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,l){t&&t.m(n,l),e=!0},p:function(n,l){t&&t.p&&(!e||l&16)&&Ce(t,i,n,n[4],e?je(i,n[4],l,null):Ve(n[4]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){E(t,n),e=!1},d:function(n){t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:_e.name,type:"if",source:"(53:0) {#if marker}",ctx:s}),a}function ve(s){let e,i,t=s[0]&&_e(s);const a={c:function(){t&&t.c(),e=z()},l:function(n){t&&t.l(n),e=z()},m:function(n,l){t&&t.m(n,l),b(n,e,l),i=!0},p:function(n,[l]){n[0]?t?(t.p(n,l),l&1&&A(t,1)):(t=_e(n),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(ee(),E(t,1,1,()=>{t=null}),te())},i:function(n){i||(A(t),i=!0)},o:function(n){E(t),i=!1},d:function(n){n&&g(e),t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:ve.name,type:"component",source:"",ctx:s}),a}function It(s,e,i){let{$$slots:t={},$$scope:a}=e;$("Marker",t,["default"]);let{width:o}=e,{height:n}=e,{latLng:l}=e,r,u;const c=se("map");le("layer",{getLayer:()=>r});function f(p){let y=`<img src="${p==="dark"?st:lt}" style="width: ${o}px; height: ${n}px;">`,B=P.divIcon({html:y,className:"map-marker",iconSize:P.point(o,n)});r?r.setIcon(B):u&&i(0,r=P.marker(l,{icon:B}).addTo(u))}Y(()=>{u=c.getMap(),et.subscribe(p=>{f(p)})}),G(()=>{r&&(r.remove(),i(0,r=void 0))}),s.$$.on_mount.push(function(){o===void 0&&!("width"in e||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),n===void 0&&!("height"in e||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in e||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const h=["width","height","latLng"];return Object.keys(e).forEach(p=>{!~h.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Marker> was created with unknown prop '${p}'`)}),s.$$set=p=>{"width"in p&&i(1,o=p.width),"height"in p&&i(2,n=p.height),"latLng"in p&&i(3,l=p.latLng),"$$scope"in p&&i(4,a=p.$$scope)},s.$capture_state=()=>({onMount:Y,onDestroy:G,getContext:se,setContext:le,darkMode:et,L:P,customMarker:lt,customMarkerWhite:st,width:o,height:n,latLng:l,marker:r,mapInstance:u,mapContext:c,createOrUpdateMarker:f}),s.$inject_state=p=>{"width"in p&&i(1,o=p.width),"height"in p&&i(2,n=p.height),"latLng"in p&&i(3,l=p.latLng),"marker"in p&&i(0,r=p.marker),"mapInstance"in p&&(u=p.mapInstance)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[r,o,n,l,a,t]}class ht extends J{constructor(e){super(e),x(this,e,It,ve,W,{width:1,height:2,latLng:3}),_("SvelteRegisterComponent",{component:this,tagName:"Marker",options:e,id:ve.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const qt="src/lib/Map/Popup.svelte";function ke(s){let e;const i=s[3].default,t=Be(i,s,s[2],null),a={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,l){t&&t.m(n,l),e=!0},p:function(n,l){t&&t.p&&(!e||l&4)&&Ce(t,i,n,n[2],e?je(i,n[2],l,null):Ve(n[2]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){E(t,n),e=!1},d:function(n){t&&t.d(n)}};return _("SvelteRegisterBlock",{block:a,id:ke.name,type:"if",source:"(36:2) {#if open}",ctx:s}),a}function be(s){let e,i,t=s[1]&&ke(s);const a={c:function(){e=V("div"),t&&t.c(),this.h()},l:function(n){e=j(n,"DIV",{});var l=k(e);t&&t.l(l),l.forEach(g),this.h()},h:function(){w(e,qt,34,0,671)},m:function(n,l){b(n,e,l),t&&t.m(e,null),s[4](e),i=!0},p:function(n,[l]){n[1]?t?(t.p(n,l),l&2&&A(t,1)):(t=ke(n),t.c(),A(t,1),t.m(e,null)):t&&(ee(),E(t,1,1,()=>{t=null}),te())},i:function(n){i||(A(t),i=!0)},o:function(n){E(t),i=!1},d:function(n){n&&g(e),t&&t.d(),s[4](null)}};return _("SvelteRegisterBlock",{block:a,id:be.name,type:"component",source:"",ctx:s}),a}function zt(s,e,i){let{$$slots:t={},$$scope:a}=e;$("Popup",t,["default"]);let o,n,l=!1;const r=se("layer"),u=r.getLayer();Y(()=>{o=P.popup().setContent(n),u&&(u.bindPopup(o),u.on("popupopen",()=>i(1,l=!0)),u.on("popupclose",()=>i(1,l=!1)))}),G(()=>{u&&u.unbindPopup(),o&&(o.remove(),o=void 0)});const c=[];Object.keys(e).forEach(h=>{!~c.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Popup> was created with unknown prop '${h}'`)});function f(h){ct[h?"unshift":"push"](()=>{n=h,i(0,n)})}return s.$$set=h=>{"$$scope"in h&&i(2,a=h.$$scope)},s.$capture_state=()=>({onMount:Y,onDestroy:G,getContext:se,L:P,popup:o,popupElement:n,open:l,layerContext:r,layer:u}),s.$inject_state=h=>{"popup"in h&&(o=h.popup),"popupElement"in h&&i(0,n=h.popupElement),"open"in h&&i(1,l=h.open)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[n,l,a,t,f]}class pt extends J{constructor(e){super(e),x(this,e,zt,be,W,{}),_("SvelteRegisterComponent",{component:this,tagName:"Popup",options:e,id:be.name})}}const K="src/routes/map/+page.svelte";function ie(s,e,i){const t=s.slice();return t[3]=e[i].latLng,t[4]=e[i].visible,t[5]=e[i].name,t[6]=e[i].description,t[7]=e[i].photos,t[9]=i,t}function rt(s,e,i){const t=s.slice();return t[10]=e[i].url,t[11]=e[i].alt,t}function ye(s){let e,i;e=new ht({props:{latLng:s[3],width:20,height:20,$$slots:{default:[wt]},$$scope:{ctx:s}},$$inline:!0});const t={c:function(){Pe(e.$$.fragment)},l:function(o){Re(e.$$.fragment,o)},m:function(o,n){Te(e,o,n),i=!0},p:function(o,n){const l={};n&2&&(l.latLng=o[3]),n&16386&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i:function(o){i||(A(e.$$.fragment,o),i=!0)},o:function(o){E(e.$$.fragment,o),i=!1},d:function(o){Oe(e,o)}};return _("SvelteRegisterBlock",{block:t,id:ye.name,type:"if",source:"(30:12) {#if visible}",ctx:s}),t}function Le(s){let e,i=re(s[7]),t=[];for(let o=0;o<i.length;o+=1)t[o]=Ae(rt(s,i,o));const a={c:function(){e=V("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l:function(n){e=j(n,"DIV",{class:!0});var l=k(e);for(let r=0;r<t.length;r+=1)t[r].l(l);l.forEach(g),this.h()},h:function(){d(e,"class","flex flex-row overflow-x-auto"),w(e,K,37,24,1366)},m:function(n,l){b(n,e,l);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p:function(n,l){if(l&2){i=re(n[7]);let r;for(r=0;r<i.length;r+=1){const u=rt(n,i,r);t[r]?t[r].p(u,l):(t[r]=Ae(u),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d:function(n){n&&g(e),Lt(t,n)}};return _("SvelteRegisterBlock",{block:a,id:Le.name,type:"if",source:"(37:24) {#if photos && photos.length}",ctx:s}),a}function Ae(s){let e,i,t;const a={c:function(){e=V("img"),this.h()},l:function(n){e=j(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){Ke(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${s[10]}`)||d(e,"src",i),d(e,"alt",t=s[11]),d(e,"class","s-_HdLFogMzSo7"),w(e,K,39,36,1507)},m:function(n,l){b(n,e,l)},p:function(n,l){l&2&&!Ke(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${n[10]}`)&&d(e,"src",i),l&2&&t!==(t=n[11])&&d(e,"alt",t)},d:function(n){n&&g(e)}};return _("SvelteRegisterBlock",{block:a,id:Ae.name,type:"each",source:"(39:32) {#each photos as {url, alt}}",ctx:s}),a}function Me(s){let e,i,t=s[6]+"";const a={c:function(){e=V("p"),i=new At(!1),this.h()},l:function(n){e=j(n,"P",{class:!0});var l=k(e);i=Mt(l,!1),l.forEach(g),this.h()},h:function(){i.a=null,d(e,"class","description max-h-32 overflow-y-auto s-_HdLFogMzSo7"),w(e,K,45,28,1814)},m:function(n,l){b(n,e,l),i.m(t,e)},p:function(n,l){l&2&&t!==(t=n[6]+"")&&i.p(t)},d:function(n){n&&g(e)}};return _("SvelteRegisterBlock",{block:a,id:Me.name,type:"if",source:"(45:24) {#if description}",ctx:s}),a}function gt(s){let e,i=s[5]+"",t,a,o,n,l=s[7]&&s[7].length&&Le(s),r=s[6]&&Me(s);const u={c:function(){e=V("h3"),t=bt(i),a=F(),l&&l.c(),o=F(),r&&r.c(),n=z(),this.h()},l:function(f){e=j(f,"H3",{});var h=k(e);t=yt(h,i),h.forEach(g),a=H(f),l&&l.l(f),o=H(f),r&&r.l(f),n=z(),this.h()},h:function(){w(e,K,32,24,1217)},m:function(f,h){b(f,e,h),M(e,t),b(f,a,h),l&&l.m(f,h),b(f,o,h),r&&r.m(f,h),b(f,n,h)},p:function(f,h){h&2&&i!==(i=f[5]+"")&&Bt(t,i),f[7]&&f[7].length?l?l.p(f,h):(l=Le(f),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null),f[6]?r?r.p(f,h):(r=Me(f),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d:function(f){f&&(g(e),g(a),g(o),g(n)),l&&l.d(f),r&&r.d(f)}};return _("SvelteRegisterBlock",{block:u,id:gt.name,type:"slot",source:"(32:20) <Popup>",ctx:s}),u}function wt(s){let e,i,t;e=new pt({props:{$$slots:{default:[gt]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){Pe(e.$$.fragment),i=F()},l:function(n){Re(e.$$.fragment,n),i=H(n)},m:function(n,l){Te(e,n,l),b(n,i,l),t=!0},p:function(n,l){const r={};l&16386&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i:function(n){t||(A(e.$$.fragment,n),t=!0)},o:function(n){E(e.$$.fragment,n),t=!1},d:function(n){n&&g(i),Oe(e,n)}};return _("SvelteRegisterBlock",{block:a,id:wt.name,type:"slot",source:"(31:16) <Marker {latLng} width={20} height={20}>",ctx:s}),a}function Se(s,e){let i,t,a,o=e[4]&&ye(e);const n={key:s,first:null,c:function(){i=z(),o&&o.c(),t=z(),this.h()},l:function(r){i=z(),o&&o.l(r),t=z(),this.h()},h:function(){this.first=i},m:function(r,u){b(r,i,u),o&&o.m(r,u),b(r,t,u),a=!0},p:function(r,u){e=r,e[4]?o?(o.p(e,u),u&2&&A(o,1)):(o=ye(e),o.c(),A(o,1),o.m(t.parentNode,t)):o&&(ee(),E(o,1,1,()=>{o=null}),te())},i:function(r){a||(A(o),a=!0)},o:function(r){E(o),a=!1},d:function(r){r&&(g(i),g(t)),o&&o.d(r)}};return _("SvelteRegisterBlock",{block:n,id:Se.name,type:"each",source:"(29:8) {#each $visibleMarkers as { latLng, visible, name, description, photos }",ctx:e}),n}function _t(s){let e=[],i=new Map,t,a,o=re(s[1]);const n=r=>r[3].join(",")+"-"+r[9];Ze(s,o,ie,n);for(let r=0;r<o.length;r+=1){let u=ie(s,o,r),c=n(u);i.set(c,e[r]=Se(c,u))}const l={c:function(){for(let u=0;u<e.length;u+=1)e[u].c();t=z()},l:function(u){for(let c=0;c<e.length;c+=1)e[c].l(u);t=z()},m:function(u,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(u,c);b(u,t,c),a=!0},p:function(u,c){c&2&&(o=re(u[1]),ee(),Ze(u,o,ie,n),e=St(e,c,n,1,u,o,i,t.parentNode,Et,Se,t,ie),te())},i:function(u){if(!a){for(let c=0;c<o.length;c+=1)A(e[c]);a=!0}},o:function(u){for(let c=0;c<e.length;c+=1)E(e[c]);a=!1},d:function(u){u&&g(t);for(let c=0;c<e.length;c+=1)e[c].d(u)}};return _("SvelteRegisterBlock",{block:l,id:_t.name,type:"slot",source:"(28:4) <Leaflet view={$initialViewStore} zoom={4}>",ctx:s}),l}function Ee(s){let e,i="counter*map",t,a,o,n;o=new dt({props:{view:s[0],zoom:4,$$slots:{default:[_t]},$$scope:{ctx:s}},$$inline:!0});const l={c:function(){e=V("h1"),e.textContent=i,t=F(),a=V("div"),Pe(o.$$.fragment),this.h()},l:function(u){e=j(u,"H1",{class:!0,"data-svelte-h":!0}),at(e)!=="svelte-1p1kd7m"&&(e.textContent=i),t=H(u),a=j(u,"DIV",{class:!0});var c=k(a);Re(o.$$.fragment,c),c.forEach(g),this.h()},h:function(){d(e,"class","s-_HdLFogMzSo7"),w(e,K,22,0,854),d(a,"class","w-full h-screen"),w(a,K,25,0,881)},m:function(u,c){b(u,e,c),b(u,t,c),b(u,a,c),Te(o,a,null),n=!0},p:function(u,[c]){const f={};c&1&&(f.view=u[0]),c&16386&&(f.$$scope={dirty:c,ctx:u}),o.$set(f)},i:function(u){n||(A(o.$$.fragment,u),n=!0)},o:function(u){E(o.$$.fragment,u),n=!1},d:function(u){u&&(g(e),g(t),g(a)),Oe(o)}};return _("SvelteRegisterBlock",{block:l,id:Ee.name,type:"component",source:"",ctx:s}),l}function Nt(s,e,i){let t,a;de(me,"initialViewStore"),he(s,me,u=>i(0,t=u));let{$$slots:o={},$$scope:n}=e;$("Page",o,[]);const l=We([tt,Q],([u,c])=>!c||typeof c.contains!="function"?[]:u.filter(f=>{const[h,p]=f.latLng;return c.contains(P.latLng(h,p))}));de(l,"visibleMarkers"),he(s,l,u=>i(1,a=u));const r=[];return Object.keys(e).forEach(u=>{!~r.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)}),s.$capture_state=()=>({derived:We,onMount:Y,L:P,Leaflet:dt,Marker:ht,Popup:pt,markersStore:tt,initialViewStore:me,mapBoundsStore:Q,visibleMarkers:l,$initialViewStore:t,$visibleMarkers:a}),[t,a,l]}class Gt extends J{constructor(e){super(e),x(this,e,Nt,Ee,W,{}),_("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Ee.name})}}export{Gt as component,Qt as universal};
