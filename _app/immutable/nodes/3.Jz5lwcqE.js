import{a as ne,e as Z,f as H,$ as V,h as N,j as b,o as bt,l as q,a0 as R,m as C,a1 as Ye,A as St,n as We,r as At,v as D,d as X,a2 as Ke,q as Q,x as Je,a3 as J,w as de,c as ze,z as ft,u as Ge,g as Ie,b as je,a4 as _e,y as F,t as pt,k as mt,a5 as $e,D as Pt,E as et,H as Bt,F as Ot}from"../chunks/scheduler.1WwOURwS.js";import{S as oe,i as re,d as M,v as se,b as y,f as p,c as A,e as O,x as ce,t as P,j as ae,a as I,g as le,o as fe,p as tt,k as Ue,l as Ze,m as Ne,n as Ve,u as Et,y as Tt,s as zt}from"../chunks/index.S7sSlPTl.js";import{d as it}from"../chunks/index.Qk5RJqig.js";import{c as Gt,i as ee,b as nt,t as ot,d as rt,g as It,e as me,f as ge,L as j,h as te,a as K,l as Le,j as jt,k as ie,m as st,n as ye}from"../chunks/stores.7vXqyo2Z.js";/* empty css                    */const Ut=!1,Jt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ut},Symbol.toStringTag,{value:"Module"}));var at={exports:{}};(function(c,o){(function(u,r){r(o)})(Gt,function(u){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var i,n=this._featureGroup,s=this._nonPointGroup,a=this.options.chunkedLoading,l=this.options.chunkInterval,h=this.options.chunkProgress,f=e.length,d=0,g=!0;if(this._map){var k=new Date().getTime(),v=L.bind(function(){var E=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<f;d++){if(a&&d%200==0){var B=new Date().getTime()-E;if(l<B)break}if((i=e[d])instanceof L.LayerGroup)g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(i,e),f=e.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),t||this.fire("layeradd",{layer:i}),i.__parent&&i.__parent.getChildCount()===2)){var z=i.__parent.getAllChildMarkers(),Y=z[0]===i?z[1]:z[0];n.removeLayer(Y)}}else s.addLayer(i),t||this.fire("layeradd",{layer:i})}h&&h(d,f,new Date().getTime()-k),d===f?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(v,this.options.chunkDelay)},this);v()}else for(var S=this._needsClustering;d<f;d++)(i=e[d])instanceof L.LayerGroup?(g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(i,e),f=e.length):i.getLatLng?this.hasLayer(i)||S.push(i):s.addLayer(i);return this},removeLayers:function(e){var t,i,n=e.length,s=this._featureGroup,a=this._nonPointGroup,l=!0;if(!this._map){for(t=0;t<n;t++)(i=e[t])instanceof L.LayerGroup?(l&&(e=e.slice(),l=!1),this._extractNonGroupLayers(i,e),n=e.length):(this._arraySplice(this._needsClustering,i),a.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var h=e.slice(),f=n;for(t=0;t<f;t++)(i=h[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,h),f=h.length):this._unspiderfyLayer(i)}for(t=0;t<n;t++)(i=e[t])instanceof L.LayerGroup?(l&&(e=e.slice(),l=!1),this._extractNonGroupLayers(i,e),n=e.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),s.hasLayer(i)&&(s.removeLayer(i),i.clusterShow&&i.clusterShow())):(a.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i,n,s,a=this._needsClustering.slice(),l=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(a),n=a.length-1;0<=n;n--){for(i=!0,s=l.length-1;0<=s;s--)if(l[s].layer===a[n]){i=!1;break}i&&e.call(t,a[n])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(i){L.stamp(i)===e&&(t=i)}),t},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;0<=t;t--)if(i[t]===e)return!0;for(t=(i=this._needsRemoving).length-1;0<=t;t--)if(i[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var i=this._map;typeof t!="function"&&(t=function(){});var n=function(){!i.hasLayer(e)&&!i.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,i,n;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;t<i;t++)(n=this._needsRemoving[t]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(t=0,i=this._needsRemoving.length;t<i;t++)n=this._needsRemoving[t],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;0<=i;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,n=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());s<=t&&n[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,i){var n=this._gridClusters,s=this._gridUnclustered,a=this._featureGroup,l=this._map,h=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var f,d=e.__parent,g=d._markers;for(this._arraySplice(g,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<h));)t&&d._childCount<=1?(f=d._markers[0]===e?d._markers[1]:d._markers[0],n[d._zoom].removeObject(d,l.project(d._cLatLng,d._zoom)),s[d._zoom].addObject(f,l.project(f.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(f),f.__parent=d.__parent,d._icon&&(a.removeLayer(d),i||a.addLayer(f))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return i+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom;(t||n||s)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,i=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this.options.spiderfyOnEveryZoom,s=this._map;(e||i||n)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),s.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;typeof i!="function"&&(n=function(){return i}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var s=e;t<=s;s--)this._gridClusters[s]=new L.DistanceGrid(n(s)),this._gridUnclustered[s]=new L.DistanceGrid(n(s));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i,n,s=this._gridClusters,a=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);l<=t;t--){i=this._map.project(e.getLatLng(),t);var h=s[t].getNearObject(i);if(h)return h._addChild(e),void(e.__parent=h);if(h=a[t].getNearObject(i)){var f=h.__parent;f&&this._removeLayer(h,!1);var d=new this._markerCluster(this,t,h,e);s[t].addObject(d,this._map.project(d._cLatLng,t)),h.__parent=d;var g=e.__parent=d;for(n=t-1;n>f._zoom;n--)g=new this._markerCluster(this,n,g),s[n].addObject(g,this._map.project(h.getLatLng(),n));return f._addChild(g),void this._removeFromGridUnclustered(h,t)}a[t].addObject(e,i)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i,n=e.getLayers(),s=0;for(t=t||[];s<n.length;s++)(i=n[s])instanceof L.LayerGroup?this._extractNonGroupLayers(i,t):t.push(i);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var i,n=this._getExpandedVisibleBounds(),s=this._featureGroup,a=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(n,e,a,function(l){var h,f=l._latlng,d=l._markers;for(n.contains(f)||(f=null),l._isSingleParent()&&e+1===t?(s.removeLayer(l),l._recursivelyAddChildrenToMap(null,t,n)):(l.clusterHide(),l._recursivelyAddChildrenToMap(f,t,n)),i=d.length-1;0<=i;i--)h=d[i],n.contains(h._latlng)||s.removeLayer(h)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,t),s.eachLayer(function(l){l instanceof L.MarkerCluster||!l._icon||l.clusterShow()}),this._topClusterLevel._recursively(n,e,t,function(l){l._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(n,e,a,function(l){s.removeLayer(l),l.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,n=this._featureGroup;n.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){n.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,i){var n=this._getExpandedVisibleBounds(),s=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(n,s,t+1,i);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(e._childCount===1){var l=e._markers[0];this._ignoreMove=!0,l.setLatLng(l.getLatLng()),this._ignoreMove=!1,l.clusterShow&&l.clusterShow()}else e._recursively(n,i,s,function(h){h._recursivelyRemoveChildrenFromMap(n,s,t+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var _=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(e,t){e=e||[];for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i].getAllChildMarkers(e,t);for(var n=this._markers.length-1;0<=n;n--)t&&this._markers[n].__dragStart||e.push(this._markers[n]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,i=this._childClusters.slice(),n=this._group._map,s=n.getBoundsZoom(this._bounds),a=this._zoom+1,l=n.getZoom();0<i.length&&a<s;){a++;var h=[];for(t=0;t<i.length;t++)h=h.concat(i[t]._childClusters);i=h}a<s?this._group._map.setView(this._latlng,a):s<=l?this._group._map.setView(this._latlng,l+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,i,n,s=this._markers,a=this._childClusters,l=0,h=0,f=this._childCount;if(f!==0){for(this._resetBounds(),e=0;e<s.length;e++)i=s[e]._latlng,this._bounds.extend(i),l+=i.lat,h+=i.lng;for(e=0;e<a.length;e++)(t=a[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),i=t._wLatLng,n=t._childCount,l+=i.lat*n,h+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(l/f,h/f),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,i){this._recursively(e,this._group._map.getMinZoom(),i-1,function(n){var s,a,l=n._markers;for(s=l.length-1;0<=s;s--)(a=l[s])._icon&&(a._setPos(t),a.clusterHide())},function(n){var s,a,l=n._childClusters;for(s=l.length-1;0<=s;s--)(a=l[s])._icon&&(a._setPos(t),a.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,n){this._recursively(e,n,t,function(s){s._recursivelyAnimateChildrenIn(e,s._group._map.latLngToLayerPoint(s.getLatLng()).round(),i),s._isSingleParent()&&i-1===n?(s.clusterShow(),s._recursivelyRemoveChildrenFromMap(e,t,i)):s.clusterHide(),s._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(n){if(t!==n._zoom)for(var s=n._markers.length-1;0<=s;s--){var a=n._markers[s];i.contains(a._latlng)&&(e&&(a._backupLatlng=a.getLatLng(),a.setLatLng(e),a.clusterHide&&a.clusterHide()),n._group._featureGroup.addLayer(a))}},function(n){n._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n]._restorePosition();else for(var s=this._childClusters.length-1;0<=s;s--)this._childClusters[s]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,n){var s,a;this._recursively(e,t-1,i-1,function(l){for(a=l._markers.length-1;0<=a;a--)s=l._markers[a],n&&n.contains(s._latlng)||(l._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())},function(l){for(a=l._childClusters.length-1;0<=a;a--)s=l._childClusters[a],n&&n.contains(s._latlng)||(l._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())})},_recursively:function(e,t,i,n,s){var a,l,h=this._childClusters,f=this._zoom;if(t<=f&&(n&&n(this),s&&f===i&&s(this)),f<t||f<i)for(a=h.length-1;0<=a;a--)(l=h[a])._boundsNeedUpdate&&l._recalculateBounds(),e.intersects(l._bounds)&&l._recursively(e,t,i,n,s)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),n=this._getCoord(t.y),s=this._grid,a=s[n]=s[n]||{},l=a[i]=a[i]||[],h=L.Util.stamp(e);this._objectPoint[h]=t,l.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i,n,s=this._getCoord(t.x),a=this._getCoord(t.y),l=this._grid,h=l[a]=l[a]||{},f=h[s]=h[s]||[];for(delete this._objectPoint[L.Util.stamp(e)],i=0,n=f.length;i<n;i++)if(f[i]===e)return f.splice(i,1),n===1&&delete h[s],!0},eachObject:function(e,t){var i,n,s,a,l,h,f=this._grid;for(i in f)for(n in l=f[i])for(s=0,a=(h=l[n]).length;s<a;s++)e.call(t,h[s])&&(s--,a--)},getNearObject:function(e){var t,i,n,s,a,l,h,f,d=this._getCoord(e.x),g=this._getCoord(e.y),k=this._objectPoint,v=this._sqCellSize,S=null;for(t=g-1;t<=g+1;t++)if(s=this._grid[t]){for(i=d-1;i<=d+1;i++)if(a=s[i])for(n=0,l=a.length;n<l;n++)h=a[n],((f=this._sqDist(k[L.Util.stamp(h)],e))<v||f<=v&&S===null)&&(v=f,S=h)}return S},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}},L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i,n,s,a=0,l=null,h=[];for(i=t.length-1;0<=i;i--)n=t[i],0<(s=this.getDistant(n,e))&&(h.push(n),a<s&&(a=s,l=n));return{maxPoint:l,newPoints:h}},buildConvexHull:function(e,t){var i=[],n=this.findMostDistantPointFromBaseLine(e,t);return n.maxPoint?i=(i=i.concat(this.buildConvexHull([e[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,e[1]],n.newPoints)):[e[0]]},getConvexHull:function(e){var t,i=!1,n=!1,s=!1,a=!1,l=null,h=null,f=null,d=null,g=null,k=null;for(t=e.length-1;0<=t;t--){var v=e[t];(i===!1||v.lat>i)&&(i=(l=v).lat),(n===!1||v.lat<n)&&(n=(h=v).lat),(s===!1||v.lng>s)&&(s=(f=v).lng),(a===!1||v.lng<a)&&(a=(d=v).lng)}return g=n!==i?(k=h,l):(k=d,f),[].concat(this.buildConvexHull([k,g],e),this.buildConvexHull([g,k],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),n=[];for(t=i.length-1;0<=t;t--)e=i[t].getLatLng(),n.push(e);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,i):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,i):(i.y+=10,this._generatePointsCircle(t.length,i)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i,n,s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,a=this._2PI/e,l=[];for(s=Math.max(s,35),l.length=e,i=0;i<e;i++)n=this._circleStartAngle+i*a,l[i]=new L.Point(t.x+s*Math.cos(n),t.y+s*Math.sin(n))._round();return l},_generatePointsSpiral:function(e,t){var i,n=this._group.options.spiderfyDistanceMultiplier,s=n*this._spiralLengthStart,a=n*this._spiralFootSeparation,l=n*this._spiralLengthFactor*this._2PI,h=0,f=[];for(i=f.length=e;0<=i;i--)i<e&&(f[i]=new L.Point(t.x+s*Math.cos(h),t.y+s*Math.sin(h))._round()),s+=l/(h+=a/s+5e-4*i);return f},_noanimationUnspiderfy:function(){var e,t,i=this._group,n=i._map,s=i._featureGroup,a=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),t=a.length-1;0<=t;t--)e=a[t],s.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(n.removeLayer(e._spiderLeg),delete e._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:a}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i,n,s,a,l=this._group,h=l._map,f=l._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(l._ignoreMove=!0,i=0;i<e.length;i++)a=h.layerPointToLatLng(t[i]),n=e[i],s=new L.Polyline([this._latlng,a],d),h.addLayer(s),n._spiderLeg=s,n._preSpiderfyLatlng=n._latlng,n.setLatLng(a),n.setZIndexOffset&&n.setZIndexOffset(1e6),f.addLayer(n);this.setOpacity(.3),l._ignoreMove=!1,l.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,n,s,a,l,h,f=this,d=this._group,g=d._map,k=d._featureGroup,v=this._latlng,S=g.latLngToLayerPoint(v),E=L.Path.SVG,B=L.extend({},this._group.options.spiderLegPolylineOptions),z=B.opacity;for(z===void 0&&(z=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),E?(B.opacity=0,B.className=(B.className||"")+" leaflet-cluster-spider-leg"):B.opacity=z,d._ignoreMove=!0,i=0;i<e.length;i++)n=e[i],h=g.layerPointToLatLng(t[i]),s=new L.Polyline([v,h],B),g.addLayer(s),n._spiderLeg=s,E&&(l=(a=s._path).getTotalLength()+.1,a.style.strokeDasharray=l,a.style.strokeDashoffset=l),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),k.addLayer(n),n._setPos&&n._setPos(S);for(d._forceLayout(),d._animationStart(),i=e.length-1;0<=i;i--)h=g.layerPointToLatLng(t[i]),(n=e[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(h),n.clusterShow&&n.clusterShow(),E&&((a=(s=n._spiderLeg)._path).style.strokeDashoffset=0,s.setStyle({opacity:z}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:f,markers:e})},200)},_animationUnspiderfy:function(e){var t,i,n,s,a,l,h=this,f=this._group,d=f._map,g=f._featureGroup,k=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),v=this.getAllChildMarkers(null,!0),S=L.Path.SVG;for(f._ignoreMove=!0,f._animationStart(),this.setOpacity(1),i=v.length-1;0<=i;i--)(t=v[i])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,l=!0,t._setPos&&(t._setPos(k),l=!1),t.clusterHide&&(t.clusterHide(),l=!1),l&&g.removeLayer(t),S&&(a=(s=(n=t._spiderLeg)._path).getTotalLength()+.1,s.style.strokeDashoffset=a,n.setStyle({opacity:0})));f._ignoreMove=!1,setTimeout(function(){var E=0;for(i=v.length-1;0<=i;i--)(t=v[i])._spiderLeg&&E++;for(i=v.length-1;0<=i;i--)(t=v[i])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<E&&g.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);f._animationEnd(),f.fire("unspiderfied",{cluster:h,markers:v})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),u.MarkerClusterGroup=r,u.MarkerCluster=_,Object.defineProperty(u,"__esModule",{value:!0})})})(at,at.exports);function Zt(c){let o=0,u=0,r=c.length;return c.forEach(_=>{o+=_[0],u+=_[1]}),[o/r,u/r]}async function lt(c){const o="https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories";try{const r=await(await fetch(o)).json(),_=L.geoJSON(r,{style:e=>({color:e.properties.color,weight:2,opacity:.25,fillOpacity:.25})});return _.addTo(c),_}catch(u){console.error("Error fetching territories data:",u)}}function ut(c,o){let u=L.layerGroup();return L.geoJSON(o,{onEachFeature:(r,_)=>{if(r.geometry.type==="Polygon"){const e=Zt(r.geometry.coordinates[0]);!isNaN(e[0])&&!isNaN(e[1])&&L.marker([e[1],e[0]],{icon:L.divIcon({className:"territory-label",html:r.properties.Name,iconSize:L.point(100,40)})}).addTo(u)}}}),u.addTo(c),u}const T="src/lib/Map/Toolbar.svelte";function gt(c){let o;const u={c:function(){o=V("path"),this.h()},l:function(_){o=R(_,"path",{d:!0}),b(o).forEach(y),this.h()},h:function(){p(o,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),C(o,T,30,3,998)},m:function(_,e){A(_,o,e)},d:function(_){_&&y(o)}};return M("SvelteRegisterBlock",{block:u,id:gt.name,type:"else",source:"(30:2) {:else}",ctx:c}),u}function Lt(c){let o,u;const r={c:function(){o=V("path"),u=V("path"),this.h()},l:function(e){o=R(e,"path",{d:!0}),b(o).forEach(y),u=R(e,"path",{d:!0}),b(u).forEach(y),this.h()},h:function(){p(o,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),C(o,T,28,3,797),p(u,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),C(u,T,28,53,847)},m:function(e,t){A(e,o,t),A(e,u,t)},d:function(e){e&&(y(o),y(u))}};return M("SvelteRegisterBlock",{block:r,id:Lt.name,type:"if",source:"(28:2) {#if eye}",ctx:c}),r}function ve(c){let o,u,r="🗺️",_,e,t,i,n,s,a,l,h,f,d,g,k,v,S,E,B,z,Y;function ue(x,U){return x[0]?Lt:gt}let m=ue(c),w=m(c);const Re={c:function(){o=Z("div"),u=Z("button"),u.textContent=r,_=H(),e=Z("button"),t=V("svg"),w.c(),n=H(),s=Z("button"),a=V("svg"),l=V("path"),h=H(),f=Z("button"),d=V("svg"),g=V("mask"),k=V("rect"),v=V("g"),S=V("path"),this.h()},l:function(U){o=N(U,"DIV",{class:!0});var G=b(o);u=N(G,"BUTTON",{class:!0,"data-svelte-h":!0}),bt(u)!=="svelte-1q7jlwb"&&(u.textContent=r),_=q(G),e=N(G,"BUTTON",{type:!0,title:!0,class:!0});var Fe=b(e);t=R(Fe,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var xe=b(t);w.l(xe),xe.forEach(y),Fe.forEach(y),n=q(G),s=N(G,"BUTTON",{class:!0,title:!0});var He=b(s);a=R(He,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var qe=b(a);l=R(qe,"path",{d:!0,fill:!0}),b(l).forEach(y),qe.forEach(y),He.forEach(y),h=q(G),f=N(G,"BUTTON",{class:!0});var De=b(f);d=R(De,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var pe=b(d);g=R(pe,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var Xe=b(g);k=R(Xe,"rect",{width:!0,height:!0,fill:!0}),b(k).forEach(y),Xe.forEach(y),v=R(pe,"g",{mask:!0});var Qe=b(v);S=R(Qe,"path",{d:!0,fill:!0}),b(S).forEach(y),Qe.forEach(y),pe.forEach(y),De.forEach(y),G.forEach(y),this.h()},h:function(){p(u,"class","selected s-X67GN01QUXjj"),C(u,T,24,1,486),p(t,"fill","none"),p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width",i=c[0]?2:1),p(t,"viewBox","0 0 24 24"),p(t,"stroke","currentColor"),C(t,T,26,2,646),p(e,"type","button"),p(e,"title","Show Markers"),p(e,"class","s-X67GN01QUXjj"),Ye(e,"selected",c[0]),C(e,T,25,1,559),p(l,"d","M0.800017 9.54074L15.8136 16.3514C16.2519 16.5506 16.7475 16.5506 17.1858 16.3514L32.1993 9.54074C33.266 9.0567 33.266 7.44474 32.1993 6.96071L17.1864 0.149366C16.9711 0.0509415 16.7371 0 16.5003 0C16.2636 0 16.0296 0.0509415 15.8142 0.149366L0.800017 6.96006C-0.266672 7.4441 -0.266672 9.0567 0.800017 9.54074ZM32.2 15.2306L28.4559 13.5336L18.0378 18.256C17.5506 18.4771 17.033 18.5892 16.5 18.5892C15.967 18.5892 15.4501 18.4771 14.9622 18.256L4.54471 13.5336L0.800017 15.2306C-0.266672 15.714 -0.266672 17.3253 0.800017 17.8087L15.8136 24.6142C16.2519 24.8128 16.7475 24.8128 17.1858 24.6142L32.2 17.8087C33.2667 17.3253 33.2667 15.714 32.2 15.2306ZM32.2 23.4676L28.4701 21.777L18.0378 26.5059C17.5506 26.727 17.033 26.8391 16.5 26.8391C15.967 26.8391 15.4501 26.727 14.9622 26.5059L4.53053 21.777L0.800017 23.4676C-0.266672 23.951 -0.266672 25.5623 0.800017 26.0457L15.8136 32.8513C16.2519 33.0498 16.7475 33.0498 17.1858 32.8513L32.2 26.0457C33.2667 25.5623 33.2667 23.951 32.2 23.4676Z"),p(l,"fill","black"),C(l,T,37,3,1542),p(a,"class","svgSize s-X67GN01QUXjj"),p(a,"width","33"),p(a,"height","33"),p(a,"viewBox","0 0 33 33"),p(a,"fill","none"),p(a,"xmlns","http://www.w3.org/2000/svg"),C(a,T,36,2,1427),p(s,"class","selected s-X67GN01QUXjj"),p(s,"title","Cycle Map Style"),C(s,T,35,1,1343),p(k,"width","54"),p(k,"height","54"),p(k,"fill","#D9D9D9"),C(k,T,44,3,2897),p(g,"id","mask0_14_196"),St(g,"mask-type","alpha"),p(g,"maskUnits","userSpaceOnUse"),p(g,"x","0"),p(g,"y","0"),p(g,"width","54"),p(g,"height","54"),C(g,T,43,3,2783),p(S,"d","M24.75 47.25V32.4L14.2875 42.9188L11.0813 39.7125L21.6 29.25H6.75V24.75H21.6L11.0813 14.2875L14.2875 11.0813L24.75 21.6V6.75H29.25V21.6L39.7125 11.0813L42.9188 14.2875L32.4 24.75H47.25V29.25H32.4L42.9188 39.7125L39.7125 42.9188L29.25 32.4V47.25H24.75Z"),p(S,"fill",E=c[1]?"black":"white"),C(S,T,47,3,2990),p(v,"mask","url(#mask0_14_196)"),C(v,T,46,3,2957),p(d,"class","svgSize s-X67GN01QUXjj"),p(d,"width","54"),p(d,"height","24"),p(d,"viewBox","0 0 54 54"),p(d,"fill","#000"),p(d,"xmlns","http://www.w3.org/2000/svg"),C(d,T,42,2,2668),p(f,"class",B="selected "+(c[1]?"":"blackbg")+" s-X67GN01QUXjj"),C(f,T,41,1,2583),p(o,"class","flex flex-col s-X67GN01QUXjj"),C(o,T,23,0,457)},m:function(U,G){A(U,o,G),O(o,u),O(o,_),O(o,e),O(e,t),w.m(t,null),O(o,n),O(o,s),O(s,a),O(a,l),O(o,h),O(o,f),O(f,d),O(d,g),O(g,k),O(d,v),O(v,S),z||(Y=[ce(u,"click",c[5],!1,!1,!1,!1),ce(e,"click",c[2],!1,!1,!1,!1),ce(s,"click",c[3],!1,!1,!1,!1),ce(f,"click",c[4],!1,!1,!1,!1)],z=!0)},p:function(U,[G]){m!==(m=ue(U))&&(w.d(1),w=m(U),w&&(w.c(),w.m(t,null))),G&1&&i!==(i=U[0]?2:1)&&p(t,"stroke-width",i),G&1&&Ye(e,"selected",U[0]),G&2&&E!==(E=U[1]?"black":"white")&&p(S,"fill",E),G&2&&B!==(B="selected "+(U[1]?"":"blackbg")+" s-X67GN01QUXjj")&&p(f,"class",B)},i:We,o:We,d:function(U){U&&y(o),w.d(),z=!1,At(Y)}};return M("SvelteRegisterBlock",{block:Re,id:ve.name,type:"component",source:"",ctx:c}),Re}function Nt(c,o,u){let{$$slots:r={},$$scope:_}=o;se("Toolbar",r,[]);let e=!0,t=!0;function i(){u(0,e=!e),ee.update(h=>!h)}function n(){nt()}function s(){ot(),u(1,t=!t)}function a(){rt()}const l=[];return Object.keys(o).forEach(h=>{!~l.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${h}'`)}),c.$capture_state=()=>({isMarkersVisible:ee,cycleMapStyle:nt,toggleDarkMode:ot,toggleTerritoriesVisibility:rt,eye:e,darkIcon:t,clickEye:i,triggerCycleMapStyle:n,toggleMarkerColor:s,toggleTerritoriesLayer:a}),c.$inject_state=h=>{"eye"in h&&u(0,e=h.eye),"darkIcon"in h&&u(1,t=h.darkIcon)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),[e,t,i,n,s,a]}class ct extends oe{constructor(o){super(o),re(this,o,Nt,ve,ne,{}),M("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:o,id:ve.name})}}const{Error:W,console:Vt}=It,Rt="src/lib/Map/Leaflet.svelte";function ke(c){let o;const u=c[9].default,r=ze(u,c,c[8],null),_={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,i){r&&r.m(t,i),o=!0},p:function(t,i){r&&r.p&&(!o||i&256)&&Ge(r,u,t,t[8],o?je(u,t[8],i,null):Ie(t[8]),null)},i:function(t){o||(P(r,t),o=!0)},o:function(t){I(r,t),o=!1},d:function(t){r&&r.d(t)}};return M("SvelteRegisterBlock",{block:_,id:ke.name,type:"if",source:"(188:2) {#if map}",ctx:c}),_}function Ce(c){let o,u,r=c[0]&&ke(c);const _={c:function(){o=Z("div"),r&&r.c(),this.h()},l:function(t){o=N(t,"DIV",{class:!0});var i=b(o);r&&r.l(i),i.forEach(y),this.h()},h:function(){p(o,"class","w-full h-full"),C(o,Rt,186,0,5271)},m:function(t,i){A(t,o,i),r&&r.m(o,null),c[10](o),u=!0},p:function(t,[i]){t[0]?r?(r.p(t,i),i&1&&P(r,1)):(r=ke(t),r.c(),P(r,1),r.m(o,null)):r&&(ae(),I(r,1,1,()=>{r=null}),le())},i:function(t){u||(P(r),u=!0)},o:function(t){I(r),u=!1},d:function(t){t&&y(o),r&&r.d(),c[10](null)}};return M("SvelteRegisterBlock",{block:_,id:Ce.name,type:"component",source:"",ctx:c}),_}function Ft(c,o,u){let r,_;D(me,"currentMapStyleId"),X(c,me,m=>u(6,r=m)),D(ge,"territoriesVisible"),X(c,ge,m=>u(7,_=m));let{$$slots:e={},$$scope:t}=o;se("Leaflet",e,["default"]);let{bounds:i=void 0}=o,{view:n=void 0}=o,{zoom:s=void 0}=o;const a=Ke();let l,h,f,d=null,g=null,k=null;async function v(m){if(!k)try{k=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),d=await lt(m,k),g=await ut(m,k)}catch(w){console.error("Error fetching territories data:",w)}}const S=j.Control.extend({onAdd(m){const w=j.DomUtil.create("div","map-toolbar-container");return new ct({target:w,props:{}}),w}});Q(()=>{if(!i&&(!n||!s))throw new Error("Must set either bounds, or view and zoom.");u(0,l=j.map(h,{maxZoom:18}));const m=j.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});l.addLayer(m),te.set(m),i?(l.fitBounds(i),K.set(i)):n&&s&&l.setView(n,s),l.whenReady(()=>{if(!i){const w=l.getBounds();K.set(w)}v(l),u(5,f=new Le({Language:"fr",style:j.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(l)),new S({position:"topright"}).addTo(l)}),l.on("zoom",w=>a("zoom",w)).on("moveend",()=>{const w=l.getBounds();K.set(w)}).on("popupopen",async w=>{await Je(),w.popup.update()})});function E(){l&&(!d||!g?v(l):(l.addLayer(d),l.addLayer(g)))}function B(){l&&(d&&l.removeLayer(d),g&&l.removeLayer(g),console.log("Territories removed"))}J(()=>{l==null||l.remove(),u(0,l=void 0),B()}),de("map",{getMap:()=>l});function z(m){l&&f&&(l.removeLayer(f),u(5,f=new Le({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(l)))}const Y=["bounds","view","zoom"];Object.keys(o).forEach(m=>{!~Y.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Vt.warn(`<Leaflet> was created with unknown prop '${m}'`)});function ue(m){ft[m?"unshift":"push"](()=>{h=m,u(1,h)})}return c.$$set=m=>{"bounds"in m&&u(2,i=m.bounds),"view"in m&&u(3,n=m.view),"zoom"in m&&u(4,s=m.zoom),"$$scope"in m&&u(8,t=m.$$scope)},c.$capture_state=()=>({onMount:Q,onDestroy:J,setContext:de,createEventDispatcher:Ke,tick:Je,L:j,addTerritoriesLayer:lt,addTerritoriesLabels:ut,MaptilerLayer:Le,MaptilerStyle:jt,Toolbar:ct,currentMapStyleId:me,mapBoundsStore:K,territoriesVisible:ge,clusterGroupStore:te,bounds:i,view:n,zoom:s,dispatch:a,map:l,mapElement:h,mtLayer:f,territoriesLayer:d,labelsLayer:g,territoriesData:k,initializeTerritories:v,ToolbarControl:S,addTerritories:E,removeTerritories:B,updateMapStyle:z,$currentMapStyleId:r,$territoriesVisible:_}),c.$inject_state=m=>{"bounds"in m&&u(2,i=m.bounds),"view"in m&&u(3,n=m.view),"zoom"in m&&u(4,s=m.zoom),"map"in m&&u(0,l=m.map),"mapElement"in m&&u(1,h=m.mapElement),"mtLayer"in m&&u(5,f=m.mtLayer),"territoriesLayer"in m&&(d=m.territoriesLayer),"labelsLayer"in m&&(g=m.labelsLayer),"territoriesData"in m&&(k=m.territoriesData)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),c.$$.update=()=>{c.$$.dirty&128&&(_?E():B()),c.$$.dirty&29&&l&&(i?l.fitBounds(i):n&&s&&l.setView(n,s)),c.$$.dirty&97&&r&&(console.log("MAP TILE NAME",r.name),l&&f&&z(r))},[l,h,i,n,s,f,r,_,t,e,ue]}class yt extends oe{constructor(o){super(o),re(this,o,Ft,Ce,ne,{bounds:2,view:3,zoom:4}),M("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:o,id:Ce.name})}get bounds(){throw new W("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(o){throw new W("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new W("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(o){throw new W("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new W("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(o){throw new W("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ht="data:image/png;base64,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",dt=""+new URL("../assets/custom-marker-white-outline.ja7aQokX.png",import.meta.url).href;function we(c){let o;const u=c[7].default,r=ze(u,c,c[6],null),_={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,i){r&&r.m(t,i),o=!0},p:function(t,i){r&&r.p&&(!o||i&64)&&Ge(r,u,t,t[6],o?je(u,t[6],i,null):Ie(t[6]),null)},i:function(t){o||(P(r,t),o=!0)},o:function(t){I(r,t),o=!1},d:function(t){r&&r.d(t)}};return M("SvelteRegisterBlock",{block:_,id:we.name,type:"if",source:"(65:0) {#if marker}",ctx:c}),_}function Me(c){let o,u,r=c[0]&&we(c);const _={c:function(){r&&r.c(),o=F()},l:function(t){r&&r.l(t),o=F()},m:function(t,i){r&&r.m(t,i),A(t,o,i),u=!0},p:function(t,[i]){t[0]?r?(r.p(t,i),i&1&&P(r,1)):(r=we(t),r.c(),P(r,1),r.m(o.parentNode,o)):r&&(ae(),I(r,1,1,()=>{r=null}),le())},i:function(t){u||(P(r),u=!0)},o:function(t){I(r),u=!1},d:function(t){t&&y(o),r&&r.d(t)}};return M("SvelteRegisterBlock",{block:_,id:Me.name,type:"component",source:"",ctx:c}),_}function xt(c,o,u){let r,_;D(te,"clusterGroupStore"),X(c,te,d=>u(4,r=d)),D(ee,"isMarkersVisible"),X(c,ee,d=>u(5,_=d));let{$$slots:e={},$$scope:t}=o;se("Marker",e,["default"]);let{width:i}=o,{height:n}=o,{latLng:s}=o,a,l=_e("map").getMap();de("layer",{getLayer:()=>a});function h(d){let k=`<img src="${d==="dark"?dt:ht}" style="width: ${i}px; height: ${n}px;">`,v=j.divIcon({html:k,className:"map-marker",iconSize:j.point(i,n)});a?(a.setIcon(v),r&&r.addLayer(a)):(u(0,a=j.marker(s,{icon:v})),r&&r.addLayer(a))}Q(()=>{l&&r&&ie.subscribe(d=>{h(d)})}),J(()=>{a&&(a.remove(),u(0,a=void 0))}),c.$$.on_mount.push(function(){i===void 0&&!("width"in o||c.$$.bound[c.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),n===void 0&&!("height"in o||c.$$.bound[c.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),s===void 0&&!("latLng"in o||c.$$.bound[c.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const f=["width","height","latLng"];return Object.keys(o).forEach(d=>{!~f.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Marker> was created with unknown prop '${d}'`)}),c.$$set=d=>{"width"in d&&u(1,i=d.width),"height"in d&&u(2,n=d.height),"latLng"in d&&u(3,s=d.latLng),"$$scope"in d&&u(6,t=d.$$scope)},c.$capture_state=()=>({onMount:Q,onDestroy:J,getContext:_e,setContext:de,darkMode:ie,clusterGroupStore:te,isMarkersVisible:ee,L:j,customMarker:ht,customMarkerWhite:dt,width:i,height:n,latLng:s,marker:a,mapInstance:l,createOrUpdateMarker:h,$clusterGroupStore:r,$isMarkersVisible:_}),c.$inject_state=d=>{"width"in d&&u(1,i=d.width),"height"in d&&u(2,n=d.height),"latLng"in d&&u(3,s=d.latLng),"marker"in d&&u(0,a=d.marker),"mapInstance"in d&&(l=d.mapInstance)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),c.$$.update=()=>{c.$$.dirty&49&&a&&r&&(_?r.addLayer(a):r.removeLayer(a))},[a,i,n,s,r,_,t,e]}class vt extends oe{constructor(o){super(o),re(this,o,xt,Me,ne,{width:1,height:2,latLng:3}),M("SvelteRegisterComponent",{component:this,tagName:"Marker",options:o,id:Me.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(o){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(o){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(o){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ht="src/lib/Map/Popup.svelte";function be(c){let o;const u=c[3].default,r=ze(u,c,c[2],null),_={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,i){r&&r.m(t,i),o=!0},p:function(t,i){r&&r.p&&(!o||i&4)&&Ge(r,u,t,t[2],o?je(u,t[2],i,null):Ie(t[2]),null)},i:function(t){o||(P(r,t),o=!0)},o:function(t){I(r,t),o=!1},d:function(t){r&&r.d(t)}};return M("SvelteRegisterBlock",{block:_,id:be.name,type:"if",source:"(36:2) {#if open}",ctx:c}),_}function Se(c){let o,u,r=c[1]&&be(c);const _={c:function(){o=Z("div"),r&&r.c(),this.h()},l:function(t){o=N(t,"DIV",{});var i=b(o);r&&r.l(i),i.forEach(y),this.h()},h:function(){C(o,Ht,34,0,671)},m:function(t,i){A(t,o,i),r&&r.m(o,null),c[4](o),u=!0},p:function(t,[i]){t[1]?r?(r.p(t,i),i&2&&P(r,1)):(r=be(t),r.c(),P(r,1),r.m(o,null)):r&&(ae(),I(r,1,1,()=>{r=null}),le())},i:function(t){u||(P(r),u=!0)},o:function(t){I(r),u=!1},d:function(t){t&&y(o),r&&r.d(),c[4](null)}};return M("SvelteRegisterBlock",{block:_,id:Se.name,type:"component",source:"",ctx:c}),_}function qt(c,o,u){let{$$slots:r={},$$scope:_}=o;se("Popup",r,["default"]);let e,t,i=!1;const n=_e("layer"),s=n.getLayer();Q(()=>{e=j.popup().setContent(t),s&&(s.bindPopup(e),s.on("popupopen",()=>u(1,i=!0)),s.on("popupclose",()=>u(1,i=!1)))}),J(()=>{s&&s.unbindPopup(),e&&(e.remove(),e=void 0)});const a=[];Object.keys(o).forEach(h=>{!~a.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Popup> was created with unknown prop '${h}'`)});function l(h){ft[h?"unshift":"push"](()=>{t=h,u(0,t)})}return c.$$set=h=>{"$$scope"in h&&u(2,_=h.$$scope)},c.$capture_state=()=>({onMount:Q,onDestroy:J,getContext:_e,L:j,popup:e,popupElement:t,open:i,layerContext:n,layer:s}),c.$inject_state=h=>{"popup"in h&&(e=h.popup),"popupElement"in h&&u(0,t=h.popupElement),"open"in h&&u(1,i=h.open)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),[t,i,_,r,l]}class kt extends oe{constructor(o){super(o),re(this,o,qt,Se,ne,{}),M("SvelteRegisterComponent",{component:this,tagName:"Popup",options:o,id:Se.name})}}const $="src/routes/map/+page.svelte";function he(c,o,u){const r=c.slice();return r[4]=o[u].latLng,r[5]=o[u].visible,r[6]=o[u].name,r[7]=o[u].description,r[8]=o[u].photos,r[10]=u,r}function _t(c,o,u){const r=c.slice();return r[11]=o[u].url,r[12]=o[u].alt,r}function Ae(c){let o,u;o=new vt({props:{latLng:c[4],width:20,height:20,$$slots:{default:[wt]},$$scope:{ctx:c}},$$inline:!0});const r={c:function(){Ue(o.$$.fragment)},l:function(e){Ze(o.$$.fragment,e)},m:function(e,t){Ne(o,e,t),u=!0},p:function(e,t){const i={};t&4&&(i.latLng=e[4]),t&32772&&(i.$$scope={dirty:t,ctx:e}),o.$set(i)},i:function(e){u||(P(o.$$.fragment,e),u=!0)},o:function(e){I(o.$$.fragment,e),u=!1},d:function(e){Ve(o,e)}};return M("SvelteRegisterBlock",{block:r,id:Ae.name,type:"if",source:"(30:12) {#if visible}",ctx:c}),r}function Pe(c){let o,u=fe(c[8]),r=[];for(let e=0;e<u.length;e+=1)r[e]=Be(_t(c,u,e));const _={c:function(){o=Z("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l:function(t){o=N(t,"DIV",{class:!0});var i=b(o);for(let n=0;n<r.length;n+=1)r[n].l(i);i.forEach(y),this.h()},h:function(){p(o,"class","flex flex-row overflow-x-auto"),C(o,$,37,24,1421)},m:function(t,i){A(t,o,i);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(o,null)},p:function(t,i){if(i&4){u=fe(t[8]);let n;for(n=0;n<u.length;n+=1){const s=_t(t,u,n);r[n]?r[n].p(s,i):(r[n]=Be(s),r[n].c(),r[n].m(o,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=u.length}},d:function(t){t&&y(o),Pt(r,t)}};return M("SvelteRegisterBlock",{block:_,id:Pe.name,type:"if",source:"(37:24) {#if photos && photos.length}",ctx:c}),_}function Be(c){let o,u,r;const _={c:function(){o=Z("img"),this.h()},l:function(t){o=N(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){et(o.src,u=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${c[11]}`)||p(o,"src",u),p(o,"alt",r=c[12]),p(o,"class","s-_HdLFogMzSo7"),C(o,$,39,36,1562)},m:function(t,i){A(t,o,i)},p:function(t,i){i&4&&!et(o.src,u=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${t[11]}`)&&p(o,"src",u),i&4&&r!==(r=t[12])&&p(o,"alt",r)},d:function(t){t&&y(o)}};return M("SvelteRegisterBlock",{block:_,id:Be.name,type:"each",source:"(39:32) {#each photos as {url, alt}}",ctx:c}),_}function Oe(c){let o,u,r=c[7]+"";const _={c:function(){o=Z("p"),u=new Bt(!1),this.h()},l:function(t){o=N(t,"P",{class:!0});var i=b(o);u=Ot(i,!1),i.forEach(y),this.h()},h:function(){u.a=null,p(o,"class","description max-h-32 overflow-y-auto s-_HdLFogMzSo7"),C(o,$,45,28,1869)},m:function(t,i){A(t,o,i),u.m(r,o)},p:function(t,i){i&4&&r!==(r=t[7]+"")&&u.p(r)},d:function(t){t&&y(o)}};return M("SvelteRegisterBlock",{block:_,id:Oe.name,type:"if",source:"(45:24) {#if description}",ctx:c}),_}function Ct(c){let o,u=c[6]+"",r,_,e,t,i=c[8]&&c[8].length&&Pe(c),n=c[7]&&Oe(c);const s={c:function(){o=Z("h3"),r=pt(u),_=H(),i&&i.c(),e=H(),n&&n.c(),t=F(),this.h()},l:function(l){o=N(l,"H3",{});var h=b(o);r=mt(h,u),h.forEach(y),_=q(l),i&&i.l(l),e=q(l),n&&n.l(l),t=F(),this.h()},h:function(){C(o,$,32,24,1272)},m:function(l,h){A(l,o,h),O(o,r),A(l,_,h),i&&i.m(l,h),A(l,e,h),n&&n.m(l,h),A(l,t,h)},p:function(l,h){h&4&&u!==(u=l[6]+"")&&zt(r,u),l[8]&&l[8].length?i?i.p(l,h):(i=Pe(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),l[7]?n?n.p(l,h):(n=Oe(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d:function(l){l&&(y(o),y(_),y(e),y(t)),i&&i.d(l),n&&n.d(l)}};return M("SvelteRegisterBlock",{block:s,id:Ct.name,type:"slot",source:"(32:20) <Popup>",ctx:c}),s}function wt(c){let o,u,r;o=new kt({props:{$$slots:{default:[Ct]},$$scope:{ctx:c}},$$inline:!0});const _={c:function(){Ue(o.$$.fragment),u=H()},l:function(t){Ze(o.$$.fragment,t),u=q(t)},m:function(t,i){Ne(o,t,i),A(t,u,i),r=!0},p:function(t,i){const n={};i&32772&&(n.$$scope={dirty:i,ctx:t}),o.$set(n)},i:function(t){r||(P(o.$$.fragment,t),r=!0)},o:function(t){I(o.$$.fragment,t),r=!1},d:function(t){t&&y(u),Ve(o,t)}};return M("SvelteRegisterBlock",{block:_,id:wt.name,type:"slot",source:"(31:16) <Marker {latLng} width={20} height={20}>",ctx:c}),_}function Ee(c,o){let u,r,_,e=o[5]&&Ae(o);const t={key:c,first:null,c:function(){u=F(),e&&e.c(),r=F(),this.h()},l:function(n){u=F(),e&&e.l(n),r=F(),this.h()},h:function(){this.first=u},m:function(n,s){A(n,u,s),e&&e.m(n,s),A(n,r,s),_=!0},p:function(n,s){o=n,o[5]?e?(e.p(o,s),s&4&&P(e,1)):(e=Ae(o),e.c(),P(e,1),e.m(r.parentNode,r)):e&&(ae(),I(e,1,1,()=>{e=null}),le())},i:function(n){_||(P(e),_=!0)},o:function(n){I(e),_=!1},d:function(n){n&&(y(u),y(r)),e&&e.d(n)}};return M("SvelteRegisterBlock",{block:t,id:Ee.name,type:"each",source:"(29:8) {#each $visibleMarkers as { latLng, visible, name, description, photos }",ctx:o}),t}function Mt(c){let o=[],u=new Map,r,_,e=fe(c[2]);const t=n=>n[4].join(",")+"-"+n[10];tt(c,e,he,t);for(let n=0;n<e.length;n+=1){let s=he(c,e,n),a=t(s);u.set(a,o[n]=Ee(a,s))}const i={c:function(){for(let s=0;s<o.length;s+=1)o[s].c();r=F()},l:function(s){for(let a=0;a<o.length;a+=1)o[a].l(s);r=F()},m:function(s,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,a);A(s,r,a),_=!0},p:function(s,a){a&4&&(e=fe(s[2]),ae(),tt(s,e,he,t),o=Et(o,a,t,1,s,e,u,r.parentNode,Tt,Ee,r,he),le())},i:function(s){if(!_){for(let a=0;a<e.length;a+=1)P(o[a]);_=!0}},o:function(s){for(let a=0;a<o.length;a+=1)I(o[a]);_=!1},d:function(s){s&&y(r);for(let a=0;a<o.length;a+=1)o[a].d(s)}};return M("SvelteRegisterBlock",{block:i,id:Mt.name,type:"slot",source:"(28:4) <Leaflet view={$initialViewStore} zoom={8}>",ctx:c}),i}function Te(c){let o,u,r,_,e,t,i;t=new yt({props:{view:c[1],zoom:8,$$slots:{default:[Mt]},$$scope:{ctx:c}},$$inline:!0});const n={c:function(){o=Z("h1"),u=pt("counter*map"),_=H(),e=Z("div"),Ue(t.$$.fragment),this.h()},l:function(a){o=N(a,"H1",{class:!0});var l=b(o);u=mt(l,"counter*map"),l.forEach(y),_=q(a),e=N(a,"DIV",{class:!0});var h=b(e);Ze(t.$$.fragment,h),h.forEach(y),this.h()},h:function(){p(o,"class",r=$e(c[0]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),C(o,$,22,0,862),p(e,"class","w-full h-screen"),C(e,$,25,0,936)},m:function(a,l){A(a,o,l),O(o,u),A(a,_,l),A(a,e,l),Ne(t,e,null),i=!0},p:function(a,[l]){(!i||l&1&&r!==(r=$e(a[0]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&p(o,"class",r);const h={};l&2&&(h.view=a[1]),l&32772&&(h.$$scope={dirty:l,ctx:a}),t.$set(h)},i:function(a){i||(P(t.$$.fragment,a),i=!0)},o:function(a){I(t.$$.fragment,a),i=!1},d:function(a){a&&(y(o),y(_),y(e)),Ve(t)}};return M("SvelteRegisterBlock",{block:n,id:Te.name,type:"component",source:"",ctx:c}),n}function Dt(c,o,u){let r,_,e;D(ie,"darkMode"),X(c,ie,a=>u(0,r=a)),D(ye,"initialViewStore"),X(c,ye,a=>u(1,_=a));let{$$slots:t={},$$scope:i}=o;se("Page",t,[]);const n=it([st,K],([a,l])=>!l||typeof l.contains!="function"?[]:a.filter(h=>{const[f,d]=h.latLng;return l.contains(j.latLng(f,d))}));D(n,"visibleMarkers"),X(c,n,a=>u(2,e=a));const s=[];return Object.keys(o).forEach(a=>{!~s.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Page> was created with unknown prop '${a}'`)}),c.$capture_state=()=>({derived:it,onMount:Q,L:j,Leaflet:yt,Marker:vt,Popup:kt,markersStore:st,initialViewStore:ye,mapBoundsStore:K,darkMode:ie,visibleMarkers:n,$darkMode:r,$initialViewStore:_,$visibleMarkers:e}),[r,_,e,n]}class $t extends oe{constructor(o){super(o),re(this,o,Dt,Te,ne,{}),M("SvelteRegisterComponent",{component:this,tagName:"Page",options:o,id:Te.name})}}export{$t as component,Jt as universal};
