import{a as pe,v as K,d as Y,$ as me,o as Me,G as At,D as Ee,F as De,c as St,e as j,h as D,j as H,m as Z,z as qt,u as Mt,g as Et,b as It,a0 as Ze,A as fe,f as q,t as se,l as W,k as ae,p as Wt,w as he,q as de,a1 as Ln,a2 as bn,n as Ne,C as Xt,r as kn,a3 as Gt}from"../chunks/scheduler.8doqxhoJ.js";import{S as ge,i as ve,d as N,v as ye,b as M,j as O,c as X,t as S,o as x,a as T,k as $,e as P,l as Pe,s as _e,g as ee,h as te,m as ne,n as ie,f as Ve,u as He,w as Qt,x as Jt,p as Kt,q as Yt}from"../chunks/index.B-UXCcAk.js";import{g as Bt,m as Ie,c as Be}from"../chunks/object-view.HoUL2Upa.js";import{d as zt}from"../chunks/index.XXZ5sPHA.js";import{o as Cn,t as be,q as Oe,r as qe,d as ce,u as We,v as Xe,w as ue,L as J,T as Rt,x as Ae,a as Ce,b as Tt,y as Qe,z as jt,A as Dt,C as Zt,D as Pn,E as Je,F as Ke,G as Se,I as xt,H as xe,J as $t,S as en,m as Nt,f as $e,g as tn,M as nn,h as on,B as rn,k as sn,n as an,p as Vt,c as ze,s as Ue,e as Ye,j as ln}from"../chunks/ToolsSidebar.EbrsaIh3.js";const Sn=!1,Wn=Object.freeze(Object.defineProperty({__proto__:null,ssr:Sn},Symbol.toStringTag,{value:"Module"}));var Ht={exports:{}};(function(s,n){(function(r,a){a(n)})(Cn,function(r){var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var i,o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,h=this.options.chunkInterval,f=this.options.chunkProgress,_=e.length,d=0,y=!0;if(this._map){var k=new Date().getTime(),p=L.bind(function(){var w=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<_;d++){if(c&&d%200==0){var R=new Date().getTime()-w;if(h<R)break}if((i=e[d])instanceof L.LayerGroup)y&&(e=e.slice(),y=!1),this._extractNonGroupLayers(i,e),_=e.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),t||this.fire("layeradd",{layer:i}),i.__parent&&i.__parent.getChildCount()===2)){var B=i.__parent.getAllChildMarkers(),F=B[0]===i?B[1]:B[0];o.removeLayer(F)}}else l.addLayer(i),t||this.fire("layeradd",{layer:i})}f&&f(d,_,new Date().getTime()-k),d===_?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)},this);p()}else for(var I=this._needsClustering;d<_;d++)(i=e[d])instanceof L.LayerGroup?(y&&(e=e.slice(),y=!1),this._extractNonGroupLayers(i,e),_=e.length):i.getLatLng?this.hasLayer(i)||I.push(i):l.addLayer(i);return this},removeLayers:function(e){var t,i,o=e.length,l=this._featureGroup,c=this._nonPointGroup,h=!0;if(!this._map){for(t=0;t<o;t++)(i=e[t])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(i,e),o=e.length):(this._arraySplice(this._needsClustering,i),c.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var f=e.slice(),_=o;for(t=0;t<_;t++)(i=f[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,f),_=f.length):this._unspiderfyLayer(i)}for(t=0;t<o;t++)(i=e[t])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(i,e),o=e.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),l.hasLayer(i)&&(l.removeLayer(i),i.clusterShow&&i.clusterShow())):(c.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i,o,l,c=this._needsClustering.slice(),h=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),o=c.length-1;0<=o;o--){for(i=!0,l=h.length-1;0<=l;l--)if(h[l].layer===c[o]){i=!1;break}i&&e.call(t,c[o])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(i){L.stamp(i)===e&&(t=i)}),t},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;0<=t;t--)if(i[t]===e)return!0;for(t=(i=this._needsRemoving).length-1;0<=t;t--)if(i[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var i=this._map;typeof t!="function"&&(t=function(){});var o=function(){!i.hasLayer(e)&&!i.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",o,this),this.off("animationend",o,this),i.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,i,o;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;t<i;t++)(o=this._needsRemoving[t]).newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(t=0,i=this._needsRemoving.length;t<i;t++)o=this._needsRemoving[t],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;0<=i;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,o=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());l<=t&&o[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,i){var o=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,h=this._map,f=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var _,d=e.__parent,y=d._markers;for(this._arraySplice(y,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<f));)t&&d._childCount<=1?(_=d._markers[0]===e?d._markers[1]:d._markers[0],o[d._zoom].removeObject(d,h.project(d._cLatLng,d._zoom)),l[d._zoom].addObject(_,h.project(_.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(_),_.__parent=d.__parent,d._icon&&(c.removeLayer(d),i||c.addLayer(_))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return i+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||o||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,i=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,l=this._map;(e||i||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,o=i;typeof i!="function"&&(o=function(){return i}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;t<=l;l--)this._gridClusters[l]=new L.DistanceGrid(o(l)),this._gridUnclustered[l]=new L.DistanceGrid(o(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i,o,l=this._gridClusters,c=this._gridUnclustered,h=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);h<=t;t--){i=this._map.project(e.getLatLng(),t);var f=l[t].getNearObject(i);if(f)return f._addChild(e),void(e.__parent=f);if(f=c[t].getNearObject(i)){var _=f.__parent;_&&this._removeLayer(f,!1);var d=new this._markerCluster(this,t,f,e);l[t].addObject(d,this._map.project(d._cLatLng,t)),f.__parent=d;var y=e.__parent=d;for(o=t-1;o>_._zoom;o--)y=new this._markerCluster(this,o,y),l[o].addObject(y,this._map.project(f.getLatLng(),o));return _._addChild(y),void this._removeFromGridUnclustered(f,t)}c[t].addObject(e,i)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i,o=e.getLayers(),l=0;for(t=t||[];l<o.length;l++)(i=o[l])instanceof L.LayerGroup?this._extractNonGroupLayers(i,t):t.push(i);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var i,o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,e,c,function(h){var f,_=h._latlng,d=h._markers;for(o.contains(_)||(_=null),h._isSingleParent()&&e+1===t?(l.removeLayer(h),h._recursivelyAddChildrenToMap(null,t,o)):(h.clusterHide(),h._recursivelyAddChildrenToMap(_,t,o)),i=d.length-1;0<=i;i--)f=d[i],o.contains(f._latlng)||l.removeLayer(f)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,t),l.eachLayer(function(h){h instanceof L.MarkerCluster||!h._icon||h.clusterShow()}),this._topClusterLevel._recursively(o,e,t,function(h){h._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,e,c,function(h){l.removeLayer(h),h.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,o=this._featureGroup;o.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){o.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,i){var o=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,l,t+1,i);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(o,i),this._enqueue(function(){if(e._childCount===1){var h=e._markers[0];this._ignoreMove=!0,h.setLatLng(h.getLatLng()),this._ignoreMove=!1,h.clusterShow&&h.clusterShow()}else e._recursively(o,i,l,function(f){f._recursivelyRemoveChildrenFromMap(o,l,t+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var u=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,i,o){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),o&&this._addChild(o)},getAllChildMarkers:function(e,t){e=e||[];for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i].getAllChildMarkers(e,t);for(var o=this._markers.length-1;0<=o;o--)t&&this._markers[o].__dragStart||e.push(this._markers[o]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,i=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,h=o.getZoom();0<i.length&&c<l;){c++;var f=[];for(t=0;t<i.length;t++)f=f.concat(i[t]._childClusters);i=f}c<l?this._group._map.setView(this._latlng,c):l<=h?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,i,o,l=this._markers,c=this._childClusters,h=0,f=0,_=this._childCount;if(_!==0){for(this._resetBounds(),e=0;e<l.length;e++)i=l[e]._latlng,this._bounds.extend(i),h+=i.lat,f+=i.lng;for(e=0;e<c.length;e++)(t=c[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),i=t._wLatLng,o=t._childCount,h+=i.lat*o,f+=i.lng*o;this._latlng=this._wLatLng=new L.LatLng(h/_,f/_),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,i){this._recursively(e,this._group._map.getMinZoom(),i-1,function(o){var l,c,h=o._markers;for(l=h.length-1;0<=l;l--)(c=h[l])._icon&&(c._setPos(t),c.clusterHide())},function(o){var l,c,h=o._childClusters;for(l=h.length-1;0<=l;l--)(c=h[l])._icon&&(c._setPos(t),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,o){this._recursively(e,o,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),i),l._isSingleParent()&&i-1===o?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,i)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(o){if(t!==o._zoom)for(var l=o._markers.length-1;0<=l;l--){var c=o._markers[l];i.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),o._group._featureGroup.addLayer(c))}},function(o){o._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._restorePosition();else for(var l=this._childClusters.length-1;0<=l;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,o){var l,c;this._recursively(e,t-1,i-1,function(h){for(c=h._markers.length-1;0<=c;c--)l=h._markers[c],o&&o.contains(l._latlng)||(h._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(h){for(c=h._childClusters.length-1;0<=c;c--)l=h._childClusters[c],o&&o.contains(l._latlng)||(h._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,i,o,l){var c,h,f=this._childClusters,_=this._zoom;if(t<=_&&(o&&o(this),l&&_===i&&l(this)),_<t||_<i)for(c=f.length-1;0<=c;c--)(h=f[c])._boundsNeedUpdate&&h._recalculateBounds(),e.intersects(h._bounds)&&h._recursively(e,t,i,o,l)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),o=this._getCoord(t.y),l=this._grid,c=l[o]=l[o]||{},h=c[i]=c[i]||[],f=L.Util.stamp(e);this._objectPoint[f]=t,h.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i,o,l=this._getCoord(t.x),c=this._getCoord(t.y),h=this._grid,f=h[c]=h[c]||{},_=f[l]=f[l]||[];for(delete this._objectPoint[L.Util.stamp(e)],i=0,o=_.length;i<o;i++)if(_[i]===e)return _.splice(i,1),o===1&&delete f[l],!0},eachObject:function(e,t){var i,o,l,c,h,f,_=this._grid;for(i in _)for(o in h=_[i])for(l=0,c=(f=h[o]).length;l<c;l++)e.call(t,f[l])&&(l--,c--)},getNearObject:function(e){var t,i,o,l,c,h,f,_,d=this._getCoord(e.x),y=this._getCoord(e.y),k=this._objectPoint,p=this._sqCellSize,I=null;for(t=y-1;t<=y+1;t++)if(l=this._grid[t]){for(i=d-1;i<=d+1;i++)if(c=l[i])for(o=0,h=c.length;o<h;o++)f=c[o],((_=this._sqDist(k[L.Util.stamp(f)],e))<p||_<=p&&I===null)&&(p=_,I=f)}return I},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o}},L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i,o,l,c=0,h=null,f=[];for(i=t.length-1;0<=i;i--)o=t[i],0<(l=this.getDistant(o,e))&&(f.push(o),c<l&&(c=l,h=o));return{maxPoint:h,newPoints:f}},buildConvexHull:function(e,t){var i=[],o=this.findMostDistantPointFromBaseLine(e,t);return o.maxPoint?i=(i=i.concat(this.buildConvexHull([e[0],o.maxPoint],o.newPoints))).concat(this.buildConvexHull([o.maxPoint,e[1]],o.newPoints)):[e[0]]},getConvexHull:function(e){var t,i=!1,o=!1,l=!1,c=!1,h=null,f=null,_=null,d=null,y=null,k=null;for(t=e.length-1;0<=t;t--){var p=e[t];(i===!1||p.lat>i)&&(i=(h=p).lat),(o===!1||p.lat<o)&&(o=(f=p).lat),(l===!1||p.lng>l)&&(l=(_=p).lng),(c===!1||p.lng<c)&&(c=(d=p).lng)}return y=o!==i?(k=f,h):(k=d,_),[].concat(this.buildConvexHull([k,y],e),this.buildConvexHull([y,k],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),o=[];for(t=i.length-1;0<=t;t--)e=i[t].getLatLng(),o.push(e);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,i):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,i):(i.y+=10,this._generatePointsCircle(t.length,i)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i,o,l=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,c=this._2PI/e,h=[];for(l=Math.max(l,35),h.length=e,i=0;i<e;i++)o=this._circleStartAngle+i*c,h[i]=new L.Point(t.x+l*Math.cos(o),t.y+l*Math.sin(o))._round();return h},_generatePointsSpiral:function(e,t){var i,o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,h=o*this._spiralLengthFactor*this._2PI,f=0,_=[];for(i=_.length=e;0<=i;i--)i<e&&(_[i]=new L.Point(t.x+l*Math.cos(f),t.y+l*Math.sin(f))._round()),l+=h/(f+=c/l+5e-4*i);return _},_noanimationUnspiderfy:function(){var e,t,i=this._group,o=i._map,l=i._featureGroup,c=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),t=c.length-1;0<=t;t--)e=c[t],l.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(o.removeLayer(e._spiderLeg),delete e._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:c}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i,o,l,c,h=this._group,f=h._map,_=h._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(h._ignoreMove=!0,i=0;i<e.length;i++)c=f.layerPointToLatLng(t[i]),o=e[i],l=new L.Polyline([this._latlng,c],d),f.addLayer(l),o._spiderLeg=l,o._preSpiderfyLatlng=o._latlng,o.setLatLng(c),o.setZIndexOffset&&o.setZIndexOffset(1e6),_.addLayer(o);this.setOpacity(.3),h._ignoreMove=!1,h.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,o,l,c,h,f,_=this,d=this._group,y=d._map,k=d._featureGroup,p=this._latlng,I=y.latLngToLayerPoint(p),w=L.Path.SVG,R=L.extend({},this._group.options.spiderLegPolylineOptions),B=R.opacity;for(B===void 0&&(B=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),w?(R.opacity=0,R.className=(R.className||"")+" leaflet-cluster-spider-leg"):R.opacity=B,d._ignoreMove=!0,i=0;i<e.length;i++)o=e[i],f=y.layerPointToLatLng(t[i]),l=new L.Polyline([p,f],R),y.addLayer(l),o._spiderLeg=l,w&&(h=(c=l._path).getTotalLength()+.1,c.style.strokeDasharray=h,c.style.strokeDashoffset=h),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),k.addLayer(o),o._setPos&&o._setPos(I);for(d._forceLayout(),d._animationStart(),i=e.length-1;0<=i;i--)f=y.layerPointToLatLng(t[i]),(o=e[i])._preSpiderfyLatlng=o._latlng,o.setLatLng(f),o.clusterShow&&o.clusterShow(),w&&((c=(l=o._spiderLeg)._path).style.strokeDashoffset=0,l.setStyle({opacity:B}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:_,markers:e})},200)},_animationUnspiderfy:function(e){var t,i,o,l,c,h,f=this,_=this._group,d=_._map,y=_._featureGroup,k=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),I=L.Path.SVG;for(_._ignoreMove=!0,_._animationStart(),this.setOpacity(1),i=p.length-1;0<=i;i--)(t=p[i])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,h=!0,t._setPos&&(t._setPos(k),h=!1),t.clusterHide&&(t.clusterHide(),h=!1),h&&y.removeLayer(t),I&&(c=(l=(o=t._spiderLeg)._path).getTotalLength()+.1,l.style.strokeDashoffset=c,o.setStyle({opacity:0})));_._ignoreMove=!1,setTimeout(function(){var w=0;for(i=p.length-1;0<=i;i--)(t=p[i])._spiderLeg&&w++;for(i=p.length-1;0<=i;i--)(t=p[i])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<w&&y.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);_._animationEnd(),_.fire("unspiderfied",{cluster:f,markers:p})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),r.MarkerClusterGroup=a,r.MarkerCluster=u,Object.defineProperty(r,"__esModule",{value:!0})})})(Ht,Ht.exports);const{Error:ke,console:Mn}=Bt,En="src/lib/Map/Leaflet.svelte";function et(s){let n;const r=s[15].default,a=St(r,s,s[14],null),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,i){a&&a.m(t,i),n=!0},p:function(t,i){a&&a.p&&(!n||i&16384)&&Mt(a,r,t,t[14],n?It(r,t[14],i,null):Et(t[14]),null)},i:function(t){n||(S(a,t),n=!0)},o:function(t){T(a,t),n=!1},d:function(t){a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:et.name,type:"if",source:"(268:2) {#if map}",ctx:s}),u}function tt(s){let n,r,a=s[0]&&et(s);const u={c:function(){n=j("div"),a&&a.c(),this.h()},l:function(t){n=D(t,"DIV",{class:!0});var i=H(n);a&&a.l(i),i.forEach(M),this.h()},h:function(){O(n,"class","w-full h-full"),Z(n,En,266,0,7231)},m:function(t,i){X(t,n,i),a&&a.m(n,null),s[16](n),r=!0},p:function(t,[i]){t[0]?a?(a.p(t,i),i&1&&S(a,1)):(a=et(t),a.c(),S(a,1),a.m(n,null)):a&&(x(),T(a,1,1,()=>{a=null}),$())},i:function(t){r||(S(a),r=!0)},o:function(t){T(a),r=!1},d:function(t){t&&M(n),a&&a.d(),s[16](null)}};return N("SvelteRegisterBlock",{block:u,id:tt.name,type:"component",source:"",ctx:s}),u}function In(s,n,r){let a,u,e,t,i,o,l;K(be,"territoriesVisible"),Y(s,be,m=>r(7,a=m)),K(Oe,"filteredStore"),Y(s,Oe,m=>r(8,u=m)),K(qe,"filtersActive"),Y(s,qe,m=>r(9,e=m)),K(ce,"currentSidebar"),Y(s,ce,m=>r(10,t=m)),K(We,"currentMapStyleId"),Y(s,We,m=>r(11,i=m)),K(Xe,"currentMapStyleIndex"),Y(s,Xe,m=>r(12,o=m)),K(ue,"darkMode"),Y(s,ue,m=>r(13,l=m));let{$$slots:c={},$$scope:h}=n;ye("Leaflet",c,["default"]);let{bounds:f=void 0}=n,{view:_=void 0}=n,{zoom:d=void 0}=n;const y=me();let k,p,I,w=null,R=null,B,F,z=null;async function G(m){if(!z)try{z=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),w=await Dt(m,z),R=await Zt(m,z)}catch(b){console.error("Error fetching territories data:",b)}}const C=J.Control.extend({onAdd(m){const b=J.DomUtil.create("div","map-toolbar-container");return new Rt({target:b,props:{mapInstance:m}}),b}});Me(()=>{if(!f&&(!_||!d))throw new Error("Must set either bounds, or view and zoom.");r(0,k=J.map(p,{maxZoom:18,zoomControl:!1}));const m=J.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});k.addLayer(m),Ae.set(m),f?(k.fitBounds(f),Ce.set(f)):_&&d&&k.setView(_,d),k.whenReady(()=>{if(!f){const b=k.getBounds();Ce.set(b)}Tt.set(k),r(5,I=new Qe({Language:"fr",style:J.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(k)),new C({position:"topright"}).addTo(k)}),k.on("click",function(b){t==="submissions"&&(jt.set(b.latlng),B&&k.removeLayer(B),r(6,B=J.marker([b.latlng.lat,b.latlng.lng],{icon:F}).addTo(k)))}).on("zoom",b=>y("zoom",b)).on("moveend",()=>{const b=k.getBounds();Ce.set(b)}).on("popupopen",async b=>{b.popup.update(),await At()})});function v(){console.log("Adding territories"),k&&(!w||!R?G(k):(k.addLayer(w),k.addLayer(R)))}function U(){k&&(w&&k.removeLayer(w),R&&k.removeLayer(R),console.log("Territories removed"))}Ee(()=>{k==null||k.remove(),r(0,k=void 0),U()}),De("map",{getMap:()=>k});function E(m){k&&I&&(k.removeLayer(I),r(5,I=new Qe({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(k)))}const g=["bounds","view","zoom"];Object.keys(n).forEach(m=>{!~g.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Mn.warn(`<Leaflet> was created with unknown prop '${m}'`)});function V(m){qt[m?"unshift":"push"](()=>{p=m,r(1,p)})}return s.$$set=m=>{"bounds"in m&&r(2,f=m.bounds),"view"in m&&r(3,_=m.view),"zoom"in m&&r(4,d=m.zoom),"$$scope"in m&&r(14,h=m.$$scope)},s.$capture_state=()=>({onMount:Me,onDestroy:Ee,setContext:De,createEventDispatcher:me,tick:At,L:J,addTerritoriesLayer:Dt,addTerritoriesLabels:Zt,MaptilerLayer:Qe,MaptilerStyle:Pn,pinSvg:Je,Toolbar:Rt,currentMapStyleId:We,currentMapStyleIndex:Xe,mapBoundsStore:Ce,territoriesVisible:be,clusterGroupStore:Ae,darkMode:ue,currentSidebar:ce,filteredStore:Oe,filtersActive:qe,userLatLng:jt,mapInstanceStore:Tt,bounds:f,view:_,zoom:d,dispatch:y,map:k,mapElement:p,mtLayer:I,territoriesLayer:w,labelsLayer:R,marker:B,icon:F,territoriesData:z,initializeTerritories:G,ToolbarControl:C,addTerritories:v,removeTerritories:U,updateMapStyle:E,$territoriesVisible:a,$filteredStore:u,$filtersActive:e,$currentSidebar:t,$currentMapStyleId:i,$currentMapStyleIndex:o,$darkMode:l}),s.$inject_state=m=>{"bounds"in m&&r(2,f=m.bounds),"view"in m&&r(3,_=m.view),"zoom"in m&&r(4,d=m.zoom),"map"in m&&r(0,k=m.map),"mapElement"in m&&r(1,p=m.mapElement),"mtLayer"in m&&r(5,I=m.mtLayer),"territoriesLayer"in m&&(w=m.territoriesLayer),"labelsLayer"in m&&(R=m.labelsLayer),"marker"in m&&r(6,B=m.marker),"icon"in m&&(F=m.icon),"territoriesData"in m&&(z=m.territoriesData)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{if(s.$$.dirty&8192){let m=l==="dark"?`<div style="width: 30px; height: 40px; filter: invert(100%);">
        <img src="${Je}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`:`<div style="width: 30px; height: 40px;">
        <img src="${Je}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`;F=J.divIcon({html:m,className:"map-marker",iconSize:J.point(25,65)})}if(s.$$.dirty&1089&&t!=="submissions"&&B&&(k.removeLayer(B),r(6,B=null)),s.$$.dirty&29&&k&&(f?k.fitBounds(f):_&&d&&k.setView(_,d)),s.$$.dirty&6177&&i&&(o===2?(be.set(!0),ue.set("light"),console.log("setting territoriesVisible to true")):o===0?(be.set(!1),ue.set("dark")):(be.set(!1),ue.set("light")),k&&I&&E(i)),s.$$.dirty&1793&&k&&t==="tools"&&u.length>0&&e){const m=J.latLngBounds(u.map(b=>J.latLng(b.latLng)));k.fitBounds(m,{padding:[50,50]})}s.$$.dirty&128&&(a?v():U())},[k,p,f,_,d,I,B,a,u,e,t,i,o,l,h,c,V]}class cn extends ge{constructor(n){super(n),ve(this,n,In,tt,pe,{bounds:2,view:3,zoom:4}),N("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:n,id:tt.name})}get bounds(){throw new ke("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(n){throw new ke("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new ke("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(n){throw new ke("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new ke("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(n){throw new ke("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function nt(s){let n;const r=s[8].default,a=St(r,s,s[7],null),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,i){a&&a.m(t,i),n=!0},p:function(t,i){a&&a.p&&(!n||i&128)&&Mt(a,r,t,t[7],n?It(r,t[7],i,null):Et(t[7]),null)},i:function(t){n||(S(a,t),n=!0)},o:function(t){T(a,t),n=!1},d:function(t){a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:nt.name,type:"if",source:"(73:0) {#if marker}",ctx:s}),u}function it(s){let n,r,a=s[0]&&nt(s);const u={c:function(){a&&a.c(),n=fe()},l:function(t){a&&a.l(t),n=fe()},m:function(t,i){a&&a.m(t,i),X(t,n,i),r=!0},p:function(t,[i]){t[0]?a?(a.p(t,i),i&1&&S(a,1)):(a=nt(t),a.c(),S(a,1),a.m(n.parentNode,n)):a&&(x(),T(a,1,1,()=>{a=null}),$())},i:function(t){r||(S(a),r=!0)},o:function(t){T(a),r=!1},d:function(t){t&&M(n),a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:it.name,type:"component",source:"",ctx:s}),u}function Bn(s,n,r){let a,u;K(Ae,"clusterGroupStore"),Y(s,Ae,y=>r(5,a=y)),K(Ke,"isMarkersVisible"),Y(s,Ke,y=>r(6,u=y));let{$$slots:e={},$$scope:t}=n;ye("Marker",e,["default"]);let{width:i}=n,{height:o}=n,{latLng:l}=n,{challengesPower:c=!1}=n,h,f=Ze("map").getMap();De("layer",{getLayer:()=>h});function _(y){const k=c?Be:Ie;let p=y==="dark"?`<div style="width: ${i}px; height: ${o}px; filter: invert(100%);">
          <img src="${k}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`:`<div style="width: ${i}px; height: ${o}px;">
          <img src="${k}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`,I=J.divIcon({html:p,className:"map-marker",iconSize:J.point(i,o)});h?(a.removeLayer(h),h.setIcon(I)):r(0,h=J.marker(l,{icon:I})),a.addLayer(h)}Me(()=>{f&&a&&ue.subscribe(y=>{_(y)})}),Ee(()=>{h&&a&&(a.removeLayer(h),h.remove(),r(0,h=void 0))}),s.$$.on_mount.push(function(){i===void 0&&!("width"in n||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),o===void 0&&!("height"in n||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in n||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const d=["width","height","latLng","challengesPower"];return Object.keys(n).forEach(y=>{!~d.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<Marker> was created with unknown prop '${y}'`)}),s.$$set=y=>{"width"in y&&r(1,i=y.width),"height"in y&&r(2,o=y.height),"latLng"in y&&r(3,l=y.latLng),"challengesPower"in y&&r(4,c=y.challengesPower),"$$scope"in y&&r(7,t=y.$$scope)},s.$capture_state=()=>({onMount:Me,onDestroy:Ee,getContext:Ze,setContext:De,darkMode:ue,clusterGroupStore:Ae,isMarkersVisible:Ke,L:J,monumentSvg:Ie,countermonumentSvg:Be,width:i,height:o,latLng:l,challengesPower:c,marker:h,mapInstance:f,createOrUpdateMarker:_,$clusterGroupStore:a,$isMarkersVisible:u}),s.$inject_state=y=>{"width"in y&&r(1,i=y.width),"height"in y&&r(2,o=y.height),"latLng"in y&&r(3,l=y.latLng),"challengesPower"in y&&r(4,c=y.challengesPower),"marker"in y&&r(0,h=y.marker),"mapInstance"in y&&(f=y.mapInstance)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{s.$$.dirty&97&&h&&a&&(u?a.addLayer(h):a.removeLayer(h))},[h,i,o,l,c,a,u,t,e]}class un extends ge{constructor(n){super(n),ve(this,n,Bn,it,pe,{width:1,height:2,latLng:3,challengesPower:4}),N("SvelteRegisterComponent",{component:this,tagName:"Marker",options:n,id:it.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengesPower(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengesPower(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Un="src/lib/Map/Popup.svelte",On=s=>({popup:s&1}),Ft=s=>({popup:s[0]});function ot(s){let n;const r=s[4].default,a=St(r,s,s[3],Ft),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,i){a&&a.m(t,i),n=!0},p:function(t,i){a&&a.p&&(!n||i&9)&&Mt(a,r,t,t[3],n?It(r,t[3],i,On):Et(t[3]),Ft)},i:function(t){n||(S(a,t),n=!0)},o:function(t){T(a,t),n=!1},d:function(t){a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:ot.name,type:"if",source:"(47:2) {#if open}",ctx:s}),u}function rt(s){let n,r,a=s[2]&&ot(s);const u={c:function(){n=j("div"),a&&a.c(),this.h()},l:function(t){n=D(t,"DIV",{class:!0});var i=H(n);a&&a.l(i),i.forEach(M),this.h()},h:function(){O(n,"class","popPadding s-vUHHe_W0o0FW"),Z(n,Un,45,0,857)},m:function(t,i){X(t,n,i),a&&a.m(n,null),s[5](n),r=!0},p:function(t,[i]){t[2]?a?(a.p(t,i),i&4&&S(a,1)):(a=ot(t),a.c(),S(a,1),a.m(n,null)):a&&(x(),T(a,1,1,()=>{a=null}),$())},i:function(t){r||(S(a),r=!0)},o:function(t){T(a),r=!1},d:function(t){t&&M(n),a&&a.d(),s[5](null)}};return N("SvelteRegisterBlock",{block:u,id:rt.name,type:"component",source:"",ctx:s}),u}function An(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("Popup",a,["default"]);let e,t,i=!1;const o=Ze("layer"),l=o.getLayer();Me(()=>{r(0,e=J.popup().setContent(t)),e._initLayout(),l&&(l.bindPopup(e),l.on("popupopen",()=>{r(2,i=!0),Se.set(!0)}),l.on("popupclose",()=>{r(2,i=!1),Se.set(!1)}))}),Ee(()=>{l&&l.unbindPopup(),e&&(e.remove(),r(0,e=void 0))});const c=[];Object.keys(n).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Popup> was created with unknown prop '${f}'`)});function h(f){qt[f?"unshift":"push"](()=>{t=f,r(1,t)})}return s.$$set=f=>{"$$scope"in f&&r(3,u=f.$$scope)},s.$capture_state=()=>({onMount:Me,onDestroy:Ee,getContext:Ze,L:J,isPopupOpen:Se,popup:e,popupElement:t,open:i,layerContext:o,layer:l}),s.$inject_state=f=>{"popup"in f&&r(0,e=f.popup),"popupElement"in f&&r(1,t=f.popupElement),"open"in f&&r(2,i=f.open)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[e,t,i,u,a,h]}class hn extends ge{constructor(n){super(n),ve(this,n,An,rt,pe,{}),N("SvelteRegisterComponent",{component:this,tagName:"Popup",options:n,id:rt.name})}}const oe="src/lib/Map/PopupContent.svelte";function st(s){let n,r;n=new xt({props:{photos:s[6],baseUrl:s[8]},$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t&64&&(i.photos=e[6]),n.$set(i)},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:st.name,type:"if",source:"(32:2) {#if photos && photos.length}",ctx:s}),a}function at(s){let n,r;const a={c:function(){n=j("h3"),r=se(s[3]),this.h()},l:function(e){n=D(e,"H3",{});var t=H(n);r=ae(t,s[3]),t.forEach(M),this.h()},h:function(){Z(n,oe,38,8,1051)},m:function(e,t){X(e,n,t),P(n,r)},p:function(e,t){t&8&&_e(r,e[3])},d:function(e){e&&M(n)}};return N("SvelteRegisterBlock",{block:a,id:at.name,type:"if",source:"(38:6) {#if municipality && municipality !== 'null' && municipality !== 'undefined'}",ctx:s}),a}function lt(s){let n,r,a;const u={c:function(){n=j("div"),r=j("p"),a=new Ln(!1),this.h()},l:function(t){n=D(t,"DIV",{class:!0});var i=H(n);r=D(i,"P",{class:!0});var o=H(r);a=bn(o,!1),o.forEach(M),i.forEach(M),this.h()},h:function(){a.a=null,O(r,"class","description"),Z(r,oe,52,8,1527),O(n,"class","text-truncate"),Z(n,oe,51,6,1491)},m:function(t,i){X(t,n,i),P(n,r),a.m(s[5],r)},p:function(t,i){i&32&&a.p(t[5])},d:function(t){t&&M(n)}};return N("SvelteRegisterBlock",{block:u,id:lt.name,type:"if",source:"(51:4) {#if description}",ctx:s}),u}function ct(s){let n,r,a,u,e,t,i,o,l,c,h,f,_,d,y,k,p,I,w,R,B,F="learn more",z,G,C,v=s[6]&&s[6].length&&st(s),U=s[3]&&s[3]!=="null"&&s[3]!=="undefined"&&at(s),E=s[5]&&lt(s);const g={c:function(){v&&v.c(),n=q(),r=j("div"),a=j("div"),u=j("h2"),e=se(s[2]),t=q(),U&&U.c(),i=q(),o=j("div"),l=j("div"),c=se("#"),h=se(s[4]),f=q(),_=j("div"),d=j("img"),p=q(),I=j("div"),E&&E.c(),w=q(),R=j("div"),B=j("button"),B.textContent=F,this.h()},l:function(m){v&&v.l(m),n=W(m),r=D(m,"DIV",{class:!0});var b=H(r);a=D(b,"DIV",{class:!0});var A=H(a);u=D(A,"H2",{});var Q=H(u);e=ae(Q,s[2]),Q.forEach(M),t=W(A),U&&U.l(A),A.forEach(M),i=W(b),o=D(b,"DIV",{class:!0});var re=H(o);l=D(re,"DIV",{class:!0});var Le=H(l);c=ae(Le,"#"),h=ae(Le,s[4]),Le.forEach(M),f=W(re),_=D(re,"DIV",{style:!0});var Ut=H(_);d=D(Ut,"IMG",{src:!0,alt:!0,style:!0}),Ut.forEach(M),re.forEach(M),b.forEach(M),p=W(m),I=D(m,"DIV",{class:!0});var Ge=H(I);E&&E.l(Ge),w=W(Ge),R=D(Ge,"DIV",{class:!0});var Ot=H(R);B=D(Ot,"BUTTON",{class:!0,"data-svelte-h":!0}),Wt(B)!=="svelte-1h1xepw"&&(B.textContent=F),Ot.forEach(M),Ge.forEach(M),this.h()},h:function(){Z(u,oe,36,6,943),O(a,"class","flex flex-col items-start"),Z(a,oe,35,4,897),O(l,"class","monument-id"),Z(l,oe,42,8,1151),he(d.src,y=s[10])||O(d,"src",y),O(d,"alt","Monument Marker"),O(d,"style",k="width: 100%; height: 100%; "+(s[7]?"margin-left:5px":"")),Z(d,oe,44,12,1260),de(_,"width",s[0]+"px"),de(_,"height",s[1]+"px"),Z(_,oe,43,8,1196),O(o,"class","flex flex-row items-center"),Z(o,oe,41,4,1102),O(r,"class","flex flex-row items-center"),Z(r,oe,34,2,852),O(B,"class","learn-more-button"),Z(B,oe,56,6,1642),O(R,"class","learn-more-container"),Z(R,oe,55,4,1601),O(I,"class","description-container"),Z(I,oe,49,2,1427)},m:function(m,b){v&&v.m(m,b),X(m,n,b),X(m,r,b),P(r,a),P(a,u),P(u,e),P(a,t),U&&U.m(a,null),P(r,i),P(r,o),P(o,l),P(l,c),P(l,h),P(o,f),P(o,_),P(_,d),X(m,p,b),X(m,I,b),E&&E.m(I,null),P(I,w),P(I,R),P(R,B),z=!0,G||(C=Pe(B,"click",s[9],!1,!1,!1,!1),G=!0)},p:function(m,[b]){m[6]&&m[6].length?v?(v.p(m,b),b&64&&S(v,1)):(v=st(m),v.c(),S(v,1),v.m(n.parentNode,n)):v&&(x(),T(v,1,1,()=>{v=null}),$()),(!z||b&4)&&_e(e,m[2]),m[3]&&m[3]!=="null"&&m[3]!=="undefined"?U?U.p(m,b):(U=at(m),U.c(),U.m(a,null)):U&&(U.d(1),U=null),(!z||b&16)&&_e(h,m[4]),(!z||b&128&&k!==(k="width: 100%; height: 100%; "+(m[7]?"margin-left:5px":"")))&&O(d,"style",k),(!z||b&1)&&de(_,"width",m[0]+"px"),(!z||b&2)&&de(_,"height",m[1]+"px"),m[5]?E?E.p(m,b):(E=lt(m),E.c(),E.m(I,w)):E&&(E.d(1),E=null)},i:function(m){z||(S(v),z=!0)},o:function(m){T(v),z=!1},d:function(m){m&&(M(n),M(r),M(p),M(I)),v&&v.d(m),U&&U.d(),E&&E.d(),G=!1,C()}};return N("SvelteRegisterBlock",{block:g,id:ct.name,type:"component",source:"",ctx:s}),g}function Gn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("PopupContent",a,[]);let{width:e}=n,{height:t}=n,{name:i}=n,{municipality:o}=n,{id:l}=n,{description:c}=n,{photos:h}=n,{baseUrl:f}=n,{challengesPower:_}=n,d=_?"":f;const y=me();function k(w){y("closeAndShowDetails",{id:l,event:w})}const p=_?Be:Ie;s.$$.on_mount.push(function(){e===void 0&&!("width"in n||s.$$.bound[s.$$.props.width])&&console.warn("<PopupContent> was created without expected prop 'width'"),t===void 0&&!("height"in n||s.$$.bound[s.$$.props.height])&&console.warn("<PopupContent> was created without expected prop 'height'"),i===void 0&&!("name"in n||s.$$.bound[s.$$.props.name])&&console.warn("<PopupContent> was created without expected prop 'name'"),o===void 0&&!("municipality"in n||s.$$.bound[s.$$.props.municipality])&&console.warn("<PopupContent> was created without expected prop 'municipality'"),l===void 0&&!("id"in n||s.$$.bound[s.$$.props.id])&&console.warn("<PopupContent> was created without expected prop 'id'"),c===void 0&&!("description"in n||s.$$.bound[s.$$.props.description])&&console.warn("<PopupContent> was created without expected prop 'description'"),h===void 0&&!("photos"in n||s.$$.bound[s.$$.props.photos])&&console.warn("<PopupContent> was created without expected prop 'photos'"),f===void 0&&!("baseUrl"in n||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<PopupContent> was created without expected prop 'baseUrl'"),_===void 0&&!("challengesPower"in n||s.$$.bound[s.$$.props.challengesPower])&&console.warn("<PopupContent> was created without expected prop 'challengesPower'")});const I=["width","height","name","municipality","id","description","photos","baseUrl","challengesPower"];return Object.keys(n).forEach(w=>{!~I.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&console.warn(`<PopupContent> was created with unknown prop '${w}'`)}),s.$$set=w=>{"width"in w&&r(0,e=w.width),"height"in w&&r(1,t=w.height),"name"in w&&r(2,i=w.name),"municipality"in w&&r(3,o=w.municipality),"id"in w&&r(4,l=w.id),"description"in w&&r(5,c=w.description),"photos"in w&&r(6,h=w.photos),"baseUrl"in w&&r(11,f=w.baseUrl),"challengesPower"in w&&r(7,_=w.challengesPower)},s.$capture_state=()=>({createEventDispatcher:me,ImageArray:xt,monumentSvg:Ie,countermonumentSvg:Be,width:e,height:t,name:i,municipality:o,id:l,description:c,photos:h,baseUrl:f,challengesPower:_,adjusted:d,dispatch:y,handleLearnMoreClick:k,svgToUse:p}),s.$inject_state=w=>{"width"in w&&r(0,e=w.width),"height"in w&&r(1,t=w.height),"name"in w&&r(2,i=w.name),"municipality"in w&&r(3,o=w.municipality),"id"in w&&r(4,l=w.id),"description"in w&&r(5,c=w.description),"photos"in w&&r(6,h=w.photos),"baseUrl"in w&&r(11,f=w.baseUrl),"challengesPower"in w&&r(7,_=w.challengesPower),"adjusted"in w&&r(8,d=w.adjusted)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[e,t,i,o,l,c,h,_,d,k,p,f]}class fn extends ge{constructor(n){super(n),ve(this,n,Gn,ct,pe,{width:0,height:1,name:2,municipality:3,id:4,description:5,photos:6,baseUrl:11,challengesPower:7}),N("SvelteRegisterComponent",{component:this,tagName:"PopupContent",options:n,id:ct.name})}get width(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengesPower(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengesPower(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Fe="src/lib/UI/ImagePreview.svelte";function dn(s){let n,r,a,u,e,t,i;const o={c:function(){n=j("img"),u=q(),e=j("img"),this.h()},l:function(c){n=D(c,"IMG",{src:!0,alt:!0,class:!0}),u=W(c),e=D(c,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){he(n.src,r=`${s[1]}${s[0][0].url}`)||O(n,"src",r),O(n,"alt",a=s[0][0].alt),O(n,"class","base-photo s-LLFXHRRAcbiM"),Z(n,Fe,13,8,325),he(e.src,t=`${s[1]}${s[0][1].url}`)||O(e,"src",t),O(e,"alt",i=s[0][1].alt),O(e,"class","overlay s-LLFXHRRAcbiM"),Z(e,Fe,18,8,459)},m:function(c,h){X(c,n,h),X(c,u,h),X(c,e,h)},p:function(c,h){h&3&&!he(n.src,r=`${c[1]}${c[0][0].url}`)&&O(n,"src",r),h&1&&a!==(a=c[0][0].alt)&&O(n,"alt",a),h&3&&!he(e.src,t=`${c[1]}${c[0][1].url}`)&&O(e,"src",t),h&1&&i!==(i=c[0][1].alt)&&O(e,"alt",i)},d:function(c){c&&(M(n),M(u),M(e))}};return N("SvelteRegisterBlock",{block:o,id:dn.name,type:"if",source:"(13:33) ",ctx:s}),o}function mn(s){let n,r,a;const u={c:function(){n=j("img"),this.h()},l:function(t){n=D(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){he(n.src,r=`${s[1]}${s[0][0].url}`)||O(n,"src",r),O(n,"alt",a=s[0][0].alt),O(n,"class","single-photo s-LLFXHRRAcbiM"),Z(n,Fe,7,8,155)},m:function(t,i){X(t,n,i)},p:function(t,i){i&3&&!he(n.src,r=`${t[1]}${t[0][0].url}`)&&O(n,"src",r),i&1&&a!==(a=t[0][0].alt)&&O(n,"alt",a)},d:function(t){t&&M(n)}};return N("SvelteRegisterBlock",{block:u,id:mn.name,type:"if",source:"(7:4) {#if photos && photos.length === 1}",ctx:s}),u}function ut(s){let n;function r(t,i){if(t[0]&&t[0].length===1)return mn;if(t[0].length>=2)return dn}let a=r(s),u=a&&a(s);const e={c:function(){n=j("div"),u&&u.c(),this.h()},l:function(i){n=D(i,"DIV",{class:!0});var o=H(n);u&&u.l(o),o.forEach(M),this.h()},h:function(){O(n,"class","image-container s-LLFXHRRAcbiM"),Z(n,Fe,5,0,77)},m:function(i,o){X(i,n,o),u&&u.m(n,null)},p:function(i,[o]){a===(a=r(i))&&u?u.p(i,o):(u&&u.d(1),u=a&&a(i),u&&(u.c(),u.m(n,null)))},i:Ne,o:Ne,d:function(i){i&&M(n),u&&u.d()}};return N("SvelteRegisterBlock",{block:e,id:ut.name,type:"component",source:"",ctx:s}),e}function zn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("ImagePreview",a,[]);let{photos:e={}}=n,{baseUrl:t=""}=n;const i=["photos","baseUrl"];return Object.keys(n).forEach(o=>{!~i.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<ImagePreview> was created with unknown prop '${o}'`)}),s.$$set=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},s.$capture_state=()=>({photos:e,baseUrl:t}),s.$inject_state=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[e,t]}class _n extends ge{constructor(n){super(n),ve(this,n,zn,ut,pe,{photos:0,baseUrl:1}),N("SvelteRegisterComponent",{component:this,tagName:"ImagePreview",options:n,id:ut.name})}get photos(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(n){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const le="src/lib/UI/SearchItem.svelte";function ht(s){let n,r;n=new _n({props:{photos:s[3],baseUrl:s[4]},$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t&8&&(i.photos=e[3]),t&16&&(i.baseUrl=e[4]),n.$set(i)},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:ht.name,type:"if",source:"(30:4) {#if photos && photos.length}",ctx:s}),a}function ft(s){let n,r;const a={c:function(){n=j("h3"),r=se(s[1]),this.h()},l:function(e){n=D(e,"H3",{});var t=H(n);r=ae(t,s[1]),t.forEach(M),this.h()},h:function(){Z(n,le,37,8,1120)},m:function(e,t){X(e,n,t),P(n,r)},p:function(e,t){t&2&&_e(r,e[1])},d:function(e){e&&M(n)}};return N("SvelteRegisterBlock",{block:a,id:ft.name,type:"if",source:"(37:8) {#if municipality && municipality !== 'null' && municipality !== 'undefined'}",ctx:s}),a}function dt(s){let n,r,a,u,e,t,i,o,l,c,h,f,_,d,y,k,p,I,w,R,B="learn more",F,z,G,C=s[3]&&s[3].length&&ht(s),v=s[1]&&s[1]!=="null"&&s[1]!=="undefined"&&ft(s);const U={c:function(){n=j("div"),C&&C.c(),r=q(),a=j("div"),u=j("div"),e=se("#"),t=se(s[2]),i=q(),o=j("h2"),l=se(s[0]),c=q(),v&&v.c(),h=q(),f=j("div"),_=j("div"),d=j("img"),k=q(),p=j("div"),I=q(),w=j("div"),R=j("button"),R.textContent=B,this.h()},l:function(g){n=D(g,"DIV",{class:!0});var V=H(n);C&&C.l(V),r=W(V),a=D(V,"DIV",{class:!0});var m=H(a);u=D(m,"DIV",{class:!0});var b=H(u);e=ae(b,"#"),t=ae(b,s[2]),b.forEach(M),i=W(m),o=D(m,"H2",{});var A=H(o);l=ae(A,s[0]),A.forEach(M),c=W(m),v&&v.l(m),m.forEach(M),h=W(V),f=D(V,"DIV",{class:!0});var Q=H(f);_=D(Q,"DIV",{style:!0});var re=H(_);d=D(re,"IMG",{src:!0,alt:!0,style:!0}),re.forEach(M),k=W(Q),p=D(Q,"DIV",{class:!0}),H(p).forEach(M),I=W(Q),w=D(Q,"DIV",{});var Le=H(w);R=D(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),Wt(R)!=="svelte-1h1xepw"&&(R.textContent=B),Le.forEach(M),Q.forEach(M),V.forEach(M),this.h()},h:function(){O(u,"class","monument-id"),Z(u,le,34,8,965),Z(o,le,35,8,1010),O(a,"class","flex flex-col items-start ml-7 space-y-2"),Z(a,le,33,4,902),he(d.src,y=s[8])||O(d,"src",y),O(d,"alt","Monument Marker"),de(d,"width","100%"),de(d,"height","100%"),Z(d,le,43,12,1318),de(_,"width",s[5]+"px"),de(_,"height",s[6]+"px"),Z(_,le,42,8,1254),O(p,"class","flex-grow"),Z(p,le,45,8,1423),O(R,"class","learn-more-button s-bEGFb-JhA8_4"),Z(R,le,47,12,1479),Z(w,le,46,8,1461),O(f,"class","flex flex-col flex-wrap justify-between items-end"),Z(f,le,41,4,1174),O(n,"class","result-container flex flex-row justify-between items-stretch p-3 lg:p-4 border border-black bg-white m-2 rounded-sm"),Z(n,le,28,0,679)},m:function(g,V){X(g,n,V),C&&C.m(n,null),P(n,r),P(n,a),P(a,u),P(u,e),P(u,t),P(a,i),P(a,o),P(o,l),P(a,c),v&&v.m(a,null),P(n,h),P(n,f),P(f,_),P(_,d),P(f,k),P(f,p),P(f,I),P(f,w),P(w,R),F=!0,z||(G=Pe(R,"click",s[7],!1,!1,!1,!1),z=!0)},p:function(g,[V]){g[3]&&g[3].length?C?(C.p(g,V),V&8&&S(C,1)):(C=ht(g),C.c(),S(C,1),C.m(n,r)):C&&(x(),T(C,1,1,()=>{C=null}),$()),(!F||V&4)&&_e(t,g[2]),(!F||V&1)&&_e(l,g[0]),g[1]&&g[1]!=="null"&&g[1]!=="undefined"?v?v.p(g,V):(v=ft(g),v.c(),v.m(a,null)):v&&(v.d(1),v=null)},i:function(g){F||(S(C),F=!0)},o:function(g){T(C),F=!1},d:function(g){g&&M(n),C&&C.d(),v&&v.d(),z=!1,G()}};return N("SvelteRegisterBlock",{block:U,id:dt.name,type:"component",source:"",ctx:s}),U}function Rn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("SearchItem",a,[]);let e=30,t=30,{name:i}=n,{municipality:o}=n,{challengesPower:l}=n,{id:c}=n,{photos:h}=n,{baseUrl:f}=n;const _=me();function d(p){_("closeAndShowDetails",{id:c,event:p})}const y=l?Be:Ie;s.$$.on_mount.push(function(){i===void 0&&!("name"in n||s.$$.bound[s.$$.props.name])&&console.warn("<SearchItem> was created without expected prop 'name'"),o===void 0&&!("municipality"in n||s.$$.bound[s.$$.props.municipality])&&console.warn("<SearchItem> was created without expected prop 'municipality'"),l===void 0&&!("challengesPower"in n||s.$$.bound[s.$$.props.challengesPower])&&console.warn("<SearchItem> was created without expected prop 'challengesPower'"),c===void 0&&!("id"in n||s.$$.bound[s.$$.props.id])&&console.warn("<SearchItem> was created without expected prop 'id'"),h===void 0&&!("photos"in n||s.$$.bound[s.$$.props.photos])&&console.warn("<SearchItem> was created without expected prop 'photos'"),f===void 0&&!("baseUrl"in n||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<SearchItem> was created without expected prop 'baseUrl'")});const k=["name","municipality","challengesPower","id","photos","baseUrl"];return Object.keys(n).forEach(p=>{!~k.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<SearchItem> was created with unknown prop '${p}'`)}),s.$$set=p=>{"name"in p&&r(0,i=p.name),"municipality"in p&&r(1,o=p.municipality),"challengesPower"in p&&r(9,l=p.challengesPower),"id"in p&&r(2,c=p.id),"photos"in p&&r(3,h=p.photos),"baseUrl"in p&&r(4,f=p.baseUrl)},s.$capture_state=()=>({createEventDispatcher:me,ImagePreview:_n,monumentSvg:Ie,countermonumentSvg:Be,width:e,height:t,name:i,municipality:o,challengesPower:l,id:c,photos:h,baseUrl:f,dispatch:_,handleLearnMoreClick:d,svgToUse:y}),s.$inject_state=p=>{"width"in p&&r(5,e=p.width),"height"in p&&r(6,t=p.height),"name"in p&&r(0,i=p.name),"municipality"in p&&r(1,o=p.municipality),"challengesPower"in p&&r(9,l=p.challengesPower),"id"in p&&r(2,c=p.id),"photos"in p&&r(3,h=p.photos),"baseUrl"in p&&r(4,f=p.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[i,o,c,h,f,e,t,d,y,l]}class pn extends ge{constructor(n){super(n),ve(this,n,Rn,dt,pe,{name:0,municipality:1,challengesPower:9,id:2,photos:3,baseUrl:4}),N("SvelteRegisterComponent",{component:this,tagName:"SearchItem",options:n,id:dt.name})}get name(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengesPower(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengesPower(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Tn}=Bt,Re="src/lib/UI/SearchResults.svelte";function Te(s,n,r){const a=s.slice();return a[6]=n[r].name,a[7]=n[r].photos,a[8]=n[r].municipality,a[9]=n[r].id,a[10]=n[r].challengesPower,a[12]=r,a}function mt(s,n){let r,a,u;a=new pn({props:{name:n[6],photos:n[7],municipality:n[8],id:n[9],baseUrl:n[1],challengesPower:n[10]},$$inline:!0}),a.$on("closeAndShowDetails",n[4]);const e={key:s,first:null,c:function(){r=fe(),ee(a.$$.fragment),this.h()},l:function(i){r=fe(),te(a.$$.fragment,i),this.h()},h:function(){this.first=r},m:function(i,o){X(i,r,o),ne(a,i,o),u=!0},p:function(i,o){n=i;const l={};o&1&&(l.name=n[6]),o&1&&(l.photos=n[7]),o&1&&(l.municipality=n[8]),o&1&&(l.id=n[9]),o&2&&(l.baseUrl=n[1]),o&1&&(l.challengesPower=n[10]),a.$set(l)},i:function(i){u||(S(a.$$.fragment,i),u=!0)},o:function(i){T(a.$$.fragment,i),u=!1},d:function(i){i&&M(r),ie(a,i)}};return N("SvelteRegisterBlock",{block:e,id:mt.name,type:"each",source:"(40:2) {#each results as { name, photos, municipality, id, challengesPower }",ctx:n}),e}function _t(s){let n,r,a,u,e,t,i=s[0].length+"",o,l,c=s[0].length>1?"places ":"place ",h,f,_,d=[],y=new Map,k,p,I,w,R,B=Ve(s[0]);const F=G=>G[9]+"-"+G[12];He(s,B,Te,F);for(let G=0;G<B.length;G+=1){let C=Te(s,B,G),v=F(C);y.set(v,d[G]=mt(v,C))}const z={c:function(){n=j("div"),r=j("button"),a=j("img"),e=q(),t=j("p"),o=se(i),l=q(),h=se(c),f=se(`
    replied to your call...`),_=q();for(let C=0;C<d.length;C+=1)d[C].c();this.h()},l:function(C){n=D(C,"DIV",{class:!0});var v=H(n);r=D(v,"BUTTON",{class:!0});var U=H(r);a=D(U,"IMG",{src:!0,alt:!0}),U.forEach(M),e=W(v),t=D(v,"P",{});var E=H(t);o=ae(E,i),l=W(E),h=ae(E,c),f=ae(E,`
    replied to your call...`),E.forEach(M),_=W(v);for(let g=0;g<d.length;g+=1)d[g].l(v);v.forEach(M),this.h()},h:function(){he(a.src,u=$t)||O(a,"src",u),O(a,"alt","Close Sidebar"),Z(a,Re,32,4,736),O(r,"class","close-button"),Z(r,Re,31,2,679),Z(t,Re,34,2,795),O(n,"class","sidebar s-VgsW2gEiy9eW"),Z(n,Re,26,0,577)},m:function(C,v){X(C,n,v),P(n,r),P(r,a),P(n,e),P(n,t),P(t,o),P(t,l),P(t,h),P(t,f),P(n,_);for(let U=0;U<d.length;U+=1)d[U]&&d[U].m(n,null);I=!0,w||(R=Pe(r,"click",s[3],!1,!1,!1,!1),w=!0)},p:function(C,[v]){(!I||v&1)&&i!==(i=C[0].length+"")&&_e(o,i),(!I||v&1)&&c!==(c=C[0].length>1?"places ":"place ")&&_e(h,c),v&7&&(B=Ve(C[0]),x(),He(C,B,Te,F),d=Qt(d,v,F,1,C,B,y,n,Jt,mt,null,Te),$())},i:function(C){if(!I){for(let v=0;v<B.length;v+=1)S(d[v]);C&&Xt(()=>{I&&(p&&p.end(1),k=Kt(n,xe,{x:300,duration:800}),k.start())}),I=!0}},o:function(C){for(let v=0;v<d.length;v+=1)T(d[v]);k&&k.invalidate(),C&&(p=Yt(n,xe,{x:300,duration:800})),I=!1},d:function(C){C&&M(n);for(let v=0;v<d.length;v+=1)d[v].d();C&&p&&p.end(),w=!1,R()}};return N("SvelteRegisterBlock",{block:z,id:_t.name,type:"component",source:"",ctx:s}),z}function jn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("SearchResults",a,[]);const e=me();let{results:t={}}=n,{baseUrl:i=""}=n;function o(f){e("closeAndShowDetails",{id:f.detail.id,event:f})}function l(){ce.set(null)}const c=["results","baseUrl"];Object.keys(n).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&Tn.warn(`<SearchResults> was created with unknown prop '${f}'`)});const h=f=>o(f);return s.$$set=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,i=f.baseUrl)},s.$capture_state=()=>({fly:xe,createEventDispatcher:me,currentSidebar:ce,closeImage:$t,dispatch:e,SearchItem:pn,results:t,baseUrl:i,handleDetails:o,closeSearch:l}),s.$inject_state=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,i=f.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{s.$$.dirty&1&&console.log("results",t)},[t,i,o,l,h]}class gn extends ge{constructor(n){super(n),ve(this,n,jn,_t,pe,{results:0,baseUrl:1}),N("SvelteRegisterComponent",{component:this,tagName:"SearchResults",options:n,id:_t.name})}get results(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set results(n){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Dn}=Bt,we="src/routes/map/+page.svelte";function je(s,n,r){const a=s.slice();return a[23]=n[r].latLng,a[24]=n[r].visible,a[25]=n[r].name,a[26]=n[r].description,a[27]=n[r].photos,a[28]=n[r].municipality,a[29]=n[r].id,a[30]=n[r].challengesPower,a[32]=r,a}function pt(s){let n,r,a,u,e,t;const i={c:function(){n=j("h1"),r=se("*countermap"),this.h()},l:function(l){n=D(l,"H1",{class:!0});var c=H(n);r=ae(c,"*countermap"),c.forEach(M),this.h()},h:function(){O(n,"class",a=Gt(s[5]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),Z(n,we,124,2,3470)},m:function(l,c){X(l,n,c),P(n,r),t=!0},p:function(l,c){(!t||c[0]&32&&a!==(a=Gt(l[5]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&O(n,"class",a)},i:function(l){t||(l&&Xt(()=>{t&&(e&&e.end(1),u=Kt(n,$e,{duration:300}),u.start())}),t=!0)},o:function(l){u&&u.invalidate(),l&&(e=Yt(n,$e,{duration:300})),t=!1},d:function(l){l&&M(n),l&&e&&e.end()}};return N("SvelteRegisterBlock",{block:i,id:pt.name,type:"if",source:"(124:0) {#if $isPopupOpen === false}",ctx:s}),i}function gt(s){let n,r;n=new un({props:{latLng:s[23],width:s[9],height:s[10],challengesPower:s[30],$$slots:{default:[yn]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t[0]&8&&(i.latLng=e[23]),t[0]&8&&(i.challengesPower=e[30]),t[0]&8|t[1]&8&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:gt.name,type:"if",source:"(138:6) {#if visible}",ctx:s}),a}function vn(s){let n,r;function a(...e){return s[20](s[33],...e)}n=new fn({props:{width:s[9],height:s[10],name:s[25],municipality:s[28],id:s[29],description:s[26],photos:s[27],baseUrl:s[11],challengesPower:s[30]},$$inline:!0}),n.$on("closeAndShowDetails",a);const u={c:function(){ee(n.$$.fragment)},l:function(t){te(n.$$.fragment,t)},m:function(t,i){ne(n,t,i),r=!0},p:function(t,i){s=t;const o={};i[0]&8&&(o.name=s[25]),i[0]&8&&(o.municipality=s[28]),i[0]&8&&(o.id=s[29]),i[0]&8&&(o.description=s[26]),i[0]&8&&(o.photos=s[27]),i[0]&8&&(o.challengesPower=s[30]),n.$set(o)},i:function(t){r||(S(n.$$.fragment,t),r=!0)},o:function(t){T(n.$$.fragment,t),r=!1},d:function(t){ie(n,t)}};return N("SvelteRegisterBlock",{block:u,id:vn.name,type:"slot",source:"(140:10) <Popup let:popup>",ctx:s}),u}function yn(s){let n,r,a;n=new hn({props:{$$slots:{default:[vn,({popup:e})=>({33:e}),({popup:e})=>[0,e?4:0]]},$$scope:{ctx:s}},$$inline:!0});const u={c:function(){ee(n.$$.fragment),r=q()},l:function(t){te(n.$$.fragment,t),r=W(t)},m:function(t,i){ne(n,t,i),X(t,r,i),a=!0},p:function(t,i){const o={};i[0]&8|i[1]&12&&(o.$$scope={dirty:i,ctx:t}),n.$set(o)},i:function(t){a||(S(n.$$.fragment,t),a=!0)},o:function(t){T(n.$$.fragment,t),a=!1},d:function(t){t&&M(r),ie(n,t)}};return N("SvelteRegisterBlock",{block:u,id:yn.name,type:"slot",source:"(139:8) <Marker {latLng} {width} {height} {challengesPower}>",ctx:s}),u}function vt(s,n){let r,a,u,e=n[24]&&gt(n);const t={key:s,first:null,c:function(){r=fe(),e&&e.c(),a=fe(),this.h()},l:function(o){r=fe(),e&&e.l(o),a=fe(),this.h()},h:function(){this.first=r},m:function(o,l){X(o,r,l),e&&e.m(o,l),X(o,a,l),u=!0},p:function(o,l){n=o,n[24]?e?(e.p(n,l),l[0]&8&&S(e,1)):(e=gt(n),e.c(),S(e,1),e.m(a.parentNode,a)):e&&(x(),T(e,1,1,()=>{e=null}),$())},i:function(o){u||(S(e),u=!0)},o:function(o){T(e),u=!1},d:function(o){o&&(M(r),M(a)),e&&e.d(o)}};return N("SvelteRegisterBlock",{block:t,id:vt.name,type:"each",source:"(137:4) {#each populatedMarkers as { latLng, visible, name, description, photos, municipality, id, challengesPower }",ctx:n}),t}function wn(s){let n=[],r=new Map,a,u,e=Ve(s[3]);const t=o=>o[23].join(",")+"-"+o[32];He(s,e,je,t);for(let o=0;o<e.length;o+=1){let l=je(s,e,o),c=t(l);r.set(c,n[o]=vt(c,l))}const i={c:function(){for(let l=0;l<n.length;l+=1)n[l].c();a=fe()},l:function(l){for(let c=0;c<n.length;c+=1)n[c].l(l);a=fe()},m:function(l,c){for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(l,c);X(l,a,c),u=!0},p:function(l,c){c[0]&19976|c[1]&4&&(e=Ve(l[3]),x(),He(l,e,je,t),n=Qt(n,c,t,1,l,e,r,a.parentNode,Jt,vt,a,je),$())},i:function(l){if(!u){for(let c=0;c<e.length;c+=1)S(n[c]);u=!0}},o:function(l){for(let c=0;c<n.length;c+=1)T(n[c]);u=!1},d:function(l){l&&M(a);for(let c=0;c<n.length;c+=1)n[c].d(l)}};return N("SvelteRegisterBlock",{block:i,id:wn.name,type:"slot",source:"(136:2) <Leaflet view={$currentViewStore} zoom={zoomLevel}>",ctx:s}),i}function yt(s){let n,r;n=new tn({$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:yt.name,type:"if",source:"(171:0) {#if $selectedMarkerId !== null && $currentSidebar === 'sidebar'}",ctx:s}),a}function wt(s){let n,r;n=new nn({$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:wt.name,type:"if",source:"(175:0) {#if $currentSidebar === 'menu'}",ctx:s}),a}function Lt(s){let n,r;n=new on({$$inline:!0}),n.$on("closeSideBar",s[16]);const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:Ne,i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:Lt.name,type:"if",source:"(179:0) {#if $currentSidebar === 'submissions'}",ctx:s}),a}function bt(s){let n,r;n=new ln({$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:bt.name,type:"if",source:"(183:0) {#if $currentSidebar === 'tools'}",ctx:s}),a}function kt(s){let n,r;n=new gn({props:{results:s[0],baseUrl:s[11]},$$inline:!0}),n.$on("closeAndShowDetails",s[21]);const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t[0]&1&&(i.results=e[0]),n.$set(i)},i:function(e){r||(S(n.$$.fragment,e),r=!0)},o:function(e){T(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:kt.name,type:"if",source:"(187:0) {#if $currentSidebar === 'search'}",ctx:s}),a}function Ct(s){let n,r,a;r=new rn({$$inline:!0}),r.$on("openSubmissions",s[19]);const u={c:function(){n=j("div"),ee(r.$$.fragment),this.h()},l:function(t){n=D(t,"DIV",{class:!0});var i=H(n);te(r.$$.fragment,i),i.forEach(M),this.h()},h:function(){O(n,"class","banner-container s-_HdLFogMzSo7"),Z(n,we,193,2,5514)},m:function(t,i){X(t,n,i),ne(r,n,null),a=!0},p:Ne,i:function(t){a||(S(r.$$.fragment,t),a=!0)},o:function(t){T(r.$$.fragment,t),a=!1},d:function(t){t&&M(n),ie(r)}};return N("SvelteRegisterBlock",{block:u,id:Ct.name,type:"if",source:"(193:0) {#if $bannerClosed === false}",ctx:s}),u}function Pt(s){let n,r,a,u,e,t,i,o,l,c,h,f,_,d,y,k,p,I,w,R,B,F,z=s[4]===!1&&pt(s);a=new en({$$inline:!0}),a.$on("updateView",s[13]),e=new cn({props:{view:s[6],zoom:s[2],$$slots:{default:[wn]},$$scope:{ctx:s}},$$inline:!0});let G=s[7]!==null&&s[1]==="sidebar"&&yt(s),C=s[1]==="menu"&&wt(s),v=s[1]==="submissions"&&Lt(s),U=s[1]==="tools"&&bt(s),E=s[1]==="search"&&kt(s),g=s[8]===!1&&Ct(s);const V={c:function(){z&&z.c(),n=q(),r=j("div"),ee(a.$$.fragment),u=q(),ee(e.$$.fragment),t=q(),i=j("button"),o=j("img"),c=q(),h=j("button"),f=j("img"),d=q(),G&&G.c(),y=q(),C&&C.c(),k=q(),v&&v.c(),p=q(),U&&U.c(),I=q(),E&&E.c(),w=q(),g&&g.c(),this.h()},l:function(b){z&&z.l(b),n=W(b),r=D(b,"DIV",{class:!0});var A=H(r);te(a.$$.fragment,A),u=W(A),te(e.$$.fragment,A),t=W(A),i=D(A,"BUTTON",{class:!0});var Q=H(i);o=D(Q,"IMG",{src:!0,alt:!0}),Q.forEach(M),c=W(A),h=D(A,"BUTTON",{class:!0});var re=H(h);f=D(re,"IMG",{src:!0,style:!0,alt:!0}),re.forEach(M),d=W(A),G&&G.l(A),y=W(A),C&&C.l(A),k=W(A),v&&v.l(A),p=W(A),U&&U.l(A),I=W(A),E&&E.l(A),w=W(A),g&&g.l(A),A.forEach(M),this.h()},h:function(){he(o.src,l=sn)||O(o,"src",l),O(o,"alt","Open Menu Sidebar"),Z(o,we,164,2,4748),O(i,"class","menu-button sdbbtn"),Z(i,we,163,0,4690),he(f.src,_=an)||O(f,"src",_),de(f,"transform","rotate(90deg)"),O(f,"alt","Open Filter Sidebar"),Z(f,we,167,2,4869),O(h,"class","filter-button sdbbtn"),Z(h,we,166,0,4808),O(r,"class","w-full h-screen"),Z(r,we,133,0,3737)},m:function(b,A){z&&z.m(b,A),X(b,n,A),X(b,r,A),ne(a,r,null),P(r,u),ne(e,r,null),P(r,t),P(r,i),P(i,o),P(r,c),P(r,h),P(h,f),P(r,d),G&&G.m(r,null),P(r,y),C&&C.m(r,null),P(r,k),v&&v.m(r,null),P(r,p),U&&U.m(r,null),P(r,I),E&&E.m(r,null),P(r,w),g&&g.m(r,null),R=!0,B||(F=[Pe(i,"click",s[17],!1,!1,!1,!1),Pe(h,"click",s[18],!1,!1,!1,!1),Pe(r,"click",s[15],!1,!1,!1,!1)],B=!0)},p:function(b,A){b[4]===!1?z?(z.p(b,A),A[0]&16&&S(z,1)):(z=pt(b),z.c(),S(z,1),z.m(n.parentNode,n)):z&&(x(),T(z,1,1,()=>{z=null}),$());const Q={};A[0]&64&&(Q.view=b[6]),A[0]&4&&(Q.zoom=b[2]),A[0]&8|A[1]&8&&(Q.$$scope={dirty:A,ctx:b}),e.$set(Q),b[7]!==null&&b[1]==="sidebar"?G?A[0]&130&&S(G,1):(G=yt(b),G.c(),S(G,1),G.m(r,y)):G&&(x(),T(G,1,1,()=>{G=null}),$()),b[1]==="menu"?C?A[0]&2&&S(C,1):(C=wt(b),C.c(),S(C,1),C.m(r,k)):C&&(x(),T(C,1,1,()=>{C=null}),$()),b[1]==="submissions"?v?(v.p(b,A),A[0]&2&&S(v,1)):(v=Lt(b),v.c(),S(v,1),v.m(r,p)):v&&(x(),T(v,1,1,()=>{v=null}),$()),b[1]==="tools"?U?A[0]&2&&S(U,1):(U=bt(b),U.c(),S(U,1),U.m(r,I)):U&&(x(),T(U,1,1,()=>{U=null}),$()),b[1]==="search"?E?(E.p(b,A),A[0]&2&&S(E,1)):(E=kt(b),E.c(),S(E,1),E.m(r,w)):E&&(x(),T(E,1,1,()=>{E=null}),$()),b[8]===!1?g?(g.p(b,A),A[0]&256&&S(g,1)):(g=Ct(b),g.c(),S(g,1),g.m(r,null)):g&&(x(),T(g,1,1,()=>{g=null}),$())},i:function(b){R||(S(z),S(a.$$.fragment,b),S(e.$$.fragment,b),S(G),S(C),S(v),S(U),S(E),S(g),R=!0)},o:function(b){T(z),T(a.$$.fragment,b),T(e.$$.fragment,b),T(G),T(C),T(v),T(U),T(E),T(g),R=!1},d:function(b){b&&(M(n),M(r)),z&&z.d(b),ie(a),ie(e),G&&G.d(),C&&C.d(),v&&v.d(),U&&U.d(),E&&E.d(),g&&g.d(),B=!1,kn(F)}};return N("SvelteRegisterBlock",{block:V,id:Pt.name,type:"component",source:"",ctx:s}),V}function Zn(s,n,r){let a,u,e,t,i,o,l,c;K(ce,"currentSidebar"),Y(s,ce,g=>r(1,e=g)),K(Se,"isPopupOpen"),Y(s,Se,g=>r(4,t=g)),K(ue,"darkMode"),Y(s,ue,g=>r(5,i=g)),K(ze,"currentViewStore"),Y(s,ze,g=>r(6,o=g)),K(Ue,"selectedMarkerId"),Y(s,Ue,g=>r(7,l=g)),K(Ye,"bannerClosed"),Y(s,Ye,g=>r(8,c=g));let{$$slots:h={},$$scope:f}=n;ye("Page",h,[]);let _=25,d=25,y=10,k="https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/";const p=zt([Nt,Ce,ce,Oe],([g,V,m,b])=>m==="tools"&&b.length>0?b:g.filter(A=>{const[Q,re]=A.latLng;return V.contains(J.latLng(Q,re))}));K(p,"visibleMarkers"),Y(s,p,g=>r(0,u=g));function I(g){console.log("updating view");const{latLng:V}=g.detail;r(2,y=12),ze.set({lat:V[0],lng:V[1]}),ce.set("search")}function w(g,V){console.log("showing details"),g&&typeof g.stopPropagation=="function"&&g.stopPropagation(),B("sidebar"),Ue.set(V)}function R(g){e!=="search"&&e!=="submissions"&&e!=="tools"&&!g.target.closest(".sdbbtn")&&!g.target.closest(".sidebar")&&(B(null),Ue.set(null))}function B(g){ce.set(g)}function F(){console.log("closing sidebar"),B(null)}function z(){B(e==="menu"?null:"menu")}function G(){B(e==="tools"?null:"tools")}function C(){B("submissions")}const v=[];Object.keys(n).forEach(g=>{!~v.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Dn.warn(`<Page> was created with unknown prop '${g}'`)});const U=(g,{detail:V})=>{console.log(V),w(V.event,V.id),g.close()},E=({detail:g})=>{console.log(g),w(g.event,g.id)};return s.$capture_state=()=>({derived:zt,L:J,fade:$e,Leaflet:cn,Marker:un,Popup:hn,PopupContent:fn,Sidebar:tn,MenuSidebar:nn,Search:en,SearchResults:gn,SubmissionSidebar:on,Banner:rn,menuIconPath:sn,filterIconPath:an,populatePhotos:Vt,markersStore:Nt,filteredStore:Oe,currentViewStore:ze,mapBoundsStore:Ce,darkMode:ue,selectedMarkerId:Ue,currentSidebar:ce,isPopupOpen:Se,bannerClosed:Ye,ToolsSidebar:ln,width:_,height:d,zoomLevel:y,baseUrl:k,visibleMarkers:p,handleUpdateView:I,showDetails:w,handleDivClick:R,setCurrentSidebar:B,closeSidebar:F,showMenu:z,showTools:G,openSubmissions:C,populatedMarkers:a,$visibleMarkers:u,$currentSidebar:e,$isPopupOpen:t,$darkMode:i,$currentViewStore:o,$selectedMarkerId:l,$bannerClosed:c}),s.$inject_state=g=>{"width"in g&&r(9,_=g.width),"height"in g&&r(10,d=g.height),"zoomLevel"in g&&r(2,y=g.zoomLevel),"baseUrl"in g&&r(11,k=g.baseUrl),"populatedMarkers"in g&&r(3,a=g.populatedMarkers)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{s.$$.dirty[0]&2&&console.log(e),s.$$.dirty[0]&1&&r(3,a=u.map(g=>({...g,photos:Vt(g)})))},[u,e,y,a,t,i,o,l,c,_,d,k,p,I,w,R,F,z,G,C,U,E]}class Xn extends ge{constructor(n){super(n),ve(this,n,Zn,Pt,pe,{},null,[-1,-1]),N("SvelteRegisterComponent",{component:this,tagName:"Page",options:n,id:Pt.name})}}export{Xn as component,Wn as universal};
