import{a as te,e as j,f as X,$ as I,h as T,j as b,o as bt,l as F,a0 as z,m as _,a1 as De,A as yt,n as Qe,r as Lt,v as x,d as $,a2 as Ge,q as H,x as Ke,a3 as Z,w as ce,c as Ve,z as ut,u as je,g as Te,b as Pe,a4 as ue,y as N,t as ft,k as mt,a5 as Ze,D as At,E as We,H as Mt,F as Et}from"../chunks/scheduler.1WwOURwS.js";import{S as ne,i as oe,d as v,v as ie,b as g,f as d,c as y,e as E,x as le,t as A,j as re,a as B,g as se,o as fe,p as Je,k as Re,l as Oe,m as qe,n as Ie,u as St,y as Bt,s as Ct}from"../chunks/index.S7sSlPTl.js";import{d as xe}from"../chunks/index.Qk5RJqig.js";import{t as $e,c as et,b as tt,d as nt,g as Vt,e as de,f as he,L as P,a as K,l as pe,h as jt,i as ee,m as ot,j as ge}from"../chunks/stores.5UHVv53F.js";/* empty css                    */const Tt=!1,Gt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Tt},Symbol.toStringTag,{value:"Module"}));function Pt(r){let e=0,i=0,t=r.length;return r.forEach(c=>{e+=c[0],i+=c[1]}),[e/t,i/t]}async function it(r){const e="https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories";try{const t=await(await fetch(e)).json(),c=L.geoJSON(t,{style:o=>({color:o.properties.color,weight:2,opacity:.25,fillOpacity:.25})});return c.addTo(r),c}catch(i){console.error("Error fetching territories data:",i)}}function rt(r,e){let i=L.layerGroup();return L.geoJSON(e,{onEachFeature:(t,c)=>{if(t.geometry.type==="Polygon"){const o=Pt(t.geometry.coordinates[0]);!isNaN(o[0])&&!isNaN(o[1])&&L.marker([o[1],o[0]],{icon:L.divIcon({className:"territory-label",html:t.properties.Name,iconSize:L.point(100,40)})}).addTo(i)}}}),i.addTo(r),i}const S="src/lib/Map/Toolbar.svelte";function dt(r){let e;const i={c:function(){e=I("path"),this.h()},l:function(c){e=z(c,"path",{d:!0}),b(e).forEach(g),this.h()},h:function(){d(e,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),_(e,S,28,3,953)},m:function(c,o){y(c,e,o)},d:function(c){c&&g(e)}};return v("SvelteRegisterBlock",{block:i,id:dt.name,type:"else",source:"(28:2) {:else}",ctx:r}),i}function ht(r){let e,i;const t={c:function(){e=I("path"),i=I("path"),this.h()},l:function(o){e=z(o,"path",{d:!0}),b(e).forEach(g),i=z(o,"path",{d:!0}),b(i).forEach(g),this.h()},h:function(){d(e,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),_(e,S,26,3,752),d(i,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),_(i,S,26,53,802)},m:function(o,n){y(o,e,n),y(o,i,n)},d:function(o){o&&(g(e),g(i))}};return v("SvelteRegisterBlock",{block:t,id:ht.name,type:"if",source:"(26:2) {#if eye}",ctx:r}),t}function we(r){let e,i,t="ðŸ—ºï¸",c,o,n,s,l,f,u,a,h,p,w,k,M,R,U,Y,D;function J(C,q){return C[0]?ht:dt}let Q=J(r),O=Q(r);const m={c:function(){e=j("div"),i=j("button"),i.textContent=t,c=X(),o=j("button"),n=I("svg"),O.c(),l=X(),f=j("button"),u=I("svg"),a=I("path"),h=X(),p=j("button"),w=I("svg"),k=I("mask"),M=I("rect"),R=I("g"),U=I("path"),this.h()},l:function(q){e=T(q,"DIV",{class:!0});var V=b(e);i=T(V,"BUTTON",{class:!0,"data-svelte-h":!0}),bt(i)!=="svelte-1q7jlwb"&&(i.textContent=t),c=F(V),o=T(V,"BUTTON",{type:!0,title:!0,class:!0});var ze=b(o);n=z(ze,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var Ue=b(n);O.l(Ue),Ue.forEach(g),ze.forEach(g),l=F(V),f=T(V,"BUTTON",{class:!0,title:!0});var Ne=b(f);u=z(Ne,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var Xe=b(u);a=z(Xe,"path",{d:!0,fill:!0}),b(a).forEach(g),Xe.forEach(g),Ne.forEach(g),h=F(V),p=T(V,"BUTTON",{class:!0});var Fe=b(p);w=z(Fe,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var me=b(w);k=z(me,"mask",{id:!0,style:!0,maskUnits:!0,x:!0,y:!0,width:!0,height:!0});var He=b(k);M=z(He,"rect",{width:!0,height:!0,fill:!0}),b(M).forEach(g),He.forEach(g),R=z(me,"g",{mask:!0});var Ye=b(R);U=z(Ye,"path",{d:!0,fill:!0}),b(U).forEach(g),Ye.forEach(g),me.forEach(g),Fe.forEach(g),V.forEach(g),this.h()},h:function(){d(i,"class","selected s-X67GN01QUXjj"),_(i,S,22,1,441),d(n,"fill","none"),d(n,"stroke-linecap","round"),d(n,"stroke-linejoin","round"),d(n,"stroke-width",s=r[0]?2:1),d(n,"viewBox","0 0 24 24"),d(n,"stroke","currentColor"),_(n,S,24,2,601),d(o,"type","button"),d(o,"title","Show Markers"),d(o,"class","s-X67GN01QUXjj"),De(o,"selected",r[0]),_(o,S,23,1,514),d(a,"d","M0.800017 9.54074L15.8136 16.3514C16.2519 16.5506 16.7475 16.5506 17.1858 16.3514L32.1993 9.54074C33.266 9.0567 33.266 7.44474 32.1993 6.96071L17.1864 0.149366C16.9711 0.0509415 16.7371 0 16.5003 0C16.2636 0 16.0296 0.0509415 15.8142 0.149366L0.800017 6.96006C-0.266672 7.4441 -0.266672 9.0567 0.800017 9.54074ZM32.2 15.2306L28.4559 13.5336L18.0378 18.256C17.5506 18.4771 17.033 18.5892 16.5 18.5892C15.967 18.5892 15.4501 18.4771 14.9622 18.256L4.54471 13.5336L0.800017 15.2306C-0.266672 15.714 -0.266672 17.3253 0.800017 17.8087L15.8136 24.6142C16.2519 24.8128 16.7475 24.8128 17.1858 24.6142L32.2 17.8087C33.2667 17.3253 33.2667 15.714 32.2 15.2306ZM32.2 23.4676L28.4701 21.777L18.0378 26.5059C17.5506 26.727 17.033 26.8391 16.5 26.8391C15.967 26.8391 15.4501 26.727 14.9622 26.5059L4.53053 21.777L0.800017 23.4676C-0.266672 23.951 -0.266672 25.5623 0.800017 26.0457L15.8136 32.8513C16.2519 33.0498 16.7475 33.0498 17.1858 32.8513L32.2 26.0457C33.2667 25.5623 33.2667 23.951 32.2 23.4676Z"),d(a,"fill","black"),_(a,S,35,3,1497),d(u,"class","svgSize s-X67GN01QUXjj"),d(u,"width","33"),d(u,"height","33"),d(u,"viewBox","0 0 33 33"),d(u,"fill","none"),d(u,"xmlns","http://www.w3.org/2000/svg"),_(u,S,34,2,1382),d(f,"class","selected s-X67GN01QUXjj"),d(f,"title","Cycle Map Style"),_(f,S,33,1,1298),d(M,"width","54"),d(M,"height","54"),d(M,"fill","#D9D9D9"),_(M,S,42,3,2824),d(k,"id","mask0_14_196"),yt(k,"mask-type","alpha"),d(k,"maskUnits","userSpaceOnUse"),d(k,"x","0"),d(k,"y","0"),d(k,"width","54"),d(k,"height","54"),_(k,S,41,3,2710),d(U,"d","M24.75 47.25V32.4L14.2875 42.9188L11.0813 39.7125L21.6 29.25H6.75V24.75H21.6L11.0813 14.2875L14.2875 11.0813L24.75 21.6V6.75H29.25V21.6L39.7125 11.0813L42.9188 14.2875L32.4 24.75H47.25V29.25H32.4L42.9188 39.7125L39.7125 42.9188L29.25 32.4V47.25H24.75Z"),d(U,"fill","black"),_(U,S,45,3,2917),d(R,"mask","url(#mask0_14_196)"),_(R,S,44,3,2884),d(w,"class","svgSize s-X67GN01QUXjj"),d(w,"width","54"),d(w,"height","24"),d(w,"viewBox","0 0 54 54"),d(w,"fill","#000"),d(w,"xmlns","http://www.w3.org/2000/svg"),_(w,S,40,2,2595),d(p,"class","selected s-X67GN01QUXjj"),_(p,S,39,1,2538),d(e,"class","flex flex-col s-X67GN01QUXjj"),_(e,S,21,0,412)},m:function(q,V){y(q,e,V),E(e,i),E(e,c),E(e,o),E(o,n),O.m(n,null),E(e,l),E(e,f),E(f,u),E(u,a),E(e,h),E(e,p),E(p,w),E(w,k),E(k,M),E(w,R),E(R,U),Y||(D=[le(i,"click",r[4],!1,!1,!1,!1),le(o,"click",r[1],!1,!1,!1,!1),le(f,"click",r[2],!1,!1,!1,!1),le(p,"click",r[3],!1,!1,!1,!1)],Y=!0)},p:function(q,[V]){Q!==(Q=J(q))&&(O.d(1),O=Q(q),O&&(O.c(),O.m(n,null))),V&1&&s!==(s=q[0]?2:1)&&d(n,"stroke-width",s),V&1&&De(o,"selected",q[0])},i:Qe,o:Qe,d:function(q){q&&g(e),O.d(),Y=!1,Lt(D)}};return v("SvelteRegisterBlock",{block:m,id:we.name,type:"component",source:"",ctx:r}),m}function Rt(r,e,i){let{$$slots:t={},$$scope:c}=e;ie("Toolbar",t,[]);let o=!0;function n(){i(0,o=!o),$e(o)}function s(){et()}function l(){tt()}function f(){nt()}const u=[];return Object.keys(e).forEach(a=>{!~u.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${a}'`)}),r.$capture_state=()=>({toggleMarkerVisibility:$e,cycleMapStyle:et,toggleDarkMode:tt,toggleTerritoriesVisibility:nt,eye:o,clickEye:n,triggerCycleMapStyle:s,toggleMarkerColor:l,toggleTerritoriesLayer:f}),r.$inject_state=a=>{"eye"in a&&i(0,o=a.eye)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),[o,n,s,l,f]}class st extends ne{constructor(e){super(e),oe(this,e,Rt,we,te,{}),v("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:e,id:we.name})}}const{Error:G,console:Ot}=Vt,qt="src/lib/Map/Leaflet.svelte";function _e(r){let e;const i=r[9].default,t=Ve(i,r,r[8],null),c={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,s){t&&t.m(n,s),e=!0},p:function(n,s){t&&t.p&&(!e||s&256)&&je(t,i,n,n[8],e?Pe(i,n[8],s,null):Te(n[8]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){B(t,n),e=!1},d:function(n){t&&t.d(n)}};return v("SvelteRegisterBlock",{block:c,id:_e.name,type:"if",source:"(173:2) {#if map}",ctx:r}),c}function ke(r){let e,i,t=r[0]&&_e(r);const c={c:function(){e=j("div"),t&&t.c(),this.h()},l:function(n){e=T(n,"DIV",{class:!0});var s=b(e);t&&t.l(s),s.forEach(g),this.h()},h:function(){d(e,"class","w-full h-full"),_(e,qt,171,0,4839)},m:function(n,s){y(n,e,s),t&&t.m(e,null),r[10](e),i=!0},p:function(n,[s]){n[0]?t?(t.p(n,s),s&1&&A(t,1)):(t=_e(n),t.c(),A(t,1),t.m(e,null)):t&&(re(),B(t,1,1,()=>{t=null}),se())},i:function(n){i||(A(t),i=!0)},o:function(n){B(t),i=!1},d:function(n){n&&g(e),t&&t.d(),r[10](null)}};return v("SvelteRegisterBlock",{block:c,id:ke.name,type:"component",source:"",ctx:r}),c}function It(r,e,i){let t,c;x(de,"currentMapStyleId"),$(r,de,m=>i(6,t=m)),x(he,"territoriesVisible"),$(r,he,m=>i(7,c=m));let{$$slots:o={},$$scope:n}=e;ie("Leaflet",o,["default"]);let{bounds:s=void 0}=e,{view:l=void 0}=e,{zoom:f=void 0}=e;const u=Ge();let a,h,p,w=null,k=null,M=null;async function R(m){if(!M)try{M=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),w=await it(m,M),k=await rt(m,M)}catch(C){console.error("Error fetching territories data:",C)}}const U=P.Control.extend({onAdd(m){const C=P.DomUtil.create("div","map-toolbar-container");return new st({target:C,props:{}}),C}});H(()=>{if(!s&&(!l||!f))throw new Error("Must set either bounds, or view and zoom.");i(0,a=P.map(h)),s?(a.fitBounds(s),K.set(s)):l&&f&&a.setView(l,f),a.whenReady(()=>{if(!s){const m=a.getBounds();K.set(m)}R(a),i(5,p=new pe({Language:"fr",style:P.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(a)),new U({position:"topright"}).addTo(a)}),a.on("zoom",m=>u("zoom",m)).on("moveend",()=>{const m=a.getBounds();K.set(m)}).on("popupopen",async m=>{await Ke(),m.popup.update()})});function Y(){a&&(!w||!k?R(a):(a.addLayer(w),a.addLayer(k)))}function D(){a&&(w&&a.removeLayer(w),k&&a.removeLayer(k),console.log("Territories removed"))}Z(()=>{a==null||a.remove(),i(0,a=void 0),D()}),ce("map",{getMap:()=>a});function J(m){a&&p&&(a.removeLayer(p),i(5,p=new pe({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(a)))}const Q=["bounds","view","zoom"];Object.keys(e).forEach(m=>{!~Q.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Ot.warn(`<Leaflet> was created with unknown prop '${m}'`)});function O(m){ut[m?"unshift":"push"](()=>{h=m,i(1,h)})}return r.$$set=m=>{"bounds"in m&&i(2,s=m.bounds),"view"in m&&i(3,l=m.view),"zoom"in m&&i(4,f=m.zoom),"$$scope"in m&&i(8,n=m.$$scope)},r.$capture_state=()=>({onMount:H,onDestroy:Z,setContext:ce,createEventDispatcher:Ge,tick:Ke,L:P,addTerritoriesLayer:it,addTerritoriesLabels:rt,MaptilerLayer:pe,MaptilerStyle:jt,Toolbar:st,currentMapStyleId:de,mapBoundsStore:K,territoriesVisible:he,bounds:s,view:l,zoom:f,dispatch:u,map:a,mapElement:h,mtLayer:p,territoriesLayer:w,labelsLayer:k,territoriesData:M,initializeTerritories:R,ToolbarControl:U,addTerritories:Y,removeTerritories:D,updateMapStyle:J,$currentMapStyleId:t,$territoriesVisible:c}),r.$inject_state=m=>{"bounds"in m&&i(2,s=m.bounds),"view"in m&&i(3,l=m.view),"zoom"in m&&i(4,f=m.zoom),"map"in m&&i(0,a=m.map),"mapElement"in m&&i(1,h=m.mapElement),"mtLayer"in m&&i(5,p=m.mtLayer),"territoriesLayer"in m&&(w=m.territoriesLayer),"labelsLayer"in m&&(k=m.labelsLayer),"territoriesData"in m&&(M=m.territoriesData)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),r.$$.update=()=>{r.$$.dirty&128&&(c?Y():D()),r.$$.dirty&29&&a&&(s?a.fitBounds(s):l&&f&&a.setView(l,f)),r.$$.dirty&97&&t&&(console.log("MAP TILE NAME",t.name),a&&p&&J(t))},[a,h,s,l,f,p,t,c,n,o,O]}class pt extends ne{constructor(e){super(e),oe(this,e,It,ke,te,{bounds:2,view:3,zoom:4}),v("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:e,id:ke.name})}get bounds(){throw new G("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(e){throw new G("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new G("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(e){throw new G("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new G("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(e){throw new G("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const lt="data:image/png;base64,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",at=""+new URL("../assets/custom-marker-white-outline.ja7aQokX.png",import.meta.url).href;function ve(r){let e;const i=r[5].default,t=Ve(i,r,r[4],null),c={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,s){t&&t.m(n,s),e=!0},p:function(n,s){t&&t.p&&(!e||s&16)&&je(t,i,n,n[4],e?Pe(i,n[4],s,null):Te(n[4]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){B(t,n),e=!1},d:function(n){t&&t.d(n)}};return v("SvelteRegisterBlock",{block:c,id:ve.name,type:"if",source:"(53:0) {#if marker}",ctx:r}),c}function be(r){let e,i,t=r[0]&&ve(r);const c={c:function(){t&&t.c(),e=N()},l:function(n){t&&t.l(n),e=N()},m:function(n,s){t&&t.m(n,s),y(n,e,s),i=!0},p:function(n,[s]){n[0]?t?(t.p(n,s),s&1&&A(t,1)):(t=ve(n),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(re(),B(t,1,1,()=>{t=null}),se())},i:function(n){i||(A(t),i=!0)},o:function(n){B(t),i=!1},d:function(n){n&&g(e),t&&t.d(n)}};return v("SvelteRegisterBlock",{block:c,id:be.name,type:"component",source:"",ctx:r}),c}function zt(r,e,i){let{$$slots:t={},$$scope:c}=e;ie("Marker",t,["default"]);let{width:o}=e,{height:n}=e,{latLng:s}=e,l,f;const u=ue("map");ce("layer",{getLayer:()=>l});function a(p){let k=`<img src="${p==="dark"?at:lt}" style="width: ${o}px; height: ${n}px;">`,M=P.divIcon({html:k,className:"map-marker",iconSize:P.point(o,n)});l?l.setIcon(M):f&&i(0,l=P.marker(s,{icon:M}).addTo(f))}H(()=>{f=u.getMap(),ee.subscribe(p=>{a(p)})}),Z(()=>{l&&(l.remove(),i(0,l=void 0))}),r.$$.on_mount.push(function(){o===void 0&&!("width"in e||r.$$.bound[r.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),n===void 0&&!("height"in e||r.$$.bound[r.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),s===void 0&&!("latLng"in e||r.$$.bound[r.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const h=["width","height","latLng"];return Object.keys(e).forEach(p=>{!~h.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Marker> was created with unknown prop '${p}'`)}),r.$$set=p=>{"width"in p&&i(1,o=p.width),"height"in p&&i(2,n=p.height),"latLng"in p&&i(3,s=p.latLng),"$$scope"in p&&i(4,c=p.$$scope)},r.$capture_state=()=>({onMount:H,onDestroy:Z,getContext:ue,setContext:ce,darkMode:ee,L:P,customMarker:lt,customMarkerWhite:at,width:o,height:n,latLng:s,marker:l,mapInstance:f,mapContext:u,createOrUpdateMarker:a}),r.$inject_state=p=>{"width"in p&&i(1,o=p.width),"height"in p&&i(2,n=p.height),"latLng"in p&&i(3,s=p.latLng),"marker"in p&&i(0,l=p.marker),"mapInstance"in p&&(f=p.mapInstance)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),[l,o,n,s,c,t]}class gt extends ne{constructor(e){super(e),oe(this,e,zt,be,te,{width:1,height:2,latLng:3}),v("SvelteRegisterComponent",{component:this,tagName:"Marker",options:e,id:be.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(e){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ut="src/lib/Map/Popup.svelte";function ye(r){let e;const i=r[3].default,t=Ve(i,r,r[2],null),c={c:function(){t&&t.c()},l:function(n){t&&t.l(n)},m:function(n,s){t&&t.m(n,s),e=!0},p:function(n,s){t&&t.p&&(!e||s&4)&&je(t,i,n,n[2],e?Pe(i,n[2],s,null):Te(n[2]),null)},i:function(n){e||(A(t,n),e=!0)},o:function(n){B(t,n),e=!1},d:function(n){t&&t.d(n)}};return v("SvelteRegisterBlock",{block:c,id:ye.name,type:"if",source:"(36:2) {#if open}",ctx:r}),c}function Le(r){let e,i,t=r[1]&&ye(r);const c={c:function(){e=j("div"),t&&t.c(),this.h()},l:function(n){e=T(n,"DIV",{});var s=b(e);t&&t.l(s),s.forEach(g),this.h()},h:function(){_(e,Ut,34,0,671)},m:function(n,s){y(n,e,s),t&&t.m(e,null),r[4](e),i=!0},p:function(n,[s]){n[1]?t?(t.p(n,s),s&2&&A(t,1)):(t=ye(n),t.c(),A(t,1),t.m(e,null)):t&&(re(),B(t,1,1,()=>{t=null}),se())},i:function(n){i||(A(t),i=!0)},o:function(n){B(t),i=!1},d:function(n){n&&g(e),t&&t.d(),r[4](null)}};return v("SvelteRegisterBlock",{block:c,id:Le.name,type:"component",source:"",ctx:r}),c}function Nt(r,e,i){let{$$slots:t={},$$scope:c}=e;ie("Popup",t,["default"]);let o,n,s=!1;const l=ue("layer"),f=l.getLayer();H(()=>{o=P.popup().setContent(n),f&&(f.bindPopup(o),f.on("popupopen",()=>i(1,s=!0)),f.on("popupclose",()=>i(1,s=!1)))}),Z(()=>{f&&f.unbindPopup(),o&&(o.remove(),o=void 0)});const u=[];Object.keys(e).forEach(h=>{!~u.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Popup> was created with unknown prop '${h}'`)});function a(h){ut[h?"unshift":"push"](()=>{n=h,i(0,n)})}return r.$$set=h=>{"$$scope"in h&&i(2,c=h.$$scope)},r.$capture_state=()=>({onMount:H,onDestroy:Z,getContext:ue,L:P,popup:o,popupElement:n,open:s,layerContext:l,layer:f}),r.$inject_state=h=>{"popup"in h&&(o=h.popup),"popupElement"in h&&i(0,n=h.popupElement),"open"in h&&i(1,s=h.open)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),[n,s,c,t,a]}class wt extends ne{constructor(e){super(e),oe(this,e,Nt,Le,te,{}),v("SvelteRegisterComponent",{component:this,tagName:"Popup",options:e,id:Le.name})}}const W="src/routes/map/+page.svelte";function ae(r,e,i){const t=r.slice();return t[4]=e[i].latLng,t[5]=e[i].visible,t[6]=e[i].name,t[7]=e[i].description,t[8]=e[i].photos,t[10]=i,t}function ct(r,e,i){const t=r.slice();return t[11]=e[i].url,t[12]=e[i].alt,t}function Ae(r){let e,i;e=new gt({props:{latLng:r[4],width:20,height:20,$$slots:{default:[kt]},$$scope:{ctx:r}},$$inline:!0});const t={c:function(){Re(e.$$.fragment)},l:function(o){Oe(e.$$.fragment,o)},m:function(o,n){qe(e,o,n),i=!0},p:function(o,n){const s={};n&4&&(s.latLng=o[4]),n&32772&&(s.$$scope={dirty:n,ctx:o}),e.$set(s)},i:function(o){i||(A(e.$$.fragment,o),i=!0)},o:function(o){B(e.$$.fragment,o),i=!1},d:function(o){Ie(e,o)}};return v("SvelteRegisterBlock",{block:t,id:Ae.name,type:"if",source:"(30:12) {#if visible}",ctx:r}),t}function Me(r){let e,i=fe(r[8]),t=[];for(let o=0;o<i.length;o+=1)t[o]=Ee(ct(r,i,o));const c={c:function(){e=j("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l:function(n){e=T(n,"DIV",{class:!0});var s=b(e);for(let l=0;l<t.length;l+=1)t[l].l(s);s.forEach(g),this.h()},h:function(){d(e,"class","flex flex-row overflow-x-auto"),_(e,W,37,24,1421)},m:function(n,s){y(n,e,s);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p:function(n,s){if(s&4){i=fe(n[8]);let l;for(l=0;l<i.length;l+=1){const f=ct(n,i,l);t[l]?t[l].p(f,s):(t[l]=Ee(f),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=i.length}},d:function(n){n&&g(e),At(t,n)}};return v("SvelteRegisterBlock",{block:c,id:Me.name,type:"if",source:"(37:24) {#if photos && photos.length}",ctx:r}),c}function Ee(r){let e,i,t;const c={c:function(){e=j("img"),this.h()},l:function(n){e=T(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){We(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${r[11]}`)||d(e,"src",i),d(e,"alt",t=r[12]),d(e,"class","s-_HdLFogMzSo7"),_(e,W,39,36,1562)},m:function(n,s){y(n,e,s)},p:function(n,s){s&4&&!We(e.src,i=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${n[11]}`)&&d(e,"src",i),s&4&&t!==(t=n[12])&&d(e,"alt",t)},d:function(n){n&&g(e)}};return v("SvelteRegisterBlock",{block:c,id:Ee.name,type:"each",source:"(39:32) {#each photos as {url, alt}}",ctx:r}),c}function Se(r){let e,i,t=r[7]+"";const c={c:function(){e=j("p"),i=new Mt(!1),this.h()},l:function(n){e=T(n,"P",{class:!0});var s=b(e);i=Et(s,!1),s.forEach(g),this.h()},h:function(){i.a=null,d(e,"class","description max-h-32 overflow-y-auto s-_HdLFogMzSo7"),_(e,W,45,28,1869)},m:function(n,s){y(n,e,s),i.m(t,e)},p:function(n,s){s&4&&t!==(t=n[7]+"")&&i.p(t)},d:function(n){n&&g(e)}};return v("SvelteRegisterBlock",{block:c,id:Se.name,type:"if",source:"(45:24) {#if description}",ctx:r}),c}function _t(r){let e,i=r[6]+"",t,c,o,n,s=r[8]&&r[8].length&&Me(r),l=r[7]&&Se(r);const f={c:function(){e=j("h3"),t=ft(i),c=X(),s&&s.c(),o=X(),l&&l.c(),n=N(),this.h()},l:function(a){e=T(a,"H3",{});var h=b(e);t=mt(h,i),h.forEach(g),c=F(a),s&&s.l(a),o=F(a),l&&l.l(a),n=N(),this.h()},h:function(){_(e,W,32,24,1272)},m:function(a,h){y(a,e,h),E(e,t),y(a,c,h),s&&s.m(a,h),y(a,o,h),l&&l.m(a,h),y(a,n,h)},p:function(a,h){h&4&&i!==(i=a[6]+"")&&Ct(t,i),a[8]&&a[8].length?s?s.p(a,h):(s=Me(a),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null),a[7]?l?l.p(a,h):(l=Se(a),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d:function(a){a&&(g(e),g(c),g(o),g(n)),s&&s.d(a),l&&l.d(a)}};return v("SvelteRegisterBlock",{block:f,id:_t.name,type:"slot",source:"(32:20) <Popup>",ctx:r}),f}function kt(r){let e,i,t;e=new wt({props:{$$slots:{default:[_t]},$$scope:{ctx:r}},$$inline:!0});const c={c:function(){Re(e.$$.fragment),i=X()},l:function(n){Oe(e.$$.fragment,n),i=F(n)},m:function(n,s){qe(e,n,s),y(n,i,s),t=!0},p:function(n,s){const l={};s&32772&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i:function(n){t||(A(e.$$.fragment,n),t=!0)},o:function(n){B(e.$$.fragment,n),t=!1},d:function(n){n&&g(i),Ie(e,n)}};return v("SvelteRegisterBlock",{block:c,id:kt.name,type:"slot",source:"(31:16) <Marker {latLng} width={20} height={20}>",ctx:r}),c}function Be(r,e){let i,t,c,o=e[5]&&Ae(e);const n={key:r,first:null,c:function(){i=N(),o&&o.c(),t=N(),this.h()},l:function(l){i=N(),o&&o.l(l),t=N(),this.h()},h:function(){this.first=i},m:function(l,f){y(l,i,f),o&&o.m(l,f),y(l,t,f),c=!0},p:function(l,f){e=l,e[5]?o?(o.p(e,f),f&4&&A(o,1)):(o=Ae(e),o.c(),A(o,1),o.m(t.parentNode,t)):o&&(re(),B(o,1,1,()=>{o=null}),se())},i:function(l){c||(A(o),c=!0)},o:function(l){B(o),c=!1},d:function(l){l&&(g(i),g(t)),o&&o.d(l)}};return v("SvelteRegisterBlock",{block:n,id:Be.name,type:"each",source:"(29:8) {#each $visibleMarkers as { latLng, visible, name, description, photos }",ctx:e}),n}function vt(r){let e=[],i=new Map,t,c,o=fe(r[2]);const n=l=>l[4].join(",")+"-"+l[10];Je(r,o,ae,n);for(let l=0;l<o.length;l+=1){let f=ae(r,o,l),u=n(f);i.set(u,e[l]=Be(u,f))}const s={c:function(){for(let f=0;f<e.length;f+=1)e[f].c();t=N()},l:function(f){for(let u=0;u<e.length;u+=1)e[u].l(f);t=N()},m:function(f,u){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(f,u);y(f,t,u),c=!0},p:function(f,u){u&4&&(o=fe(f[2]),re(),Je(f,o,ae,n),e=St(e,u,n,1,f,o,i,t.parentNode,Bt,Be,t,ae),se())},i:function(f){if(!c){for(let u=0;u<o.length;u+=1)A(e[u]);c=!0}},o:function(f){for(let u=0;u<e.length;u+=1)B(e[u]);c=!1},d:function(f){f&&g(t);for(let u=0;u<e.length;u+=1)e[u].d(f)}};return v("SvelteRegisterBlock",{block:s,id:vt.name,type:"slot",source:"(28:4) <Leaflet view={$initialViewStore} zoom={8}>",ctx:r}),s}function Ce(r){let e,i,t,c,o,n,s;n=new pt({props:{view:r[1],zoom:8,$$slots:{default:[vt]},$$scope:{ctx:r}},$$inline:!0});const l={c:function(){e=j("h1"),i=ft("counter*map"),c=X(),o=j("div"),Re(n.$$.fragment),this.h()},l:function(u){e=T(u,"H1",{class:!0});var a=b(e);i=mt(a,"counter*map"),a.forEach(g),c=F(u),o=T(u,"DIV",{class:!0});var h=b(o);Oe(n.$$.fragment,h),h.forEach(g),this.h()},h:function(){d(e,"class",t=Ze(r[0]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),_(e,W,22,0,862),d(o,"class","w-full h-screen"),_(o,W,25,0,936)},m:function(u,a){y(u,e,a),E(e,i),y(u,c,a),y(u,o,a),qe(n,o,null),s=!0},p:function(u,[a]){(!s||a&1&&t!==(t=Ze(u[0]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&d(e,"class",t);const h={};a&2&&(h.view=u[1]),a&32772&&(h.$$scope={dirty:a,ctx:u}),n.$set(h)},i:function(u){s||(A(n.$$.fragment,u),s=!0)},o:function(u){B(n.$$.fragment,u),s=!1},d:function(u){u&&(g(e),g(c),g(o)),Ie(n)}};return v("SvelteRegisterBlock",{block:l,id:Ce.name,type:"component",source:"",ctx:r}),l}function Xt(r,e,i){let t,c,o;x(ee,"darkMode"),$(r,ee,u=>i(0,t=u)),x(ge,"initialViewStore"),$(r,ge,u=>i(1,c=u));let{$$slots:n={},$$scope:s}=e;ie("Page",n,[]);const l=xe([ot,K],([u,a])=>!a||typeof a.contains!="function"?[]:u.filter(h=>{const[p,w]=h.latLng;return a.contains(P.latLng(p,w))}));x(l,"visibleMarkers"),$(r,l,u=>i(2,o=u));const f=[];return Object.keys(e).forEach(u=>{!~f.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)}),r.$capture_state=()=>({derived:xe,onMount:H,L:P,Leaflet:pt,Marker:gt,Popup:wt,markersStore:ot,initialViewStore:ge,mapBoundsStore:K,darkMode:ee,visibleMarkers:l,$darkMode:t,$initialViewStore:c,$visibleMarkers:o}),[t,c,o,l]}class Kt extends ne{constructor(e){super(e),oe(this,e,Xt,Ce,te,{}),v("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Ce.name})}}export{Kt as component,Gt as universal};
