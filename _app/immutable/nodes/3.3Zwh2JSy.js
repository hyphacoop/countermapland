import{a as le,e as P,f as D,h as E,j as I,l as V,w as ee,m as S,n as ne,r as dt,Y as Ze,o as _t,Z as De,v as ve,d as Le,_ as Pe,z as Ee,B as St,$ as Ie,A as Ve,c as pt,C as Ft,u as mt,g as gt,b as yt,a0 as He,q as te,t as ge,k as ye,x as Ce,a1 as mn,a2 as gn,a3 as Pt,p as yn,a4 as Et}from"../chunks/scheduler.cXxg14Tz.js";import{S as ce,i as ue,d as O,v as he,b as k,f as v,c as A,e as C,l as Q,t as B,o as fe,a as T,h as de,j as ie,k as oe,m as se,n as re,s as Ue,g as Fe,q as It,u as vn,r as Ln}from"../chunks/index.Jk_zeAAD.js";import{c as wn,i as je,b as Gt,t as Ot,d as Bt,e as we,g as qe,f as Xe,h as xe,L as K,j as Te,a as Se,l as Qe,k as Ut,n as jt,o as bn,p as ze,I as qt,m as Tt,S as Xt,q as kn,r as Ne,s as zt}from"../chunks/Sidebar.2eFtWqI4.js";import{d as At}from"../chunks/index.ZKlBTA1E.js";/* empty css                    */const Cn=!1,qn=Object.freeze(Object.defineProperty({__proto__:null,ssr:Cn},Symbol.toStringTag,{value:"Module"}));var Nt={exports:{}};(function(a,i){(function(s,r){r(i)})(wn,function(s){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,u=this.options.chunkInterval,h=this.options.chunkProgress,_=e.length,d=0,g=!0;if(this._map){var p=new Date().getTime(),m=L.bind(function(){var y=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<_;d++){if(c&&d%200==0){var M=new Date().getTime()-y;if(u<M)break}if((n=e[d])instanceof L.LayerGroup)g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(n,e),_=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&n.__parent.getChildCount()===2)){var j=n.__parent.getAllChildMarkers(),H=j[0]===n?j[1]:j[0];o.removeLayer(H)}}else l.addLayer(n),t||this.fire("layeradd",{layer:n})}h&&h(d,_,new Date().getTime()-p),d===_?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var w=this._needsClustering;d<_;d++)(n=e[d])instanceof L.LayerGroup?(g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(n,e),_=e.length):n.getLatLng?this.hasLayer(n)||w.push(n):l.addLayer(n);return this},removeLayers:function(e){var t,n,o=e.length,l=this._featureGroup,c=this._nonPointGroup,u=!0;if(!this._map){for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(n,e),o=e.length):(this._arraySplice(this._needsClustering,n),c.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var h=e.slice(),_=o;for(t=0;t<_;t++)(n=h[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,h),_=h.length):this._unspiderfyLayer(n)}for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(n,e),o=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),l.hasLayer(n)&&(l.removeLayer(n),n.clusterShow&&n.clusterShow())):(c.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,o,l,c=this._needsClustering.slice(),u=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),o=c.length-1;0<=o;o--){for(n=!0,l=u.length-1;0<=l;l--)if(u[l].layer===c[o]){n=!1;break}n&&e.call(t,c[o])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;typeof t!="function"&&(t=function(){});var o=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",o,this),this.off("animationend",o,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,o;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(o=this._needsRemoving[t]).newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)o=this._needsRemoving[t],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,o=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());l<=t&&o[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var o=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,u=this._map,h=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var _,d=e.__parent,g=d._markers;for(this._arraySplice(g,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<h));)t&&d._childCount<=1?(_=d._markers[0]===e?d._markers[1]:d._markers[0],o[d._zoom].removeObject(d,u.project(d._cLatLng,d._zoom)),l[d._zoom].addObject(_,u.project(_.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(_),_.__parent=d.__parent,d._icon&&(c.removeLayer(d),n||c.addLayer(_))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||o||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;n._childClusters.length===1;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,l=this._map;(e||n||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,o=n;typeof n!="function"&&(o=function(){return n}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;t<=l;l--)this._gridClusters[l]=new L.DistanceGrid(o(l)),this._gridUnclustered[l]=new L.DistanceGrid(o(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,o,l=this._gridClusters,c=this._gridUnclustered,u=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);u<=t;t--){n=this._map.project(e.getLatLng(),t);var h=l[t].getNearObject(n);if(h)return h._addChild(e),void(e.__parent=h);if(h=c[t].getNearObject(n)){var _=h.__parent;_&&this._removeLayer(h,!1);var d=new this._markerCluster(this,t,h,e);l[t].addObject(d,this._map.project(d._cLatLng,t)),h.__parent=d;var g=e.__parent=d;for(o=t-1;o>_._zoom;o--)g=new this._markerCluster(this,o,g),l[o].addObject(g,this._map.project(h.getLatLng(),o));return _._addChild(g),void this._removeFromGridUnclustered(h,t)}c[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,o=e.getLayers(),l=0;for(t=t||[];l<o.length;l++)(n=o[l])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,e,c,function(u){var h,_=u._latlng,d=u._markers;for(o.contains(_)||(_=null),u._isSingleParent()&&e+1===t?(l.removeLayer(u),u._recursivelyAddChildrenToMap(null,t,o)):(u.clusterHide(),u._recursivelyAddChildrenToMap(_,t,o)),n=d.length-1;0<=n;n--)h=d[n],o.contains(h._latlng)||l.removeLayer(h)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,t),l.eachLayer(function(u){u instanceof L.MarkerCluster||!u._icon||u.clusterShow()}),this._topClusterLevel._recursively(o,e,t,function(u){u._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,e,c,function(u){l.removeLayer(u),u.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,o=this._featureGroup;o.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){o.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var o=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,l,t+1,n);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(o,n),this._enqueue(function(){if(e._childCount===1){var u=e._markers[0];this._ignoreMove=!0,u.setLatLng(u.getLatLng()),this._ignoreMove=!1,u.clusterShow&&u.clusterShow()}else e._recursively(o,n,l,function(h){h._recursivelyRemoveChildrenFromMap(o,l,t+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var f=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,o){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),o&&this._addChild(o)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var o=this._markers.length-1;0<=o;o--)t&&this._markers[o].__dragStart||e.push(this._markers[o]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,u=o.getZoom();0<n.length&&c<l;){c++;var h=[];for(t=0;t<n.length;t++)h=h.concat(n[t]._childClusters);n=h}c<l?this._group._map.setView(this._latlng,c):l<=u?this._group._map.setView(this._latlng,u+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,o,l=this._markers,c=this._childClusters,u=0,h=0,_=this._childCount;if(_!==0){for(this._resetBounds(),e=0;e<l.length;e++)n=l[e]._latlng,this._bounds.extend(n),u+=n.lat,h+=n.lng;for(e=0;e<c.length;e++)(t=c[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,o=t._childCount,u+=n.lat*o,h+=n.lng*o;this._latlng=this._wLatLng=new L.LatLng(u/_,h/_),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(o){var l,c,u=o._markers;for(l=u.length-1;0<=l;l--)(c=u[l])._icon&&(c._setPos(t),c.clusterHide())},function(o){var l,c,u=o._childClusters;for(l=u.length-1;0<=l;l--)(c=u[l])._icon&&(c._setPos(t),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,o){this._recursively(e,o,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),n),l._isSingleParent()&&n-1===o?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,n)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(o){if(t!==o._zoom)for(var l=o._markers.length-1;0<=l;l--){var c=o._markers[l];n.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),o._group._featureGroup.addLayer(c))}},function(o){o._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._restorePosition();else for(var l=this._childClusters.length-1;0<=l;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,o){var l,c;this._recursively(e,t-1,n-1,function(u){for(c=u._markers.length-1;0<=c;c--)l=u._markers[c],o&&o.contains(l._latlng)||(u._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(u){for(c=u._childClusters.length-1;0<=c;c--)l=u._childClusters[c],o&&o.contains(l._latlng)||(u._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,n,o,l){var c,u,h=this._childClusters,_=this._zoom;if(t<=_&&(o&&o(this),l&&_===n&&l(this)),_<t||_<n)for(c=h.length-1;0<=c;c--)(u=h[c])._boundsNeedUpdate&&u._recalculateBounds(),e.intersects(u._bounds)&&u._recursively(e,t,n,o,l)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),o=this._getCoord(t.y),l=this._grid,c=l[o]=l[o]||{},u=c[n]=c[n]||[],h=L.Util.stamp(e);this._objectPoint[h]=t,u.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,o,l=this._getCoord(t.x),c=this._getCoord(t.y),u=this._grid,h=u[c]=u[c]||{},_=h[l]=h[l]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,o=_.length;n<o;n++)if(_[n]===e)return _.splice(n,1),o===1&&delete h[l],!0},eachObject:function(e,t){var n,o,l,c,u,h,_=this._grid;for(n in _)for(o in u=_[n])for(l=0,c=(h=u[o]).length;l<c;l++)e.call(t,h[l])&&(l--,c--)},getNearObject:function(e){var t,n,o,l,c,u,h,_,d=this._getCoord(e.x),g=this._getCoord(e.y),p=this._objectPoint,m=this._sqCellSize,w=null;for(t=g-1;t<=g+1;t++)if(l=this._grid[t]){for(n=d-1;n<=d+1;n++)if(c=l[n])for(o=0,u=c.length;o<u;o++)h=c[o],((_=this._sqDist(p[L.Util.stamp(h)],e))<m||_<=m&&w===null)&&(m=_,w=h)}return w},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,o,l,c=0,u=null,h=[];for(n=t.length-1;0<=n;n--)o=t[n],0<(l=this.getDistant(o,e))&&(h.push(o),c<l&&(c=l,u=o));return{maxPoint:u,newPoints:h}},buildConvexHull:function(e,t){var n=[],o=this.findMostDistantPointFromBaseLine(e,t);return o.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],o.maxPoint],o.newPoints))).concat(this.buildConvexHull([o.maxPoint,e[1]],o.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,o=!1,l=!1,c=!1,u=null,h=null,_=null,d=null,g=null,p=null;for(t=e.length-1;0<=t;t--){var m=e[t];(n===!1||m.lat>n)&&(n=(u=m).lat),(o===!1||m.lat<o)&&(o=(h=m).lat),(l===!1||m.lng>l)&&(l=(_=m).lng),(c===!1||m.lng<c)&&(c=(d=m).lng)}return g=o!==n?(p=h,u):(p=d,_),[].concat(this.buildConvexHull([p,g],e),this.buildConvexHull([g,p],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),o=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),o.push(e);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,o,l=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,c=this._2PI/e,u=[];for(l=Math.max(l,35),u.length=e,n=0;n<e;n++)o=this._circleStartAngle+n*c,u[n]=new L.Point(t.x+l*Math.cos(o),t.y+l*Math.sin(o))._round();return u},_generatePointsSpiral:function(e,t){var n,o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,u=o*this._spiralLengthFactor*this._2PI,h=0,_=[];for(n=_.length=e;0<=n;n--)n<e&&(_[n]=new L.Point(t.x+l*Math.cos(h),t.y+l*Math.sin(h))._round()),l+=u/(h+=c/l+5e-4*n);return _},_noanimationUnspiderfy:function(){var e,t,n=this._group,o=n._map,l=n._featureGroup,c=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=c.length-1;0<=t;t--)e=c[t],l.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(o.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:c}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,o,l,c,u=this._group,h=u._map,_=u._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(u._ignoreMove=!0,n=0;n<e.length;n++)c=h.layerPointToLatLng(t[n]),o=e[n],l=new L.Polyline([this._latlng,c],d),h.addLayer(l),o._spiderLeg=l,o._preSpiderfyLatlng=o._latlng,o.setLatLng(c),o.setZIndexOffset&&o.setZIndexOffset(1e6),_.addLayer(o);this.setOpacity(.3),u._ignoreMove=!1,u.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,o,l,c,u,h,_=this,d=this._group,g=d._map,p=d._featureGroup,m=this._latlng,w=g.latLngToLayerPoint(m),y=L.Path.SVG,M=L.extend({},this._group.options.spiderLegPolylineOptions),j=M.opacity;for(j===void 0&&(j=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),y?(M.opacity=0,M.className=(M.className||"")+" leaflet-cluster-spider-leg"):M.opacity=j,d._ignoreMove=!0,n=0;n<e.length;n++)o=e[n],h=g.layerPointToLatLng(t[n]),l=new L.Polyline([m,h],M),g.addLayer(l),o._spiderLeg=l,y&&(u=(c=l._path).getTotalLength()+.1,c.style.strokeDasharray=u,c.style.strokeDashoffset=u),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),p.addLayer(o),o._setPos&&o._setPos(w);for(d._forceLayout(),d._animationStart(),n=e.length-1;0<=n;n--)h=g.layerPointToLatLng(t[n]),(o=e[n])._preSpiderfyLatlng=o._latlng,o.setLatLng(h),o.clusterShow&&o.clusterShow(),y&&((c=(l=o._spiderLeg)._path).style.strokeDashoffset=0,l.setStyle({opacity:j}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:_,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,o,l,c,u,h=this,_=this._group,d=_._map,g=_._featureGroup,p=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),m=this.getAllChildMarkers(null,!0),w=L.Path.SVG;for(_._ignoreMove=!0,_._animationStart(),this.setOpacity(1),n=m.length-1;0<=n;n--)(t=m[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,u=!0,t._setPos&&(t._setPos(p),u=!1),t.clusterHide&&(t.clusterHide(),u=!1),u&&g.removeLayer(t),w&&(c=(l=(o=t._spiderLeg)._path).getTotalLength()+.1,l.style.strokeDashoffset=c,o.setStyle({opacity:0})));_._ignoreMove=!1,setTimeout(function(){var y=0;for(n=m.length-1;0<=n;n--)(t=m[n])._spiderLeg&&y++;for(n=m.length-1;0<=n;n--)(t=m[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<y&&g.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);_._animationEnd(),_.fire("unspiderfied",{cluster:h,markers:m})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=r,s.MarkerCluster=f,Object.defineProperty(s,"__esModule",{value:!0})})})(Nt,Nt.exports);const xt=""+new URL("../assets/map-territories.nhGiRSZo.png",import.meta.url).href,Qt=""+new URL("../assets/map-streets.6DhexBtl.png",import.meta.url).href,Wt=""+new URL("../assets/map-satellite.xCirAAcX.png",import.meta.url).href,me="src/lib/UI/Peephole.svelte";function We(a){let i,s,r,f,e,t,n,o,l,c,u,h,_,d;const g={c:function(){i=P("div"),s=P("button"),r=P("img"),e=D(),t=P("button"),n=P("img"),l=D(),c=P("button"),u=P("img"),this.h()},l:function(m){i=E(m,"DIV",{class:!0});var w=I(i);s=E(w,"BUTTON",{class:!0});var y=I(s);r=E(y,"IMG",{src:!0,alt:!0,class:!0}),y.forEach(k),e=V(w),t=E(w,"BUTTON",{class:!0});var M=I(t);n=E(M,"IMG",{src:!0,alt:!0,class:!0}),M.forEach(k),l=V(w),c=E(w,"BUTTON",{class:!0});var j=I(c);u=E(j,"IMG",{src:!0,alt:!0,class:!0}),j.forEach(k),w.forEach(k),this.h()},h:function(){ee(r.src,f=Qt)||v(r,"src",f),v(r,"alt","Map Style: Streets"),v(r,"class","s-SloUweJClGtl"),S(r,me,10,6,365),v(s,"class","s-SloUweJClGtl"),S(s,me,9,4,313),ee(n.src,o=Wt)||v(n,"src",o),v(n,"alt","Map Style: Satelitte"),v(n,"class","s-SloUweJClGtl"),S(n,me,13,6,487),v(t,"class","s-SloUweJClGtl"),S(t,me,12,4,435),ee(u.src,h=xt)||v(u,"src",h),v(u,"alt","Map Style: Territories"),v(u,"class","s-SloUweJClGtl"),S(u,me,16,6,613),v(c,"class","s-SloUweJClGtl"),S(c,me,15,4,561),v(i,"class","peephole-container s-SloUweJClGtl"),S(i,me,8,2,276)},m:function(m,w){A(m,i,w),C(i,s),C(s,r),C(i,e),C(i,t),C(t,n),C(i,l),C(i,c),C(c,u),_||(d=[Q(s,"click",a[1],!1,!1,!1,!1),Q(t,"click",a[2],!1,!1,!1,!1),Q(c,"click",a[3],!1,!1,!1,!1)],_=!0)},p:ne,i:ne,o:ne,d:function(m){m&&k(i),_=!1,dt(d)}};return O("SvelteRegisterBlock",{block:g,id:We.name,type:"component",source:"",ctx:a}),g}function Mn(a,i,s){let{$$slots:r={},$$scope:f}=i;he("Peephole",r,[]);let{onMapStyleSelect:e}=i;a.$$.on_mount.push(function(){e===void 0&&!("onMapStyleSelect"in i||a.$$.bound[a.$$.props.onMapStyleSelect])&&console.warn("<Peephole> was created without expected prop 'onMapStyleSelect'")});const t=["onMapStyleSelect"];Object.keys(i).forEach(c=>{!~t.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Peephole> was created with unknown prop '${c}'`)});const n=()=>e(1),o=()=>e(0),l=()=>e(2);return a.$$set=c=>{"onMapStyleSelect"in c&&s(0,e=c.onMapStyleSelect)},a.$capture_state=()=>({onMapStyleSelect:e,territoriesImage:xt,streetsImage:Qt,satelitteImage:Wt}),a.$inject_state=c=>{"onMapStyleSelect"in c&&s(0,e=c.onMapStyleSelect)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),[e,n,o,l]}class Jt extends ce{constructor(i){super(i),ue(this,i,Mn,We,le,{onMapStyleSelect:0}),O("SvelteRegisterComponent",{component:this,tagName:"Peephole",options:i,id:We.name})}get onMapStyleSelect(){throw new Error("<Peephole>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onMapStyleSelect(i){throw new Error("<Peephole>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Kt=""+new URL("../assets/plus.Njxp47f3.svg",import.meta.url).href,Yt=""+new URL("../assets/minus.3BZMq0WM.svg",import.meta.url).href,Sn=""+new URL("../assets/layers.ixVVx571.svg",import.meta.url).href,$t=""+new URL("../assets/countermonument.cvEDImS4.svg",import.meta.url).href,en=""+new URL("../assets/map-basic.JRLSm0r-.png",import.meta.url).href,{console:Rt}=qe,F="src/lib/Map/Toolbar.svelte";function tn(a){let i;const s={c:function(){i=Ze("path"),this.h()},l:function(f){i=De(f,"path",{d:!0}),I(i).forEach(k),this.h()},h:function(){v(i,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),S(i,F,89,8,2357)},m:function(f,e){A(f,i,e)},d:function(f){f&&k(i)}};return O("SvelteRegisterBlock",{block:s,id:tn.name,type:"else",source:"(89:6) {:else}",ctx:a}),s}function nn(a){let i,s;const r={c:function(){i=Ze("path"),s=Ze("path"),this.h()},l:function(e){i=De(e,"path",{d:!0}),I(i).forEach(k),s=De(e,"path",{d:!0}),I(s).forEach(k),this.h()},h:function(){v(i,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),S(i,F,85,8,2128),v(s,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),S(s,F,85,58,2178)},m:function(e,t){A(e,i,t),A(e,s,t)},d:function(e){e&&(k(i),k(s))}};return O("SvelteRegisterBlock",{block:r,id:nn.name,type:"if",source:"(85:6) {#if eye}",ctx:a}),r}function Je(a){let i,s;i=new Jt({props:{onMapStyleSelect:a[7]},$$inline:!0});const r={c:function(){ie(i.$$.fragment)},l:function(e){oe(i.$$.fragment,e)},m:function(e,t){se(i,e,t),s=!0},p:ne,i:function(e){s||(B(i.$$.fragment,e),s=!0)},o:function(e){T(i.$$.fragment,e),s=!1},d:function(e){re(i,e)}};return O("SvelteRegisterBlock",{block:r,id:Je.name,type:"if",source:"(107:2) {#if showPeephole}",ctx:a}),r}function Ke(a){let i,s,r,f,e,t,n,o,l,c,u,h,_,d,g,p,m="🗺️",w,y,M,j,H,x,b,Z,be,U,z,Ge,$,G,R,_e;function Oe(J,q){return J[0]?nn:tn}let pe=Oe(a),W=pe(a),N=a[1]&&Je(a);const Be={c:function(){i=P("div"),s=P("button"),r=P("img"),e=D(),t=P("div"),n=P("button"),o=P("img"),c=D(),u=P("button"),h=P("img"),d=D(),g=P("div"),p=P("button"),p.textContent=m,w=D(),y=P("button"),M=Ze("svg"),W.c(),H=D(),x=P("button"),b=P("img"),be=D(),U=P("button"),z=P("img"),$=D(),N&&N.c(),this.h()},l:function(q){i=E(q,"DIV",{class:!0});var X=I(i);s=E(X,"BUTTON",{class:!0});var vt=I(s);r=E(vt,"IMG",{src:!0,alt:!0}),vt.forEach(k),e=V(X),t=E(X,"DIV",{class:!0});var Ae=I(t);n=E(Ae,"BUTTON",{class:!0});var Lt=I(n);o=E(Lt,"IMG",{src:!0,alt:!0}),Lt.forEach(k),c=V(Ae),u=E(Ae,"BUTTON",{class:!0});var wt=I(u);h=E(wt,"IMG",{src:!0,alt:!0}),wt.forEach(k),Ae.forEach(k),d=V(X),g=E(X,"DIV",{class:!0});var ke=I(g);p=E(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),_t(p)!=="svelte-1tkyn7r"&&(p.textContent=m),w=V(ke),y=E(ke,"BUTTON",{type:!0,title:!0,class:!0});var bt=I(y);M=De(bt,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var kt=I(M);W.l(kt),kt.forEach(k),bt.forEach(k),H=V(ke),x=E(ke,"BUTTON",{class:!0});var Ct=I(x);b=E(Ct,"IMG",{src:!0,alt:!0}),Ct.forEach(k),ke.forEach(k),be=V(X),U=E(X,"BUTTON",{id:!0,title:!0,class:!0});var Mt=I(U);z=E(Mt,"IMG",{src:!0,alt:!0,class:!0}),Mt.forEach(k),$=V(X),N&&N.l(X),X.forEach(k),this.h()},h:function(){ee(r.src,f=$t)||v(r,"src",f),v(r,"alt","Submit"),S(r,F,63,4,1485),v(s,"class","rounded s-X67GN01QUXjj"),S(s,F,62,2,1456),ee(o.src,l=Kt)||v(o,"src",l),v(o,"alt","Zoom in"),S(o,F,67,6,1616),v(n,"class","s-X67GN01QUXjj"),S(n,F,66,4,1583),ee(h.src,_=Yt)||v(h,"src",_),v(h,"alt","Zoom out"),S(h,F,70,6,1709),v(u,"class","s-X67GN01QUXjj"),S(u,F,69,4,1675),v(t,"class","zoom-container s-X67GN01QUXjj"),S(t,F,65,2,1550),v(p,"class","s-X67GN01QUXjj"),S(p,F,74,2,1804),v(M,"fill","none"),v(M,"stroke-linecap","round"),v(M,"stroke-linejoin","round"),v(M,"stroke-width",j=a[0]?2:1),v(M,"viewBox","0 0 24 24"),v(M,"stroke","currentColor"),S(M,F,76,4,1929),v(y,"type","button"),v(y,"title","Show Markers"),v(y,"class","s-X67GN01QUXjj"),S(y,F,75,2,1861),ee(b.src,Z=we)||v(b,"src",Z),v(b,"alt","Toggle"),S(b,F,97,4,2771),v(x,"class","s-X67GN01QUXjj"),S(x,F,96,2,2729),v(g,"class","devButtons s-X67GN01QUXjj"),S(g,F,73,2,1777),ee(z.src,Ge=en)||v(z,"src",Ge),v(z,"alt","Select Map Style"),v(z,"class","s-X67GN01QUXjj"),S(z,F,104,4,2947),v(U,"id","peephole"),v(U,"title","Select Map Style"),v(U,"class","s-X67GN01QUXjj"),S(U,F,100,2,2836),v(i,"class","flex flex-col toolbar-container s-X67GN01QUXjj"),S(i,F,61,0,1408)},m:function(q,X){A(q,i,X),C(i,s),C(s,r),C(i,e),C(i,t),C(t,n),C(n,o),C(t,c),C(t,u),C(u,h),C(i,d),C(i,g),C(g,p),C(g,w),C(g,y),C(y,M),W.m(M,null),C(g,H),C(g,x),C(x,b),C(i,be),C(i,U),C(U,z),C(i,$),N&&N.m(i,null),G=!0,R||(_e=[Q(n,"click",a[2],!1,!1,!1,!1),Q(u,"click",a[3],!1,!1,!1,!1),Q(p,"click",a[6],!1,!1,!1,!1),Q(y,"click",a[4],!1,!1,!1,!1),Q(x,"click",a[5],!1,!1,!1,!1),Q(U,"click",a[9],!1,!1,!1,!1)],R=!0)},p:function(q,[X]){pe!==(pe=Oe(q))&&(W.d(1),W=pe(q),W&&(W.c(),W.m(M,null))),(!G||X&1&&j!==(j=q[0]?2:1))&&v(M,"stroke-width",j),q[1]?N?(N.p(q,X),X&2&&B(N,1)):(N=Je(q),N.c(),B(N,1),N.m(i,null)):N&&(fe(),T(N,1,1,()=>{N=null}),de())},i:function(q){G||(B(N),G=!0)},o:function(q){T(N),G=!1},d:function(q){q&&k(i),W.d(),N&&N.d(),R=!1,dt(_e)}};return O("SvelteRegisterBlock",{block:Be,id:Ke.name,type:"component",source:"",ctx:a}),Be}function Pn(a,i,s){let{$$slots:r={},$$scope:f}=i;he("Toolbar",r,[]);let{mapInstance:e}=i,t=!0,n=!0,o=!1;function l(){console.log("zooming in"),e?e.zoomIn():console.error("Map instance is not available.")}function c(){e.zoomOut()}function u(){s(0,t=!t),je.update(m=>!m)}function h(){Ot(),n=!n}function _(){Bt()}function d(m){Gt(m),s(1,o=!1)}a.$$.on_mount.push(function(){e===void 0&&!("mapInstance"in i||a.$$.bound[a.$$.props.mapInstance])&&Rt.warn("<Toolbar> was created without expected prop 'mapInstance'")});const g=["mapInstance"];Object.keys(i).forEach(m=>{!~g.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Rt.warn(`<Toolbar> was created with unknown prop '${m}'`)});const p=()=>s(1,o=!o);return a.$$set=m=>{"mapInstance"in m&&s(8,e=m.mapInstance)},a.$capture_state=()=>({isMarkersVisible:je,setMapStyleIndex:Gt,toggleDarkMode:Ot,toggleTerritoriesVisibility:Bt,Peephole:Jt,mapInstance:e,plusIconPath:Kt,minusIconPath:Yt,layersIconPath:Sn,counterMonumentIconPath:$t,monumentIconPath:we,basicMapImage:en,eye:t,darkIcon:n,showPeephole:o,zoomIn:l,zoomOut:c,clickEye:u,toggleMarkerColor:h,toggleTerritoriesLayer:_,handleMapStyleSelect:d}),a.$inject_state=m=>{"mapInstance"in m&&s(8,e=m.mapInstance),"eye"in m&&s(0,t=m.eye),"darkIcon"in m&&(n=m.darkIcon),"showPeephole"in m&&s(1,o=m.showPeephole)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),[t,o,l,c,u,h,_,d,e,p]}class Zt extends ce{constructor(i){super(i),ue(this,i,Pn,Ke,le,{mapInstance:8}),O("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:i,id:Ke.name})}get mapInstance(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mapInstance(i){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{Error:Me,console:En}=qe,In="src/lib/Map/Leaflet.svelte";function Ye(a){let i;const s=a[9].default,r=pt(s,a,a[8],null),f={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,n){r&&r.m(t,n),i=!0},p:function(t,n){r&&r.p&&(!i||n&256)&&mt(r,s,t,t[8],i?yt(s,t[8],n,null):gt(t[8]),null)},i:function(t){i||(B(r,t),i=!0)},o:function(t){T(r,t),i=!1},d:function(t){r&&r.d(t)}};return O("SvelteRegisterBlock",{block:f,id:Ye.name,type:"if",source:"(188:2) {#if map}",ctx:a}),f}function $e(a){let i,s,r=a[0]&&Ye(a);const f={c:function(){i=P("div"),r&&r.c(),this.h()},l:function(t){i=E(t,"DIV",{class:!0});var n=I(i);r&&r.l(n),n.forEach(k),this.h()},h:function(){v(i,"class","w-full h-full"),S(i,In,186,0,5247)},m:function(t,n){A(t,i,n),r&&r.m(i,null),a[10](i),s=!0},p:function(t,[n]){t[0]?r?(r.p(t,n),n&1&&B(r,1)):(r=Ye(t),r.c(),B(r,1),r.m(i,null)):r&&(fe(),T(r,1,1,()=>{r=null}),de())},i:function(t){s||(B(r),s=!0)},o:function(t){T(r),s=!1},d:function(t){t&&k(i),r&&r.d(),a[10](null)}};return O("SvelteRegisterBlock",{block:f,id:$e.name,type:"component",source:"",ctx:a}),f}function Gn(a,i,s){let r,f;ve(Xe,"currentMapStyleId"),Le(a,Xe,b=>s(6,r=b)),ve(xe,"territoriesVisible"),Le(a,xe,b=>s(7,f=b));let{$$slots:e={},$$scope:t}=i;he("Leaflet",e,["default"]);let{bounds:n=void 0}=i,{view:o=void 0}=i,{zoom:l=void 0}=i;const c=Pe();let u,h,_,d=null,g=null,p=null;async function m(b){if(!p)try{p=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),d=await Ut(b,p),g=await jt(b,p)}catch(Z){console.error("Error fetching territories data:",Z)}}const w=K.Control.extend({onAdd(b){const Z=K.DomUtil.create("div","map-toolbar-container");return new Zt({target:Z,props:{mapInstance:b}}),Z}});Ee(()=>{if(!n&&(!o||!l))throw new Error("Must set either bounds, or view and zoom.");s(0,u=K.map(h,{maxZoom:18,zoomControl:!1}));const b=K.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});u.addLayer(b),Te.set(b),n?(u.fitBounds(n),Se.set(n)):o&&l&&u.setView(o,l),u.whenReady(()=>{if(!n){const Z=u.getBounds();Se.set(Z)}m(u),s(5,_=new Qe({Language:"fr",style:K.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(u)),new w({position:"topright"}).addTo(u)}),u.on("zoom",Z=>c("zoom",Z)).on("moveend",()=>{const Z=u.getBounds();Se.set(Z)}).on("popupopen",async Z=>{await St(),Z.popup.update()})});function y(){u&&(!d||!g?m(u):(u.addLayer(d),u.addLayer(g)))}function M(){u&&(d&&u.removeLayer(d),g&&u.removeLayer(g),console.log("Territories removed"))}Ie(()=>{u==null||u.remove(),s(0,u=void 0),M()}),Ve("map",{getMap:()=>u});function j(b){u&&_&&(u.removeLayer(_),s(5,_=new Qe({style:b,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(u)))}const H=["bounds","view","zoom"];Object.keys(i).forEach(b=>{!~H.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&En.warn(`<Leaflet> was created with unknown prop '${b}'`)});function x(b){Ft[b?"unshift":"push"](()=>{h=b,s(1,h)})}return a.$$set=b=>{"bounds"in b&&s(2,n=b.bounds),"view"in b&&s(3,o=b.view),"zoom"in b&&s(4,l=b.zoom),"$$scope"in b&&s(8,t=b.$$scope)},a.$capture_state=()=>({onMount:Ee,onDestroy:Ie,setContext:Ve,createEventDispatcher:Pe,tick:St,L:K,addTerritoriesLayer:Ut,addTerritoriesLabels:jt,MaptilerLayer:Qe,MaptilerStyle:bn,Toolbar:Zt,currentMapStyleId:Xe,mapBoundsStore:Se,territoriesVisible:xe,clusterGroupStore:Te,bounds:n,view:o,zoom:l,dispatch:c,map:u,mapElement:h,mtLayer:_,territoriesLayer:d,labelsLayer:g,territoriesData:p,initializeTerritories:m,ToolbarControl:w,addTerritories:y,removeTerritories:M,updateMapStyle:j,$currentMapStyleId:r,$territoriesVisible:f}),a.$inject_state=b=>{"bounds"in b&&s(2,n=b.bounds),"view"in b&&s(3,o=b.view),"zoom"in b&&s(4,l=b.zoom),"map"in b&&s(0,u=b.map),"mapElement"in b&&s(1,h=b.mapElement),"mtLayer"in b&&s(5,_=b.mtLayer),"territoriesLayer"in b&&(d=b.territoriesLayer),"labelsLayer"in b&&(g=b.labelsLayer),"territoriesData"in b&&(p=b.territoriesData)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),a.$$.update=()=>{a.$$.dirty&128&&(f?y():M()),a.$$.dirty&29&&u&&(n?u.fitBounds(n):o&&l&&u.setView(o,l)),a.$$.dirty&97&&r&&(console.log("MAP TILE NAME",r.name),u&&_&&j(r))},[u,h,n,o,l,_,r,f,t,e,x]}class on extends ce{constructor(i){super(i),ue(this,i,Gn,$e,le,{bounds:2,view:3,zoom:4}),O("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:i,id:$e.name})}get bounds(){throw new Me("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(i){throw new Me("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new Me("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(i){throw new Me("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new Me("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(i){throw new Me("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function et(a){let i;const s=a[7].default,r=pt(s,a,a[6],null),f={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,n){r&&r.m(t,n),i=!0},p:function(t,n){r&&r.p&&(!i||n&64)&&mt(r,s,t,t[6],i?yt(s,t[6],n,null):gt(t[6]),null)},i:function(t){i||(B(r,t),i=!0)},o:function(t){T(r,t),i=!1},d:function(t){r&&r.d(t)}};return O("SvelteRegisterBlock",{block:f,id:et.name,type:"if",source:"(69:0) {#if marker}",ctx:a}),f}function tt(a){let i,s,r=a[0]&&et(a);const f={c:function(){r&&r.c(),i=te()},l:function(t){r&&r.l(t),i=te()},m:function(t,n){r&&r.m(t,n),A(t,i,n),s=!0},p:function(t,[n]){t[0]?r?(r.p(t,n),n&1&&B(r,1)):(r=et(t),r.c(),B(r,1),r.m(i.parentNode,i)):r&&(fe(),T(r,1,1,()=>{r=null}),de())},i:function(t){s||(B(r),s=!0)},o:function(t){T(r),s=!1},d:function(t){t&&k(i),r&&r.d(t)}};return O("SvelteRegisterBlock",{block:f,id:tt.name,type:"component",source:"",ctx:a}),f}function On(a,i,s){let r,f;ve(Te,"clusterGroupStore"),Le(a,Te,d=>s(4,r=d)),ve(je,"isMarkersVisible"),Le(a,je,d=>s(5,f=d));let{$$slots:e={},$$scope:t}=i;he("Marker",e,["default"]);let{width:n}=i,{height:o}=i,{latLng:l}=i,c,u=He("map").getMap();Ve("layer",{getLayer:()=>c});function h(d){let g=d==="dark"?`<div style="width: ${n}px; height: ${o}px; filter: invert(100%);">
          <img src="${we}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`:`<div style="width: ${n}px; height: ${o}px;">
          <img src="${we}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`,p=K.divIcon({html:g,className:"map-marker",iconSize:K.point(n,o)});c?(r.removeLayer(c),c.setIcon(p)):s(0,c=K.marker(l,{icon:p})),r.addLayer(c)}Ee(()=>{u&&r&&ze.subscribe(d=>{h(d)})}),Ie(()=>{c&&r&&(r.removeLayer(c),c.remove(),s(0,c=void 0))}),a.$$.on_mount.push(function(){n===void 0&&!("width"in i||a.$$.bound[a.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),o===void 0&&!("height"in i||a.$$.bound[a.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in i||a.$$.bound[a.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const _=["width","height","latLng"];return Object.keys(i).forEach(d=>{!~_.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Marker> was created with unknown prop '${d}'`)}),a.$$set=d=>{"width"in d&&s(1,n=d.width),"height"in d&&s(2,o=d.height),"latLng"in d&&s(3,l=d.latLng),"$$scope"in d&&s(6,t=d.$$scope)},a.$capture_state=()=>({onMount:Ee,onDestroy:Ie,getContext:He,setContext:Ve,darkMode:ze,clusterGroupStore:Te,isMarkersVisible:je,L:K,monumentSvg:we,width:n,height:o,latLng:l,marker:c,mapInstance:u,createOrUpdateMarker:h,$clusterGroupStore:r,$isMarkersVisible:f}),a.$inject_state=d=>{"width"in d&&s(1,n=d.width),"height"in d&&s(2,o=d.height),"latLng"in d&&s(3,l=d.latLng),"marker"in d&&s(0,c=d.marker),"mapInstance"in d&&(u=d.mapInstance)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),a.$$.update=()=>{a.$$.dirty&49&&c&&r&&(f?r.addLayer(c):r.removeLayer(c))},[c,n,o,l,r,f,t,e]}class sn extends ce{constructor(i){super(i),ue(this,i,On,tt,le,{width:1,height:2,latLng:3}),O("SvelteRegisterComponent",{component:this,tagName:"Marker",options:i,id:tt.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Bn="src/lib/Map/Popup.svelte",Un=a=>({popup:a&1}),Dt=a=>({popup:a[0]});function nt(a){let i;const s=a[4].default,r=pt(s,a,a[3],Dt),f={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,n){r&&r.m(t,n),i=!0},p:function(t,n){r&&r.p&&(!i||n&9)&&mt(r,s,t,t[3],i?yt(s,t[3],n,Un):gt(t[3]),Dt)},i:function(t){i||(B(r,t),i=!0)},o:function(t){T(r,t),i=!1},d:function(t){r&&r.d(t)}};return O("SvelteRegisterBlock",{block:f,id:nt.name,type:"if",source:"(36:2) {#if open}",ctx:a}),f}function it(a){let i,s,r=a[2]&&nt(a);const f={c:function(){i=P("div"),r&&r.c(),this.h()},l:function(t){i=E(t,"DIV",{class:!0});var n=I(i);r&&r.l(n),n.forEach(k),this.h()},h:function(){v(i,"class","popPadding s-vUHHe_W0o0FW"),S(i,Bn,34,0,671)},m:function(t,n){A(t,i,n),r&&r.m(i,null),a[5](i),s=!0},p:function(t,[n]){t[2]?r?(r.p(t,n),n&4&&B(r,1)):(r=nt(t),r.c(),B(r,1),r.m(i,null)):r&&(fe(),T(r,1,1,()=>{r=null}),de())},i:function(t){s||(B(r),s=!0)},o:function(t){T(r),s=!1},d:function(t){t&&k(i),r&&r.d(),a[5](null)}};return O("SvelteRegisterBlock",{block:f,id:it.name,type:"component",source:"",ctx:a}),f}function jn(a,i,s){let{$$slots:r={},$$scope:f}=i;he("Popup",r,["default"]);let e,t,n=!1;const o=He("layer"),l=o.getLayer();Ee(()=>{s(0,e=K.popup().setContent(t)),l&&(l.bindPopup(e),l.on("popupopen",()=>s(2,n=!0)),l.on("popupclose",()=>s(2,n=!1)))}),Ie(()=>{l&&l.unbindPopup(),e&&(e.remove(),s(0,e=void 0))});const c=[];Object.keys(i).forEach(h=>{!~c.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Popup> was created with unknown prop '${h}'`)});function u(h){Ft[h?"unshift":"push"](()=>{t=h,s(1,t)})}return a.$$set=h=>{"$$scope"in h&&s(3,f=h.$$scope)},a.$capture_state=()=>({onMount:Ee,onDestroy:Ie,getContext:He,L:K,popup:e,popupElement:t,open:n,layerContext:o,layer:l}),a.$inject_state=h=>{"popup"in h&&s(0,e=h.popup),"popupElement"in h&&s(1,t=h.popupElement),"open"in h&&s(2,n=h.open)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),[e,t,n,f,r,u]}class rn extends ce{constructor(i){super(i),ue(this,i,jn,it,le,{}),O("SvelteRegisterComponent",{component:this,tagName:"Popup",options:i,id:it.name})}}const Y="src/lib/Map/PopupContent.svelte";function ot(a){let i,s;i=new qt({props:{photos:a[6],baseUrl:a[7]},$$inline:!0});const r={c:function(){ie(i.$$.fragment)},l:function(e){oe(i.$$.fragment,e)},m:function(e,t){se(i,e,t),s=!0},p:function(e,t){const n={};t&64&&(n.photos=e[6]),t&128&&(n.baseUrl=e[7]),i.$set(n)},i:function(e){s||(B(i.$$.fragment,e),s=!0)},o:function(e){T(i.$$.fragment,e),s=!1},d:function(e){re(i,e)}};return O("SvelteRegisterBlock",{block:r,id:ot.name,type:"if",source:"(24:2) {#if photos && photos.length}",ctx:a}),r}function st(a){let i,s,r;const f={c:function(){i=P("div"),s=P("p"),r=new mn(!1),this.h()},l:function(t){i=E(t,"DIV",{class:!0});var n=I(i);s=E(n,"P",{class:!0});var o=I(s);r=gn(o,!1),o.forEach(k),n.forEach(k),this.h()},h:function(){r.a=null,v(s,"class","description"),S(s,Y,42,8,1149),v(i,"class","text-truncate"),S(i,Y,41,6,1113)},m:function(t,n){A(t,i,n),C(i,s),r.m(a[5],s)},p:function(t,n){n&32&&r.p(t[5])},d:function(t){t&&k(i)}};return O("SvelteRegisterBlock",{block:f,id:st.name,type:"if",source:"(41:4) {#if description}",ctx:a}),f}function rt(a){let i,s,r,f,e,t,n,o,l,c,u,h,_,d,g,p,m,w,y,M,j,H,x="learn more",b,Z,be,U=a[6]&&a[6].length&&ot(a),z=a[5]&&st(a);const Ge={c:function(){U&&U.c(),i=D(),s=P("div"),r=P("div"),f=P("h2"),e=ge(a[2]),t=D(),n=P("h3"),o=ge(a[3]),l=D(),c=P("div"),u=P("div"),h=ge("#"),_=ge(a[4]),d=D(),g=P("div"),p=P("img"),w=D(),y=P("div"),z&&z.c(),M=D(),j=P("div"),H=P("button"),H.textContent=x,this.h()},l:function(G){U&&U.l(G),i=V(G),s=E(G,"DIV",{class:!0});var R=I(s);r=E(R,"DIV",{class:!0});var _e=I(r);f=E(_e,"H2",{});var Oe=I(f);e=ye(Oe,a[2]),Oe.forEach(k),t=V(_e),n=E(_e,"H3",{});var pe=I(n);o=ye(pe,a[3]),pe.forEach(k),_e.forEach(k),l=V(R),c=E(R,"DIV",{class:!0});var W=I(c);u=E(W,"DIV",{class:!0});var N=I(u);h=ye(N,"#"),_=ye(N,a[4]),N.forEach(k),d=V(W),g=E(W,"DIV",{style:!0});var Be=I(g);p=E(Be,"IMG",{src:!0,alt:!0,style:!0}),Be.forEach(k),W.forEach(k),R.forEach(k),w=V(G),y=E(G,"DIV",{class:!0});var J=I(y);z&&z.l(J),M=V(J),j=E(J,"DIV",{class:!0});var q=I(j);H=E(q,"BUTTON",{class:!0,"data-svelte-h":!0}),_t(H)!=="svelte-1h1xepw"&&(H.textContent=x),q.forEach(k),J.forEach(k),this.h()},h:function(){S(f,Y,28,6,703),S(n,Y,29,6,725),v(r,"class","flex flex-col items-start"),S(r,Y,27,4,657),v(u,"class","monument-id"),S(u,Y,32,8,813),ee(p.src,m=we)||v(p,"src",m),v(p,"alt","Monument Marker"),Ce(p,"width","100%"),Ce(p,"height","100%"),S(p,Y,34,12,922),Ce(g,"width",a[0]+"px"),Ce(g,"height",a[1]+"px"),S(g,Y,33,8,858),v(c,"class","flex flex-row items-center"),S(c,Y,31,4,764),v(s,"class","flex flex-row items-center"),S(s,Y,26,2,612),v(H,"class","learn-more-button"),S(H,Y,46,6,1264),v(j,"class","learn-more-container"),S(j,Y,45,4,1223),v(y,"class","description-container"),S(y,Y,39,2,1049)},m:function(G,R){U&&U.m(G,R),A(G,i,R),A(G,s,R),C(s,r),C(r,f),C(f,e),C(r,t),C(r,n),C(n,o),C(s,l),C(s,c),C(c,u),C(u,h),C(u,_),C(c,d),C(c,g),C(g,p),A(G,w,R),A(G,y,R),z&&z.m(y,null),C(y,M),C(y,j),C(j,H),b=!0,Z||(be=Q(H,"click",a[8],!1,!1,!1,!1),Z=!0)},p:function(G,[R]){G[6]&&G[6].length?U?(U.p(G,R),R&64&&B(U,1)):(U=ot(G),U.c(),B(U,1),U.m(i.parentNode,i)):U&&(fe(),T(U,1,1,()=>{U=null}),de()),(!b||R&4)&&Ue(e,G[2]),(!b||R&8)&&Ue(o,G[3]),(!b||R&16)&&Ue(_,G[4]),(!b||R&1)&&Ce(g,"width",G[0]+"px"),(!b||R&2)&&Ce(g,"height",G[1]+"px"),G[5]?z?z.p(G,R):(z=st(G),z.c(),z.m(y,M)):z&&(z.d(1),z=null)},i:function(G){b||(B(U),b=!0)},o:function(G){T(U),b=!1},d:function(G){G&&(k(i),k(s),k(w),k(y)),U&&U.d(G),z&&z.d(),Z=!1,be()}};return O("SvelteRegisterBlock",{block:Ge,id:rt.name,type:"component",source:"",ctx:a}),Ge}function Tn(a,i,s){let{$$slots:r={},$$scope:f}=i;he("PopupContent",r,[]);let{width:e}=i,{height:t}=i,{name:n}=i,{municipality:o}=i,{id:l}=i,{description:c}=i,{photos:u}=i,{baseUrl:h}=i;const _=Pe();function d(p){_("closeAndShowDetails",{id:l,event:p})}a.$$.on_mount.push(function(){e===void 0&&!("width"in i||a.$$.bound[a.$$.props.width])&&console.warn("<PopupContent> was created without expected prop 'width'"),t===void 0&&!("height"in i||a.$$.bound[a.$$.props.height])&&console.warn("<PopupContent> was created without expected prop 'height'"),n===void 0&&!("name"in i||a.$$.bound[a.$$.props.name])&&console.warn("<PopupContent> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||a.$$.bound[a.$$.props.municipality])&&console.warn("<PopupContent> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||a.$$.bound[a.$$.props.id])&&console.warn("<PopupContent> was created without expected prop 'id'"),c===void 0&&!("description"in i||a.$$.bound[a.$$.props.description])&&console.warn("<PopupContent> was created without expected prop 'description'"),u===void 0&&!("photos"in i||a.$$.bound[a.$$.props.photos])&&console.warn("<PopupContent> was created without expected prop 'photos'"),h===void 0&&!("baseUrl"in i||a.$$.bound[a.$$.props.baseUrl])&&console.warn("<PopupContent> was created without expected prop 'baseUrl'")});const g=["width","height","name","municipality","id","description","photos","baseUrl"];return Object.keys(i).forEach(p=>{!~g.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<PopupContent> was created with unknown prop '${p}'`)}),a.$$set=p=>{"width"in p&&s(0,e=p.width),"height"in p&&s(1,t=p.height),"name"in p&&s(2,n=p.name),"municipality"in p&&s(3,o=p.municipality),"id"in p&&s(4,l=p.id),"description"in p&&s(5,c=p.description),"photos"in p&&s(6,u=p.photos),"baseUrl"in p&&s(7,h=p.baseUrl)},a.$capture_state=()=>({createEventDispatcher:Pe,ImageArray:qt,monumentSvg:we,width:e,height:t,name:n,municipality:o,id:l,description:c,photos:u,baseUrl:h,dispatch:_,handleLearnMoreClick:d}),a.$inject_state=p=>{"width"in p&&s(0,e=p.width),"height"in p&&s(1,t=p.height),"name"in p&&s(2,n=p.name),"municipality"in p&&s(3,o=p.municipality),"id"in p&&s(4,l=p.id),"description"in p&&s(5,c=p.description),"photos"in p&&s(6,u=p.photos),"baseUrl"in p&&s(7,h=p.baseUrl)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),[e,t,n,o,l,c,u,h,d]}class an extends ce{constructor(i){super(i),ue(this,i,Tn,rt,le,{width:0,height:1,name:2,municipality:3,id:4,description:5,photos:6,baseUrl:7}),O("SvelteRegisterComponent",{component:this,tagName:"PopupContent",options:i,id:rt.name})}get width(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:zn}=qe,ae="src/lib/UI/Search.svelte";function Vt(a,i,s){const r=a.slice();return r[12]=i[s],r}function ln(a){let i,s,r;const f={c:function(){i=P("div"),s=P("p"),r=ge(a[3]),this.h()},l:function(t){i=E(t,"DIV",{class:!0});var n=I(i);s=E(n,"P",{});var o=I(s);r=ye(o,a[3]),o.forEach(k),n.forEach(k),this.h()},h:function(){S(s,ae,67,6,1921),v(i,"class","results-list s-GrfkGqnI6hbO"),S(i,ae,66,4,1888)},m:function(t,n){A(t,i,n),C(i,s),C(s,r)},p:function(t,n){n&8&&Ue(r,t[3])},d:function(t){t&&k(i)}};return O("SvelteRegisterBlock",{block:f,id:ln.name,type:"if",source:"(66:27) ",ctx:a}),f}function cn(a){let i,s=Fe(a[1]),r=[];for(let e=0;e<s.length;e+=1)r[e]=at(Vt(a,s,e));const f={c:function(){i=P("ul");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l:function(t){i=E(t,"UL",{class:!0});var n=I(i);for(let o=0;o<r.length;o+=1)r[o].l(n);n.forEach(k),this.h()},h:function(){v(i,"class","results-list s-GrfkGqnI6hbO"),S(i,ae,58,4,1539)},m:function(t,n){A(t,i,n);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,null)},p:function(t,n){if(n&34){s=Fe(t[1]);let o;for(o=0;o<s.length;o+=1){const l=Vt(t,s,o);r[o]?r[o].p(l,n):(r[o]=at(l),r[o].c(),r[o].m(i,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d:function(t){t&&k(i),yn(r,t)}};return O("SvelteRegisterBlock",{block:f,id:cn.name,type:"if",source:"(58:39) ",ctx:a}),f}function un(a){let i,s,r="Loading...";const f={c:function(){i=P("div"),s=P("p"),s.textContent=r,this.h()},l:function(t){i=E(t,"DIV",{class:!0});var n=I(i);s=E(n,"P",{"data-svelte-h":!0}),_t(s)!=="svelte-qdsr2u"&&(s.textContent=r),n.forEach(k),this.h()},h:function(){S(s,ae,55,6,1466),v(i,"class","results-list s-GrfkGqnI6hbO"),S(i,ae,54,4,1433)},m:function(t,n){A(t,i,n),C(i,s)},p:ne,d:function(t){t&&k(i)}};return O("SvelteRegisterBlock",{block:f,id:un.name,type:"if",source:"(54:4) {#if isLoading}",ctx:a}),f}function at(a){let i,s=a[12].display_name+"",r,f,e;function t(){return a[9](a[12])}const n={c:function(){i=P("li"),r=ge(s),this.h()},l:function(l){i=E(l,"LI",{class:!0});var c=I(i);r=ye(c,s),c.forEach(k),this.h()},h:function(){v(i,"class","s-GrfkGqnI6hbO"),S(i,ae,62,6,1745)},m:function(l,c){A(l,i,c),C(i,r),f||(e=Q(i,"click",t,!1,!1,!1,!1),f=!0)},p:function(l,c){a=l,c&2&&s!==(s=a[12].display_name+"")&&Ue(r,s)},d:function(l){l&&k(i),f=!1,e()}};return O("SvelteRegisterBlock",{block:n,id:at.name,type:"each",source:"(60:6) {#each searchResults as result}",ctx:a}),n}function lt(a){let i,s,r,f,e;function t(c,u){if(c[2])return un;if(c[1].length>0)return cn;if(c[3])return ln}let n=t(a),o=n&&n(a);const l={c:function(){i=P("div"),s=P("input"),r=D(),o&&o.c(),this.h()},l:function(u){i=E(u,"DIV",{class:!0});var h=I(i);s=E(h,"INPUT",{type:!0,class:!0}),r=V(h),o&&o.l(h),h.forEach(k),this.h()},h:function(){v(s,"type","text"),v(s,"class","s-GrfkGqnI6hbO"),S(s,ae,46,4,1228),v(i,"class","search-container s-GrfkGqnI6hbO"),S(i,ae,45,0,1193)},m:function(u,h){A(u,i,h),C(i,s),Pt(s,a[0]),C(i,r),o&&o.m(i,null),f||(e=[Q(s,"input",a[6]),Q(s,"input",a[7],!1,!1,!1,!1),Q(s,"keydown",a[8],!1,!1,!1,!1)],f=!0)},p:function(u,[h]){h&1&&s.value!==u[0]&&Pt(s,u[0]),n===(n=t(u))&&o?o.p(u,h):(o&&o.d(1),o=n&&n(u),o&&(o.c(),o.m(i,null)))},i:ne,o:ne,d:function(u){u&&k(i),o&&o.d(),f=!1,dt(e)}};return O("SvelteRegisterBlock",{block:l,id:lt.name,type:"component",source:"",ctx:a}),l}function An(a,i,s){let{$$slots:r={},$$scope:f}=i;he("Search",r,[]);const e=Pe();let t="",n=[],o=!1,l="";async function c(){if(!t)return;s(2,o=!0),s(3,l=""),s(1,n=[]);const w=`https://nominatim.openstreetmap.org/search?city=${encodeURIComponent(t)}&format=json&limit=10`;try{const M=await(await fetch(w)).json();s(2,o=!1),M.length>0?s(1,n=M):s(3,l="Location not found")}catch{s(2,o=!1),s(3,l="Error fetching location")}}function u(w,y){s(0,t=""),s(1,n=[]),h(w,y)}function h(w,y){const M=[w,y];console.log("locationData",M),e("updateView",{latLng:M})}const _=[];Object.keys(i).forEach(w=>{!~_.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&zn.warn(`<Search> was created with unknown prop '${w}'`)});function d(){t=this.value,s(0,t)}const g=()=>s(0,t=t.trim()),p=w=>{w.key==="Enter"&&c()},m=w=>u(w.lat,w.lon);return a.$capture_state=()=>({createEventDispatcher:Pe,dispatch:e,city:t,searchResults:n,isLoading:o,errorMessage:l,findLocation:c,selectLocation:u,updateMap:h}),a.$inject_state=w=>{"city"in w&&s(0,t=w.city),"searchResults"in w&&s(1,n=w.searchResults),"isLoading"in w&&s(2,o=w.isLoading),"errorMessage"in w&&s(3,l=w.errorMessage)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),[t,n,o,l,c,u,d,g,p,m]}class hn extends ce{constructor(i){super(i),ue(this,i,An,lt,le,{}),O("SvelteRegisterComponent",{component:this,tagName:"Search",options:i,id:lt.name})}}const{console:Nn}=qe,Ht="src/routes/map/+page.svelte";function Re(a,i,s){const r=a.slice();return r[13]=i[s].latLng,r[14]=i[s].visible,r[15]=i[s].name,r[16]=i[s].description,r[17]=i[s].photos,r[18]=i[s].municipality,r[19]=i[s].id,r[21]=s,r}function ct(a){let i,s;i=new sn({props:{latLng:a[13],width:a[5],height:a[6],$$slots:{default:[dn]},$$scope:{ctx:a}},$$inline:!0});const r={c:function(){ie(i.$$.fragment)},l:function(e){oe(i.$$.fragment,e)},m:function(e,t){se(i,e,t),s=!0},p:function(e,t){const n={};t&16&&(n.latLng=e[13]),t&8388624&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i:function(e){s||(B(i.$$.fragment,e),s=!0)},o:function(e){T(i.$$.fragment,e),s=!1},d:function(e){re(i,e)}};return O("SvelteRegisterBlock",{block:r,id:ct.name,type:"if",source:"(76:6) {#if visible}",ctx:a}),r}function fn(a){let i,s;function r(...e){return a[12](a[22],...e)}i=new an({props:{width:a[5],height:a[6],name:a[15],municipality:a[18],id:a[19],description:a[16],photos:a[17],baseUrl:a[7]},$$inline:!0}),i.$on("closeAndShowDetails",r);const f={c:function(){ie(i.$$.fragment)},l:function(t){oe(i.$$.fragment,t)},m:function(t,n){se(i,t,n),s=!0},p:function(t,n){a=t;const o={};n&16&&(o.name=a[15]),n&16&&(o.municipality=a[18]),n&16&&(o.id=a[19]),n&16&&(o.description=a[16]),n&16&&(o.photos=a[17]),i.$set(o)},i:function(t){s||(B(i.$$.fragment,t),s=!0)},o:function(t){T(i.$$.fragment,t),s=!1},d:function(t){re(i,t)}};return O("SvelteRegisterBlock",{block:f,id:fn.name,type:"slot",source:"(78:10) <Popup let:popup>",ctx:a}),f}function dn(a){let i,s,r;i=new rn({props:{$$slots:{default:[fn,({popup:e})=>({22:e}),({popup:e})=>e?4194304:0]},$$scope:{ctx:a}},$$inline:!0});const f={c:function(){ie(i.$$.fragment),s=D()},l:function(t){oe(i.$$.fragment,t),s=V(t)},m:function(t,n){se(i,t,n),A(t,s,n),r=!0},p:function(t,n){const o={};n&12582928&&(o.$$scope={dirty:n,ctx:t}),i.$set(o)},i:function(t){r||(B(i.$$.fragment,t),r=!0)},o:function(t){T(i.$$.fragment,t),r=!1},d:function(t){t&&k(s),re(i,t)}};return O("SvelteRegisterBlock",{block:f,id:dn.name,type:"slot",source:"(77:8) <Marker {latLng} {width} {height}>",ctx:a}),f}function ut(a,i){let s,r,f,e=i[14]&&ct(i);const t={key:a,first:null,c:function(){s=te(),e&&e.c(),r=te(),this.h()},l:function(o){s=te(),e&&e.l(o),r=te(),this.h()},h:function(){this.first=s},m:function(o,l){A(o,s,l),e&&e.m(o,l),A(o,r,l),f=!0},p:function(o,l){i=o,i[14]?e?(e.p(i,l),l&16&&B(e,1)):(e=ct(i),e.c(),B(e,1),e.m(r.parentNode,r)):e&&(fe(),T(e,1,1,()=>{e=null}),de())},i:function(o){f||(B(e),f=!0)},o:function(o){T(e),f=!1},d:function(o){o&&(k(s),k(r)),e&&e.d(o)}};return O("SvelteRegisterBlock",{block:t,id:ut.name,type:"each",source:"(75:4) {#each $visibleMarkers as { latLng, visible, name, description, photos, municipality, id }",ctx:i}),t}function _n(a){let i=[],s=new Map,r,f,e=Fe(a[4]);const t=o=>o[13].join(",")+"-"+o[21];It(a,e,Re,t);for(let o=0;o<e.length;o+=1){let l=Re(a,e,o),c=t(l);s.set(c,i[o]=ut(c,l))}const n={c:function(){for(let l=0;l<i.length;l+=1)i[l].c();r=te()},l:function(l){for(let c=0;c<i.length;c+=1)i[c].l(l);r=te()},m:function(l,c){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,c);A(l,r,c),f=!0},p:function(l,c){c&4195568&&(e=Fe(l[4]),fe(),It(l,e,Re,t),i=vn(i,c,t,1,l,e,s,r.parentNode,Ln,ut,r,Re),de())},i:function(l){if(!f){for(let c=0;c<e.length;c+=1)B(i[c]);f=!0}},o:function(l){for(let c=0;c<i.length;c+=1)T(i[c]);f=!1},d:function(l){l&&k(r);for(let c=0;c<i.length;c+=1)i[c].d(l)}};return O("SvelteRegisterBlock",{block:n,id:_n.name,type:"slot",source:"(74:2) <Leaflet view={$currentViewStore} zoom={zoomLevel}>",ctx:a}),n}function ht(a){let i,s;i=new Xt({$$inline:!0}),i.$on("click",pn);const r={c:function(){ie(i.$$.fragment)},l:function(e){oe(i.$$.fragment,e)},m:function(e,t){se(i,e,t),s=!0},p:ne,i:function(e){s||(B(i.$$.fragment,e),s=!0)},o:function(e){T(i.$$.fragment,e),s=!1},d:function(e){re(i,e)}};return O("SvelteRegisterBlock",{block:r,id:ht.name,type:"if",source:"(99:2) {#if sideBarVisible}",ctx:a}),r}function ft(a){let i,s,r,f,e,t,n,o,l,c,u,h;t=new hn({$$inline:!0}),t.$on("updateView",a[9]),o=new on({props:{view:a[3],zoom:a[1],$$slots:{default:[_n]},$$scope:{ctx:a}},$$inline:!0});let _=a[0]&&ht(a);const d={c:function(){i=P("h1"),s=ge("*countermap"),f=D(),e=P("div"),ie(t.$$.fragment),n=D(),ie(o.$$.fragment),l=D(),_&&_.c(),this.h()},l:function(p){i=E(p,"H1",{class:!0});var m=I(i);s=ye(m,"*countermap"),m.forEach(k),f=V(p),e=E(p,"DIV",{class:!0});var w=I(e);oe(t.$$.fragment,w),n=V(w),oe(o.$$.fragment,w),l=V(w),_&&_.l(w),w.forEach(k),this.h()},h:function(){v(i,"class",r=Et(a[2]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),S(i,Ht,68,0,1884),v(e,"class","w-full h-screen"),S(e,Ht,71,0,2068)},m:function(p,m){A(p,i,m),C(i,s),A(p,f,m),A(p,e,m),se(t,e,null),C(e,n),se(o,e,null),C(e,l),_&&_.m(e,null),c=!0,u||(h=Q(e,"click",a[11],!1,!1,!1,!1),u=!0)},p:function(p,[m]){(!c||m&4&&r!==(r=Et(p[2]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&v(i,"class",r);const w={};m&8&&(w.view=p[3]),m&2&&(w.zoom=p[1]),m&8388624&&(w.$$scope={dirty:m,ctx:p}),o.$set(w),p[0]?_?(_.p(p,m),m&1&&B(_,1)):(_=ht(p),_.c(),B(_,1),_.m(e,null)):_&&(fe(),T(_,1,1,()=>{_=null}),de())},i:function(p){c||(B(t.$$.fragment,p),B(o.$$.fragment,p),B(_),c=!0)},o:function(p){T(t.$$.fragment,p),T(o.$$.fragment,p),T(_),c=!1},d:function(p){p&&(k(i),k(f),k(e)),re(t),re(o),_&&_.d(),u=!1,h()}};return O("SvelteRegisterBlock",{block:d,id:ft.name,type:"component",source:"",ctx:a}),d}function pn(a){a.stopPropagation()}function Rn(a,i,s){let r,f,e;ve(ze,"darkMode"),Le(a,ze,y=>s(2,r=y)),ve(Ne,"currentViewStore"),Le(a,Ne,y=>s(3,f=y));let{$$slots:t={},$$scope:n}=i;he("Page",t,[]);let o=!1,l=30,c=30,u=8,h="https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/";const _=At([Tt,Se],([y,M])=>!M||typeof M.contains!="function"?[]:y.filter(j=>{const[H,x]=j.latLng;return M.contains(K.latLng(H,x))}));ve(_,"visibleMarkers"),Le(a,_,y=>s(4,e=y));function d(y){const{latLng:M}=y.detail;s(1,u=12),Ne.set({lat:M[0],lng:M[1]})}function g(y,M){y.stopPropagation(),s(0,o=!0),zt.set(M)}function p(){o&&s(0,o=!1)}const m=[];Object.keys(i).forEach(y=>{!~m.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&Nn.warn(`<Page> was created with unknown prop '${y}'`)});const w=(y,{detail:M})=>{console.log(M),g(M.event,M.id),y.close()};return a.$capture_state=()=>({derived:At,L:K,Leaflet:on,Marker:sn,Popup:rn,PopupContent:an,Sidebar:Xt,Search:hn,markersStore:Tt,initialViewStore:kn,currentViewStore:Ne,mapBoundsStore:Se,darkMode:ze,selectedMarkerId:zt,sideBarVisible:o,width:l,height:c,zoomLevel:u,baseUrl:h,visibleMarkers:_,handleUpdateView:d,showDetails:g,handleDivClick:p,stopPropagation:pn,$darkMode:r,$currentViewStore:f,$visibleMarkers:e}),a.$inject_state=y=>{"sideBarVisible"in y&&s(0,o=y.sideBarVisible),"width"in y&&s(5,l=y.width),"height"in y&&s(6,c=y.height),"zoomLevel"in y&&s(1,u=y.zoomLevel),"baseUrl"in y&&s(7,h=y.baseUrl)},i&&"$$inject"in i&&a.$inject_state(i.$$inject),[o,u,r,f,e,l,c,h,_,d,g,p,w]}class Xn extends ce{constructor(i){super(i),ue(this,i,Rn,ft,le,{}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:i,id:ft.name})}}export{Xn as component,qn as universal};
