import{a as ee,v as V,d as z,e as y,f as I,h as $,j as R,o as te,l as K,m as O,p as W,q as A,w as G,x as ne}from"../chunks/scheduler.sNwRHJpd.js";import{S as ae,i as le,d as w,f as j,v as se,b as k,g,c as C,e as b,l as Y,t as B,a as P,h as oe,j as re,k as ie,m as ce,n as fe,o as ue}from"../chunks/index.jO2mUr5U.js";import{g as me}from"../chunks/monument.rXWb2AOY.js";import{d as H}from"../chunks/index.zyYjPXzE.js";import{m as F,a as J,s as M,S as Z}from"../chunks/Sidebar.Um1Z-Zek.js";const de=!1,ye=Object.freeze(Object.defineProperty({__proto__:null,ssr:de},Symbol.toStringTag,{value:"Module"})),{console:he}=me,q="src/routes/objects/+page.svelte";function Q(l,e,t){const r=l.slice();return r[8]=e[t],r[10]=t,r}function U(l,e,t){const r=l.slice();return r[11]=e[t].url,r[12]=e[t].alt,r[14]=t,r}function X(l){let e,t,r=j(l[8].photos),a=[];for(let u=0;u<r.length;u+=1)a[u]=E(U(l,r,u));const s={c:function(){e=y("div");for(let m=0;m<a.length;m+=1)a[m].c();t=I(),this.h()},l:function(m){e=$(m,"DIV",{class:!0,key:!0});var p=R(e);for(let o=0;o<a.length;o+=1)a[o].l(p);t=K(p),p.forEach(k),this.h()},h:function(){g(e,"class","image-container s-BO-laqXqKOol"),g(e,"key",l[10]),O(e,q,61,16,2705)},m:function(m,p){C(m,e,p);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(e,null);b(e,t)},p:function(m,p){if(p&21){r=j(m[8].photos);let o;for(o=0;o<r.length;o+=1){const d=U(m,r,o);a[o]?a[o].p(d,p):(a[o]=E(d),a[o].c(),a[o].m(e,t))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}},d:function(m){m&&k(e),W(a,m)}};return w("SvelteRegisterBlock",{block:s,id:X.name,type:"if",source:"(61:12) {#if marker.photos && marker.photos.length}",ctx:l}),s}function E(l){let e,t,r,a,s,u;function m(){return l[6](l[8])}const p={c:function(){e=y("div"),t=y("img"),this.h()},l:function(d){e=$(d,"DIV",{class:!0,style:!0});var c=R(e);t=$(c,"IMG",{src:!0,alt:!0,key:!0,class:!0}),c.forEach(k),this.h()},h:function(){G(t.src,r=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${l[11]}`)||g(t,"src",r),g(t,"alt",a=l[12]),g(t,"key",l[14]),g(t,"class","s-BO-laqXqKOol"),O(t,q,64,28,2954),g(e,"class","photo-wrapper s-BO-laqXqKOol"),ne(e,"transform",l[2](l[14],l[10])),O(e,q,63,24,2839)},m:function(d,c){C(d,e,c),b(e,t),s||(u=Y(t,"click",m,!1,!1,!1,!1),s=!0)},p:function(d,c){l=d,c&1&&!G(t.src,r=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${l[11]}`)&&g(t,"src",r),c&1&&a!==(a=l[12])&&g(t,"alt",a)},d:function(d){d&&k(e),s=!1,u()}};return w("SvelteRegisterBlock",{block:p,id:E.name,type:"each",source:"(63:20) {#each marker.photos as {url, alt}",ctx:l}),p}function D(l){let e,t=l[8].photos&&l[8].photos.length&&X(l);const r={c:function(){t&&t.c(),e=A()},l:function(s){t&&t.l(s),e=A()},m:function(s,u){t&&t.m(s,u),C(s,e,u)},p:function(s,u){s[8].photos&&s[8].photos.length?t?t.p(s,u):(t=X(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d:function(s){s&&k(e),t&&t.d(s)}};return w("SvelteRegisterBlock",{block:r,id:D.name,type:"each",source:"(60:8) {#each $visibleRandomMarkers as marker, index}",ctx:l}),r}function N(l){let e,t;e=new Z({$$inline:!0});const r={c:function(){re(e.$$.fragment)},l:function(s){ie(e.$$.fragment,s)},m:function(s,u){ce(e,s,u),t=!0},i:function(s){t||(B(e.$$.fragment,s),t=!0)},o:function(s){P(e.$$.fragment,s),t=!1},d:function(s){fe(e,s)}};return w("SvelteRegisterBlock",{block:r,id:N.name,type:"if",source:"(72:4) {#if $selectedMarkerId}",ctx:l}),r}function T(l){let e,t,r="*countermap",a,s,u,m,p,o,d=j(l[0]),c=[];for(let n=0;n<d.length;n+=1)c[n]=D(Q(l,d,n));let h=l[1]&&N(l);const S={c:function(){e=y("main"),t=y("h1"),t.textContent=r,a=I(),s=y("div");for(let i=0;i<c.length;i+=1)c[i].c();u=I(),h&&h.c(),this.h()},l:function(i){e=$(i,"MAIN",{class:!0});var _=R(e);t=$(_,"H1",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1ay1w42"&&(t.textContent=r),a=K(_),s=$(_,"DIV",{class:!0});var f=R(s);for(let v=0;v<c.length;v+=1)c[v].l(f);f.forEach(k),u=K(_),h&&h.l(_),_.forEach(k),this.h()},h:function(){g(t,"class","s-BO-laqXqKOol"),O(t,q,55,4,2514),g(s,"class","image-grid s-BO-laqXqKOol"),O(s,q,58,4,2553),g(e,"class","s-BO-laqXqKOol"),O(e,q,54,0,2476)},m:function(i,_){C(i,e,_),b(e,t),b(e,a),b(e,s);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(s,null);b(e,u),h&&h.m(e,null),m=!0,p||(o=Y(e,"click",l[5],!1,!1,!1,!1),p=!0)},p:function(i,[_]){if(_&21){d=j(i[0]);let f;for(f=0;f<d.length;f+=1){const v=Q(i,d,f);c[f]?c[f].p(v,_):(c[f]=D(v),c[f].c(),c[f].m(s,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=d.length}i[1]?h?_&2&&B(h,1):(h=N(i),h.c(),B(h,1),h.m(e,null)):h&&(ue(),P(h,1,1,()=>{h=null}),oe())},i:function(i){m||(B(h),m=!0)},o:function(i){P(h),m=!1},d:function(i){i&&k(e),W(c,i),h&&h.d(),p=!1,o()}};return w("SvelteRegisterBlock",{block:S,id:T.name,type:"component",source:"",ctx:l}),S}function _e(l,e,t){let r,a;V(M,"selectedMarkerId"),z(l,M,n=>t(1,a=n));let{$$slots:s={},$$scope:u}=e;se("Page",s,[]);const m=[(n,i)=>`translate(${i*100+n*50}px, ${n*70}px)`,(n,i)=>`translate(${-(i*100)+n*50}px, ${n*80}px)`,(n,i)=>`translate(${i*100+n*50}px, ${-(n*50)}px)`,(n,i)=>`translate(${-(i*100)+n*50}px, ${-(n*50)}px)`];function p(n,i){const _=(n+i)%m.length;return m[_](n,i)}const o=H([F,J],([n,i])=>{if(!i||typeof i.contains!="function")return[];const _=n.filter(f=>{const[v,x]=f.latLng;return i.contains(L.latLng(v,x))});for(let f=_.length-1;f>0;f--){const v=Math.floor(Math.random()*(f+1));[_[f],_[v]]=[_[v],_[f]]}return _.slice(0,4)});V(o,"visibleRandomMarkers"),z(l,o,n=>t(0,r=n));function d(n){M.set(n.id),console.log("selectedObject",selectedObject)}function c(n){n.target===n.currentTarget&&M.set(null)}const h=[];Object.keys(e).forEach(n=>{!~h.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&he.warn(`<Page> was created with unknown prop '${n}'`)});const S=n=>d(n);return l.$capture_state=()=>({derived:H,markersStore:F,mapBoundsStore:J,selectedMarkerId:M,Sidebar:Z,transformPatterns:m,getTransformation:p,visibleRandomMarkers:o,handleImageClick:d,handleMainClick:c,$visibleRandomMarkers:r,$selectedMarkerId:a}),[r,a,p,o,d,c,S]}class $e extends ae{constructor(e){super(e),le(this,e,_e,T,ee,{}),w("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:T.name})}}export{$e as component,ye as universal};
