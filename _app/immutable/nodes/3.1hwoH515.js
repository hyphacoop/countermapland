import{a as ge,v as Y,d as x,$ as pe,o as Ee,G as St,D as Ie,F as De,c as Lt,e as G,h as z,j as V,m as T,z as Rt,u as wt,g as bt,b as kt,a0 as Ze,A as de,f as q,t as se,l as W,k as ae,p as jt,w as he,q as fe,a1 as cn,a2 as un,n as Je,C as hn,a3 as Pt,r as fn}from"../chunks/scheduler.8doqxhoJ.js";import{S as ve,i as ye,d as Z,v as Le,b as C,j as E,c as X,t as P,o as ee,a as A,k as te,e as k,l as Pe,s as me,g as ne,h as ie,m as oe,n as re,f as Ne,u as Ve,w as Dt,x as Zt,p as dn,q as _n}from"../chunks/index.B-UXCcAk.js";import{g as Ct,m as we}from"../chunks/object-view.Q2rI46CD.js";import{d as Et}from"../chunks/index.XXZ5sPHA.js";import{n as mn,t as ke,o as Oe,p as Fe,d as ce,q as qe,r as We,u as ue,L as K,T as It,v as Ae,a as Se,b as Ut,w as Xe,x as Bt,y as Ot,z as At,A as pn,B as Qe,C as Ke,I as Nt,D as Ye,E as Vt,S as Ht,m as Gt,e as Ft,M as qt,g as Wt,j as Xt,k as Qt,c as ze,s as Be,h as Kt}from"../chunks/ToolsSidebar.vyUWRXJU.js";const gn=!1,Rn=Object.freeze(Object.defineProperty({__proto__:null,ssr:gn},Symbol.toStringTag,{value:"Module"}));var zt={exports:{}};(function(r,i){(function(a,s){s(i)})(mn,function(a){var s=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,u=this.options.chunkInterval,d=this.options.chunkProgress,p=e.length,f=0,g=!0;if(this._map){var _=new Date().getTime(),M=L.bind(function(){var B=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();f<p;f++){if(c&&f%200==0){var D=new Date().getTime()-B;if(u<D)break}if((n=e[f])instanceof L.LayerGroup)g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(n,e),p=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&n.__parent.getChildCount()===2)){var U=n.__parent.getAllChildMarkers(),R=U[0]===n?U[1]:U[0];o.removeLayer(R)}}else l.addLayer(n),t||this.fire("layeradd",{layer:n})}d&&d(f,p,new Date().getTime()-_),f===p?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(M,this.options.chunkDelay)},this);M()}else for(var I=this._needsClustering;f<p;f++)(n=e[f])instanceof L.LayerGroup?(g&&(e=e.slice(),g=!1),this._extractNonGroupLayers(n,e),p=e.length):n.getLatLng?this.hasLayer(n)||I.push(n):l.addLayer(n);return this},removeLayers:function(e){var t,n,o=e.length,l=this._featureGroup,c=this._nonPointGroup,u=!0;if(!this._map){for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(n,e),o=e.length):(this._arraySplice(this._needsClustering,n),c.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var d=e.slice(),p=o;for(t=0;t<p;t++)(n=d[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,d),p=d.length):this._unspiderfyLayer(n)}for(t=0;t<o;t++)(n=e[t])instanceof L.LayerGroup?(u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(n,e),o=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),l.hasLayer(n)&&(l.removeLayer(n),n.clusterShow&&n.clusterShow())):(c.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,o,l,c=this._needsClustering.slice(),u=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),o=c.length-1;0<=o;o--){for(n=!0,l=u.length-1;0<=l;l--)if(u[l].layer===c[o]){n=!1;break}n&&e.call(t,c[o])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;typeof t!="function"&&(t=function(){});var o=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",o,this),this.off("animationend",o,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,o;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(o=this._needsRemoving[t]).newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)o=this._needsRemoving[t],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,o=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());l<=t&&o[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var o=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,u=this._map,d=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var p,f=e.__parent,g=f._markers;for(this._arraySplice(g,e);f&&(f._childCount--,f._boundsNeedUpdate=!0,!(f._zoom<d));)t&&f._childCount<=1?(p=f._markers[0]===e?f._markers[1]:f._markers[0],o[f._zoom].removeObject(f,u.project(f._cLatLng,f._zoom)),l[f._zoom].addObject(p,u.project(p.getLatLng(),f._zoom)),this._arraySplice(f.__parent._childClusters,f),f.__parent._markers.push(p),p.__parent=f.__parent,f._icon&&(c.removeLayer(f),n||c.addLayer(p))):f._iconNeedsUpdate=!0,f=f.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||o||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;n._childClusters.length===1;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,l=this._map;(e||n||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,o=n;typeof n!="function"&&(o=function(){return n}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;t<=l;l--)this._gridClusters[l]=new L.DistanceGrid(o(l)),this._gridUnclustered[l]=new L.DistanceGrid(o(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,o,l=this._gridClusters,c=this._gridUnclustered,u=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);u<=t;t--){n=this._map.project(e.getLatLng(),t);var d=l[t].getNearObject(n);if(d)return d._addChild(e),void(e.__parent=d);if(d=c[t].getNearObject(n)){var p=d.__parent;p&&this._removeLayer(d,!1);var f=new this._markerCluster(this,t,d,e);l[t].addObject(f,this._map.project(f._cLatLng,t)),d.__parent=f;var g=e.__parent=f;for(o=t-1;o>p._zoom;o--)g=new this._markerCluster(this,o,g),l[o].addObject(g,this._map.project(d.getLatLng(),o));return p._addChild(g),void this._removeFromGridUnclustered(d,t)}c[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,o=e.getLayers(),l=0;for(t=t||[];l<o.length;l++)(n=o[l])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,e,c,function(u){var d,p=u._latlng,f=u._markers;for(o.contains(p)||(p=null),u._isSingleParent()&&e+1===t?(l.removeLayer(u),u._recursivelyAddChildrenToMap(null,t,o)):(u.clusterHide(),u._recursivelyAddChildrenToMap(p,t,o)),n=f.length-1;0<=n;n--)d=f[n],o.contains(d._latlng)||l.removeLayer(d)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,t),l.eachLayer(function(u){u instanceof L.MarkerCluster||!u._icon||u.clusterShow()}),this._topClusterLevel._recursively(o,e,t,function(u){u._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,e,c,function(u){l.removeLayer(u),u.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,o=this._featureGroup;o.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){o.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var o=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,l,t+1,n);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(o,n),this._enqueue(function(){if(e._childCount===1){var u=e._markers[0];this._ignoreMove=!0,u.setLatLng(u.getLatLng()),this._ignoreMove=!1,u.clusterShow&&u.clusterShow()}else e._recursively(o,n,l,function(d){d._recursivelyRemoveChildrenFromMap(o,l,t+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var h=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,o){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),o&&this._addChild(o)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var o=this._markers.length-1;0<=o;o--)t&&this._markers[o].__dragStart||e.push(this._markers[o]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,u=o.getZoom();0<n.length&&c<l;){c++;var d=[];for(t=0;t<n.length;t++)d=d.concat(n[t]._childClusters);n=d}c<l?this._group._map.setView(this._latlng,c):l<=u?this._group._map.setView(this._latlng,u+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,o,l=this._markers,c=this._childClusters,u=0,d=0,p=this._childCount;if(p!==0){for(this._resetBounds(),e=0;e<l.length;e++)n=l[e]._latlng,this._bounds.extend(n),u+=n.lat,d+=n.lng;for(e=0;e<c.length;e++)(t=c[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,o=t._childCount,u+=n.lat*o,d+=n.lng*o;this._latlng=this._wLatLng=new L.LatLng(u/p,d/p),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(o){var l,c,u=o._markers;for(l=u.length-1;0<=l;l--)(c=u[l])._icon&&(c._setPos(t),c.clusterHide())},function(o){var l,c,u=o._childClusters;for(l=u.length-1;0<=l;l--)(c=u[l])._icon&&(c._setPos(t),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,o){this._recursively(e,o,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),n),l._isSingleParent()&&n-1===o?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,n)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(o){if(t!==o._zoom)for(var l=o._markers.length-1;0<=l;l--){var c=o._markers[l];n.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),o._group._featureGroup.addLayer(c))}},function(o){o._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._restorePosition();else for(var l=this._childClusters.length-1;0<=l;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,o){var l,c;this._recursively(e,t-1,n-1,function(u){for(c=u._markers.length-1;0<=c;c--)l=u._markers[c],o&&o.contains(l._latlng)||(u._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(u){for(c=u._childClusters.length-1;0<=c;c--)l=u._childClusters[c],o&&o.contains(l._latlng)||(u._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,n,o,l){var c,u,d=this._childClusters,p=this._zoom;if(t<=p&&(o&&o(this),l&&p===n&&l(this)),p<t||p<n)for(c=d.length-1;0<=c;c--)(u=d[c])._boundsNeedUpdate&&u._recalculateBounds(),e.intersects(u._bounds)&&u._recursively(e,t,n,o,l)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),o=this._getCoord(t.y),l=this._grid,c=l[o]=l[o]||{},u=c[n]=c[n]||[],d=L.Util.stamp(e);this._objectPoint[d]=t,u.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,o,l=this._getCoord(t.x),c=this._getCoord(t.y),u=this._grid,d=u[c]=u[c]||{},p=d[l]=d[l]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,o=p.length;n<o;n++)if(p[n]===e)return p.splice(n,1),o===1&&delete d[l],!0},eachObject:function(e,t){var n,o,l,c,u,d,p=this._grid;for(n in p)for(o in u=p[n])for(l=0,c=(d=u[o]).length;l<c;l++)e.call(t,d[l])&&(l--,c--)},getNearObject:function(e){var t,n,o,l,c,u,d,p,f=this._getCoord(e.x),g=this._getCoord(e.y),_=this._objectPoint,M=this._sqCellSize,I=null;for(t=g-1;t<=g+1;t++)if(l=this._grid[t]){for(n=f-1;n<=f+1;n++)if(c=l[n])for(o=0,u=c.length;o<u;o++)d=c[o],((p=this._sqDist(_[L.Util.stamp(d)],e))<M||p<=M&&I===null)&&(M=p,I=d)}return I},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,o,l,c=0,u=null,d=[];for(n=t.length-1;0<=n;n--)o=t[n],0<(l=this.getDistant(o,e))&&(d.push(o),c<l&&(c=l,u=o));return{maxPoint:u,newPoints:d}},buildConvexHull:function(e,t){var n=[],o=this.findMostDistantPointFromBaseLine(e,t);return o.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],o.maxPoint],o.newPoints))).concat(this.buildConvexHull([o.maxPoint,e[1]],o.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,o=!1,l=!1,c=!1,u=null,d=null,p=null,f=null,g=null,_=null;for(t=e.length-1;0<=t;t--){var M=e[t];(n===!1||M.lat>n)&&(n=(u=M).lat),(o===!1||M.lat<o)&&(o=(d=M).lat),(l===!1||M.lng>l)&&(l=(p=M).lng),(c===!1||M.lng<c)&&(c=(f=M).lng)}return g=o!==n?(_=d,u):(_=f,p),[].concat(this.buildConvexHull([_,g],e),this.buildConvexHull([g,_],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),o=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),o.push(e);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,o,l=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,c=this._2PI/e,u=[];for(l=Math.max(l,35),u.length=e,n=0;n<e;n++)o=this._circleStartAngle+n*c,u[n]=new L.Point(t.x+l*Math.cos(o),t.y+l*Math.sin(o))._round();return u},_generatePointsSpiral:function(e,t){var n,o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,u=o*this._spiralLengthFactor*this._2PI,d=0,p=[];for(n=p.length=e;0<=n;n--)n<e&&(p[n]=new L.Point(t.x+l*Math.cos(d),t.y+l*Math.sin(d))._round()),l+=u/(d+=c/l+5e-4*n);return p},_noanimationUnspiderfy:function(){var e,t,n=this._group,o=n._map,l=n._featureGroup,c=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=c.length-1;0<=t;t--)e=c[t],l.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(o.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:c}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,o,l,c,u=this._group,d=u._map,p=u._featureGroup,f=this._group.options.spiderLegPolylineOptions;for(u._ignoreMove=!0,n=0;n<e.length;n++)c=d.layerPointToLatLng(t[n]),o=e[n],l=new L.Polyline([this._latlng,c],f),d.addLayer(l),o._spiderLeg=l,o._preSpiderfyLatlng=o._latlng,o.setLatLng(c),o.setZIndexOffset&&o.setZIndexOffset(1e6),p.addLayer(o);this.setOpacity(.3),u._ignoreMove=!1,u.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,o,l,c,u,d,p=this,f=this._group,g=f._map,_=f._featureGroup,M=this._latlng,I=g.latLngToLayerPoint(M),B=L.Path.SVG,D=L.extend({},this._group.options.spiderLegPolylineOptions),U=D.opacity;for(U===void 0&&(U=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),B?(D.opacity=0,D.className=(D.className||"")+" leaflet-cluster-spider-leg"):D.opacity=U,f._ignoreMove=!0,n=0;n<e.length;n++)o=e[n],d=g.layerPointToLatLng(t[n]),l=new L.Polyline([M,d],D),g.addLayer(l),o._spiderLeg=l,B&&(u=(c=l._path).getTotalLength()+.1,c.style.strokeDasharray=u,c.style.strokeDashoffset=u),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),_.addLayer(o),o._setPos&&o._setPos(I);for(f._forceLayout(),f._animationStart(),n=e.length-1;0<=n;n--)d=g.layerPointToLatLng(t[n]),(o=e[n])._preSpiderfyLatlng=o._latlng,o.setLatLng(d),o.clusterShow&&o.clusterShow(),B&&((c=(l=o._spiderLeg)._path).style.strokeDashoffset=0,l.setStyle({opacity:U}));this.setOpacity(.3),f._ignoreMove=!1,setTimeout(function(){f._animationEnd(),f.fire("spiderfied",{cluster:p,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,o,l,c,u,d=this,p=this._group,f=p._map,g=p._featureGroup,_=e?f._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):f.latLngToLayerPoint(this._latlng),M=this.getAllChildMarkers(null,!0),I=L.Path.SVG;for(p._ignoreMove=!0,p._animationStart(),this.setOpacity(1),n=M.length-1;0<=n;n--)(t=M[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,u=!0,t._setPos&&(t._setPos(_),u=!1),t.clusterHide&&(t.clusterHide(),u=!1),u&&g.removeLayer(t),I&&(c=(l=(o=t._spiderLeg)._path).getTotalLength()+.1,l.style.strokeDashoffset=c,o.setStyle({opacity:0})));p._ignoreMove=!1,setTimeout(function(){var B=0;for(n=M.length-1;0<=n;n--)(t=M[n])._spiderLeg&&B++;for(n=M.length-1;0<=n;n--)(t=M[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<B&&g.removeLayer(t),f.removeLayer(t._spiderLeg),delete t._spiderLeg);p._animationEnd(),p.fire("unspiderfied",{cluster:d,markers:M})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=s,a.MarkerCluster=h,Object.defineProperty(a,"__esModule",{value:!0})})})(zt,zt.exports);const{Error:Ce,console:vn}=Ct,yn="src/lib/Map/Leaflet.svelte";function xe(r){let i;const a=r[15].default,s=Lt(a,r,r[14],null),h={c:function(){s&&s.c()},l:function(t){s&&s.l(t)},m:function(t,n){s&&s.m(t,n),i=!0},p:function(t,n){s&&s.p&&(!i||n&16384)&&wt(s,a,t,t[14],i?kt(a,t[14],n,null):bt(t[14]),null)},i:function(t){i||(P(s,t),i=!0)},o:function(t){A(s,t),i=!1},d:function(t){s&&s.d(t)}};return Z("SvelteRegisterBlock",{block:h,id:xe.name,type:"if",source:"(268:2) {#if map}",ctx:r}),h}function $e(r){let i,a,s=r[0]&&xe(r);const h={c:function(){i=G("div"),s&&s.c(),this.h()},l:function(t){i=z(t,"DIV",{class:!0});var n=V(i);s&&s.l(n),n.forEach(C),this.h()},h:function(){E(i,"class","w-full h-full"),T(i,yn,266,0,7231)},m:function(t,n){X(t,i,n),s&&s.m(i,null),r[16](i),a=!0},p:function(t,[n]){t[0]?s?(s.p(t,n),n&1&&P(s,1)):(s=xe(t),s.c(),P(s,1),s.m(i,null)):s&&(ee(),A(s,1,1,()=>{s=null}),te())},i:function(t){a||(P(s),a=!0)},o:function(t){A(s),a=!1},d:function(t){t&&C(i),s&&s.d(),r[16](null)}};return Z("SvelteRegisterBlock",{block:h,id:$e.name,type:"component",source:"",ctx:r}),h}function Ln(r,i,a){let s,h,e,t,n,o,l;Y(ke,"territoriesVisible"),x(r,ke,m=>a(7,s=m)),Y(Oe,"filteredStore"),x(r,Oe,m=>a(8,h=m)),Y(Fe,"filtersActive"),x(r,Fe,m=>a(9,e=m)),Y(ce,"currentSidebar"),x(r,ce,m=>a(10,t=m)),Y(qe,"currentMapStyleId"),x(r,qe,m=>a(11,n=m)),Y(We,"currentMapStyleIndex"),x(r,We,m=>a(12,o=m)),Y(ue,"darkMode"),x(r,ue,m=>a(13,l=m));let{$$slots:c={},$$scope:u}=i;Le("Leaflet",c,["default"]);let{bounds:d=void 0}=i,{view:p=void 0}=i,{zoom:f=void 0}=i;const g=pe();let _,M,I,B=null,D=null,U,R,Q=null;async function O(m){if(!Q)try{Q=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),B=await Ot(m,Q),D=await At(m,Q)}catch(y){console.error("Error fetching territories data:",y)}}const v=K.Control.extend({onAdd(m){const y=K.DomUtil.create("div","map-toolbar-container");return new It({target:y,props:{mapInstance:m}}),y}});Ee(()=>{if(!d&&(!p||!f))throw new Error("Must set either bounds, or view and zoom.");a(0,_=K.map(M,{maxZoom:18,zoomControl:!1}));const m=K.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});_.addLayer(m),Ae.set(m),d?(_.fitBounds(d),Se.set(d)):p&&f&&_.setView(p,f),_.whenReady(()=>{if(!d){const y=_.getBounds();Se.set(y)}Ut.set(_),a(5,I=new Xe({Language:"fr",style:K.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(_)),new v({position:"topright"}).addTo(_)}),_.on("click",function(y){t==="submissions"&&(Bt.set(y.latlng),U&&_.removeLayer(U),a(6,U=K.marker([y.latlng.lat,y.latlng.lng],{icon:R}).addTo(_)))}).on("zoom",y=>g("zoom",y)).on("moveend",()=>{const y=_.getBounds();Se.set(y)}).on("popupopen",async y=>{y.popup.update(),await St()})});function b(){console.log("Adding territories"),_&&(!B||!D?O(_):(_.addLayer(B),_.addLayer(D)))}function w(){_&&(B&&_.removeLayer(B),D&&_.removeLayer(D),console.log("Territories removed"))}Ie(()=>{_==null||_.remove(),a(0,_=void 0),w()}),De("map",{getMap:()=>_});function S(m){_&&I&&(_.removeLayer(I),a(5,I=new Xe({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(_)))}const j=["bounds","view","zoom"];Object.keys(i).forEach(m=>{!~j.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&vn.warn(`<Leaflet> was created with unknown prop '${m}'`)});function N(m){Rt[m?"unshift":"push"](()=>{M=m,a(1,M)})}return r.$$set=m=>{"bounds"in m&&a(2,d=m.bounds),"view"in m&&a(3,p=m.view),"zoom"in m&&a(4,f=m.zoom),"$$scope"in m&&a(14,u=m.$$scope)},r.$capture_state=()=>({onMount:Ee,onDestroy:Ie,setContext:De,createEventDispatcher:pe,tick:St,L:K,addTerritoriesLayer:Ot,addTerritoriesLabels:At,MaptilerLayer:Xe,MaptilerStyle:pn,pinSvg:Qe,Toolbar:It,currentMapStyleId:qe,currentMapStyleIndex:We,mapBoundsStore:Se,territoriesVisible:ke,clusterGroupStore:Ae,darkMode:ue,currentSidebar:ce,filteredStore:Oe,filtersActive:Fe,userLatLng:Bt,mapInstanceStore:Ut,bounds:d,view:p,zoom:f,dispatch:g,map:_,mapElement:M,mtLayer:I,territoriesLayer:B,labelsLayer:D,marker:U,icon:R,territoriesData:Q,initializeTerritories:O,ToolbarControl:v,addTerritories:b,removeTerritories:w,updateMapStyle:S,$territoriesVisible:s,$filteredStore:h,$filtersActive:e,$currentSidebar:t,$currentMapStyleId:n,$currentMapStyleIndex:o,$darkMode:l}),r.$inject_state=m=>{"bounds"in m&&a(2,d=m.bounds),"view"in m&&a(3,p=m.view),"zoom"in m&&a(4,f=m.zoom),"map"in m&&a(0,_=m.map),"mapElement"in m&&a(1,M=m.mapElement),"mtLayer"in m&&a(5,I=m.mtLayer),"territoriesLayer"in m&&(B=m.territoriesLayer),"labelsLayer"in m&&(D=m.labelsLayer),"marker"in m&&a(6,U=m.marker),"icon"in m&&(R=m.icon),"territoriesData"in m&&(Q=m.territoriesData)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),r.$$.update=()=>{if(r.$$.dirty&8192){let m=l==="dark"?`<div style="width: 40px; height: 50px; filter: invert(100%);">
        <img src="${Qe}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`:`<div style="width: 40px; height: 50px;">
        <img src="${Qe}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`;R=K.divIcon({html:m,className:"map-marker",iconSize:K.point(40,70)})}if(r.$$.dirty&1089&&t!=="submissions"&&U&&(_.removeLayer(U),a(6,U=null)),r.$$.dirty&29&&_&&(d?_.fitBounds(d):p&&f&&_.setView(p,f)),r.$$.dirty&6177&&n&&(o===2?(ke.set(!0),ue.set("light"),console.log("setting territoriesVisible to true")):o===0?(ke.set(!1),ue.set("dark")):(ke.set(!1),ue.set("light")),_&&I&&S(n)),r.$$.dirty&1793&&_&&t==="tools"&&h.length>0&&e){const m=K.latLngBounds(h.map(y=>K.latLng(y.latLng)));_.fitBounds(m,{padding:[50,50]})}r.$$.dirty&128&&(s?b():w())},[_,M,d,p,f,I,U,s,h,e,t,n,o,l,u,c,N]}class Jt extends ve{constructor(i){super(i),ye(this,i,Ln,$e,ge,{bounds:2,view:3,zoom:4}),Z("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:i,id:$e.name})}get bounds(){throw new Ce("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(i){throw new Ce("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new Ce("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(i){throw new Ce("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new Ce("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(i){throw new Ce("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function et(r){let i;const a=r[7].default,s=Lt(a,r,r[6],null),h={c:function(){s&&s.c()},l:function(t){s&&s.l(t)},m:function(t,n){s&&s.m(t,n),i=!0},p:function(t,n){s&&s.p&&(!i||n&64)&&wt(s,a,t,t[6],i?kt(a,t[6],n,null):bt(t[6]),null)},i:function(t){i||(P(s,t),i=!0)},o:function(t){A(s,t),i=!1},d:function(t){s&&s.d(t)}};return Z("SvelteRegisterBlock",{block:h,id:et.name,type:"if",source:"(69:0) {#if marker}",ctx:r}),h}function tt(r){let i,a,s=r[0]&&et(r);const h={c:function(){s&&s.c(),i=de()},l:function(t){s&&s.l(t),i=de()},m:function(t,n){s&&s.m(t,n),X(t,i,n),a=!0},p:function(t,[n]){t[0]?s?(s.p(t,n),n&1&&P(s,1)):(s=et(t),s.c(),P(s,1),s.m(i.parentNode,i)):s&&(ee(),A(s,1,1,()=>{s=null}),te())},i:function(t){a||(P(s),a=!0)},o:function(t){A(s),a=!1},d:function(t){t&&C(i),s&&s.d(t)}};return Z("SvelteRegisterBlock",{block:h,id:tt.name,type:"component",source:"",ctx:r}),h}function wn(r,i,a){let s,h;Y(Ae,"clusterGroupStore"),x(r,Ae,f=>a(4,s=f)),Y(Ke,"isMarkersVisible"),x(r,Ke,f=>a(5,h=f));let{$$slots:e={},$$scope:t}=i;Le("Marker",e,["default"]);let{width:n}=i,{height:o}=i,{latLng:l}=i,c,u=Ze("map").getMap();De("layer",{getLayer:()=>c});function d(f){let g=f==="dark"?`<div style="width: ${n}px; height: ${o}px; filter: invert(100%);">
          <img src="${we}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`:`<div style="width: ${n}px; height: ${o}px;">
          <img src="${we}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`,_=K.divIcon({html:g,className:"map-marker",iconSize:K.point(n,o)});c?(s.removeLayer(c),c.setIcon(_)):a(0,c=K.marker(l,{icon:_})),s.addLayer(c)}Ee(()=>{u&&s&&ue.subscribe(f=>{d(f)})}),Ie(()=>{c&&s&&(s.removeLayer(c),c.remove(),a(0,c=void 0))}),r.$$.on_mount.push(function(){n===void 0&&!("width"in i||r.$$.bound[r.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),o===void 0&&!("height"in i||r.$$.bound[r.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in i||r.$$.bound[r.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const p=["width","height","latLng"];return Object.keys(i).forEach(f=>{!~p.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Marker> was created with unknown prop '${f}'`)}),r.$$set=f=>{"width"in f&&a(1,n=f.width),"height"in f&&a(2,o=f.height),"latLng"in f&&a(3,l=f.latLng),"$$scope"in f&&a(6,t=f.$$scope)},r.$capture_state=()=>({onMount:Ee,onDestroy:Ie,getContext:Ze,setContext:De,darkMode:ue,clusterGroupStore:Ae,isMarkersVisible:Ke,L:K,monumentSvg:we,width:n,height:o,latLng:l,marker:c,mapInstance:u,createOrUpdateMarker:d,$clusterGroupStore:s,$isMarkersVisible:h}),r.$inject_state=f=>{"width"in f&&a(1,n=f.width),"height"in f&&a(2,o=f.height),"latLng"in f&&a(3,l=f.latLng),"marker"in f&&a(0,c=f.marker),"mapInstance"in f&&(u=f.mapInstance)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),r.$$.update=()=>{r.$$.dirty&49&&c&&s&&(h?s.addLayer(c):s.removeLayer(c))},[c,n,o,l,s,h,t,e]}class Yt extends ve{constructor(i){super(i),ye(this,i,wn,tt,ge,{width:1,height:2,latLng:3}),Z("SvelteRegisterComponent",{component:this,tagName:"Marker",options:i,id:tt.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(i){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const bn="src/lib/Map/Popup.svelte",kn=r=>({popup:r&1}),Tt=r=>({popup:r[0]});function nt(r){let i;const a=r[4].default,s=Lt(a,r,r[3],Tt),h={c:function(){s&&s.c()},l:function(t){s&&s.l(t)},m:function(t,n){s&&s.m(t,n),i=!0},p:function(t,n){s&&s.p&&(!i||n&9)&&wt(s,a,t,t[3],i?kt(a,t[3],n,kn):bt(t[3]),Tt)},i:function(t){i||(P(s,t),i=!0)},o:function(t){A(s,t),i=!1},d:function(t){s&&s.d(t)}};return Z("SvelteRegisterBlock",{block:h,id:nt.name,type:"if",source:"(39:2) {#if open}",ctx:r}),h}function it(r){let i,a,s=r[2]&&nt(r);const h={c:function(){i=G("div"),s&&s.c(),this.h()},l:function(t){i=z(t,"DIV",{class:!0});var n=V(i);s&&s.l(n),n.forEach(C),this.h()},h:function(){E(i,"class","popPadding s-vUHHe_W0o0FW"),T(i,bn,37,0,773)},m:function(t,n){X(t,i,n),s&&s.m(i,null),r[5](i),a=!0},p:function(t,[n]){t[2]?s?(s.p(t,n),n&4&&P(s,1)):(s=nt(t),s.c(),P(s,1),s.m(i,null)):s&&(ee(),A(s,1,1,()=>{s=null}),te())},i:function(t){a||(P(s),a=!0)},o:function(t){A(s),a=!1},d:function(t){t&&C(i),s&&s.d(),r[5](null)}};return Z("SvelteRegisterBlock",{block:h,id:it.name,type:"component",source:"",ctx:r}),h}function Cn(r,i,a){let{$$slots:s={},$$scope:h}=i;Le("Popup",s,["default"]);let e,t,n=!1;const o=Ze("layer"),l=o.getLayer();Ee(()=>{a(0,e=K.popup().setContent(t)),a(0,e.options.closeOnClick=!1,e),a(0,e.options.autoClose=!1,e),e._initLayout(),l&&(l.bindPopup(e),l.on("popupopen",()=>a(2,n=!0)),l.on("popupclose",()=>a(2,n=!1)))}),Ie(()=>{l&&l.unbindPopup(),e&&(e.remove(),a(0,e=void 0))});const c=[];Object.keys(i).forEach(d=>{!~c.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Popup> was created with unknown prop '${d}'`)});function u(d){Rt[d?"unshift":"push"](()=>{t=d,a(1,t)})}return r.$$set=d=>{"$$scope"in d&&a(3,h=d.$$scope)},r.$capture_state=()=>({onMount:Ee,onDestroy:Ie,getContext:Ze,L:K,popup:e,popupElement:t,open:n,layerContext:o,layer:l}),r.$inject_state=d=>{"popup"in d&&a(0,e=d.popup),"popupElement"in d&&a(1,t=d.popupElement),"open"in d&&a(2,n=d.open)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),[e,t,n,h,s,u]}class xt extends ve{constructor(i){super(i),ye(this,i,Cn,it,ge,{}),Z("SvelteRegisterComponent",{component:this,tagName:"Popup",options:i,id:it.name})}}const $="src/lib/Map/PopupContent.svelte";function ot(r){let i,a;i=new Nt({props:{photos:r[6],baseUrl:r[7]},$$inline:!0});const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},p:function(e,t){const n={};t&64&&(n.photos=e[6]),t&128&&(n.baseUrl=e[7]),i.$set(n)},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:ot.name,type:"if",source:"(24:2) {#if photos && photos.length}",ctx:r}),s}function rt(r){let i,a,s;const h={c:function(){i=G("div"),a=G("p"),s=new cn(!1),this.h()},l:function(t){i=z(t,"DIV",{class:!0});var n=V(i);a=z(n,"P",{class:!0});var o=V(a);s=un(o,!1),o.forEach(C),n.forEach(C),this.h()},h:function(){s.a=null,E(a,"class","description"),T(a,$,42,8,1149),E(i,"class","text-truncate"),T(i,$,41,6,1113)},m:function(t,n){X(t,i,n),k(i,a),s.m(r[5],a)},p:function(t,n){n&32&&s.p(t[5])},d:function(t){t&&C(i)}};return Z("SvelteRegisterBlock",{block:h,id:rt.name,type:"if",source:"(41:4) {#if description}",ctx:r}),h}function st(r){let i,a,s,h,e,t,n,o,l,c,u,d,p,f,g,_,M,I,B,D,U,R,Q="learn more",O,v,b,w=r[6]&&r[6].length&&ot(r),S=r[5]&&rt(r);const j={c:function(){w&&w.c(),i=q(),a=G("div"),s=G("div"),h=G("h2"),e=se(r[2]),t=q(),n=G("h3"),o=se(r[3]),l=q(),c=G("div"),u=G("div"),d=se("#"),p=se(r[4]),f=q(),g=G("div"),_=G("img"),I=q(),B=G("div"),S&&S.c(),D=q(),U=G("div"),R=G("button"),R.textContent=Q,this.h()},l:function(m){w&&w.l(m),i=W(m),a=z(m,"DIV",{class:!0});var y=V(a);s=z(y,"DIV",{class:!0});var F=V(s);h=z(F,"H2",{});var H=V(h);e=ae(H,r[2]),H.forEach(C),t=W(F),n=z(F,"H3",{});var _e=V(n);o=ae(_e,r[3]),_e.forEach(C),F.forEach(C),l=W(y),c=z(y,"DIV",{class:!0});var J=V(c);u=z(J,"DIV",{class:!0});var be=V(u);d=ae(be,"#"),p=ae(be,r[4]),be.forEach(C),f=W(J),g=z(J,"DIV",{style:!0});var Ue=V(g);_=z(Ue,"IMG",{src:!0,alt:!0,style:!0}),Ue.forEach(C),J.forEach(C),y.forEach(C),I=W(m),B=z(m,"DIV",{class:!0});var Ge=V(B);S&&S.l(Ge),D=W(Ge),U=z(Ge,"DIV",{class:!0});var Mt=V(U);R=z(Mt,"BUTTON",{class:!0,"data-svelte-h":!0}),jt(R)!=="svelte-1h1xepw"&&(R.textContent=Q),Mt.forEach(C),Ge.forEach(C),this.h()},h:function(){T(h,$,28,6,703),T(n,$,29,6,725),E(s,"class","flex flex-col items-start"),T(s,$,27,4,657),E(u,"class","monument-id"),T(u,$,32,8,813),he(_.src,M=we)||E(_,"src",M),E(_,"alt","Monument Marker"),fe(_,"width","100%"),fe(_,"height","100%"),T(_,$,34,12,922),fe(g,"width",r[0]+"px"),fe(g,"height",r[1]+"px"),T(g,$,33,8,858),E(c,"class","flex flex-row items-center"),T(c,$,31,4,764),E(a,"class","flex flex-row items-center"),T(a,$,26,2,612),E(R,"class","learn-more-button"),T(R,$,46,6,1264),E(U,"class","learn-more-container"),T(U,$,45,4,1223),E(B,"class","description-container"),T(B,$,39,2,1049)},m:function(m,y){w&&w.m(m,y),X(m,i,y),X(m,a,y),k(a,s),k(s,h),k(h,e),k(s,t),k(s,n),k(n,o),k(a,l),k(a,c),k(c,u),k(u,d),k(u,p),k(c,f),k(c,g),k(g,_),X(m,I,y),X(m,B,y),S&&S.m(B,null),k(B,D),k(B,U),k(U,R),O=!0,v||(b=Pe(R,"click",r[8],!1,!1,!1,!1),v=!0)},p:function(m,[y]){m[6]&&m[6].length?w?(w.p(m,y),y&64&&P(w,1)):(w=ot(m),w.c(),P(w,1),w.m(i.parentNode,i)):w&&(ee(),A(w,1,1,()=>{w=null}),te()),(!O||y&4)&&me(e,m[2]),(!O||y&8)&&me(o,m[3]),(!O||y&16)&&me(p,m[4]),(!O||y&1)&&fe(g,"width",m[0]+"px"),(!O||y&2)&&fe(g,"height",m[1]+"px"),m[5]?S?S.p(m,y):(S=rt(m),S.c(),S.m(B,D)):S&&(S.d(1),S=null)},i:function(m){O||(P(w),O=!0)},o:function(m){A(w),O=!1},d:function(m){m&&(C(i),C(a),C(I),C(B)),w&&w.d(m),S&&S.d(),v=!1,b()}};return Z("SvelteRegisterBlock",{block:j,id:st.name,type:"component",source:"",ctx:r}),j}function Mn(r,i,a){let{$$slots:s={},$$scope:h}=i;Le("PopupContent",s,[]);let{width:e}=i,{height:t}=i,{name:n}=i,{municipality:o}=i,{id:l}=i,{description:c}=i,{photos:u}=i,{baseUrl:d}=i;const p=pe();function f(_){p("closeAndShowDetails",{id:l,event:_})}r.$$.on_mount.push(function(){e===void 0&&!("width"in i||r.$$.bound[r.$$.props.width])&&console.warn("<PopupContent> was created without expected prop 'width'"),t===void 0&&!("height"in i||r.$$.bound[r.$$.props.height])&&console.warn("<PopupContent> was created without expected prop 'height'"),n===void 0&&!("name"in i||r.$$.bound[r.$$.props.name])&&console.warn("<PopupContent> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||r.$$.bound[r.$$.props.municipality])&&console.warn("<PopupContent> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||r.$$.bound[r.$$.props.id])&&console.warn("<PopupContent> was created without expected prop 'id'"),c===void 0&&!("description"in i||r.$$.bound[r.$$.props.description])&&console.warn("<PopupContent> was created without expected prop 'description'"),u===void 0&&!("photos"in i||r.$$.bound[r.$$.props.photos])&&console.warn("<PopupContent> was created without expected prop 'photos'"),d===void 0&&!("baseUrl"in i||r.$$.bound[r.$$.props.baseUrl])&&console.warn("<PopupContent> was created without expected prop 'baseUrl'")});const g=["width","height","name","municipality","id","description","photos","baseUrl"];return Object.keys(i).forEach(_=>{!~g.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&console.warn(`<PopupContent> was created with unknown prop '${_}'`)}),r.$$set=_=>{"width"in _&&a(0,e=_.width),"height"in _&&a(1,t=_.height),"name"in _&&a(2,n=_.name),"municipality"in _&&a(3,o=_.municipality),"id"in _&&a(4,l=_.id),"description"in _&&a(5,c=_.description),"photos"in _&&a(6,u=_.photos),"baseUrl"in _&&a(7,d=_.baseUrl)},r.$capture_state=()=>({createEventDispatcher:pe,ImageArray:Nt,monumentSvg:we,width:e,height:t,name:n,municipality:o,id:l,description:c,photos:u,baseUrl:d,dispatch:p,handleLearnMoreClick:f}),r.$inject_state=_=>{"width"in _&&a(0,e=_.width),"height"in _&&a(1,t=_.height),"name"in _&&a(2,n=_.name),"municipality"in _&&a(3,o=_.municipality),"id"in _&&a(4,l=_.id),"description"in _&&a(5,c=_.description),"photos"in _&&a(6,u=_.photos),"baseUrl"in _&&a(7,d=_.baseUrl)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),[e,t,n,o,l,c,u,d,f]}class $t extends ve{constructor(i){super(i),ye(this,i,Mn,st,ge,{width:0,height:1,name:2,municipality:3,id:4,description:5,photos:6,baseUrl:7}),Z("SvelteRegisterComponent",{component:this,tagName:"PopupContent",options:i,id:st.name})}get width(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const He="src/lib/UI/ImagePreview.svelte";function en(r){let i,a,s,h,e,t,n;const o={c:function(){i=G("img"),h=q(),e=G("img"),this.h()},l:function(c){i=z(c,"IMG",{src:!0,alt:!0,class:!0}),h=W(c),e=z(c,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){he(i.src,a=`${r[1]}${r[0][0].url}`)||E(i,"src",a),E(i,"alt",s=r[0][0].alt),E(i,"class","base-photo s-LLFXHRRAcbiM"),T(i,He,13,8,325),he(e.src,t=`${r[1]}${r[0][1].url}`)||E(e,"src",t),E(e,"alt",n=r[0][1].alt),E(e,"class","overlay s-LLFXHRRAcbiM"),T(e,He,18,8,459)},m:function(c,u){X(c,i,u),X(c,h,u),X(c,e,u)},p:function(c,u){u&3&&!he(i.src,a=`${c[1]}${c[0][0].url}`)&&E(i,"src",a),u&1&&s!==(s=c[0][0].alt)&&E(i,"alt",s),u&3&&!he(e.src,t=`${c[1]}${c[0][1].url}`)&&E(e,"src",t),u&1&&n!==(n=c[0][1].alt)&&E(e,"alt",n)},d:function(c){c&&(C(i),C(h),C(e))}};return Z("SvelteRegisterBlock",{block:o,id:en.name,type:"if",source:"(13:33) ",ctx:r}),o}function tn(r){let i,a,s;const h={c:function(){i=G("img"),this.h()},l:function(t){i=z(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){he(i.src,a=`${r[1]}${r[0][0].url}`)||E(i,"src",a),E(i,"alt",s=r[0][0].alt),E(i,"class","single-photo s-LLFXHRRAcbiM"),T(i,He,7,8,155)},m:function(t,n){X(t,i,n)},p:function(t,n){n&3&&!he(i.src,a=`${t[1]}${t[0][0].url}`)&&E(i,"src",a),n&1&&s!==(s=t[0][0].alt)&&E(i,"alt",s)},d:function(t){t&&C(i)}};return Z("SvelteRegisterBlock",{block:h,id:tn.name,type:"if",source:"(7:4) {#if photos && photos.length === 1}",ctx:r}),h}function at(r){let i;function a(t,n){if(t[0]&&t[0].length===1)return tn;if(t[0].length>=2)return en}let s=a(r),h=s&&s(r);const e={c:function(){i=G("div"),h&&h.c(),this.h()},l:function(n){i=z(n,"DIV",{class:!0});var o=V(i);h&&h.l(o),o.forEach(C),this.h()},h:function(){E(i,"class","image-container s-LLFXHRRAcbiM"),T(i,He,5,0,77)},m:function(n,o){X(n,i,o),h&&h.m(i,null)},p:function(n,[o]){s===(s=a(n))&&h?h.p(n,o):(h&&h.d(1),h=s&&s(n),h&&(h.c(),h.m(i,null)))},i:Je,o:Je,d:function(n){n&&C(i),h&&h.d()}};return Z("SvelteRegisterBlock",{block:e,id:at.name,type:"component",source:"",ctx:r}),e}function Sn(r,i,a){let{$$slots:s={},$$scope:h}=i;Le("ImagePreview",s,[]);let{photos:e={}}=i,{baseUrl:t=""}=i;const n=["photos","baseUrl"];return Object.keys(i).forEach(o=>{!~n.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<ImagePreview> was created with unknown prop '${o}'`)}),r.$$set=o=>{"photos"in o&&a(0,e=o.photos),"baseUrl"in o&&a(1,t=o.baseUrl)},r.$capture_state=()=>({photos:e,baseUrl:t}),r.$inject_state=o=>{"photos"in o&&a(0,e=o.photos),"baseUrl"in o&&a(1,t=o.baseUrl)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),[e,t]}class nn extends ve{constructor(i){super(i),ye(this,i,Sn,at,ge,{photos:0,baseUrl:1}),Z("SvelteRegisterComponent",{component:this,tagName:"ImagePreview",options:i,id:at.name})}get photos(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const le="src/lib/UI/SearchItem.svelte";function lt(r){let i,a;i=new nn({props:{photos:r[3],baseUrl:r[4]},$$inline:!0});const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},p:function(e,t){const n={};t&8&&(n.photos=e[3]),t&16&&(n.baseUrl=e[4]),i.$set(n)},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:lt.name,type:"if",source:"(26:4) {#if photos && photos.length}",ctx:r}),s}function ct(r){let i,a,s,h,e,t,n,o,l,c,u,d,p,f,g,_,M,I,B,D,U,R,Q="learn more",O,v,b,w=r[3]&&r[3].length&&lt(r);const S={c:function(){i=G("div"),w&&w.c(),a=q(),s=G("div"),h=G("div"),e=se("#"),t=se(r[2]),n=q(),o=G("h2"),l=se(r[0]),c=q(),u=G("h3"),d=se(r[1]),p=q(),f=G("div"),g=G("div"),_=G("img"),I=q(),B=G("div"),D=q(),U=G("div"),R=G("button"),R.textContent=Q,this.h()},l:function(N){i=z(N,"DIV",{class:!0});var m=V(i);w&&w.l(m),a=W(m),s=z(m,"DIV",{class:!0});var y=V(s);h=z(y,"DIV",{class:!0});var F=V(h);e=ae(F,"#"),t=ae(F,r[2]),F.forEach(C),n=W(y),o=z(y,"H2",{});var H=V(o);l=ae(H,r[0]),H.forEach(C),c=W(y),u=z(y,"H3",{});var _e=V(u);d=ae(_e,r[1]),_e.forEach(C),y.forEach(C),p=W(m),f=z(m,"DIV",{class:!0});var J=V(f);g=z(J,"DIV",{style:!0});var be=V(g);_=z(be,"IMG",{src:!0,alt:!0,style:!0}),be.forEach(C),I=W(J),B=z(J,"DIV",{class:!0}),V(B).forEach(C),D=W(J),U=z(J,"DIV",{});var Ue=V(U);R=z(Ue,"BUTTON",{class:!0,"data-svelte-h":!0}),jt(R)!=="svelte-1h1xepw"&&(R.textContent=Q),Ue.forEach(C),J.forEach(C),m.forEach(C),this.h()},h:function(){E(h,"class","monument-id"),T(h,le,30,8,790),T(o,le,31,8,835),T(u,le,32,8,859),E(s,"class","flex flex-col items-start ml-7 space-y-2"),T(s,le,29,4,727),he(_.src,M=we)||E(_,"src",M),E(_,"alt","Monument Marker"),fe(_,"width","100%"),fe(_,"height","100%"),T(_,le,37,12,1043),fe(g,"width",r[5]+"px"),fe(g,"height",r[6]+"px"),T(g,le,36,8,979),E(B,"class","flex-grow"),T(B,le,39,8,1151),E(R,"class","learn-more-button s-bEGFb-JhA8_4"),T(R,le,41,12,1207),T(U,le,40,8,1189),E(f,"class","flex flex-col flex-wrap justify-between items-end"),T(f,le,35,4,899),E(i,"class","result-container flex flex-row justify-between items-stretch p-3 lg:p-4 border border-black bg-white m-2 rounded-sm"),T(i,le,24,0,504)},m:function(N,m){X(N,i,m),w&&w.m(i,null),k(i,a),k(i,s),k(s,h),k(h,e),k(h,t),k(s,n),k(s,o),k(o,l),k(s,c),k(s,u),k(u,d),k(i,p),k(i,f),k(f,g),k(g,_),k(f,I),k(f,B),k(f,D),k(f,U),k(U,R),O=!0,v||(b=Pe(R,"click",r[7],!1,!1,!1,!1),v=!0)},p:function(N,[m]){N[3]&&N[3].length?w?(w.p(N,m),m&8&&P(w,1)):(w=lt(N),w.c(),P(w,1),w.m(i,a)):w&&(ee(),A(w,1,1,()=>{w=null}),te()),(!O||m&4)&&me(t,N[2]),(!O||m&1)&&me(l,N[0]),(!O||m&2)&&me(d,N[1])},i:function(N){O||(P(w),O=!0)},o:function(N){A(w),O=!1},d:function(N){N&&C(i),w&&w.d(),v=!1,b()}};return Z("SvelteRegisterBlock",{block:S,id:ct.name,type:"component",source:"",ctx:r}),S}function Pn(r,i,a){let{$$slots:s={},$$scope:h}=i;Le("SearchItem",s,[]);let e=30,t=30,{name:n}=i,{municipality:o}=i,{id:l}=i,{photos:c}=i,{baseUrl:u}=i;const d=pe();function p(g){d("closeAndShowDetails",{id:l,event:g})}r.$$.on_mount.push(function(){n===void 0&&!("name"in i||r.$$.bound[r.$$.props.name])&&console.warn("<SearchItem> was created without expected prop 'name'"),o===void 0&&!("municipality"in i||r.$$.bound[r.$$.props.municipality])&&console.warn("<SearchItem> was created without expected prop 'municipality'"),l===void 0&&!("id"in i||r.$$.bound[r.$$.props.id])&&console.warn("<SearchItem> was created without expected prop 'id'"),c===void 0&&!("photos"in i||r.$$.bound[r.$$.props.photos])&&console.warn("<SearchItem> was created without expected prop 'photos'"),u===void 0&&!("baseUrl"in i||r.$$.bound[r.$$.props.baseUrl])&&console.warn("<SearchItem> was created without expected prop 'baseUrl'")});const f=["name","municipality","id","photos","baseUrl"];return Object.keys(i).forEach(g=>{!~f.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&console.warn(`<SearchItem> was created with unknown prop '${g}'`)}),r.$$set=g=>{"name"in g&&a(0,n=g.name),"municipality"in g&&a(1,o=g.municipality),"id"in g&&a(2,l=g.id),"photos"in g&&a(3,c=g.photos),"baseUrl"in g&&a(4,u=g.baseUrl)},r.$capture_state=()=>({createEventDispatcher:pe,ImagePreview:nn,monumentSvg:we,width:e,height:t,name:n,municipality:o,id:l,photos:c,baseUrl:u,dispatch:d,handleLearnMoreClick:p}),r.$inject_state=g=>{"width"in g&&a(5,e=g.width),"height"in g&&a(6,t=g.height),"name"in g&&a(0,n=g.name),"municipality"in g&&a(1,o=g.municipality),"id"in g&&a(2,l=g.id),"photos"in g&&a(3,c=g.photos),"baseUrl"in g&&a(4,u=g.baseUrl)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),[n,o,l,c,u,e,t,p]}class on extends ve{constructor(i){super(i),ye(this,i,Pn,ct,ge,{name:0,municipality:1,id:2,photos:3,baseUrl:4}),Z("SvelteRegisterComponent",{component:this,tagName:"SearchItem",options:i,id:ct.name})}get name(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:En}=Ct,Te="src/lib/UI/SearchResults.svelte";function Re(r,i,a){const s=r.slice();return s[6]=i[a].name,s[7]=i[a].photos,s[8]=i[a].municipality,s[9]=i[a].id,s[11]=a,s}function ut(r,i){let a,s,h;s=new on({props:{name:i[6],photos:i[7],municipality:i[8],id:i[9],baseUrl:i[1]},$$inline:!0}),s.$on("closeAndShowDetails",i[4]);const e={key:r,first:null,c:function(){a=de(),ne(s.$$.fragment),this.h()},l:function(n){a=de(),ie(s.$$.fragment,n),this.h()},h:function(){this.first=a},m:function(n,o){X(n,a,o),oe(s,n,o),h=!0},p:function(n,o){i=n;const l={};o&1&&(l.name=i[6]),o&1&&(l.photos=i[7]),o&1&&(l.municipality=i[8]),o&1&&(l.id=i[9]),o&2&&(l.baseUrl=i[1]),s.$set(l)},i:function(n){h||(P(s.$$.fragment,n),h=!0)},o:function(n){A(s.$$.fragment,n),h=!1},d:function(n){n&&C(a),re(s,n)}};return Z("SvelteRegisterBlock",{block:e,id:ut.name,type:"each",source:"(40:2) {#each results as { name, photos, municipality, id }",ctx:i}),e}function ht(r){let i,a,s,h,e,t,n=r[0].length+"",o,l,c=r[0].length>1?"places ":"place ",u,d,p,f=[],g=new Map,_,M,I,B,D,U=Ne(r[0]);const R=O=>O[9]+"-"+O[11];Ve(r,U,Re,R);for(let O=0;O<U.length;O+=1){let v=Re(r,U,O),b=R(v);g.set(b,f[O]=ut(b,v))}const Q={c:function(){i=G("div"),a=G("button"),s=G("img"),e=q(),t=G("p"),o=se(n),l=q(),u=se(c),d=se(`
    replied to your call...`),p=q();for(let v=0;v<f.length;v+=1)f[v].c();this.h()},l:function(v){i=z(v,"DIV",{class:!0});var b=V(i);a=z(b,"BUTTON",{class:!0});var w=V(a);s=z(w,"IMG",{src:!0,alt:!0}),w.forEach(C),e=W(b),t=z(b,"P",{});var S=V(t);o=ae(S,n),l=W(S),u=ae(S,c),d=ae(S,`
    replied to your call...`),S.forEach(C),p=W(b);for(let j=0;j<f.length;j+=1)f[j].l(b);b.forEach(C),this.h()},h:function(){he(s.src,h=Vt)||E(s,"src",h),E(s,"alt","Close Sidebar"),T(s,Te,32,4,736),E(a,"class","close-button s-VgsW2gEiy9eW"),T(a,Te,31,2,679),T(t,Te,34,2,795),E(i,"class","sidebar s-VgsW2gEiy9eW"),T(i,Te,26,0,577)},m:function(v,b){X(v,i,b),k(i,a),k(a,s),k(i,e),k(i,t),k(t,o),k(t,l),k(t,u),k(t,d),k(i,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(i,null);I=!0,B||(D=Pe(a,"click",r[3],!1,!1,!1,!1),B=!0)},p:function(v,[b]){(!I||b&1)&&n!==(n=v[0].length+"")&&me(o,n),(!I||b&1)&&c!==(c=v[0].length>1?"places ":"place ")&&me(u,c),b&7&&(U=Ne(v[0]),ee(),Ve(v,U,Re,R),f=Dt(f,b,R,1,v,U,g,i,Zt,ut,null,Re),te())},i:function(v){if(!I){for(let b=0;b<U.length;b+=1)P(f[b]);v&&hn(()=>{I&&(M&&M.end(1),_=dn(i,Ye,{x:300,duration:800}),_.start())}),I=!0}},o:function(v){for(let b=0;b<f.length;b+=1)A(f[b]);_&&_.invalidate(),v&&(M=_n(i,Ye,{x:300,duration:800})),I=!1},d:function(v){v&&C(i);for(let b=0;b<f.length;b+=1)f[b].d();v&&M&&M.end(),B=!1,D()}};return Z("SvelteRegisterBlock",{block:Q,id:ht.name,type:"component",source:"",ctx:r}),Q}function In(r,i,a){let{$$slots:s={},$$scope:h}=i;Le("SearchResults",s,[]);const e=pe();let{results:t={}}=i,{baseUrl:n=""}=i;function o(d){e("closeAndShowDetails",{id:d.detail.id,event:d})}function l(){ce.set(null)}const c=["results","baseUrl"];Object.keys(i).forEach(d=>{!~c.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&En.warn(`<SearchResults> was created with unknown prop '${d}'`)});const u=d=>o(d);return r.$$set=d=>{"results"in d&&a(0,t=d.results),"baseUrl"in d&&a(1,n=d.baseUrl)},r.$capture_state=()=>({fly:Ye,createEventDispatcher:pe,currentSidebar:ce,closeImage:Vt,dispatch:e,SearchItem:on,results:t,baseUrl:n,handleDetails:o,closeSearch:l}),r.$inject_state=d=>{"results"in d&&a(0,t=d.results),"baseUrl"in d&&a(1,n=d.baseUrl)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),r.$$.update=()=>{r.$$.dirty&1&&console.log("results",t)},[t,n,o,l,u]}class rn extends ve{constructor(i){super(i),ye(this,i,In,ht,ge,{results:0,baseUrl:1}),Z("SvelteRegisterComponent",{component:this,tagName:"SearchResults",options:i,id:ht.name})}get results(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set results(i){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(i){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Un}=Ct,Me="src/routes/map/+page.svelte";function je(r,i,a){const s=r.slice();return s[19]=i[a].latLng,s[20]=i[a].visible,s[21]=i[a].name,s[22]=i[a].description,s[23]=i[a].photos,s[24]=i[a].municipality,s[25]=i[a].id,s[27]=a,s}function ft(r){let i,a;i=new Yt({props:{latLng:r[19],width:r[6],height:r[7],$$slots:{default:[an]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},p:function(e,t){const n={};t&16&&(n.latLng=e[19]),t&536870928&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:ft.name,type:"if",source:"(117:6) {#if visible}",ctx:r}),s}function sn(r){let i,a;function s(...e){return r[16](r[28],...e)}i=new $t({props:{width:r[6],height:r[7],name:r[21],municipality:r[24],id:r[25],description:r[22],photos:r[23],baseUrl:r[8]},$$inline:!0}),i.$on("closeAndShowDetails",s);const h={c:function(){ne(i.$$.fragment)},l:function(t){ie(i.$$.fragment,t)},m:function(t,n){oe(i,t,n),a=!0},p:function(t,n){r=t;const o={};n&16&&(o.name=r[21]),n&16&&(o.municipality=r[24]),n&16&&(o.id=r[25]),n&16&&(o.description=r[22]),n&16&&(o.photos=r[23]),i.$set(o)},i:function(t){a||(P(i.$$.fragment,t),a=!0)},o:function(t){A(i.$$.fragment,t),a=!1},d:function(t){re(i,t)}};return Z("SvelteRegisterBlock",{block:h,id:sn.name,type:"slot",source:"(119:10) <Popup let:popup>",ctx:r}),h}function an(r){let i,a,s;i=new xt({props:{$$slots:{default:[sn,({popup:e})=>({28:e}),({popup:e})=>e?268435456:0]},$$scope:{ctx:r}},$$inline:!0});const h={c:function(){ne(i.$$.fragment),a=q()},l:function(t){ie(i.$$.fragment,t),a=W(t)},m:function(t,n){oe(i,t,n),X(t,a,n),s=!0},p:function(t,n){const o={};n&805306384&&(o.$$scope={dirty:n,ctx:t}),i.$set(o)},i:function(t){s||(P(i.$$.fragment,t),s=!0)},o:function(t){A(i.$$.fragment,t),s=!1},d:function(t){t&&C(a),re(i,t)}};return Z("SvelteRegisterBlock",{block:h,id:an.name,type:"slot",source:"(118:8) <Marker {latLng} {width} {height}>",ctx:r}),h}function dt(r,i){let a,s,h,e=i[20]&&ft(i);const t={key:r,first:null,c:function(){a=de(),e&&e.c(),s=de(),this.h()},l:function(o){a=de(),e&&e.l(o),s=de(),this.h()},h:function(){this.first=a},m:function(o,l){X(o,a,l),e&&e.m(o,l),X(o,s,l),h=!0},p:function(o,l){i=o,i[20]?e?(e.p(i,l),l&16&&P(e,1)):(e=ft(i),e.c(),P(e,1),e.m(s.parentNode,s)):e&&(ee(),A(e,1,1,()=>{e=null}),te())},i:function(o){h||(P(e),h=!0)},o:function(o){A(e),h=!1},d:function(o){o&&(C(a),C(s)),e&&e.d(o)}};return Z("SvelteRegisterBlock",{block:t,id:dt.name,type:"each",source:"(116:4) {#each $visibleMarkers as { latLng, visible, name, description, photos, municipality, id }",ctx:i}),t}function ln(r){let i=[],a=new Map,s,h,e=Ne(r[4]);const t=o=>o[19].join(",")+"-"+o[27];Ve(r,e,je,t);for(let o=0;o<e.length;o+=1){let l=je(r,e,o),c=t(l);a.set(c,i[o]=dt(c,l))}const n={c:function(){for(let l=0;l<i.length;l+=1)i[l].c();s=de()},l:function(l){for(let c=0;c<i.length;c+=1)i[c].l(l);s=de()},m:function(l,c){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,c);X(l,s,c),h=!0},p:function(l,c){c&268437968&&(e=Ne(l[4]),ee(),Ve(l,e,je,t),i=Dt(i,c,t,1,l,e,a,s.parentNode,Zt,dt,s,je),te())},i:function(l){if(!h){for(let c=0;c<e.length;c+=1)P(i[c]);h=!0}},o:function(l){for(let c=0;c<i.length;c+=1)A(i[c]);h=!1},d:function(l){l&&C(s);for(let c=0;c<i.length;c+=1)i[c].d(l)}};return Z("SvelteRegisterBlock",{block:n,id:ln.name,type:"slot",source:"(115:2) <Leaflet view={$currentViewStore} zoom={zoomLevel}>",ctx:r}),n}function _t(r){let i,a;i=new Ft({$$inline:!0});const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:_t.name,type:"if",source:"(149:0) {#if $selectedMarkerId !== null && $currentSidebar === 'sidebar'}",ctx:r}),s}function mt(r){let i,a;i=new qt({$$inline:!0});const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:mt.name,type:"if",source:"(153:0) {#if $currentSidebar === 'menu'}",ctx:r}),s}function pt(r){let i,a;i=new Wt({$$inline:!0}),i.$on("closeSideBar",r[13]);const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},p:Je,i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:pt.name,type:"if",source:"(157:0) {#if $currentSidebar === 'submissions'}",ctx:r}),s}function gt(r){let i,a;i=new Kt({$$inline:!0});const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:gt.name,type:"if",source:"(161:0) {#if $currentSidebar === 'tools'}",ctx:r}),s}function vt(r){let i,a;i=new rn({props:{results:r[4],baseUrl:r[8]},$$inline:!0}),i.$on("closeAndShowDetails",r[17]);const s={c:function(){ne(i.$$.fragment)},l:function(e){ie(i.$$.fragment,e)},m:function(e,t){oe(i,e,t),a=!0},p:function(e,t){const n={};t&16&&(n.results=e[4]),i.$set(n)},i:function(e){a||(P(i.$$.fragment,e),a=!0)},o:function(e){A(i.$$.fragment,e),a=!1},d:function(e){re(i,e)}};return Z("SvelteRegisterBlock",{block:s,id:vt.name,type:"if",source:"(165:0) {#if $currentSidebar === 'search'}",ctx:r}),s}function yt(r){let i,a,s,h,e,t,n,o,l,c,u,d,p,f,g,_,M,I,B,D,U,R,Q,O;t=new Ht({$$inline:!0}),t.$on("updateView",r[10]),o=new Jt({props:{view:r[3],zoom:r[1],$$slots:{default:[ln]},$$scope:{ctx:r}},$$inline:!0});let v=r[5]!==null&&r[0]==="sidebar"&&_t(r),b=r[0]==="menu"&&mt(r),w=r[0]==="submissions"&&pt(r),S=r[0]==="tools"&&gt(r),j=r[0]==="search"&&vt(r);const N={c:function(){i=G("h1"),a=se("*countermap"),h=q(),e=G("div"),ne(t.$$.fragment),n=q(),ne(o.$$.fragment),l=q(),c=G("button"),u=G("img"),p=q(),f=G("button"),g=G("img"),M=q(),v&&v.c(),I=q(),b&&b.c(),B=q(),w&&w.c(),D=q(),S&&S.c(),U=q(),j&&j.c(),this.h()},l:function(y){i=z(y,"H1",{class:!0});var F=V(i);a=ae(F,"*countermap"),F.forEach(C),h=W(y),e=z(y,"DIV",{class:!0});var H=V(e);ie(t.$$.fragment,H),n=W(H),ie(o.$$.fragment,H),l=W(H),c=z(H,"BUTTON",{class:!0});var _e=V(c);u=z(_e,"IMG",{src:!0,alt:!0}),_e.forEach(C),p=W(H),f=z(H,"BUTTON",{class:!0});var J=V(f);g=z(J,"IMG",{src:!0,alt:!0}),J.forEach(C),M=W(H),v&&v.l(H),I=W(H),b&&b.l(H),B=W(H),w&&w.l(H),D=W(H),S&&S.l(H),U=W(H),j&&j.l(H),H.forEach(C),this.h()},h:function(){E(i,"class",s=Pt(r[2]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),T(i,Me,109,0,3041),he(u.src,d=Xt)||E(u,"src",d),E(u,"alt","Open Menu Sidebar"),T(u,Me,142,2,4168),E(c,"class","menu-button sdbbtn"),T(c,Me,141,0,4110),he(g.src,_=Qt)||E(g,"src",_),E(g,"alt","Open Filter Sidebar"),T(g,Me,145,2,4289),E(f,"class","filter-button sdbbtn"),T(f,Me,144,0,4228),E(e,"class","w-full h-screen"),T(e,Me,112,0,3225)},m:function(y,F){X(y,i,F),k(i,a),X(y,h,F),X(y,e,F),oe(t,e,null),k(e,n),oe(o,e,null),k(e,l),k(e,c),k(c,u),k(e,p),k(e,f),k(f,g),k(e,M),v&&v.m(e,null),k(e,I),b&&b.m(e,null),k(e,B),w&&w.m(e,null),k(e,D),S&&S.m(e,null),k(e,U),j&&j.m(e,null),R=!0,Q||(O=[Pe(c,"click",r[14],!1,!1,!1,!1),Pe(f,"click",r[15],!1,!1,!1,!1),Pe(e,"click",r[12],!1,!1,!1,!1)],Q=!0)},p:function(y,[F]){(!R||F&4&&s!==(s=Pt(y[2]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&E(i,"class",s);const H={};F&8&&(H.view=y[3]),F&2&&(H.zoom=y[1]),F&536870928&&(H.$$scope={dirty:F,ctx:y}),o.$set(H),y[5]!==null&&y[0]==="sidebar"?v?F&33&&P(v,1):(v=_t(y),v.c(),P(v,1),v.m(e,I)):v&&(ee(),A(v,1,1,()=>{v=null}),te()),y[0]==="menu"?b?F&1&&P(b,1):(b=mt(y),b.c(),P(b,1),b.m(e,B)):b&&(ee(),A(b,1,1,()=>{b=null}),te()),y[0]==="submissions"?w?(w.p(y,F),F&1&&P(w,1)):(w=pt(y),w.c(),P(w,1),w.m(e,D)):w&&(ee(),A(w,1,1,()=>{w=null}),te()),y[0]==="tools"?S?F&1&&P(S,1):(S=gt(y),S.c(),P(S,1),S.m(e,U)):S&&(ee(),A(S,1,1,()=>{S=null}),te()),y[0]==="search"?j?(j.p(y,F),F&1&&P(j,1)):(j=vt(y),j.c(),P(j,1),j.m(e,null)):j&&(ee(),A(j,1,1,()=>{j=null}),te())},i:function(y){R||(P(t.$$.fragment,y),P(o.$$.fragment,y),P(v),P(b),P(w),P(S),P(j),R=!0)},o:function(y){A(t.$$.fragment,y),A(o.$$.fragment,y),A(v),A(b),A(w),A(S),A(j),R=!1},d:function(y){y&&(C(i),C(h),C(e)),re(t),re(o),v&&v.d(),b&&b.d(),w&&w.d(),S&&S.d(),j&&j.d(),Q=!1,fn(O)}};return Z("SvelteRegisterBlock",{block:N,id:yt.name,type:"component",source:"",ctx:r}),N}function Bn(r,i,a){let s,h,e,t,n;Y(ce,"currentSidebar"),x(r,ce,v=>a(0,s=v)),Y(ue,"darkMode"),x(r,ue,v=>a(2,h=v)),Y(ze,"currentViewStore"),x(r,ze,v=>a(3,e=v)),Y(Be,"selectedMarkerId"),x(r,Be,v=>a(5,n=v));let{$$slots:o={},$$scope:l}=i;Le("Page",o,[]);let c=30,u=30,d=10,p="https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/";const f=Et([Gt,Se,ce,Oe],([v,b,w,S])=>w==="tools"&&S.length>0?S:v.filter(j=>{const[N,m]=j.latLng;return b.contains(K.latLng(N,m))}));Y(f,"visibleMarkers"),x(r,f,v=>a(4,t=v));function g(v){console.log("updating view");const{latLng:b}=v.detail;a(1,d=12),ze.set({lat:b[0],lng:b[1]}),ce.set("search")}function _(v,b){console.log("showing details"),v&&typeof v.stopPropagation=="function"&&v.stopPropagation(),I("sidebar"),Be.set(b)}function M(v){s!=="search"&&s!=="submissions"&&!v.target.closest(".sdbbtn")&&!v.target.closest(".sidebar")&&(I(null),Be.set(null))}function I(v){ce.set(v)}function B(){console.log("closing sidebar"),I(null)}function D(){I(s==="menu"?null:"menu")}function U(){I(s==="tools"?null:"tools")}const R=[];Object.keys(i).forEach(v=>{!~R.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&Un.warn(`<Page> was created with unknown prop '${v}'`)});const Q=(v,{detail:b})=>{console.log(b),_(b.event,b.id),v.close()},O=({detail:v})=>{console.log(v),_(v.event,v.id)};return r.$capture_state=()=>({derived:Et,L:K,Leaflet:Jt,Marker:Yt,Popup:xt,PopupContent:$t,Sidebar:Ft,MenuSidebar:qt,Search:Ht,SearchResults:rn,SubmissionSidebar:Wt,menuIconPath:Xt,filterIconPath:Qt,markersStore:Gt,filteredStore:Oe,currentViewStore:ze,mapBoundsStore:Se,darkMode:ue,selectedMarkerId:Be,currentSidebar:ce,ToolsSidebar:Kt,width:c,height:u,zoomLevel:d,baseUrl:p,visibleMarkers:f,handleUpdateView:g,showDetails:_,handleDivClick:M,setCurrentSidebar:I,closeSidebar:B,showMenu:D,showTools:U,$currentSidebar:s,$darkMode:h,$currentViewStore:e,$visibleMarkers:t,$selectedMarkerId:n}),r.$inject_state=v=>{"width"in v&&a(6,c=v.width),"height"in v&&a(7,u=v.height),"zoomLevel"in v&&a(1,d=v.zoomLevel),"baseUrl"in v&&a(8,p=v.baseUrl)},i&&"$$inject"in i&&r.$inject_state(i.$$inject),r.$$.update=()=>{r.$$.dirty&1&&console.log(s)},[s,d,h,e,t,n,c,u,p,f,g,_,M,B,D,U,Q,O]}class jn extends ve{constructor(i){super(i),ye(this,i,Bn,yt,ge,{}),Z("SvelteRegisterComponent",{component:this,tagName:"Page",options:i,id:yt.name})}}export{jn as component,Rn as universal};
