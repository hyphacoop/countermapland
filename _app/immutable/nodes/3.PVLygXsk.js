import{a as ne,e as M,f as N,h as b,j as A,l as V,E as X,m as w,n as ue,r as st,$ as Ie,o as ln,a0 as Be,v as K,d as J,a1 as Oe,q as te,x as Mt,a2 as ce,w as Ee,c as at,z as Nt,u as lt,g as ut,b as ct,a3 as Ge,y as x,a4 as bt,t as ht,k as ft,a5 as St,D as un,H as cn,F as hn}from"../chunks/scheduler.BOg_RXLL.js";import{S as ie,i as oe,d as P,v as re,b as v,f as p,c as O,e as C,x as q,t as E,j as de,a as z,g as _e,k as Le,l as ke,m as we,n as Ce,o as he,p as Te,u as Vt,q as fn,s as Zt,y as dn}from"../chunks/index.glkuK4WJ.js";import{d as Pt}from"../chunks/index.jeUdNvdX.js";import{c as _n,i as me,s as At,t as It,b as Bt,g as Ft,d as Ne,e as Ve,L as F,f as ge,a as le,l as Ze,h as pn,j as ye,m as ve,k as mn,n as Se}from"../chunks/stores.wf93TAHU.js";/* empty css                    */const gn=!1,Un=Object.freeze(Object.defineProperty({__proto__:null,ssr:gn},Symbol.toStringTag,{value:"Module"}));var Ot={exports:{}};(function(c,o){(function(a,r){r(o)})(_n,function(a){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,i=this._featureGroup,s=this._nonPointGroup,u=this.options.chunkedLoading,l=this.options.chunkInterval,h=this.options.chunkProgress,_=e.length,f=0,y=!0;if(this._map){var k=new Date().getTime(),m=L.bind(function(){var B=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();f<_;f++){if(u&&f%200==0){var S=new Date().getTime()-B;if(l<S)break}if((n=e[f])instanceof L.LayerGroup)y&&(e=e.slice(),y=!1),this._extractNonGroupLayers(n,e),_=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&n.__parent.getChildCount()===2)){var T=n.__parent.getAllChildMarkers(),$=T[0]===n?T[1]:T[0];i.removeLayer($)}}else s.addLayer(n),t||this.fire("layeradd",{layer:n})}h&&h(f,_,new Date().getTime()-k),f===_?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var I=this._needsClustering;f<_;f++)(n=e[f])instanceof L.LayerGroup?(y&&(e=e.slice(),y=!1),this._extractNonGroupLayers(n,e),_=e.length):n.getLatLng?this.hasLayer(n)||I.push(n):s.addLayer(n);return this},removeLayers:function(e){var t,n,i=e.length,s=this._featureGroup,u=this._nonPointGroup,l=!0;if(!this._map){for(t=0;t<i;t++)(n=e[t])instanceof L.LayerGroup?(l&&(e=e.slice(),l=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),u.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var h=e.slice(),_=i;for(t=0;t<_;t++)(n=h[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,h),_=h.length):this._unspiderfyLayer(n)}for(t=0;t<i;t++)(n=e[t])instanceof L.LayerGroup?(l&&(e=e.slice(),l=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),s.hasLayer(n)&&(s.removeLayer(n),n.clusterShow&&n.clusterShow())):(u.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i,s,u=this._needsClustering.slice(),l=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(u),i=u.length-1;0<=i;i--){for(n=!0,s=l.length-1;0<=s;s--)if(l[s].layer===u[i]){n=!1;break}n&&e.call(t,u[i])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;typeof t!="function"&&(t=function(){});var i=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",i,this),this.off("animationend",i,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,i;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(i=this._needsRemoving[t]).newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());s<=t&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var i=this._gridClusters,s=this._gridUnclustered,u=this._featureGroup,l=this._map,h=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var _,f=e.__parent,y=f._markers;for(this._arraySplice(y,e);f&&(f._childCount--,f._boundsNeedUpdate=!0,!(f._zoom<h));)t&&f._childCount<=1?(_=f._markers[0]===e?f._markers[1]:f._markers[0],i[f._zoom].removeObject(f,l.project(f._cLatLng,f._zoom)),s[f._zoom].addObject(_,l.project(_.getLatLng(),f._zoom)),this._arraySplice(f.__parent._childClusters,f),f.__parent._markers.push(_),_.__parent=f.__parent,f._icon&&(u.removeLayer(f),n||u.addLayer(_))):f._iconNeedsUpdate=!0,f=f.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom;(t||i||s)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;n._childClusters.length===1;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this.options.spiderfyOnEveryZoom,s=this._map;(e||n||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),s.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,i=n;typeof n!="function"&&(i=function(){return n}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var s=e;t<=s;s--)this._gridClusters[s]=new L.DistanceGrid(i(s)),this._gridUnclustered[s]=new L.DistanceGrid(i(s));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,i,s=this._gridClusters,u=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);l<=t;t--){n=this._map.project(e.getLatLng(),t);var h=s[t].getNearObject(n);if(h)return h._addChild(e),void(e.__parent=h);if(h=u[t].getNearObject(n)){var _=h.__parent;_&&this._removeLayer(h,!1);var f=new this._markerCluster(this,t,h,e);s[t].addObject(f,this._map.project(f._cLatLng,t)),h.__parent=f;var y=e.__parent=f;for(i=t-1;i>_._zoom;i--)y=new this._markerCluster(this,i,y),s[i].addObject(y,this._map.project(h.getLatLng(),i));return _._addChild(y),void this._removeFromGridUnclustered(h,t)}u[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),s=0;for(t=t||[];s<i.length;s++)(n=i[s])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),s=this._featureGroup,u=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,u,function(l){var h,_=l._latlng,f=l._markers;for(i.contains(_)||(_=null),l._isSingleParent()&&e+1===t?(s.removeLayer(l),l._recursivelyAddChildrenToMap(null,t,i)):(l.clusterHide(),l._recursivelyAddChildrenToMap(_,t,i)),n=f.length-1;0<=n;n--)h=f[n],i.contains(h._latlng)||s.removeLayer(h)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),s.eachLayer(function(l){l instanceof L.MarkerCluster||!l._icon||l.clusterShow()}),this._topClusterLevel._recursively(i,e,t,function(l){l._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,e,u,function(l){s.removeLayer(l),l.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds(),s=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,s,t+1,n);var u=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(e._childCount===1){var l=e._markers[0];this._ignoreMove=!0,l.setLatLng(l.getLatLng()),this._ignoreMove=!1,l.clusterShow&&l.clusterShow()}else e._recursively(i,n,s,function(h){h._recursivelyRemoveChildrenFromMap(i,s,t+1)});u._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var d=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var i=this._markers.length-1;0<=i;i--)t&&this._markers[i].__dragStart||e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),i=this._group._map,s=i.getBoundsZoom(this._bounds),u=this._zoom+1,l=i.getZoom();0<n.length&&u<s;){u++;var h=[];for(t=0;t<n.length;t++)h=h.concat(n[t]._childClusters);n=h}u<s?this._group._map.setView(this._latlng,u):s<=l?this._group._map.setView(this._latlng,l+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,i,s=this._markers,u=this._childClusters,l=0,h=0,_=this._childCount;if(_!==0){for(this._resetBounds(),e=0;e<s.length;e++)n=s[e]._latlng,this._bounds.extend(n),l+=n.lat,h+=n.lng;for(e=0;e<u.length;e++)(t=u[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,i=t._childCount,l+=n.lat*i,h+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(l/_,h/_),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(i){var s,u,l=i._markers;for(s=l.length-1;0<=s;s--)(u=l[s])._icon&&(u._setPos(t),u.clusterHide())},function(i){var s,u,l=i._childClusters;for(s=l.length-1;0<=s;s--)(u=l[s])._icon&&(u._setPos(t),u.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,i){this._recursively(e,i,t,function(s){s._recursivelyAnimateChildrenIn(e,s._group._map.latLngToLayerPoint(s.getLatLng()).round(),n),s._isSingleParent()&&n-1===i?(s.clusterShow(),s._recursivelyRemoveChildrenFromMap(e,t,n)):s.clusterHide(),s._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(i){if(t!==i._zoom)for(var s=i._markers.length-1;0<=s;s--){var u=i._markers[s];n.contains(u._latlng)&&(e&&(u._backupLatlng=u.getLatLng(),u.setLatLng(e),u.clusterHide&&u.clusterHide()),i._group._featureGroup.addLayer(u))}},function(i){i._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i]._restorePosition();else for(var s=this._childClusters.length-1;0<=s;s--)this._childClusters[s]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,i){var s,u;this._recursively(e,t-1,n-1,function(l){for(u=l._markers.length-1;0<=u;u--)s=l._markers[u],i&&i.contains(s._latlng)||(l._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())},function(l){for(u=l._childClusters.length-1;0<=u;u--)s=l._childClusters[u],i&&i.contains(s._latlng)||(l._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())})},_recursively:function(e,t,n,i,s){var u,l,h=this._childClusters,_=this._zoom;if(t<=_&&(i&&i(this),s&&_===n&&s(this)),_<t||_<n)for(u=h.length-1;0<=u;u--)(l=h[u])._boundsNeedUpdate&&l._recalculateBounds(),e.intersects(l._bounds)&&l._recursively(e,t,n,i,s)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),s=this._grid,u=s[i]=s[i]||{},l=u[n]=u[n]||[],h=L.Util.stamp(e);this._objectPoint[h]=t,l.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,s=this._getCoord(t.x),u=this._getCoord(t.y),l=this._grid,h=l[u]=l[u]||{},_=h[s]=h[s]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=_.length;n<i;n++)if(_[n]===e)return _.splice(n,1),i===1&&delete h[s],!0},eachObject:function(e,t){var n,i,s,u,l,h,_=this._grid;for(n in _)for(i in l=_[n])for(s=0,u=(h=l[i]).length;s<u;s++)e.call(t,h[s])&&(s--,u--)},getNearObject:function(e){var t,n,i,s,u,l,h,_,f=this._getCoord(e.x),y=this._getCoord(e.y),k=this._objectPoint,m=this._sqCellSize,I=null;for(t=y-1;t<=y+1;t++)if(s=this._grid[t]){for(n=f-1;n<=f+1;n++)if(u=s[n])for(i=0,l=u.length;i<l;i++)h=u[i],((_=this._sqDist(k[L.Util.stamp(h)],e))<m||_<=m&&I===null)&&(m=_,I=h)}return I},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,s,u=0,l=null,h=[];for(n=t.length-1;0<=n;n--)i=t[n],0<(s=this.getDistant(i,e))&&(h.push(i),u<s&&(u=s,l=i));return{maxPoint:l,newPoints:h}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints))).concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,s=!1,u=!1,l=null,h=null,_=null,f=null,y=null,k=null;for(t=e.length-1;0<=t;t--){var m=e[t];(n===!1||m.lat>n)&&(n=(l=m).lat),(i===!1||m.lat<i)&&(i=(h=m).lat),(s===!1||m.lng>s)&&(s=(_=m).lng),(u===!1||m.lng<u)&&(u=(f=m).lng)}return y=i!==n?(k=h,l):(k=f,_),[].concat(this.buildConvexHull([k,y],e),this.buildConvexHull([y,k],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,u=this._2PI/e,l=[];for(s=Math.max(s,35),l.length=e,n=0;n<e;n++)i=this._circleStartAngle+n*u,l[n]=new L.Point(t.x+s*Math.cos(i),t.y+s*Math.sin(i))._round();return l},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,s=i*this._spiralLengthStart,u=i*this._spiralFootSeparation,l=i*this._spiralLengthFactor*this._2PI,h=0,_=[];for(n=_.length=e;0<=n;n--)n<e&&(_[n]=new L.Point(t.x+s*Math.cos(h),t.y+s*Math.sin(h))._round()),s+=l/(h+=u/s+5e-4*n);return _},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,s=n._featureGroup,u=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=u.length-1;0<=t;t--)e=u[t],s.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:u}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,s,u,l=this._group,h=l._map,_=l._featureGroup,f=this._group.options.spiderLegPolylineOptions;for(l._ignoreMove=!0,n=0;n<e.length;n++)u=h.layerPointToLatLng(t[n]),i=e[n],s=new L.Polyline([this._latlng,u],f),h.addLayer(s),i._spiderLeg=s,i._preSpiderfyLatlng=i._latlng,i.setLatLng(u),i.setZIndexOffset&&i.setZIndexOffset(1e6),_.addLayer(i);this.setOpacity(.3),l._ignoreMove=!1,l.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,i,s,u,l,h,_=this,f=this._group,y=f._map,k=f._featureGroup,m=this._latlng,I=y.latLngToLayerPoint(m),B=L.Path.SVG,S=L.extend({},this._group.options.spiderLegPolylineOptions),T=S.opacity;for(T===void 0&&(T=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),B?(S.opacity=0,S.className=(S.className||"")+" leaflet-cluster-spider-leg"):S.opacity=T,f._ignoreMove=!0,n=0;n<e.length;n++)i=e[n],h=y.layerPointToLatLng(t[n]),s=new L.Polyline([m,h],S),y.addLayer(s),i._spiderLeg=s,B&&(l=(u=s._path).getTotalLength()+.1,u.style.strokeDasharray=l,u.style.strokeDashoffset=l),i.setZIndexOffset&&i.setZIndexOffset(1e6),i.clusterHide&&i.clusterHide(),k.addLayer(i),i._setPos&&i._setPos(I);for(f._forceLayout(),f._animationStart(),n=e.length-1;0<=n;n--)h=y.layerPointToLatLng(t[n]),(i=e[n])._preSpiderfyLatlng=i._latlng,i.setLatLng(h),i.clusterShow&&i.clusterShow(),B&&((u=(s=i._spiderLeg)._path).style.strokeDashoffset=0,s.setStyle({opacity:T}));this.setOpacity(.3),f._ignoreMove=!1,setTimeout(function(){f._animationEnd(),f.fire("spiderfied",{cluster:_,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,i,s,u,l,h=this,_=this._group,f=_._map,y=_._featureGroup,k=e?f._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):f.latLngToLayerPoint(this._latlng),m=this.getAllChildMarkers(null,!0),I=L.Path.SVG;for(_._ignoreMove=!0,_._animationStart(),this.setOpacity(1),n=m.length-1;0<=n;n--)(t=m[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,l=!0,t._setPos&&(t._setPos(k),l=!1),t.clusterHide&&(t.clusterHide(),l=!1),l&&y.removeLayer(t),I&&(u=(s=(i=t._spiderLeg)._path).getTotalLength()+.1,s.style.strokeDashoffset=u,i.setStyle({opacity:0})));_._ignoreMove=!1,setTimeout(function(){var B=0;for(n=m.length-1;0<=n;n--)(t=m[n])._spiderLeg&&B++;for(n=m.length-1;0<=n;n--)(t=m[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<B&&y.removeLayer(t),f.removeLayer(t._spiderLeg),delete t._spiderLeg);_._animationEnd(),_.fire("unspiderfied",{cluster:h,markers:m})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=r,a.MarkerCluster=d,Object.defineProperty(a,"__esModule",{value:!0})})})(Ot,Ot.exports);function yn(c){let o=0,a=0,r=c.length;return c.forEach(d=>{o+=d[0],a+=d[1]}),[o/r,a/r]}async function Et(c){const o="https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories";try{const r=await(await fetch(o)).json(),d=L.geoJSON(r,{style:e=>({color:e.properties.color,weight:2,opacity:.25,fillOpacity:.25})});return d.addTo(c),d}catch(a){console.error("Error fetching territories data:",a)}}function Gt(c,o){let a=L.layerGroup();return L.geoJSON(o,{onEachFeature:(r,d)=>{if(r.geometry.type==="Polygon"){const e=yn(r.geometry.coordinates[0]);!isNaN(e[0])&&!isNaN(e[1])&&L.marker([e[1],e[0]],{icon:L.divIcon({className:"territory-label",html:r.properties.Name,iconSize:L.point(100,40)})}).addTo(a)}}}),a.addTo(c),a}const qt=""+new URL("../assets/map-territories.nhGiRSZo.png",import.meta.url).href,Dt=""+new URL("../assets/map-streets.6DhexBtl.png",import.meta.url).href,Ht=""+new URL("../assets/map-satellite.xCirAAcX.png",import.meta.url).href,ee="src/lib/UI/Peephole.svelte";function Fe(c){let o,a,r,d,e,t,n,i,s,u,l,h,_,f;const y={c:function(){o=M("div"),a=M("button"),r=M("img"),e=N(),t=M("button"),n=M("img"),s=N(),u=M("button"),l=M("img"),this.h()},l:function(m){o=b(m,"DIV",{class:!0});var I=A(o);a=b(I,"BUTTON",{class:!0});var B=A(a);r=b(B,"IMG",{src:!0,alt:!0,class:!0}),B.forEach(v),e=V(I),t=b(I,"BUTTON",{class:!0});var S=A(t);n=b(S,"IMG",{src:!0,alt:!0,class:!0}),S.forEach(v),s=V(I),u=b(I,"BUTTON",{class:!0});var T=A(u);l=b(T,"IMG",{src:!0,alt:!0,class:!0}),T.forEach(v),I.forEach(v),this.h()},h:function(){X(r.src,d=Dt)||p(r,"src",d),p(r,"alt","Map Style: Streets"),p(r,"class","s-SloUweJClGtl"),w(r,ee,10,6,365),p(a,"class","s-SloUweJClGtl"),w(a,ee,9,4,313),X(n.src,i=Ht)||p(n,"src",i),p(n,"alt","Map Style: Satelitte"),p(n,"class","s-SloUweJClGtl"),w(n,ee,13,6,487),p(t,"class","s-SloUweJClGtl"),w(t,ee,12,4,435),X(l.src,h=qt)||p(l,"src",h),p(l,"alt","Map Style: Territories"),p(l,"class","s-SloUweJClGtl"),w(l,ee,16,6,613),p(u,"class","s-SloUweJClGtl"),w(u,ee,15,4,561),p(o,"class","peephole-container s-SloUweJClGtl"),w(o,ee,8,2,276)},m:function(m,I){O(m,o,I),C(o,a),C(a,r),C(o,e),C(o,t),C(t,n),C(o,s),C(o,u),C(u,l),_||(f=[q(a,"click",c[1],!1,!1,!1,!1),q(t,"click",c[2],!1,!1,!1,!1),q(u,"click",c[3],!1,!1,!1,!1)],_=!0)},p:ue,i:ue,o:ue,d:function(m){m&&v(o),_=!1,st(f)}};return P("SvelteRegisterBlock",{block:y,id:Fe.name,type:"component",source:"",ctx:c}),y}function vn(c,o,a){let{$$slots:r={},$$scope:d}=o;re("Peephole",r,[]);let{onMapStyleSelect:e}=o;c.$$.on_mount.push(function(){e===void 0&&!("onMapStyleSelect"in o||c.$$.bound[c.$$.props.onMapStyleSelect])&&console.warn("<Peephole> was created without expected prop 'onMapStyleSelect'")});const t=["onMapStyleSelect"];Object.keys(o).forEach(u=>{!~t.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Peephole> was created with unknown prop '${u}'`)});const n=()=>e(1),i=()=>e(0),s=()=>e(2);return c.$$set=u=>{"onMapStyleSelect"in u&&a(0,e=u.onMapStyleSelect)},c.$capture_state=()=>({onMapStyleSelect:e,territoriesImage:qt,streetsImage:Dt,satelitteImage:Ht}),c.$inject_state=u=>{"onMapStyleSelect"in u&&a(0,e=u.onMapStyleSelect)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),[e,n,i,s]}class Xt extends ie{constructor(o){super(o),oe(this,o,vn,Fe,ne,{onMapStyleSelect:0}),P("SvelteRegisterComponent",{component:this,tagName:"Peephole",options:o,id:Fe.name})}get onMapStyleSelect(){throw new Error("<Peephole>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onMapStyleSelect(o){throw new Error("<Peephole>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const xt=""+new URL("../assets/plus.Njxp47f3.svg",import.meta.url).href,Qt=""+new URL("../assets/minus.3BZMq0WM.svg",import.meta.url).href,Ln=""+new URL("../assets/layers.ixVVx571.svg",import.meta.url).href,Yt=""+new URL("../assets/countermonument.cvEDImS4.svg",import.meta.url).href,Wt=""+new URL("../assets/monument.2AR3Frgn.svg",import.meta.url).href,Kt=""+new URL("../assets/map-basic.JRLSm0r-.png",import.meta.url).href,{console:Tt}=Ft,U="src/lib/Map/Toolbar.svelte";function Jt(c){let o;const a={c:function(){o=Ie("path"),this.h()},l:function(d){o=Be(d,"path",{d:!0}),A(o).forEach(v),this.h()},h:function(){p(o,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),w(o,U,89,8,2357)},m:function(d,e){O(d,o,e)},d:function(d){d&&v(o)}};return P("SvelteRegisterBlock",{block:a,id:Jt.name,type:"else",source:"(89:6) {:else}",ctx:c}),a}function $t(c){let o,a;const r={c:function(){o=Ie("path"),a=Ie("path"),this.h()},l:function(e){o=Be(e,"path",{d:!0}),A(o).forEach(v),a=Be(e,"path",{d:!0}),A(a).forEach(v),this.h()},h:function(){p(o,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),w(o,U,85,8,2128),p(a,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),w(a,U,85,58,2178)},m:function(e,t){O(e,o,t),O(e,a,t)},d:function(e){e&&(v(o),v(a))}};return P("SvelteRegisterBlock",{block:r,id:$t.name,type:"if",source:"(85:6) {#if eye}",ctx:c}),r}function qe(c){let o,a;o=new Xt({props:{onMapStyleSelect:c[7]},$$inline:!0});const r={c:function(){Le(o.$$.fragment)},l:function(e){ke(o.$$.fragment,e)},m:function(e,t){we(o,e,t),a=!0},p:ue,i:function(e){a||(E(o.$$.fragment,e),a=!0)},o:function(e){z(o.$$.fragment,e),a=!1},d:function(e){Ce(o,e)}};return P("SvelteRegisterBlock",{block:r,id:qe.name,type:"if",source:"(107:2) {#if showPeephole}",ctx:c}),r}function De(c){let o,a,r,d,e,t,n,i,s,u,l,h,_,f,y,k,m="ðŸ—ºï¸",I,B,S,T,$,D,g,j,ze,H,W,dt,je,pe,Re,_t;function pt(Y,Z){return Y[0]?$t:Jt}let Me=pt(c),Q=Me(c),G=c[1]&&qe(c);const mt={c:function(){o=M("div"),a=M("button"),r=M("img"),e=N(),t=M("div"),n=M("button"),i=M("img"),u=N(),l=M("button"),h=M("img"),f=N(),y=M("div"),k=M("button"),k.textContent=m,I=N(),B=M("button"),S=Ie("svg"),Q.c(),$=N(),D=M("button"),g=M("img"),ze=N(),H=M("button"),W=M("img"),je=N(),G&&G.c(),this.h()},l:function(Z){o=b(Z,"DIV",{class:!0});var R=A(o);a=b(R,"BUTTON",{class:!0});var gt=A(a);r=b(gt,"IMG",{src:!0,alt:!0}),gt.forEach(v),e=V(R),t=b(R,"DIV",{class:!0});var be=A(t);n=b(be,"BUTTON",{class:!0});var yt=A(n);i=b(yt,"IMG",{src:!0,alt:!0}),yt.forEach(v),u=V(be),l=b(be,"BUTTON",{class:!0});var vt=A(l);h=b(vt,"IMG",{src:!0,alt:!0}),vt.forEach(v),be.forEach(v),f=V(R),y=b(R,"DIV",{class:!0});var se=A(y);k=b(se,"BUTTON",{class:!0,"data-svelte-h":!0}),ln(k)!=="svelte-1tkyn7r"&&(k.textContent=m),I=V(se),B=b(se,"BUTTON",{type:!0,title:!0,class:!0});var Lt=A(B);S=Be(Lt,"svg",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,viewBox:!0,stroke:!0});var kt=A(S);Q.l(kt),kt.forEach(v),Lt.forEach(v),$=V(se),D=b(se,"BUTTON",{class:!0});var wt=A(D);g=b(wt,"IMG",{src:!0,alt:!0}),wt.forEach(v),se.forEach(v),ze=V(R),H=b(R,"BUTTON",{id:!0,title:!0,class:!0});var Ct=A(H);W=b(Ct,"IMG",{src:!0,alt:!0,class:!0}),Ct.forEach(v),je=V(R),G&&G.l(R),R.forEach(v),this.h()},h:function(){X(r.src,d=Yt)||p(r,"src",d),p(r,"alt","Submit"),w(r,U,63,4,1485),p(a,"class","rounded s-X67GN01QUXjj"),w(a,U,62,2,1456),X(i.src,s=xt)||p(i,"src",s),p(i,"alt","Zoom in"),w(i,U,67,6,1616),p(n,"class","s-X67GN01QUXjj"),w(n,U,66,4,1583),X(h.src,_=Qt)||p(h,"src",_),p(h,"alt","Zoom out"),w(h,U,70,6,1709),p(l,"class","s-X67GN01QUXjj"),w(l,U,69,4,1675),p(t,"class","zoom-container s-X67GN01QUXjj"),w(t,U,65,2,1550),p(k,"class","s-X67GN01QUXjj"),w(k,U,74,2,1804),p(S,"fill","none"),p(S,"stroke-linecap","round"),p(S,"stroke-linejoin","round"),p(S,"stroke-width",T=c[0]?2:1),p(S,"viewBox","0 0 24 24"),p(S,"stroke","currentColor"),w(S,U,76,4,1929),p(B,"type","button"),p(B,"title","Show Markers"),p(B,"class","s-X67GN01QUXjj"),w(B,U,75,2,1861),X(g.src,j=Wt)||p(g,"src",j),p(g,"alt","Toggle"),w(g,U,97,4,2771),p(D,"class","s-X67GN01QUXjj"),w(D,U,96,2,2729),p(y,"class","devButtons s-X67GN01QUXjj"),w(y,U,73,2,1777),X(W.src,dt=Kt)||p(W,"src",dt),p(W,"alt","Select Map Style"),p(W,"class","s-X67GN01QUXjj"),w(W,U,104,4,2947),p(H,"id","peephole"),p(H,"title","Select Map Style"),p(H,"class","s-X67GN01QUXjj"),w(H,U,100,2,2836),p(o,"class","flex flex-col toolbar-container s-X67GN01QUXjj"),w(o,U,61,0,1408)},m:function(Z,R){O(Z,o,R),C(o,a),C(a,r),C(o,e),C(o,t),C(t,n),C(n,i),C(t,u),C(t,l),C(l,h),C(o,f),C(o,y),C(y,k),C(y,I),C(y,B),C(B,S),Q.m(S,null),C(y,$),C(y,D),C(D,g),C(o,ze),C(o,H),C(H,W),C(o,je),G&&G.m(o,null),pe=!0,Re||(_t=[q(n,"click",c[2],!1,!1,!1,!1),q(l,"click",c[3],!1,!1,!1,!1),q(k,"click",c[6],!1,!1,!1,!1),q(B,"click",c[4],!1,!1,!1,!1),q(D,"click",c[5],!1,!1,!1,!1),q(H,"click",c[9],!1,!1,!1,!1)],Re=!0)},p:function(Z,[R]){Me!==(Me=pt(Z))&&(Q.d(1),Q=Me(Z),Q&&(Q.c(),Q.m(S,null))),(!pe||R&1&&T!==(T=Z[0]?2:1))&&p(S,"stroke-width",T),Z[1]?G?(G.p(Z,R),R&2&&E(G,1)):(G=qe(Z),G.c(),E(G,1),G.m(o,null)):G&&(de(),z(G,1,1,()=>{G=null}),_e())},i:function(Z){pe||(E(G),pe=!0)},o:function(Z){z(G),pe=!1},d:function(Z){Z&&v(o),Q.d(),G&&G.d(),Re=!1,st(_t)}};return P("SvelteRegisterBlock",{block:mt,id:De.name,type:"component",source:"",ctx:c}),mt}function kn(c,o,a){let{$$slots:r={},$$scope:d}=o;re("Toolbar",r,[]);let{mapInstance:e}=o,t=!0,n=!0,i=!1;function s(){console.log("zooming in"),e?e.zoomIn():console.error("Map instance is not available.")}function u(){e.zoomOut()}function l(){a(0,t=!t),me.update(m=>!m)}function h(){It(),n=!n}function _(){Bt()}function f(m){At(m),a(1,i=!1)}c.$$.on_mount.push(function(){e===void 0&&!("mapInstance"in o||c.$$.bound[c.$$.props.mapInstance])&&Tt.warn("<Toolbar> was created without expected prop 'mapInstance'")});const y=["mapInstance"];Object.keys(o).forEach(m=>{!~y.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Tt.warn(`<Toolbar> was created with unknown prop '${m}'`)});const k=()=>a(1,i=!i);return c.$$set=m=>{"mapInstance"in m&&a(8,e=m.mapInstance)},c.$capture_state=()=>({isMarkersVisible:me,setMapStyleIndex:At,toggleDarkMode:It,toggleTerritoriesVisibility:Bt,Peephole:Xt,mapInstance:e,plusIconPath:xt,minusIconPath:Qt,layersIconPath:Ln,counterMonumentIconPath:Yt,monumentIconPath:Wt,basicMapImage:Kt,eye:t,darkIcon:n,showPeephole:i,zoomIn:s,zoomOut:u,clickEye:l,toggleMarkerColor:h,toggleTerritoriesLayer:_,handleMapStyleSelect:f}),c.$inject_state=m=>{"mapInstance"in m&&a(8,e=m.mapInstance),"eye"in m&&a(0,t=m.eye),"darkIcon"in m&&(n=m.darkIcon),"showPeephole"in m&&a(1,i=m.showPeephole)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),[t,i,s,u,l,h,_,f,e,k]}class Ut extends ie{constructor(o){super(o),oe(this,o,kn,De,ne,{mapInstance:8}),P("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:o,id:De.name})}get mapInstance(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mapInstance(o){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{Error:ae,console:wn}=Ft,Cn="src/lib/Map/Leaflet.svelte";function He(c){let o;const a=c[9].default,r=at(a,c,c[8],null),d={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,n){r&&r.m(t,n),o=!0},p:function(t,n){r&&r.p&&(!o||n&256)&&lt(r,a,t,t[8],o?ct(a,t[8],n,null):ut(t[8]),null)},i:function(t){o||(E(r,t),o=!0)},o:function(t){z(r,t),o=!1},d:function(t){r&&r.d(t)}};return P("SvelteRegisterBlock",{block:d,id:He.name,type:"if",source:"(188:2) {#if map}",ctx:c}),d}function Xe(c){let o,a,r=c[0]&&He(c);const d={c:function(){o=M("div"),r&&r.c(),this.h()},l:function(t){o=b(t,"DIV",{class:!0});var n=A(o);r&&r.l(n),n.forEach(v),this.h()},h:function(){p(o,"class","w-full h-full"),w(o,Cn,186,0,5247)},m:function(t,n){O(t,o,n),r&&r.m(o,null),c[10](o),a=!0},p:function(t,[n]){t[0]?r?(r.p(t,n),n&1&&E(r,1)):(r=He(t),r.c(),E(r,1),r.m(o,null)):r&&(de(),z(r,1,1,()=>{r=null}),_e())},i:function(t){a||(E(r),a=!0)},o:function(t){z(r),a=!1},d:function(t){t&&v(o),r&&r.d(),c[10](null)}};return P("SvelteRegisterBlock",{block:d,id:Xe.name,type:"component",source:"",ctx:c}),d}function Mn(c,o,a){let r,d;K(Ne,"currentMapStyleId"),J(c,Ne,g=>a(6,r=g)),K(Ve,"territoriesVisible"),J(c,Ve,g=>a(7,d=g));let{$$slots:e={},$$scope:t}=o;re("Leaflet",e,["default"]);let{bounds:n=void 0}=o,{view:i=void 0}=o,{zoom:s=void 0}=o;const u=Oe();let l,h,_,f=null,y=null,k=null;async function m(g){if(!k)try{k=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),f=await Et(g,k),y=await Gt(g,k)}catch(j){console.error("Error fetching territories data:",j)}}const I=F.Control.extend({onAdd(g){const j=F.DomUtil.create("div","map-toolbar-container");return new Ut({target:j,props:{mapInstance:g}}),j}});te(()=>{if(!n&&(!i||!s))throw new Error("Must set either bounds, or view and zoom.");a(0,l=F.map(h,{maxZoom:18,zoomControl:!1}));const g=F.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});l.addLayer(g),ge.set(g),n?(l.fitBounds(n),le.set(n)):i&&s&&l.setView(i,s),l.whenReady(()=>{if(!n){const j=l.getBounds();le.set(j)}m(l),a(5,_=new Ze({Language:"fr",style:F.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(l)),new I({position:"topright"}).addTo(l)}),l.on("zoom",j=>u("zoom",j)).on("moveend",()=>{const j=l.getBounds();le.set(j)}).on("popupopen",async j=>{await Mt(),j.popup.update()})});function B(){l&&(!f||!y?m(l):(l.addLayer(f),l.addLayer(y)))}function S(){l&&(f&&l.removeLayer(f),y&&l.removeLayer(y),console.log("Territories removed"))}ce(()=>{l==null||l.remove(),a(0,l=void 0),S()}),Ee("map",{getMap:()=>l});function T(g){l&&_&&(l.removeLayer(_),a(5,_=new Ze({style:g,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(l)))}const $=["bounds","view","zoom"];Object.keys(o).forEach(g=>{!~$.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&wn.warn(`<Leaflet> was created with unknown prop '${g}'`)});function D(g){Nt[g?"unshift":"push"](()=>{h=g,a(1,h)})}return c.$$set=g=>{"bounds"in g&&a(2,n=g.bounds),"view"in g&&a(3,i=g.view),"zoom"in g&&a(4,s=g.zoom),"$$scope"in g&&a(8,t=g.$$scope)},c.$capture_state=()=>({onMount:te,onDestroy:ce,setContext:Ee,createEventDispatcher:Oe,tick:Mt,L:F,addTerritoriesLayer:Et,addTerritoriesLabels:Gt,MaptilerLayer:Ze,MaptilerStyle:pn,Toolbar:Ut,currentMapStyleId:Ne,mapBoundsStore:le,territoriesVisible:Ve,clusterGroupStore:ge,bounds:n,view:i,zoom:s,dispatch:u,map:l,mapElement:h,mtLayer:_,territoriesLayer:f,labelsLayer:y,territoriesData:k,initializeTerritories:m,ToolbarControl:I,addTerritories:B,removeTerritories:S,updateMapStyle:T,$currentMapStyleId:r,$territoriesVisible:d}),c.$inject_state=g=>{"bounds"in g&&a(2,n=g.bounds),"view"in g&&a(3,i=g.view),"zoom"in g&&a(4,s=g.zoom),"map"in g&&a(0,l=g.map),"mapElement"in g&&a(1,h=g.mapElement),"mtLayer"in g&&a(5,_=g.mtLayer),"territoriesLayer"in g&&(f=g.territoriesLayer),"labelsLayer"in g&&(y=g.labelsLayer),"territoriesData"in g&&(k=g.territoriesData)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),c.$$.update=()=>{c.$$.dirty&128&&(d?B():S()),c.$$.dirty&29&&l&&(n?l.fitBounds(n):i&&s&&l.setView(i,s)),c.$$.dirty&97&&r&&(console.log("MAP TILE NAME",r.name),l&&_&&T(r))},[l,h,n,i,s,_,r,d,t,e,D]}class en extends ie{constructor(o){super(o),oe(this,o,Mn,Xe,ne,{bounds:2,view:3,zoom:4}),P("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:o,id:Xe.name})}get bounds(){throw new ae("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(o){throw new ae("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new ae("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(o){throw new ae("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new ae("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(o){throw new ae("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const zt="data:image/png;base64,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",jt=""+new URL("../assets/custom-marker-white-outline.ja7aQokX.png",import.meta.url).href;function xe(c){let o;const a=c[7].default,r=at(a,c,c[6],null),d={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,n){r&&r.m(t,n),o=!0},p:function(t,n){r&&r.p&&(!o||n&64)&&lt(r,a,t,t[6],o?ct(a,t[6],n,null):ut(t[6]),null)},i:function(t){o||(E(r,t),o=!0)},o:function(t){z(r,t),o=!1},d:function(t){r&&r.d(t)}};return P("SvelteRegisterBlock",{block:d,id:xe.name,type:"if",source:"(65:0) {#if marker}",ctx:c}),d}function Qe(c){let o,a,r=c[0]&&xe(c);const d={c:function(){r&&r.c(),o=x()},l:function(t){r&&r.l(t),o=x()},m:function(t,n){r&&r.m(t,n),O(t,o,n),a=!0},p:function(t,[n]){t[0]?r?(r.p(t,n),n&1&&E(r,1)):(r=xe(t),r.c(),E(r,1),r.m(o.parentNode,o)):r&&(de(),z(r,1,1,()=>{r=null}),_e())},i:function(t){a||(E(r),a=!0)},o:function(t){z(r),a=!1},d:function(t){t&&v(o),r&&r.d(t)}};return P("SvelteRegisterBlock",{block:d,id:Qe.name,type:"component",source:"",ctx:c}),d}function bn(c,o,a){let r,d;K(ge,"clusterGroupStore"),J(c,ge,f=>a(4,r=f)),K(me,"isMarkersVisible"),J(c,me,f=>a(5,d=f));let{$$slots:e={},$$scope:t}=o;re("Marker",e,["default"]);let{width:n}=o,{height:i}=o,{latLng:s}=o,u,l=Ge("map").getMap();Ee("layer",{getLayer:()=>u});function h(f){let k=`<img src="${f==="dark"?jt:zt}" style="width: ${n}px; height: ${i}px;">`,m=F.divIcon({html:k,className:"map-marker",iconSize:F.point(n,i)});u?(u.setIcon(m),r&&r.addLayer(u)):(a(0,u=F.marker(s,{icon:m})),r&&r.addLayer(u))}te(()=>{l&&r&&ye.subscribe(f=>{h(f)})}),ce(()=>{u&&(u.remove(),a(0,u=void 0))}),c.$$.on_mount.push(function(){n===void 0&&!("width"in o||c.$$.bound[c.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),i===void 0&&!("height"in o||c.$$.bound[c.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),s===void 0&&!("latLng"in o||c.$$.bound[c.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const _=["width","height","latLng"];return Object.keys(o).forEach(f=>{!~_.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Marker> was created with unknown prop '${f}'`)}),c.$$set=f=>{"width"in f&&a(1,n=f.width),"height"in f&&a(2,i=f.height),"latLng"in f&&a(3,s=f.latLng),"$$scope"in f&&a(6,t=f.$$scope)},c.$capture_state=()=>({onMount:te,onDestroy:ce,getContext:Ge,setContext:Ee,darkMode:ye,clusterGroupStore:ge,isMarkersVisible:me,L:F,customMarker:zt,customMarkerWhite:jt,width:n,height:i,latLng:s,marker:u,mapInstance:l,createOrUpdateMarker:h,$clusterGroupStore:r,$isMarkersVisible:d}),c.$inject_state=f=>{"width"in f&&a(1,n=f.width),"height"in f&&a(2,i=f.height),"latLng"in f&&a(3,s=f.latLng),"marker"in f&&a(0,u=f.marker),"mapInstance"in f&&(l=f.mapInstance)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),c.$$.update=()=>{c.$$.dirty&49&&u&&r&&(d?r.addLayer(u):r.removeLayer(u))},[u,n,i,s,r,d,t,e]}class tn extends ie{constructor(o){super(o),oe(this,o,bn,Qe,ne,{width:1,height:2,latLng:3}),P("SvelteRegisterComponent",{component:this,tagName:"Marker",options:o,id:Qe.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(o){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(o){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(o){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Sn="src/lib/Map/Popup.svelte";function Ye(c){let o;const a=c[3].default,r=at(a,c,c[2],null),d={c:function(){r&&r.c()},l:function(t){r&&r.l(t)},m:function(t,n){r&&r.m(t,n),o=!0},p:function(t,n){r&&r.p&&(!o||n&4)&&lt(r,a,t,t[2],o?ct(a,t[2],n,null):ut(t[2]),null)},i:function(t){o||(E(r,t),o=!0)},o:function(t){z(r,t),o=!1},d:function(t){r&&r.d(t)}};return P("SvelteRegisterBlock",{block:d,id:Ye.name,type:"if",source:"(36:2) {#if open}",ctx:c}),d}function We(c){let o,a,r=c[1]&&Ye(c);const d={c:function(){o=M("div"),r&&r.c(),this.h()},l:function(t){o=b(t,"DIV",{});var n=A(o);r&&r.l(n),n.forEach(v),this.h()},h:function(){w(o,Sn,34,0,671)},m:function(t,n){O(t,o,n),r&&r.m(o,null),c[4](o),a=!0},p:function(t,[n]){t[1]?r?(r.p(t,n),n&2&&E(r,1)):(r=Ye(t),r.c(),E(r,1),r.m(o,null)):r&&(de(),z(r,1,1,()=>{r=null}),_e())},i:function(t){a||(E(r),a=!0)},o:function(t){z(r),a=!1},d:function(t){t&&v(o),r&&r.d(),c[4](null)}};return P("SvelteRegisterBlock",{block:d,id:We.name,type:"component",source:"",ctx:c}),d}function Pn(c,o,a){let{$$slots:r={},$$scope:d}=o;re("Popup",r,["default"]);let e,t,n=!1;const i=Ge("layer"),s=i.getLayer();te(()=>{e=F.popup().setContent(t),s&&(s.bindPopup(e),s.on("popupopen",()=>a(1,n=!0)),s.on("popupclose",()=>a(1,n=!1)))}),ce(()=>{s&&s.unbindPopup(),e&&(e.remove(),e=void 0)});const u=[];Object.keys(o).forEach(h=>{!~u.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Popup> was created with unknown prop '${h}'`)});function l(h){Nt[h?"unshift":"push"](()=>{t=h,a(0,t)})}return c.$$set=h=>{"$$scope"in h&&a(2,d=h.$$scope)},c.$capture_state=()=>({onMount:te,onDestroy:ce,getContext:Ge,L:F,popup:e,popupElement:t,open:n,layerContext:i,layer:s}),c.$inject_state=h=>{"popup"in h&&(e=h.popup),"popupElement"in h&&a(0,t=h.popupElement),"open"in h&&a(1,n=h.open)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),[t,n,d,r,l]}class nn extends ie{constructor(o){super(o),oe(this,o,Pn,We,ne,{}),P("SvelteRegisterComponent",{component:this,tagName:"Popup",options:o,id:We.name})}}const Ue="src/lib/UI/Search.svelte";function Pe(c,o,a){const r=c.slice();return r[8]=o[a],r[10]=a,r}function Ke(c){let o,a=[],r=new Map,d=he(c[1]);const e=n=>n[8].name+"-"+n[10];Te(c,d,Pe,e);for(let n=0;n<d.length;n+=1){let i=Pe(c,d,n),s=e(i);r.set(s,a[n]=Je(s,i))}const t={c:function(){o=M("ul");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l:function(i){o=b(i,"UL",{class:!0});var s=A(o);for(let u=0;u<a.length;u+=1)a[u].l(s);s.forEach(v),this.h()},h:function(){p(o,"class","results-list s-GrfkGqnI6hbO"),w(o,Ue,30,4,761)},m:function(i,s){O(i,o,s);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,null)},p:function(i,s){s&6&&(d=he(i[1]),Te(i,d,Pe,e),a=Vt(a,s,e,1,i,d,r,o,fn,Je,null,Pe))},d:function(i){i&&v(o);for(let s=0;s<a.length;s+=1)a[s].d()}};return P("SvelteRegisterBlock",{block:t,id:Ke.name,type:"if",source:"(29:0) {#if searchTerm}",ctx:c}),t}function Je(c,o){let a,r=o[8].name+"",d,e,t,n;function i(){return o[6](o[8])}const s={key:c,first:null,c:function(){a=M("li"),d=ht(r),e=N(),this.h()},l:function(l){a=b(l,"LI",{class:!0});var h=A(a);d=ft(h,r),e=V(h),h.forEach(v),this.h()},h:function(){p(a,"class","s-GrfkGqnI6hbO"),w(a,Ue,32,8,870),this.first=a},m:function(l,h){O(l,a,h),C(a,d),C(a,e),t||(n=q(a,"click",i,!1,!1,!1,!1),t=!0)},p:function(l,h){o=l,h&2&&r!==(r=o[8].name+"")&&Zt(d,r)},d:function(l){l&&v(a),t=!1,n()}};return P("SvelteRegisterBlock",{block:s,id:Je.name,type:"each",source:'(32:6) {#each filteredMarkers as marker, index (marker.name + \\"-\\" + index)}',ctx:o}),s}function $e(c){let o,a,r,d,e,t=c[0]&&Ke(c);const n={c:function(){o=M("div"),a=M("input"),r=N(),t&&t.c(),this.h()},l:function(s){o=b(s,"DIV",{class:!0});var u=A(o);a=b(u,"INPUT",{type:!0,placeholder:!0,class:!0}),r=V(u),t&&t.l(u),u.forEach(v),this.h()},h:function(){p(a,"type","text"),p(a,"placeholder"," "),p(a,"class","s-GrfkGqnI6hbO"),w(a,Ue,21,0,618),p(o,"class","search-container s-GrfkGqnI6hbO"),w(o,Ue,20,0,587)},m:function(s,u){O(s,o,u),C(o,a),bt(a,c[0]),C(o,r),t&&t.m(o,null),d||(e=[q(a,"input",c[4]),q(a,"input",c[5],!1,!1,!1,!1)],d=!0)},p:function(s,[u]){u&1&&a.value!==s[0]&&bt(a,s[0]),s[0]?t?t.p(s,u):(t=Ke(s),t.c(),t.m(o,null)):t&&(t.d(1),t=null)},i:ue,o:ue,d:function(s){s&&v(o),t&&t.d(),d=!1,st(e)}};return P("SvelteRegisterBlock",{block:n,id:$e.name,type:"component",source:"",ctx:c}),n}function An(c,o,a){let r,d;K(ve,"markersStore"),J(c,ve,f=>a(3,d=f));let{$$slots:e={},$$scope:t}=o;re("Search",e,[]);const n=Oe();let i="";function s(f){f&&f.latLng&&n("updateView",{latLng:f.latLng})}const u=[];Object.keys(o).forEach(f=>{!~u.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Search> was created with unknown prop '${f}'`)});function l(){i=this.value,a(0,i)}const h=()=>a(0,i=i.trim()),_=f=>s(f);return c.$capture_state=()=>({markersStore:ve,createEventDispatcher:Oe,dispatch:n,searchTerm:i,goToMarker:s,filteredMarkers:r,$markersStore:d}),c.$inject_state=f=>{"searchTerm"in f&&a(0,i=f.searchTerm),"filteredMarkers"in f&&a(1,r=f.filteredMarkers)},o&&"$$inject"in o&&c.$inject_state(o.$$inject),c.$$.update=()=>{c.$$.dirty&9&&a(1,r=d.filter(f=>f.name.toLowerCase().includes(i.toLowerCase())))},[i,r,s,d,l,h,_]}class on extends ie{constructor(o){super(o),oe(this,o,An,$e,ne,{}),P("SvelteRegisterComponent",{component:this,tagName:"Search",options:o,id:$e.name})}}const fe="src/routes/map/+page.svelte";function Ae(c,o,a){const r=c.slice();return r[5]=o[a].latLng,r[6]=o[a].visible,r[7]=o[a].name,r[8]=o[a].description,r[9]=o[a].photos,r[11]=a,r}function Rt(c,o,a){const r=c.slice();return r[12]=o[a].url,r[13]=o[a].alt,r}function et(c){let o,a;o=new tn({props:{latLng:c[5],width:20,height:20,$$slots:{default:[sn]},$$scope:{ctx:c}},$$inline:!0});const r={c:function(){Le(o.$$.fragment)},l:function(e){ke(o.$$.fragment,e)},m:function(e,t){we(o,e,t),a=!0},p:function(e,t){const n={};t&4&&(n.latLng=e[5]),t&65540&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i:function(e){a||(E(o.$$.fragment,e),a=!0)},o:function(e){z(o.$$.fragment,e),a=!1},d:function(e){Ce(o,e)}};return P("SvelteRegisterBlock",{block:r,id:et.name,type:"if",source:"(39:12) {#if visible}",ctx:c}),r}function tt(c){let o,a=he(c[9]),r=[];for(let e=0;e<a.length;e+=1)r[e]=nt(Rt(c,a,e));const d={c:function(){o=M("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l:function(t){o=b(t,"DIV",{class:!0});var n=A(o);for(let i=0;i<r.length;i+=1)r[i].l(n);n.forEach(v),this.h()},h:function(){p(o,"class","flex flex-row overflow-x-auto"),w(o,fe,46,24,1732)},m:function(t,n){O(t,o,n);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(o,null)},p:function(t,n){if(n&4){a=he(t[9]);let i;for(i=0;i<a.length;i+=1){const s=Rt(t,a,i);r[i]?r[i].p(s,n):(r[i]=nt(s),r[i].c(),r[i].m(o,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}},d:function(t){t&&v(o),un(r,t)}};return P("SvelteRegisterBlock",{block:d,id:tt.name,type:"if",source:"(46:24) {#if photos && photos.length}",ctx:c}),d}function nt(c){let o,a,r;const d={c:function(){o=M("img"),this.h()},l:function(t){o=b(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){X(o.src,a=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${c[12]}`)||p(o,"src",a),p(o,"alt",r=c[13]),p(o,"class","s-_HdLFogMzSo7"),w(o,fe,48,36,1873)},m:function(t,n){O(t,o,n)},p:function(t,n){n&4&&!X(o.src,a=`https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/${t[12]}`)&&p(o,"src",a),n&4&&r!==(r=t[13])&&p(o,"alt",r)},d:function(t){t&&v(o)}};return P("SvelteRegisterBlock",{block:d,id:nt.name,type:"each",source:"(48:32) {#each photos as {url, alt}}",ctx:c}),d}function it(c){let o,a,r=c[8]+"";const d={c:function(){o=M("p"),a=new cn(!1),this.h()},l:function(t){o=b(t,"P",{class:!0});var n=A(o);a=hn(n,!1),n.forEach(v),this.h()},h:function(){a.a=null,p(o,"class","description max-h-32 overflow-y-auto s-_HdLFogMzSo7"),w(o,fe,54,28,2180)},m:function(t,n){O(t,o,n),a.m(r,o)},p:function(t,n){n&4&&r!==(r=t[8]+"")&&a.p(r)},d:function(t){t&&v(o)}};return P("SvelteRegisterBlock",{block:d,id:it.name,type:"if",source:"(54:24) {#if description}",ctx:c}),d}function rn(c){let o,a=c[7]+"",r,d,e,t,n=c[9]&&c[9].length&&tt(c),i=c[8]&&it(c);const s={c:function(){o=M("h3"),r=ht(a),d=N(),n&&n.c(),e=N(),i&&i.c(),t=x(),this.h()},l:function(l){o=b(l,"H3",{});var h=A(o);r=ft(h,a),h.forEach(v),d=V(l),n&&n.l(l),e=V(l),i&&i.l(l),t=x(),this.h()},h:function(){w(o,fe,41,24,1583)},m:function(l,h){O(l,o,h),C(o,r),O(l,d,h),n&&n.m(l,h),O(l,e,h),i&&i.m(l,h),O(l,t,h)},p:function(l,h){h&4&&a!==(a=l[7]+"")&&Zt(r,a),l[9]&&l[9].length?n?n.p(l,h):(n=tt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l[8]?i?i.p(l,h):(i=it(l),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d:function(l){l&&(v(o),v(d),v(e),v(t)),n&&n.d(l),i&&i.d(l)}};return P("SvelteRegisterBlock",{block:s,id:rn.name,type:"slot",source:"(41:20) <Popup>",ctx:c}),s}function sn(c){let o,a,r;o=new nn({props:{$$slots:{default:[rn]},$$scope:{ctx:c}},$$inline:!0});const d={c:function(){Le(o.$$.fragment),a=N()},l:function(t){ke(o.$$.fragment,t),a=V(t)},m:function(t,n){we(o,t,n),O(t,a,n),r=!0},p:function(t,n){const i={};n&65540&&(i.$$scope={dirty:n,ctx:t}),o.$set(i)},i:function(t){r||(E(o.$$.fragment,t),r=!0)},o:function(t){z(o.$$.fragment,t),r=!1},d:function(t){t&&v(a),Ce(o,t)}};return P("SvelteRegisterBlock",{block:d,id:sn.name,type:"slot",source:"(40:16) <Marker {latLng} width={20} height={20}>",ctx:c}),d}function ot(c,o){let a,r,d,e=o[6]&&et(o);const t={key:c,first:null,c:function(){a=x(),e&&e.c(),r=x(),this.h()},l:function(i){a=x(),e&&e.l(i),r=x(),this.h()},h:function(){this.first=a},m:function(i,s){O(i,a,s),e&&e.m(i,s),O(i,r,s),d=!0},p:function(i,s){o=i,o[6]?e?(e.p(o,s),s&4&&E(e,1)):(e=et(o),e.c(),E(e,1),e.m(r.parentNode,r)):e&&(de(),z(e,1,1,()=>{e=null}),_e())},i:function(i){d||(E(e),d=!0)},o:function(i){z(e),d=!1},d:function(i){i&&(v(a),v(r)),e&&e.d(i)}};return P("SvelteRegisterBlock",{block:t,id:ot.name,type:"each",source:"(38:8) {#each $visibleMarkers as { latLng, visible, name, description, photos }",ctx:o}),t}function an(c){let o=[],a=new Map,r,d,e=he(c[2]);const t=i=>i[5].join(",")+"-"+i[11];Te(c,e,Ae,t);for(let i=0;i<e.length;i+=1){let s=Ae(c,e,i),u=t(s);a.set(u,o[i]=ot(u,s))}const n={c:function(){for(let s=0;s<o.length;s+=1)o[s].c();r=x()},l:function(s){for(let u=0;u<o.length;u+=1)o[u].l(s);r=x()},m:function(s,u){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,u);O(s,r,u),d=!0},p:function(s,u){u&4&&(e=he(s[2]),de(),Te(s,e,Ae,t),o=Vt(o,u,t,1,s,e,a,r.parentNode,dn,ot,r,Ae),_e())},i:function(s){if(!d){for(let u=0;u<e.length;u+=1)E(o[u]);d=!0}},o:function(s){for(let u=0;u<o.length;u+=1)z(o[u]);d=!1},d:function(s){s&&v(r);for(let u=0;u<o.length;u+=1)o[u].d(s)}};return P("SvelteRegisterBlock",{block:n,id:an.name,type:"slot",source:"(37:4) <Leaflet view={$currentViewStore} zoom={8}>",ctx:c}),n}function rt(c){let o,a,r,d,e,t,n,i,s;t=new on({$$inline:!0}),t.$on("updateView",c[4]),i=new en({props:{view:c[1],zoom:8,$$slots:{default:[an]},$$scope:{ctx:c}},$$inline:!0});const u={c:function(){o=M("h1"),a=ht("*countermap"),d=N(),e=M("div"),Le(t.$$.fragment),n=N(),Le(i.$$.fragment),this.h()},l:function(h){o=b(h,"H1",{class:!0});var _=A(o);a=ft(_,"*countermap"),_.forEach(v),d=V(h),e=b(h,"DIV",{class:!0});var f=A(e);ke(t.$$.fragment,f),n=V(f),ke(i.$$.fragment,f),f.forEach(v),this.h()},h:function(){p(o,"class",r=St(c[0]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),w(o,fe,31,0,1124),p(e,"class","w-full h-screen"),w(e,fe,34,0,1198)},m:function(h,_){O(h,o,_),C(o,a),O(h,d,_),O(h,e,_),we(t,e,null),C(e,n),we(i,e,null),s=!0},p:function(h,[_]){(!s||_&1&&r!==(r=St(h[0]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&p(o,"class",r);const f={};_&2&&(f.view=h[1]),_&65540&&(f.$$scope={dirty:_,ctx:h}),i.$set(f)},i:function(h){s||(E(t.$$.fragment,h),E(i.$$.fragment,h),s=!0)},o:function(h){z(t.$$.fragment,h),z(i.$$.fragment,h),s=!1},d:function(h){h&&(v(o),v(d),v(e)),Ce(t),Ce(i)}};return P("SvelteRegisterBlock",{block:u,id:rt.name,type:"component",source:"",ctx:c}),u}function In(c,o,a){let r,d,e;K(ye,"darkMode"),J(c,ye,l=>a(0,r=l)),K(Se,"currentViewStore"),J(c,Se,l=>a(1,d=l));let{$$slots:t={},$$scope:n}=o;re("Page",t,[]);const i=Pt([ve,le],([l,h])=>!h||typeof h.contains!="function"?[]:l.filter(_=>{const[f,y]=_.latLng;return h.contains(F.latLng(f,y))}));K(i,"visibleMarkers"),J(c,i,l=>a(2,e=l));function s(l){const{latLng:h}=l.detail;Se.set({lat:h[0],lng:h[1]})}const u=[];return Object.keys(o).forEach(l=>{!~u.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)}),c.$capture_state=()=>({derived:Pt,onMount:te,L:F,Leaflet:en,Marker:tn,Popup:nn,Search:on,markersStore:ve,initialViewStore:mn,currentViewStore:Se,mapBoundsStore:le,darkMode:ye,visibleMarkers:i,handleUpdateView:s,$darkMode:r,$currentViewStore:d,$visibleMarkers:e}),[r,d,e,i,s]}class zn extends ie{constructor(o){super(o),oe(this,o,In,rt,ne,{}),P("SvelteRegisterComponent",{component:this,tagName:"Page",options:o,id:rt.name})}}export{zn as component,Un as universal};
