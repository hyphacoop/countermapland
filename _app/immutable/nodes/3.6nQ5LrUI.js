import{a as pe,v as J,d as Y,$ as me,o as Me,G as At,D as Ee,F as De,c as St,e as T,h as j,j as V,m as D,z as Ft,u as Mt,g as Et,b as It,a0 as Ze,A as fe,f as q,t as re,l as W,k as se,p as qt,w as ue,q as de,a1 as wn,a2 as Ln,n as Ne,C as Wt,r as bn,a3 as Gt}from"../chunks/scheduler.8doqxhoJ.js";import{S as ge,i as ve,d as N,v as ye,b as E,j as B,c as X,t as M,o as x,a as R,k as $,e as S,l as Pe,s as _e,g as ee,h as te,m as ne,n as ie,f as Ve,u as He,w as Xt,x as Qt,p as Kt,q as Jt}from"../chunks/index.B-UXCcAk.js";import{g as Bt,m as Ie,c as Be}from"../chunks/object-view.HoUL2Upa.js";import{d as zt}from"../chunks/index.XXZ5sPHA.js";import{o as kn,t as be,p as Oe,q as qe,d as le,r as We,u as Xe,v as ce,L as K,T as Rt,w as Ae,a as Ce,b as Tt,x as Qe,y as jt,z as Dt,A as Zt,C as Cn,D as Ke,E as Je,F as Se,I as Yt,G as xe,H as xt,S as $t,m as Nt,f as $e,g as en,M as tn,h as nn,B as on,k as rn,n as sn,c as ze,s as Ue,e as Ye,j as an}from"../chunks/ToolsSidebar.qTdQf8zr.js";const Pn=!1,qn=Object.freeze(Object.defineProperty({__proto__:null,ssr:Pn},Symbol.toStringTag,{value:"Module"}));var Vt={exports:{}};(function(s,n){(function(r,a){a(n)})(kn,function(r){var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var i,o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,h=this.options.chunkInterval,f=this.options.chunkProgress,_=e.length,d=0,w=!0;if(this._map){var k=new Date().getTime(),g=L.bind(function(){var Z=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();d<_;d++){if(c&&d%200==0){var U=new Date().getTime()-Z;if(h<U)break}if((i=e[d])instanceof L.LayerGroup)w&&(e=e.slice(),w=!1),this._extractNonGroupLayers(i,e),_=e.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),t||this.fire("layeradd",{layer:i}),i.__parent&&i.__parent.getChildCount()===2)){var z=i.__parent.getAllChildMarkers(),F=z[0]===i?z[1]:z[0];o.removeLayer(F)}}else l.addLayer(i),t||this.fire("layeradd",{layer:i})}f&&f(d,_,new Date().getTime()-k),d===_?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(g,this.options.chunkDelay)},this);g()}else for(var v=this._needsClustering;d<_;d++)(i=e[d])instanceof L.LayerGroup?(w&&(e=e.slice(),w=!1),this._extractNonGroupLayers(i,e),_=e.length):i.getLatLng?this.hasLayer(i)||v.push(i):l.addLayer(i);return this},removeLayers:function(e){var t,i,o=e.length,l=this._featureGroup,c=this._nonPointGroup,h=!0;if(!this._map){for(t=0;t<o;t++)(i=e[t])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(i,e),o=e.length):(this._arraySplice(this._needsClustering,i),c.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var f=e.slice(),_=o;for(t=0;t<_;t++)(i=f[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,f),_=f.length):this._unspiderfyLayer(i)}for(t=0;t<o;t++)(i=e[t])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(i,e),o=e.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),l.hasLayer(i)&&(l.removeLayer(i),i.clusterShow&&i.clusterShow())):(c.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i,o,l,c=this._needsClustering.slice(),h=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),o=c.length-1;0<=o;o--){for(i=!0,l=h.length-1;0<=l;l--)if(h[l].layer===c[o]){i=!1;break}i&&e.call(t,c[o])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(i){L.stamp(i)===e&&(t=i)}),t},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;0<=t;t--)if(i[t]===e)return!0;for(t=(i=this._needsRemoving).length-1;0<=t;t--)if(i[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var i=this._map;typeof t!="function"&&(t=function(){});var o=function(){!i.hasLayer(e)&&!i.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",o,this),this.off("animationend",o,this),i.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,i,o;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;t<i;t++)(o=this._needsRemoving[t]).newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(t=0,i=this._needsRemoving.length;t<i;t++)o=this._needsRemoving[t],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;0<=i;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,o=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());l<=t&&o[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,i){var o=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,h=this._map,f=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var _,d=e.__parent,w=d._markers;for(this._arraySplice(w,e);d&&(d._childCount--,d._boundsNeedUpdate=!0,!(d._zoom<f));)t&&d._childCount<=1?(_=d._markers[0]===e?d._markers[1]:d._markers[0],o[d._zoom].removeObject(d,h.project(d._cLatLng,d._zoom)),l[d._zoom].addObject(_,h.project(_.getLatLng(),d._zoom)),this._arraySplice(d.__parent._childClusters,d),d.__parent._markers.push(_),_.__parent=d.__parent,d._icon&&(c.removeLayer(d),i||c.addLayer(_))):d._iconNeedsUpdate=!0,d=d.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return i+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||o||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,i=t;if(e.type!=="clusterkeypress"||!e.originalEvent||e.originalEvent.keyCode===13){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,l=this._map;(e||i||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,o=i;typeof i!="function"&&(o=function(){return i}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;t<=l;l--)this._gridClusters[l]=new L.DistanceGrid(o(l)),this._gridUnclustered[l]=new L.DistanceGrid(o(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i,o,l=this._gridClusters,c=this._gridUnclustered,h=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);h<=t;t--){i=this._map.project(e.getLatLng(),t);var f=l[t].getNearObject(i);if(f)return f._addChild(e),void(e.__parent=f);if(f=c[t].getNearObject(i)){var _=f.__parent;_&&this._removeLayer(f,!1);var d=new this._markerCluster(this,t,f,e);l[t].addObject(d,this._map.project(d._cLatLng,t)),f.__parent=d;var w=e.__parent=d;for(o=t-1;o>_._zoom;o--)w=new this._markerCluster(this,o,w),l[o].addObject(w,this._map.project(f.getLatLng(),o));return _._addChild(w),void this._removeFromGridUnclustered(f,t)}c[t].addObject(e,i)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i,o=e.getLayers(),l=0;for(t=t||[];l<o.length;l++)(i=o[l])instanceof L.LayerGroup?this._extractNonGroupLayers(i,t):t.push(i);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var i,o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,e,c,function(h){var f,_=h._latlng,d=h._markers;for(o.contains(_)||(_=null),h._isSingleParent()&&e+1===t?(l.removeLayer(h),h._recursivelyAddChildrenToMap(null,t,o)):(h.clusterHide(),h._recursivelyAddChildrenToMap(_,t,o)),i=d.length-1;0<=i;i--)f=d[i],o.contains(f._latlng)||l.removeLayer(f)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,t),l.eachLayer(function(h){h instanceof L.MarkerCluster||!h._icon||h.clusterShow()}),this._topClusterLevel._recursively(o,e,t,function(h){h._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,e,c,function(h){l.removeLayer(h),h.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,o=this._featureGroup;o.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){o.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,i){var o=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,l,t+1,i);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(o,i),this._enqueue(function(){if(e._childCount===1){var h=e._markers[0];this._ignoreMove=!0,h.setLatLng(h.getLatLng()),this._ignoreMove=!1,h.clusterShow&&h.clusterShow()}else e._recursively(o,i,l,function(f){f._recursivelyRemoveChildrenFromMap(o,l,t+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var u=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,i,o){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),o&&this._addChild(o)},getAllChildMarkers:function(e,t){e=e||[];for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i].getAllChildMarkers(e,t);for(var o=this._markers.length-1;0<=o;o--)t&&this._markers[o].__dragStart||e.push(this._markers[o]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,i=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,h=o.getZoom();0<i.length&&c<l;){c++;var f=[];for(t=0;t<i.length;t++)f=f.concat(i[t]._childClusters);i=f}c<l?this._group._map.setView(this._latlng,c):l<=h?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,i,o,l=this._markers,c=this._childClusters,h=0,f=0,_=this._childCount;if(_!==0){for(this._resetBounds(),e=0;e<l.length;e++)i=l[e]._latlng,this._bounds.extend(i),h+=i.lat,f+=i.lng;for(e=0;e<c.length;e++)(t=c[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),i=t._wLatLng,o=t._childCount,h+=i.lat*o,f+=i.lng*o;this._latlng=this._wLatLng=new L.LatLng(h/_,f/_),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,i){this._recursively(e,this._group._map.getMinZoom(),i-1,function(o){var l,c,h=o._markers;for(l=h.length-1;0<=l;l--)(c=h[l])._icon&&(c._setPos(t),c.clusterHide())},function(o){var l,c,h=o._childClusters;for(l=h.length-1;0<=l;l--)(c=h[l])._icon&&(c._setPos(t),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,o){this._recursively(e,o,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),i),l._isSingleParent()&&i-1===o?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,i)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(o){if(t!==o._zoom)for(var l=o._markers.length-1;0<=l;l--){var c=o._markers[l];i.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),o._group._featureGroup.addLayer(c))}},function(o){o._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._restorePosition();else for(var l=this._childClusters.length-1;0<=l;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,o){var l,c;this._recursively(e,t-1,i-1,function(h){for(c=h._markers.length-1;0<=c;c--)l=h._markers[c],o&&o.contains(l._latlng)||(h._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(h){for(c=h._childClusters.length-1;0<=c;c--)l=h._childClusters[c],o&&o.contains(l._latlng)||(h._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,i,o,l){var c,h,f=this._childClusters,_=this._zoom;if(t<=_&&(o&&o(this),l&&_===i&&l(this)),_<t||_<i)for(c=f.length-1;0<=c;c--)(h=f[c])._boundsNeedUpdate&&h._recalculateBounds(),e.intersects(h._bounds)&&h._recursively(e,t,i,o,l)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),o=this._getCoord(t.y),l=this._grid,c=l[o]=l[o]||{},h=c[i]=c[i]||[],f=L.Util.stamp(e);this._objectPoint[f]=t,h.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i,o,l=this._getCoord(t.x),c=this._getCoord(t.y),h=this._grid,f=h[c]=h[c]||{},_=f[l]=f[l]||[];for(delete this._objectPoint[L.Util.stamp(e)],i=0,o=_.length;i<o;i++)if(_[i]===e)return _.splice(i,1),o===1&&delete f[l],!0},eachObject:function(e,t){var i,o,l,c,h,f,_=this._grid;for(i in _)for(o in h=_[i])for(l=0,c=(f=h[o]).length;l<c;l++)e.call(t,f[l])&&(l--,c--)},getNearObject:function(e){var t,i,o,l,c,h,f,_,d=this._getCoord(e.x),w=this._getCoord(e.y),k=this._objectPoint,g=this._sqCellSize,v=null;for(t=w-1;t<=w+1;t++)if(l=this._grid[t]){for(i=d-1;i<=d+1;i++)if(c=l[i])for(o=0,h=c.length;o<h;o++)f=c[o],((_=this._sqDist(k[L.Util.stamp(f)],e))<g||_<=g&&v===null)&&(g=_,v=f)}return v},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o}},L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i,o,l,c=0,h=null,f=[];for(i=t.length-1;0<=i;i--)o=t[i],0<(l=this.getDistant(o,e))&&(f.push(o),c<l&&(c=l,h=o));return{maxPoint:h,newPoints:f}},buildConvexHull:function(e,t){var i=[],o=this.findMostDistantPointFromBaseLine(e,t);return o.maxPoint?i=(i=i.concat(this.buildConvexHull([e[0],o.maxPoint],o.newPoints))).concat(this.buildConvexHull([o.maxPoint,e[1]],o.newPoints)):[e[0]]},getConvexHull:function(e){var t,i=!1,o=!1,l=!1,c=!1,h=null,f=null,_=null,d=null,w=null,k=null;for(t=e.length-1;0<=t;t--){var g=e[t];(i===!1||g.lat>i)&&(i=(h=g).lat),(o===!1||g.lat<o)&&(o=(f=g).lat),(l===!1||g.lng>l)&&(l=(_=g).lng),(c===!1||g.lng<c)&&(c=(d=g).lng)}return w=o!==i?(k=f,h):(k=d,_),[].concat(this.buildConvexHull([k,w],e),this.buildConvexHull([w,k],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),o=[];for(t=i.length-1;0<=t;t--)e=i[t].getLatLng(),o.push(e);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,i):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,i):(i.y+=10,this._generatePointsCircle(t.length,i)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i,o,l=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,c=this._2PI/e,h=[];for(l=Math.max(l,35),h.length=e,i=0;i<e;i++)o=this._circleStartAngle+i*c,h[i]=new L.Point(t.x+l*Math.cos(o),t.y+l*Math.sin(o))._round();return h},_generatePointsSpiral:function(e,t){var i,o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,h=o*this._spiralLengthFactor*this._2PI,f=0,_=[];for(i=_.length=e;0<=i;i--)i<e&&(_[i]=new L.Point(t.x+l*Math.cos(f),t.y+l*Math.sin(f))._round()),l+=h/(f+=c/l+5e-4*i);return _},_noanimationUnspiderfy:function(){var e,t,i=this._group,o=i._map,l=i._featureGroup,c=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),t=c.length-1;0<=t;t--)e=c[t],l.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(o.removeLayer(e._spiderLeg),delete e._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:c}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i,o,l,c,h=this._group,f=h._map,_=h._featureGroup,d=this._group.options.spiderLegPolylineOptions;for(h._ignoreMove=!0,i=0;i<e.length;i++)c=f.layerPointToLatLng(t[i]),o=e[i],l=new L.Polyline([this._latlng,c],d),f.addLayer(l),o._spiderLeg=l,o._preSpiderfyLatlng=o._latlng,o.setLatLng(c),o.setZIndexOffset&&o.setZIndexOffset(1e6),_.addLayer(o);this.setOpacity(.3),h._ignoreMove=!1,h.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,o,l,c,h,f,_=this,d=this._group,w=d._map,k=d._featureGroup,g=this._latlng,v=w.latLngToLayerPoint(g),Z=L.Path.SVG,U=L.extend({},this._group.options.spiderLegPolylineOptions),z=U.opacity;for(z===void 0&&(z=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),Z?(U.opacity=0,U.className=(U.className||"")+" leaflet-cluster-spider-leg"):U.opacity=z,d._ignoreMove=!0,i=0;i<e.length;i++)o=e[i],f=w.layerPointToLatLng(t[i]),l=new L.Polyline([g,f],U),w.addLayer(l),o._spiderLeg=l,Z&&(h=(c=l._path).getTotalLength()+.1,c.style.strokeDasharray=h,c.style.strokeDashoffset=h),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),k.addLayer(o),o._setPos&&o._setPos(v);for(d._forceLayout(),d._animationStart(),i=e.length-1;0<=i;i--)f=w.layerPointToLatLng(t[i]),(o=e[i])._preSpiderfyLatlng=o._latlng,o.setLatLng(f),o.clusterShow&&o.clusterShow(),Z&&((c=(l=o._spiderLeg)._path).style.strokeDashoffset=0,l.setStyle({opacity:z}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:_,markers:e})},200)},_animationUnspiderfy:function(e){var t,i,o,l,c,h,f=this,_=this._group,d=_._map,w=_._featureGroup,k=e?d._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):d.latLngToLayerPoint(this._latlng),g=this.getAllChildMarkers(null,!0),v=L.Path.SVG;for(_._ignoreMove=!0,_._animationStart(),this.setOpacity(1),i=g.length-1;0<=i;i--)(t=g[i])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,h=!0,t._setPos&&(t._setPos(k),h=!1),t.clusterHide&&(t.clusterHide(),h=!1),h&&w.removeLayer(t),v&&(c=(l=(o=t._spiderLeg)._path).getTotalLength()+.1,l.style.strokeDashoffset=c,o.setStyle({opacity:0})));_._ignoreMove=!1,setTimeout(function(){var Z=0;for(i=g.length-1;0<=i;i--)(t=g[i])._spiderLeg&&Z++;for(i=g.length-1;0<=i;i--)(t=g[i])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<Z&&w.removeLayer(t),d.removeLayer(t._spiderLeg),delete t._spiderLeg);_._animationEnd(),_.fire("unspiderfied",{cluster:f,markers:g})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),r.MarkerClusterGroup=a,r.MarkerCluster=u,Object.defineProperty(r,"__esModule",{value:!0})})})(Vt,Vt.exports);const{Error:ke,console:Sn}=Bt,Mn="src/lib/Map/Leaflet.svelte";function et(s){let n;const r=s[15].default,a=St(r,s,s[14],null),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,i){a&&a.m(t,i),n=!0},p:function(t,i){a&&a.p&&(!n||i&16384)&&Mt(a,r,t,t[14],n?It(r,t[14],i,null):Et(t[14]),null)},i:function(t){n||(M(a,t),n=!0)},o:function(t){R(a,t),n=!1},d:function(t){a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:et.name,type:"if",source:"(268:2) {#if map}",ctx:s}),u}function tt(s){let n,r,a=s[0]&&et(s);const u={c:function(){n=T("div"),a&&a.c(),this.h()},l:function(t){n=j(t,"DIV",{class:!0});var i=V(n);a&&a.l(i),i.forEach(E),this.h()},h:function(){B(n,"class","w-full h-full"),D(n,Mn,266,0,7231)},m:function(t,i){X(t,n,i),a&&a.m(n,null),s[16](n),r=!0},p:function(t,[i]){t[0]?a?(a.p(t,i),i&1&&M(a,1)):(a=et(t),a.c(),M(a,1),a.m(n,null)):a&&(x(),R(a,1,1,()=>{a=null}),$())},i:function(t){r||(M(a),r=!0)},o:function(t){R(a),r=!1},d:function(t){t&&E(n),a&&a.d(),s[16](null)}};return N("SvelteRegisterBlock",{block:u,id:tt.name,type:"component",source:"",ctx:s}),u}function En(s,n,r){let a,u,e,t,i,o,l;J(be,"territoriesVisible"),Y(s,be,m=>r(7,a=m)),J(Oe,"filteredStore"),Y(s,Oe,m=>r(8,u=m)),J(qe,"filtersActive"),Y(s,qe,m=>r(9,e=m)),J(le,"currentSidebar"),Y(s,le,m=>r(10,t=m)),J(We,"currentMapStyleId"),Y(s,We,m=>r(11,i=m)),J(Xe,"currentMapStyleIndex"),Y(s,Xe,m=>r(12,o=m)),J(ce,"darkMode"),Y(s,ce,m=>r(13,l=m));let{$$slots:c={},$$scope:h}=n;ye("Leaflet",c,["default"]);let{bounds:f=void 0}=n,{view:_=void 0}=n,{zoom:d=void 0}=n;const w=me();let k,g,v,Z=null,U=null,z,F,G=null;async function A(m){if(!G)try{G=await(await fetch("https://native-land.ca/wp-json/nativeland/v1/api/index.php?maps=territories")).json(),Z=await Dt(m,G),U=await Zt(m,G)}catch(b){console.error("Error fetching territories data:",b)}}const C=K.Control.extend({onAdd(m){const b=K.DomUtil.create("div","map-toolbar-container");return new Rt({target:b,props:{mapInstance:m}}),b}});Me(()=>{if(!f&&(!_||!d))throw new Error("Must set either bounds, or view and zoom.");r(0,k=K.map(g,{maxZoom:18,zoomControl:!1}));const m=K.markerClusterGroup({disableClusteringAtZoom:10,spiderfyOnMaxZoom:!1});k.addLayer(m),Ae.set(m),f?(k.fitBounds(f),Ce.set(f)):_&&d&&k.setView(_,d),k.whenReady(()=>{if(!f){const b=k.getBounds();Ce.set(b)}Tt.set(k),r(5,v=new Qe({Language:"fr",style:K.MaptilerStyle.SATELLITE,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(k)),new C({position:"topright"}).addTo(k)}),k.on("click",function(b){t==="submissions"&&(jt.set(b.latlng),z&&k.removeLayer(z),r(6,z=K.marker([b.latlng.lat,b.latlng.lng],{icon:F}).addTo(k)))}).on("zoom",b=>w("zoom",b)).on("moveend",()=>{const b=k.getBounds();Ce.set(b)}).on("popupopen",async b=>{b.popup.update(),await At()})});function y(){console.log("Adding territories"),k&&(!Z||!U?A(k):(k.addLayer(Z),k.addLayer(U)))}function I(){k&&(Z&&k.removeLayer(Z),U&&k.removeLayer(U),console.log("Territories removed"))}Ee(()=>{k==null||k.remove(),r(0,k=void 0),I()}),De("map",{getMap:()=>k});function p(m){k&&v&&(k.removeLayer(v),r(5,v=new Qe({style:m,apiKey:"mPMxMiVPDDH0atXxMfF6"}).addTo(k)))}const P=["bounds","view","zoom"];Object.keys(n).forEach(m=>{!~P.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&Sn.warn(`<Leaflet> was created with unknown prop '${m}'`)});function H(m){Ft[m?"unshift":"push"](()=>{g=m,r(1,g)})}return s.$$set=m=>{"bounds"in m&&r(2,f=m.bounds),"view"in m&&r(3,_=m.view),"zoom"in m&&r(4,d=m.zoom),"$$scope"in m&&r(14,h=m.$$scope)},s.$capture_state=()=>({onMount:Me,onDestroy:Ee,setContext:De,createEventDispatcher:me,tick:At,L:K,addTerritoriesLayer:Dt,addTerritoriesLabels:Zt,MaptilerLayer:Qe,MaptilerStyle:Cn,pinSvg:Ke,Toolbar:Rt,currentMapStyleId:We,currentMapStyleIndex:Xe,mapBoundsStore:Ce,territoriesVisible:be,clusterGroupStore:Ae,darkMode:ce,currentSidebar:le,filteredStore:Oe,filtersActive:qe,userLatLng:jt,mapInstanceStore:Tt,bounds:f,view:_,zoom:d,dispatch:w,map:k,mapElement:g,mtLayer:v,territoriesLayer:Z,labelsLayer:U,marker:z,icon:F,territoriesData:G,initializeTerritories:A,ToolbarControl:C,addTerritories:y,removeTerritories:I,updateMapStyle:p,$territoriesVisible:a,$filteredStore:u,$filtersActive:e,$currentSidebar:t,$currentMapStyleId:i,$currentMapStyleIndex:o,$darkMode:l}),s.$inject_state=m=>{"bounds"in m&&r(2,f=m.bounds),"view"in m&&r(3,_=m.view),"zoom"in m&&r(4,d=m.zoom),"map"in m&&r(0,k=m.map),"mapElement"in m&&r(1,g=m.mapElement),"mtLayer"in m&&r(5,v=m.mtLayer),"territoriesLayer"in m&&(Z=m.territoriesLayer),"labelsLayer"in m&&(U=m.labelsLayer),"marker"in m&&r(6,z=m.marker),"icon"in m&&(F=m.icon),"territoriesData"in m&&(G=m.territoriesData)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{if(s.$$.dirty&8192){let m=l==="dark"?`<div style="width: 30px; height: 40px; filter: invert(100%);">
        <img src="${Ke}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`:`<div style="width: 30px; height: 40px;">
        <img src="${Ke}" alt="Monument Marker" style="width: 100%; height: 100%;" />
      </div>`;F=K.divIcon({html:m,className:"map-marker",iconSize:K.point(25,65)})}if(s.$$.dirty&1089&&t!=="submissions"&&z&&(k.removeLayer(z),r(6,z=null)),s.$$.dirty&29&&k&&(f?k.fitBounds(f):_&&d&&k.setView(_,d)),s.$$.dirty&6177&&i&&(o===2?(be.set(!0),ce.set("light"),console.log("setting territoriesVisible to true")):o===0?(be.set(!1),ce.set("dark")):(be.set(!1),ce.set("light")),k&&v&&p(i)),s.$$.dirty&1793&&k&&t==="tools"&&u.length>0&&e){const m=K.latLngBounds(u.map(b=>K.latLng(b.latLng)));k.fitBounds(m,{padding:[50,50]})}s.$$.dirty&128&&(a?y():I())},[k,g,f,_,d,v,z,a,u,e,t,i,o,l,h,c,H]}class ln extends ge{constructor(n){super(n),ve(this,n,En,tt,pe,{bounds:2,view:3,zoom:4}),N("SvelteRegisterComponent",{component:this,tagName:"Leaflet",options:n,id:tt.name})}get bounds(){throw new ke("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bounds(n){throw new ke("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new ke("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(n){throw new ke("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get zoom(){throw new ke("<Leaflet>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set zoom(n){throw new ke("<Leaflet>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function nt(s){let n;const r=s[8].default,a=St(r,s,s[7],null),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,i){a&&a.m(t,i),n=!0},p:function(t,i){a&&a.p&&(!n||i&128)&&Mt(a,r,t,t[7],n?It(r,t[7],i,null):Et(t[7]),null)},i:function(t){n||(M(a,t),n=!0)},o:function(t){R(a,t),n=!1},d:function(t){a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:nt.name,type:"if",source:"(73:0) {#if marker}",ctx:s}),u}function it(s){let n,r,a=s[0]&&nt(s);const u={c:function(){a&&a.c(),n=fe()},l:function(t){a&&a.l(t),n=fe()},m:function(t,i){a&&a.m(t,i),X(t,n,i),r=!0},p:function(t,[i]){t[0]?a?(a.p(t,i),i&1&&M(a,1)):(a=nt(t),a.c(),M(a,1),a.m(n.parentNode,n)):a&&(x(),R(a,1,1,()=>{a=null}),$())},i:function(t){r||(M(a),r=!0)},o:function(t){R(a),r=!1},d:function(t){t&&E(n),a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:it.name,type:"component",source:"",ctx:s}),u}function In(s,n,r){let a,u;J(Ae,"clusterGroupStore"),Y(s,Ae,w=>r(5,a=w)),J(Je,"isMarkersVisible"),Y(s,Je,w=>r(6,u=w));let{$$slots:e={},$$scope:t}=n;ye("Marker",e,["default"]);let{width:i}=n,{height:o}=n,{latLng:l}=n,{challengesPower:c=!1}=n,h,f=Ze("map").getMap();De("layer",{getLayer:()=>h});function _(w){const k=c?Be:Ie;let g=w==="dark"?`<div style="width: ${i}px; height: ${o}px; filter: invert(100%);">
          <img src="${k}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`:`<div style="width: ${i}px; height: ${o}px;">
          <img src="${k}" alt="Monument Marker" style="width: 100%; height: 100%;" />
        </div>`,v=K.divIcon({html:g,className:"map-marker",iconSize:K.point(i,o)});h?(a.removeLayer(h),h.setIcon(v)):r(0,h=K.marker(l,{icon:v})),a.addLayer(h)}Me(()=>{f&&a&&ce.subscribe(w=>{_(w)})}),Ee(()=>{h&&a&&(a.removeLayer(h),h.remove(),r(0,h=void 0))}),s.$$.on_mount.push(function(){i===void 0&&!("width"in n||s.$$.bound[s.$$.props.width])&&console.warn("<Marker> was created without expected prop 'width'"),o===void 0&&!("height"in n||s.$$.bound[s.$$.props.height])&&console.warn("<Marker> was created without expected prop 'height'"),l===void 0&&!("latLng"in n||s.$$.bound[s.$$.props.latLng])&&console.warn("<Marker> was created without expected prop 'latLng'")});const d=["width","height","latLng","challengesPower"];return Object.keys(n).forEach(w=>{!~d.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&console.warn(`<Marker> was created with unknown prop '${w}'`)}),s.$$set=w=>{"width"in w&&r(1,i=w.width),"height"in w&&r(2,o=w.height),"latLng"in w&&r(3,l=w.latLng),"challengesPower"in w&&r(4,c=w.challengesPower),"$$scope"in w&&r(7,t=w.$$scope)},s.$capture_state=()=>({onMount:Me,onDestroy:Ee,getContext:Ze,setContext:De,darkMode:ce,clusterGroupStore:Ae,isMarkersVisible:Je,L:K,monumentSvg:Ie,countermonumentSvg:Be,width:i,height:o,latLng:l,challengesPower:c,marker:h,mapInstance:f,createOrUpdateMarker:_,$clusterGroupStore:a,$isMarkersVisible:u}),s.$inject_state=w=>{"width"in w&&r(1,i=w.width),"height"in w&&r(2,o=w.height),"latLng"in w&&r(3,l=w.latLng),"challengesPower"in w&&r(4,c=w.challengesPower),"marker"in w&&r(0,h=w.marker),"mapInstance"in w&&(f=w.mapInstance)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{s.$$.dirty&97&&h&&a&&(u?a.addLayer(h):a.removeLayer(h))},[h,i,o,l,c,a,u,t,e]}class cn extends ge{constructor(n){super(n),ve(this,n,In,it,pe,{width:1,height:2,latLng:3,challengesPower:4}),N("SvelteRegisterComponent",{component:this,tagName:"Marker",options:n,id:it.name})}get width(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get latLng(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set latLng(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengesPower(){throw new Error("<Marker>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengesPower(n){throw new Error("<Marker>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Bn="src/lib/Map/Popup.svelte",Un=s=>({popup:s&1}),Ht=s=>({popup:s[0]});function ot(s){let n;const r=s[4].default,a=St(r,s,s[3],Ht),u={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,i){a&&a.m(t,i),n=!0},p:function(t,i){a&&a.p&&(!n||i&9)&&Mt(a,r,t,t[3],n?It(r,t[3],i,Un):Et(t[3]),Ht)},i:function(t){n||(M(a,t),n=!0)},o:function(t){R(a,t),n=!1},d:function(t){a&&a.d(t)}};return N("SvelteRegisterBlock",{block:u,id:ot.name,type:"if",source:"(47:2) {#if open}",ctx:s}),u}function rt(s){let n,r,a=s[2]&&ot(s);const u={c:function(){n=T("div"),a&&a.c(),this.h()},l:function(t){n=j(t,"DIV",{class:!0});var i=V(n);a&&a.l(i),i.forEach(E),this.h()},h:function(){B(n,"class","popPadding s-vUHHe_W0o0FW"),D(n,Bn,45,0,857)},m:function(t,i){X(t,n,i),a&&a.m(n,null),s[5](n),r=!0},p:function(t,[i]){t[2]?a?(a.p(t,i),i&4&&M(a,1)):(a=ot(t),a.c(),M(a,1),a.m(n,null)):a&&(x(),R(a,1,1,()=>{a=null}),$())},i:function(t){r||(M(a),r=!0)},o:function(t){R(a),r=!1},d:function(t){t&&E(n),a&&a.d(),s[5](null)}};return N("SvelteRegisterBlock",{block:u,id:rt.name,type:"component",source:"",ctx:s}),u}function On(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("Popup",a,["default"]);let e,t,i=!1;const o=Ze("layer"),l=o.getLayer();Me(()=>{r(0,e=K.popup().setContent(t)),e._initLayout(),l&&(l.bindPopup(e),l.on("popupopen",()=>{r(2,i=!0),Se.set(!0)}),l.on("popupclose",()=>{r(2,i=!1),Se.set(!1)}))}),Ee(()=>{l&&l.unbindPopup(),e&&(e.remove(),r(0,e=void 0))});const c=[];Object.keys(n).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Popup> was created with unknown prop '${f}'`)});function h(f){Ft[f?"unshift":"push"](()=>{t=f,r(1,t)})}return s.$$set=f=>{"$$scope"in f&&r(3,u=f.$$scope)},s.$capture_state=()=>({onMount:Me,onDestroy:Ee,getContext:Ze,L:K,isPopupOpen:Se,popup:e,popupElement:t,open:i,layerContext:o,layer:l}),s.$inject_state=f=>{"popup"in f&&r(0,e=f.popup),"popupElement"in f&&r(1,t=f.popupElement),"open"in f&&r(2,i=f.open)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[e,t,i,u,a,h]}class un extends ge{constructor(n){super(n),ve(this,n,On,rt,pe,{}),N("SvelteRegisterComponent",{component:this,tagName:"Popup",options:n,id:rt.name})}}const oe="src/lib/Map/PopupContent.svelte";function st(s){let n,r;n=new Yt({props:{photos:s[6],baseUrl:s[7]},$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t&64&&(i.photos=e[6]),t&128&&(i.baseUrl=e[7]),n.$set(i)},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:st.name,type:"if",source:"(28:2) {#if photos && photos.length}",ctx:s}),a}function at(s){let n,r;const a={c:function(){n=T("h3"),r=re(s[3]),this.h()},l:function(e){n=j(e,"H3",{});var t=V(n);r=se(t,s[3]),t.forEach(E),this.h()},h:function(){D(n,oe,34,8,988)},m:function(e,t){X(e,n,t),S(n,r)},p:function(e,t){t&8&&_e(r,e[3])},d:function(e){e&&E(n)}};return N("SvelteRegisterBlock",{block:a,id:at.name,type:"if",source:"(34:6) {#if municipality && municipality !== 'null' && municipality !== 'undefined'}",ctx:s}),a}function lt(s){let n,r,a;const u={c:function(){n=T("div"),r=T("p"),a=new wn(!1),this.h()},l:function(t){n=j(t,"DIV",{class:!0});var i=V(n);r=j(i,"P",{class:!0});var o=V(r);a=Ln(o,!1),o.forEach(E),i.forEach(E),this.h()},h:function(){a.a=null,B(r,"class","description"),D(r,oe,48,8,1464),B(n,"class","text-truncate"),D(n,oe,47,6,1428)},m:function(t,i){X(t,n,i),S(n,r),a.m(s[5],r)},p:function(t,i){i&32&&a.p(t[5])},d:function(t){t&&E(n)}};return N("SvelteRegisterBlock",{block:u,id:lt.name,type:"if",source:"(47:4) {#if description}",ctx:s}),u}function ct(s){let n,r,a,u,e,t,i,o,l,c,h,f,_,d,w,k,g,v,Z,U,z,F="learn more",G,A,C,y=s[6]&&s[6].length&&st(s),I=s[3]&&s[3]!=="null"&&s[3]!=="undefined"&&at(s),p=s[5]&&lt(s);const P={c:function(){y&&y.c(),n=q(),r=T("div"),a=T("div"),u=T("h2"),e=re(s[2]),t=q(),I&&I.c(),i=q(),o=T("div"),l=T("div"),c=re("#"),h=re(s[4]),f=q(),_=T("div"),d=T("img"),g=q(),v=T("div"),p&&p.c(),Z=q(),U=T("div"),z=T("button"),z.textContent=F,this.h()},l:function(m){y&&y.l(m),n=W(m),r=j(m,"DIV",{class:!0});var b=V(r);a=j(b,"DIV",{class:!0});var O=V(a);u=j(O,"H2",{});var Q=V(u);e=se(Q,s[2]),Q.forEach(E),t=W(O),I&&I.l(O),O.forEach(E),i=W(b),o=j(b,"DIV",{class:!0});var he=V(o);l=j(he,"DIV",{class:!0});var Le=V(l);c=se(Le,"#"),h=se(Le,s[4]),Le.forEach(E),f=W(he),_=j(he,"DIV",{style:!0});var Ut=V(_);d=j(Ut,"IMG",{src:!0,alt:!0,style:!0}),Ut.forEach(E),he.forEach(E),b.forEach(E),g=W(m),v=j(m,"DIV",{class:!0});var Ge=V(v);p&&p.l(Ge),Z=W(Ge),U=j(Ge,"DIV",{class:!0});var Ot=V(U);z=j(Ot,"BUTTON",{class:!0,"data-svelte-h":!0}),qt(z)!=="svelte-1h1xepw"&&(z.textContent=F),Ot.forEach(E),Ge.forEach(E),this.h()},h:function(){D(u,oe,32,6,880),B(a,"class","flex flex-col items-start"),D(a,oe,31,4,834),B(l,"class","monument-id"),D(l,oe,38,8,1088),ue(d.src,w=s[10])||B(d,"src",w),B(d,"alt","Monument Marker"),B(d,"style",k="width: 100%; height: 100%; "+(s[8]?"margin-left:5px":"")),D(d,oe,40,12,1197),de(_,"width",s[0]+"px"),de(_,"height",s[1]+"px"),D(_,oe,39,8,1133),B(o,"class","flex flex-row items-center"),D(o,oe,37,4,1039),B(r,"class","flex flex-row items-center"),D(r,oe,30,2,789),B(z,"class","learn-more-button"),D(z,oe,52,6,1579),B(U,"class","learn-more-container"),D(U,oe,51,4,1538),B(v,"class","description-container"),D(v,oe,45,2,1364)},m:function(m,b){y&&y.m(m,b),X(m,n,b),X(m,r,b),S(r,a),S(a,u),S(u,e),S(a,t),I&&I.m(a,null),S(r,i),S(r,o),S(o,l),S(l,c),S(l,h),S(o,f),S(o,_),S(_,d),X(m,g,b),X(m,v,b),p&&p.m(v,null),S(v,Z),S(v,U),S(U,z),G=!0,A||(C=Pe(z,"click",s[9],!1,!1,!1,!1),A=!0)},p:function(m,[b]){m[6]&&m[6].length?y?(y.p(m,b),b&64&&M(y,1)):(y=st(m),y.c(),M(y,1),y.m(n.parentNode,n)):y&&(x(),R(y,1,1,()=>{y=null}),$()),(!G||b&4)&&_e(e,m[2]),m[3]&&m[3]!=="null"&&m[3]!=="undefined"?I?I.p(m,b):(I=at(m),I.c(),I.m(a,null)):I&&(I.d(1),I=null),(!G||b&16)&&_e(h,m[4]),(!G||b&256&&k!==(k="width: 100%; height: 100%; "+(m[8]?"margin-left:5px":"")))&&B(d,"style",k),(!G||b&1)&&de(_,"width",m[0]+"px"),(!G||b&2)&&de(_,"height",m[1]+"px"),m[5]?p?p.p(m,b):(p=lt(m),p.c(),p.m(v,Z)):p&&(p.d(1),p=null)},i:function(m){G||(M(y),G=!0)},o:function(m){R(y),G=!1},d:function(m){m&&(E(n),E(r),E(g),E(v)),y&&y.d(m),I&&I.d(),p&&p.d(),A=!1,C()}};return N("SvelteRegisterBlock",{block:P,id:ct.name,type:"component",source:"",ctx:s}),P}function An(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("PopupContent",a,[]);let{width:e}=n,{height:t}=n,{name:i}=n,{municipality:o}=n,{id:l}=n,{description:c}=n,{photos:h}=n,{baseUrl:f}=n,{challengesPower:_}=n;const d=me();function w(v){d("closeAndShowDetails",{id:l,event:v})}const k=_?Be:Ie;s.$$.on_mount.push(function(){e===void 0&&!("width"in n||s.$$.bound[s.$$.props.width])&&console.warn("<PopupContent> was created without expected prop 'width'"),t===void 0&&!("height"in n||s.$$.bound[s.$$.props.height])&&console.warn("<PopupContent> was created without expected prop 'height'"),i===void 0&&!("name"in n||s.$$.bound[s.$$.props.name])&&console.warn("<PopupContent> was created without expected prop 'name'"),o===void 0&&!("municipality"in n||s.$$.bound[s.$$.props.municipality])&&console.warn("<PopupContent> was created without expected prop 'municipality'"),l===void 0&&!("id"in n||s.$$.bound[s.$$.props.id])&&console.warn("<PopupContent> was created without expected prop 'id'"),c===void 0&&!("description"in n||s.$$.bound[s.$$.props.description])&&console.warn("<PopupContent> was created without expected prop 'description'"),h===void 0&&!("photos"in n||s.$$.bound[s.$$.props.photos])&&console.warn("<PopupContent> was created without expected prop 'photos'"),f===void 0&&!("baseUrl"in n||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<PopupContent> was created without expected prop 'baseUrl'"),_===void 0&&!("challengesPower"in n||s.$$.bound[s.$$.props.challengesPower])&&console.warn("<PopupContent> was created without expected prop 'challengesPower'")});const g=["width","height","name","municipality","id","description","photos","baseUrl","challengesPower"];return Object.keys(n).forEach(v=>{!~g.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<PopupContent> was created with unknown prop '${v}'`)}),s.$$set=v=>{"width"in v&&r(0,e=v.width),"height"in v&&r(1,t=v.height),"name"in v&&r(2,i=v.name),"municipality"in v&&r(3,o=v.municipality),"id"in v&&r(4,l=v.id),"description"in v&&r(5,c=v.description),"photos"in v&&r(6,h=v.photos),"baseUrl"in v&&r(7,f=v.baseUrl),"challengesPower"in v&&r(8,_=v.challengesPower)},s.$capture_state=()=>({createEventDispatcher:me,ImageArray:Yt,monumentSvg:Ie,countermonumentSvg:Be,width:e,height:t,name:i,municipality:o,id:l,description:c,photos:h,baseUrl:f,challengesPower:_,dispatch:d,handleLearnMoreClick:w,svgToUse:k}),s.$inject_state=v=>{"width"in v&&r(0,e=v.width),"height"in v&&r(1,t=v.height),"name"in v&&r(2,i=v.name),"municipality"in v&&r(3,o=v.municipality),"id"in v&&r(4,l=v.id),"description"in v&&r(5,c=v.description),"photos"in v&&r(6,h=v.photos),"baseUrl"in v&&r(7,f=v.baseUrl),"challengesPower"in v&&r(8,_=v.challengesPower)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[e,t,i,o,l,c,h,f,_,w,k]}class hn extends ge{constructor(n){super(n),ve(this,n,An,ct,pe,{width:0,height:1,name:2,municipality:3,id:4,description:5,photos:6,baseUrl:7,challengesPower:8}),N("SvelteRegisterComponent",{component:this,tagName:"PopupContent",options:n,id:ct.name})}get width(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengesPower(){throw new Error("<PopupContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengesPower(n){throw new Error("<PopupContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Fe="src/lib/UI/ImagePreview.svelte";function fn(s){let n,r,a,u,e,t,i;const o={c:function(){n=T("img"),u=q(),e=T("img"),this.h()},l:function(c){n=j(c,"IMG",{src:!0,alt:!0,class:!0}),u=W(c),e=j(c,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){ue(n.src,r=`${s[1]}${s[0][0].url}`)||B(n,"src",r),B(n,"alt",a=s[0][0].alt),B(n,"class","base-photo s-LLFXHRRAcbiM"),D(n,Fe,13,8,325),ue(e.src,t=`${s[1]}${s[0][1].url}`)||B(e,"src",t),B(e,"alt",i=s[0][1].alt),B(e,"class","overlay s-LLFXHRRAcbiM"),D(e,Fe,18,8,459)},m:function(c,h){X(c,n,h),X(c,u,h),X(c,e,h)},p:function(c,h){h&3&&!ue(n.src,r=`${c[1]}${c[0][0].url}`)&&B(n,"src",r),h&1&&a!==(a=c[0][0].alt)&&B(n,"alt",a),h&3&&!ue(e.src,t=`${c[1]}${c[0][1].url}`)&&B(e,"src",t),h&1&&i!==(i=c[0][1].alt)&&B(e,"alt",i)},d:function(c){c&&(E(n),E(u),E(e))}};return N("SvelteRegisterBlock",{block:o,id:fn.name,type:"if",source:"(13:33) ",ctx:s}),o}function dn(s){let n,r,a;const u={c:function(){n=T("img"),this.h()},l:function(t){n=j(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){ue(n.src,r=`${s[1]}${s[0][0].url}`)||B(n,"src",r),B(n,"alt",a=s[0][0].alt),B(n,"class","single-photo s-LLFXHRRAcbiM"),D(n,Fe,7,8,155)},m:function(t,i){X(t,n,i)},p:function(t,i){i&3&&!ue(n.src,r=`${t[1]}${t[0][0].url}`)&&B(n,"src",r),i&1&&a!==(a=t[0][0].alt)&&B(n,"alt",a)},d:function(t){t&&E(n)}};return N("SvelteRegisterBlock",{block:u,id:dn.name,type:"if",source:"(7:4) {#if photos && photos.length === 1}",ctx:s}),u}function ut(s){let n;function r(t,i){if(t[0]&&t[0].length===1)return dn;if(t[0].length>=2)return fn}let a=r(s),u=a&&a(s);const e={c:function(){n=T("div"),u&&u.c(),this.h()},l:function(i){n=j(i,"DIV",{class:!0});var o=V(n);u&&u.l(o),o.forEach(E),this.h()},h:function(){B(n,"class","image-container s-LLFXHRRAcbiM"),D(n,Fe,5,0,77)},m:function(i,o){X(i,n,o),u&&u.m(n,null)},p:function(i,[o]){a===(a=r(i))&&u?u.p(i,o):(u&&u.d(1),u=a&&a(i),u&&(u.c(),u.m(n,null)))},i:Ne,o:Ne,d:function(i){i&&E(n),u&&u.d()}};return N("SvelteRegisterBlock",{block:e,id:ut.name,type:"component",source:"",ctx:s}),e}function Gn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("ImagePreview",a,[]);let{photos:e={}}=n,{baseUrl:t=""}=n;const i=["photos","baseUrl"];return Object.keys(n).forEach(o=>{!~i.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<ImagePreview> was created with unknown prop '${o}'`)}),s.$$set=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},s.$capture_state=()=>({photos:e,baseUrl:t}),s.$inject_state=o=>{"photos"in o&&r(0,e=o.photos),"baseUrl"in o&&r(1,t=o.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[e,t]}class mn extends ge{constructor(n){super(n),ve(this,n,Gn,ut,pe,{photos:0,baseUrl:1}),N("SvelteRegisterComponent",{component:this,tagName:"ImagePreview",options:n,id:ut.name})}get photos(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(n){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<ImagePreview>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<ImagePreview>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ae="src/lib/UI/SearchItem.svelte";function ht(s){let n,r;n=new mn({props:{photos:s[3],baseUrl:s[4]},$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t&8&&(i.photos=e[3]),t&16&&(i.baseUrl=e[4]),n.$set(i)},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:ht.name,type:"if",source:"(30:4) {#if photos && photos.length}",ctx:s}),a}function ft(s){let n,r;const a={c:function(){n=T("h3"),r=re(s[1]),this.h()},l:function(e){n=j(e,"H3",{});var t=V(n);r=se(t,s[1]),t.forEach(E),this.h()},h:function(){D(n,ae,37,8,1120)},m:function(e,t){X(e,n,t),S(n,r)},p:function(e,t){t&2&&_e(r,e[1])},d:function(e){e&&E(n)}};return N("SvelteRegisterBlock",{block:a,id:ft.name,type:"if",source:"(37:8) {#if municipality && municipality !== 'null' && municipality !== 'undefined'}",ctx:s}),a}function dt(s){let n,r,a,u,e,t,i,o,l,c,h,f,_,d,w,k,g,v,Z,U,z="learn more",F,G,A,C=s[3]&&s[3].length&&ht(s),y=s[1]&&s[1]!=="null"&&s[1]!=="undefined"&&ft(s);const I={c:function(){n=T("div"),C&&C.c(),r=q(),a=T("div"),u=T("div"),e=re("#"),t=re(s[2]),i=q(),o=T("h2"),l=re(s[0]),c=q(),y&&y.c(),h=q(),f=T("div"),_=T("div"),d=T("img"),k=q(),g=T("div"),v=q(),Z=T("div"),U=T("button"),U.textContent=z,this.h()},l:function(P){n=j(P,"DIV",{class:!0});var H=V(n);C&&C.l(H),r=W(H),a=j(H,"DIV",{class:!0});var m=V(a);u=j(m,"DIV",{class:!0});var b=V(u);e=se(b,"#"),t=se(b,s[2]),b.forEach(E),i=W(m),o=j(m,"H2",{});var O=V(o);l=se(O,s[0]),O.forEach(E),c=W(m),y&&y.l(m),m.forEach(E),h=W(H),f=j(H,"DIV",{class:!0});var Q=V(f);_=j(Q,"DIV",{style:!0});var he=V(_);d=j(he,"IMG",{src:!0,alt:!0,style:!0}),he.forEach(E),k=W(Q),g=j(Q,"DIV",{class:!0}),V(g).forEach(E),v=W(Q),Z=j(Q,"DIV",{});var Le=V(Z);U=j(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),qt(U)!=="svelte-1h1xepw"&&(U.textContent=z),Le.forEach(E),Q.forEach(E),H.forEach(E),this.h()},h:function(){B(u,"class","monument-id"),D(u,ae,34,8,965),D(o,ae,35,8,1010),B(a,"class","flex flex-col items-start ml-7 space-y-2"),D(a,ae,33,4,902),ue(d.src,w=s[8])||B(d,"src",w),B(d,"alt","Monument Marker"),de(d,"width","100%"),de(d,"height","100%"),D(d,ae,43,12,1318),de(_,"width",s[5]+"px"),de(_,"height",s[6]+"px"),D(_,ae,42,8,1254),B(g,"class","flex-grow"),D(g,ae,45,8,1423),B(U,"class","learn-more-button s-bEGFb-JhA8_4"),D(U,ae,47,12,1479),D(Z,ae,46,8,1461),B(f,"class","flex flex-col flex-wrap justify-between items-end"),D(f,ae,41,4,1174),B(n,"class","result-container flex flex-row justify-between items-stretch p-3 lg:p-4 border border-black bg-white m-2 rounded-sm"),D(n,ae,28,0,679)},m:function(P,H){X(P,n,H),C&&C.m(n,null),S(n,r),S(n,a),S(a,u),S(u,e),S(u,t),S(a,i),S(a,o),S(o,l),S(a,c),y&&y.m(a,null),S(n,h),S(n,f),S(f,_),S(_,d),S(f,k),S(f,g),S(f,v),S(f,Z),S(Z,U),F=!0,G||(A=Pe(U,"click",s[7],!1,!1,!1,!1),G=!0)},p:function(P,[H]){P[3]&&P[3].length?C?(C.p(P,H),H&8&&M(C,1)):(C=ht(P),C.c(),M(C,1),C.m(n,r)):C&&(x(),R(C,1,1,()=>{C=null}),$()),(!F||H&4)&&_e(t,P[2]),(!F||H&1)&&_e(l,P[0]),P[1]&&P[1]!=="null"&&P[1]!=="undefined"?y?y.p(P,H):(y=ft(P),y.c(),y.m(a,null)):y&&(y.d(1),y=null)},i:function(P){F||(M(C),F=!0)},o:function(P){R(C),F=!1},d:function(P){P&&E(n),C&&C.d(),y&&y.d(),G=!1,A()}};return N("SvelteRegisterBlock",{block:I,id:dt.name,type:"component",source:"",ctx:s}),I}function zn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("SearchItem",a,[]);let e=30,t=30,{name:i}=n,{municipality:o}=n,{challengesPower:l}=n,{id:c}=n,{photos:h}=n,{baseUrl:f}=n;const _=me();function d(g){_("closeAndShowDetails",{id:c,event:g})}const w=l?Be:Ie;s.$$.on_mount.push(function(){i===void 0&&!("name"in n||s.$$.bound[s.$$.props.name])&&console.warn("<SearchItem> was created without expected prop 'name'"),o===void 0&&!("municipality"in n||s.$$.bound[s.$$.props.municipality])&&console.warn("<SearchItem> was created without expected prop 'municipality'"),l===void 0&&!("challengesPower"in n||s.$$.bound[s.$$.props.challengesPower])&&console.warn("<SearchItem> was created without expected prop 'challengesPower'"),c===void 0&&!("id"in n||s.$$.bound[s.$$.props.id])&&console.warn("<SearchItem> was created without expected prop 'id'"),h===void 0&&!("photos"in n||s.$$.bound[s.$$.props.photos])&&console.warn("<SearchItem> was created without expected prop 'photos'"),f===void 0&&!("baseUrl"in n||s.$$.bound[s.$$.props.baseUrl])&&console.warn("<SearchItem> was created without expected prop 'baseUrl'")});const k=["name","municipality","challengesPower","id","photos","baseUrl"];return Object.keys(n).forEach(g=>{!~k.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&console.warn(`<SearchItem> was created with unknown prop '${g}'`)}),s.$$set=g=>{"name"in g&&r(0,i=g.name),"municipality"in g&&r(1,o=g.municipality),"challengesPower"in g&&r(9,l=g.challengesPower),"id"in g&&r(2,c=g.id),"photos"in g&&r(3,h=g.photos),"baseUrl"in g&&r(4,f=g.baseUrl)},s.$capture_state=()=>({createEventDispatcher:me,ImagePreview:mn,monumentSvg:Ie,countermonumentSvg:Be,width:e,height:t,name:i,municipality:o,challengesPower:l,id:c,photos:h,baseUrl:f,dispatch:_,handleLearnMoreClick:d,svgToUse:w}),s.$inject_state=g=>{"width"in g&&r(5,e=g.width),"height"in g&&r(6,t=g.height),"name"in g&&r(0,i=g.name),"municipality"in g&&r(1,o=g.municipality),"challengesPower"in g&&r(9,l=g.challengesPower),"id"in g&&r(2,c=g.id),"photos"in g&&r(3,h=g.photos),"baseUrl"in g&&r(4,f=g.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),[i,o,c,h,f,e,t,d,w,l]}class _n extends ge{constructor(n){super(n),ve(this,n,zn,dt,pe,{name:0,municipality:1,challengesPower:9,id:2,photos:3,baseUrl:4}),N("SvelteRegisterComponent",{component:this,tagName:"SearchItem",options:n,id:dt.name})}get name(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get municipality(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set municipality(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengesPower(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengesPower(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get photos(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set photos(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<SearchItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Rn}=Bt,Re="src/lib/UI/SearchResults.svelte";function Te(s,n,r){const a=s.slice();return a[6]=n[r].name,a[7]=n[r].photos,a[8]=n[r].municipality,a[9]=n[r].id,a[10]=n[r].challengesPower,a[12]=r,a}function mt(s,n){let r,a,u;a=new _n({props:{name:n[6],photos:n[7],municipality:n[8],id:n[9],baseUrl:n[1],challengesPower:n[10]},$$inline:!0}),a.$on("closeAndShowDetails",n[4]);const e={key:s,first:null,c:function(){r=fe(),ee(a.$$.fragment),this.h()},l:function(i){r=fe(),te(a.$$.fragment,i),this.h()},h:function(){this.first=r},m:function(i,o){X(i,r,o),ne(a,i,o),u=!0},p:function(i,o){n=i;const l={};o&1&&(l.name=n[6]),o&1&&(l.photos=n[7]),o&1&&(l.municipality=n[8]),o&1&&(l.id=n[9]),o&2&&(l.baseUrl=n[1]),o&1&&(l.challengesPower=n[10]),a.$set(l)},i:function(i){u||(M(a.$$.fragment,i),u=!0)},o:function(i){R(a.$$.fragment,i),u=!1},d:function(i){i&&E(r),ie(a,i)}};return N("SvelteRegisterBlock",{block:e,id:mt.name,type:"each",source:"(40:2) {#each results as { name, photos, municipality, id, challengesPower }",ctx:n}),e}function _t(s){let n,r,a,u,e,t,i=s[0].length+"",o,l,c=s[0].length>1?"places ":"place ",h,f,_,d=[],w=new Map,k,g,v,Z,U,z=Ve(s[0]);const F=A=>A[9]+"-"+A[12];He(s,z,Te,F);for(let A=0;A<z.length;A+=1){let C=Te(s,z,A),y=F(C);w.set(y,d[A]=mt(y,C))}const G={c:function(){n=T("div"),r=T("button"),a=T("img"),e=q(),t=T("p"),o=re(i),l=q(),h=re(c),f=re(`
    replied to your call...`),_=q();for(let C=0;C<d.length;C+=1)d[C].c();this.h()},l:function(C){n=j(C,"DIV",{class:!0});var y=V(n);r=j(y,"BUTTON",{class:!0});var I=V(r);a=j(I,"IMG",{src:!0,alt:!0}),I.forEach(E),e=W(y),t=j(y,"P",{});var p=V(t);o=se(p,i),l=W(p),h=se(p,c),f=se(p,`
    replied to your call...`),p.forEach(E),_=W(y);for(let P=0;P<d.length;P+=1)d[P].l(y);y.forEach(E),this.h()},h:function(){ue(a.src,u=xt)||B(a,"src",u),B(a,"alt","Close Sidebar"),D(a,Re,32,4,736),B(r,"class","close-button"),D(r,Re,31,2,679),D(t,Re,34,2,795),B(n,"class","sidebar s-VgsW2gEiy9eW"),D(n,Re,26,0,577)},m:function(C,y){X(C,n,y),S(n,r),S(r,a),S(n,e),S(n,t),S(t,o),S(t,l),S(t,h),S(t,f),S(n,_);for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(n,null);v=!0,Z||(U=Pe(r,"click",s[3],!1,!1,!1,!1),Z=!0)},p:function(C,[y]){(!v||y&1)&&i!==(i=C[0].length+"")&&_e(o,i),(!v||y&1)&&c!==(c=C[0].length>1?"places ":"place ")&&_e(h,c),y&7&&(z=Ve(C[0]),x(),He(C,z,Te,F),d=Xt(d,y,F,1,C,z,w,n,Qt,mt,null,Te),$())},i:function(C){if(!v){for(let y=0;y<z.length;y+=1)M(d[y]);C&&Wt(()=>{v&&(g&&g.end(1),k=Kt(n,xe,{x:300,duration:800}),k.start())}),v=!0}},o:function(C){for(let y=0;y<d.length;y+=1)R(d[y]);k&&k.invalidate(),C&&(g=Jt(n,xe,{x:300,duration:800})),v=!1},d:function(C){C&&E(n);for(let y=0;y<d.length;y+=1)d[y].d();C&&g&&g.end(),Z=!1,U()}};return N("SvelteRegisterBlock",{block:G,id:_t.name,type:"component",source:"",ctx:s}),G}function Tn(s,n,r){let{$$slots:a={},$$scope:u}=n;ye("SearchResults",a,[]);const e=me();let{results:t={}}=n,{baseUrl:i=""}=n;function o(f){e("closeAndShowDetails",{id:f.detail.id,event:f})}function l(){le.set(null)}const c=["results","baseUrl"];Object.keys(n).forEach(f=>{!~c.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&Rn.warn(`<SearchResults> was created with unknown prop '${f}'`)});const h=f=>o(f);return s.$$set=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,i=f.baseUrl)},s.$capture_state=()=>({fly:xe,createEventDispatcher:me,currentSidebar:le,closeImage:xt,dispatch:e,SearchItem:_n,results:t,baseUrl:i,handleDetails:o,closeSearch:l}),s.$inject_state=f=>{"results"in f&&r(0,t=f.results),"baseUrl"in f&&r(1,i=f.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{s.$$.dirty&1&&console.log("results",t)},[t,i,o,l,h]}class pn extends ge{constructor(n){super(n),ve(this,n,Tn,_t,pe,{results:0,baseUrl:1}),N("SvelteRegisterComponent",{component:this,tagName:"SearchResults",options:n,id:_t.name})}get results(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set results(n){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseUrl(){throw new Error("<SearchResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseUrl(n){throw new Error("<SearchResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:jn}=Bt,we="src/routes/map/+page.svelte";function je(s,n,r){const a=s.slice();return a[22]=n[r].latLng,a[23]=n[r].visible,a[24]=n[r].name,a[25]=n[r].description,a[26]=n[r].photos,a[27]=n[r].municipality,a[28]=n[r].id,a[29]=n[r].challengesPower,a[31]=r,a}function pt(s){let n,r,a,u,e,t;const i={c:function(){n=T("h1"),r=re("*countermap"),this.h()},l:function(l){n=j(l,"H1",{class:!0});var c=V(n);r=se(c,"*countermap"),c.forEach(E),this.h()},h:function(){B(n,"class",a=Gt(s[3]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"),D(n,we,117,2,3299)},m:function(l,c){X(l,n,c),S(n,r),t=!0},p:function(l,c){(!t||c[0]&8&&a!==(a=Gt(l[3]==="dark"?"darkmode":"")+" s-_HdLFogMzSo7"))&&B(n,"class",a)},i:function(l){t||(l&&Wt(()=>{t&&(e&&e.end(1),u=Kt(n,$e,{duration:300}),u.start())}),t=!0)},o:function(l){u&&u.invalidate(),l&&(e=Jt(n,$e,{duration:300})),t=!1},d:function(l){l&&E(n),l&&e&&e.end()}};return N("SvelteRegisterBlock",{block:i,id:pt.name,type:"if",source:"(117:0) {#if $isPopupOpen === false}",ctx:s}),i}function gt(s){let n,r;n=new cn({props:{latLng:s[22],width:s[8],height:s[9],challengesPower:s[29],$$slots:{default:[vn]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t[0]&32&&(i.latLng=e[22]),t[0]&32&&(i.challengesPower=e[29]),t[0]&32|t[1]&4&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:gt.name,type:"if",source:"(131:6) {#if visible}",ctx:s}),a}function gn(s){let n,r;function a(...e){return s[19](s[32],...e)}n=new hn({props:{width:s[8],height:s[9],name:s[24],municipality:s[27],id:s[28],description:s[25],photos:s[26],baseUrl:s[10],challengesPower:s[29]},$$inline:!0}),n.$on("closeAndShowDetails",a);const u={c:function(){ee(n.$$.fragment)},l:function(t){te(n.$$.fragment,t)},m:function(t,i){ne(n,t,i),r=!0},p:function(t,i){s=t;const o={};i[0]&32&&(o.name=s[24]),i[0]&32&&(o.municipality=s[27]),i[0]&32&&(o.id=s[28]),i[0]&32&&(o.description=s[25]),i[0]&32&&(o.photos=s[26]),i[0]&32&&(o.challengesPower=s[29]),n.$set(o)},i:function(t){r||(M(n.$$.fragment,t),r=!0)},o:function(t){R(n.$$.fragment,t),r=!1},d:function(t){ie(n,t)}};return N("SvelteRegisterBlock",{block:u,id:gn.name,type:"slot",source:"(133:10) <Popup let:popup>",ctx:s}),u}function vn(s){let n,r,a;n=new un({props:{$$slots:{default:[gn,({popup:e})=>({32:e}),({popup:e})=>[0,e?2:0]]},$$scope:{ctx:s}},$$inline:!0});const u={c:function(){ee(n.$$.fragment),r=q()},l:function(t){te(n.$$.fragment,t),r=W(t)},m:function(t,i){ne(n,t,i),X(t,r,i),a=!0},p:function(t,i){const o={};i[0]&32|i[1]&6&&(o.$$scope={dirty:i,ctx:t}),n.$set(o)},i:function(t){a||(M(n.$$.fragment,t),a=!0)},o:function(t){R(n.$$.fragment,t),a=!1},d:function(t){t&&E(r),ie(n,t)}};return N("SvelteRegisterBlock",{block:u,id:vn.name,type:"slot",source:"(132:8) <Marker {latLng} {width} {height} {challengesPower}>",ctx:s}),u}function vt(s,n){let r,a,u,e=n[23]&&gt(n);const t={key:s,first:null,c:function(){r=fe(),e&&e.c(),a=fe(),this.h()},l:function(o){r=fe(),e&&e.l(o),a=fe(),this.h()},h:function(){this.first=r},m:function(o,l){X(o,r,l),e&&e.m(o,l),X(o,a,l),u=!0},p:function(o,l){n=o,n[23]?e?(e.p(n,l),l[0]&32&&M(e,1)):(e=gt(n),e.c(),M(e,1),e.m(a.parentNode,a)):e&&(x(),R(e,1,1,()=>{e=null}),$())},i:function(o){u||(M(e),u=!0)},o:function(o){R(e),u=!1},d:function(o){o&&(E(r),E(a)),e&&e.d(o)}};return N("SvelteRegisterBlock",{block:t,id:vt.name,type:"each",source:"(130:4) {#each $visibleMarkers as { latLng, visible, name, description, photos, municipality, id, challengesPower }",ctx:n}),t}function yn(s){let n=[],r=new Map,a,u,e=Ve(s[5]);const t=o=>o[22].join(",")+"-"+o[31];He(s,e,je,t);for(let o=0;o<e.length;o+=1){let l=je(s,e,o),c=t(l);r.set(c,n[o]=vt(c,l))}const i={c:function(){for(let l=0;l<n.length;l+=1)n[l].c();a=fe()},l:function(l){for(let c=0;c<n.length;c+=1)n[c].l(l);a=fe()},m:function(l,c){for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(l,c);X(l,a,c),u=!0},p:function(l,c){c[0]&10016|c[1]&2&&(e=Ve(l[5]),x(),He(l,e,je,t),n=Xt(n,c,t,1,l,e,r,a.parentNode,Qt,vt,a,je),$())},i:function(l){if(!u){for(let c=0;c<e.length;c+=1)M(n[c]);u=!0}},o:function(l){for(let c=0;c<n.length;c+=1)R(n[c]);u=!1},d:function(l){l&&E(a);for(let c=0;c<n.length;c+=1)n[c].d(l)}};return N("SvelteRegisterBlock",{block:i,id:yn.name,type:"slot",source:"(129:2) <Leaflet view={$currentViewStore} zoom={zoomLevel}>",ctx:s}),i}function yt(s){let n,r;n=new en({$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:yt.name,type:"if",source:"(164:0) {#if $selectedMarkerId !== null && $currentSidebar === 'sidebar'}",ctx:s}),a}function wt(s){let n,r;n=new tn({$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:wt.name,type:"if",source:"(168:0) {#if $currentSidebar === 'menu'}",ctx:s}),a}function Lt(s){let n,r;n=new nn({$$inline:!0}),n.$on("closeSideBar",s[15]);const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:Ne,i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:Lt.name,type:"if",source:"(172:0) {#if $currentSidebar === 'submissions'}",ctx:s}),a}function bt(s){let n,r;n=new an({$$inline:!0});const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:bt.name,type:"if",source:"(176:0) {#if $currentSidebar === 'tools'}",ctx:s}),a}function kt(s){let n,r;n=new pn({props:{results:s[5],baseUrl:s[10]},$$inline:!0}),n.$on("closeAndShowDetails",s[20]);const a={c:function(){ee(n.$$.fragment)},l:function(e){te(n.$$.fragment,e)},m:function(e,t){ne(n,e,t),r=!0},p:function(e,t){const i={};t[0]&32&&(i.results=e[5]),n.$set(i)},i:function(e){r||(M(n.$$.fragment,e),r=!0)},o:function(e){R(n.$$.fragment,e),r=!1},d:function(e){ie(n,e)}};return N("SvelteRegisterBlock",{block:a,id:kt.name,type:"if",source:"(180:0) {#if $currentSidebar === 'search'}",ctx:s}),a}function Ct(s){let n,r,a;r=new on({$$inline:!0}),r.$on("openSubmissions",s[18]);const u={c:function(){n=T("div"),ee(r.$$.fragment),this.h()},l:function(t){n=j(t,"DIV",{class:!0});var i=V(n);te(r.$$.fragment,i),i.forEach(E),this.h()},h:function(){B(n,"class","banner-container s-_HdLFogMzSo7"),D(n,we,186,2,5309)},m:function(t,i){X(t,n,i),ne(r,n,null),a=!0},p:Ne,i:function(t){a||(M(r.$$.fragment,t),a=!0)},o:function(t){R(r.$$.fragment,t),a=!1},d:function(t){t&&E(n),ie(r)}};return N("SvelteRegisterBlock",{block:u,id:Ct.name,type:"if",source:"(186:0) {#if $bannerClosed === false}",ctx:s}),u}function Pt(s){let n,r,a,u,e,t,i,o,l,c,h,f,_,d,w,k,g,v,Z,U,z,F,G=s[2]===!1&&pt(s);a=new $t({$$inline:!0}),a.$on("updateView",s[12]),e=new ln({props:{view:s[4],zoom:s[1],$$slots:{default:[yn]},$$scope:{ctx:s}},$$inline:!0});let A=s[6]!==null&&s[0]==="sidebar"&&yt(s),C=s[0]==="menu"&&wt(s),y=s[0]==="submissions"&&Lt(s),I=s[0]==="tools"&&bt(s),p=s[0]==="search"&&kt(s),P=s[7]===!1&&Ct(s);const H={c:function(){G&&G.c(),n=q(),r=T("div"),ee(a.$$.fragment),u=q(),ee(e.$$.fragment),t=q(),i=T("button"),o=T("img"),c=q(),h=T("button"),f=T("img"),d=q(),A&&A.c(),w=q(),C&&C.c(),k=q(),y&&y.c(),g=q(),I&&I.c(),v=q(),p&&p.c(),Z=q(),P&&P.c(),this.h()},l:function(b){G&&G.l(b),n=W(b),r=j(b,"DIV",{class:!0});var O=V(r);te(a.$$.fragment,O),u=W(O),te(e.$$.fragment,O),t=W(O),i=j(O,"BUTTON",{class:!0});var Q=V(i);o=j(Q,"IMG",{src:!0,alt:!0}),Q.forEach(E),c=W(O),h=j(O,"BUTTON",{class:!0});var he=V(h);f=j(he,"IMG",{src:!0,alt:!0}),he.forEach(E),d=W(O),A&&A.l(O),w=W(O),C&&C.l(O),k=W(O),y&&y.l(O),g=W(O),I&&I.l(O),v=W(O),p&&p.l(O),Z=W(O),P&&P.l(O),O.forEach(E),this.h()},h:function(){ue(o.src,l=rn)||B(o,"src",l),B(o,"alt","Open Menu Sidebar"),D(o,we,157,2,4576),B(i,"class","menu-button sdbbtn"),D(i,we,156,0,4518),ue(f.src,_=sn)||B(f,"src",_),B(f,"alt","Open Filter Sidebar"),D(f,we,160,2,4697),B(h,"class","filter-button sdbbtn"),D(h,we,159,0,4636),B(r,"class","w-full h-screen"),D(r,we,126,0,3566)},m:function(b,O){G&&G.m(b,O),X(b,n,O),X(b,r,O),ne(a,r,null),S(r,u),ne(e,r,null),S(r,t),S(r,i),S(i,o),S(r,c),S(r,h),S(h,f),S(r,d),A&&A.m(r,null),S(r,w),C&&C.m(r,null),S(r,k),y&&y.m(r,null),S(r,g),I&&I.m(r,null),S(r,v),p&&p.m(r,null),S(r,Z),P&&P.m(r,null),U=!0,z||(F=[Pe(i,"click",s[16],!1,!1,!1,!1),Pe(h,"click",s[17],!1,!1,!1,!1),Pe(r,"click",s[14],!1,!1,!1,!1)],z=!0)},p:function(b,O){b[2]===!1?G?(G.p(b,O),O[0]&4&&M(G,1)):(G=pt(b),G.c(),M(G,1),G.m(n.parentNode,n)):G&&(x(),R(G,1,1,()=>{G=null}),$());const Q={};O[0]&16&&(Q.view=b[4]),O[0]&2&&(Q.zoom=b[1]),O[0]&32|O[1]&4&&(Q.$$scope={dirty:O,ctx:b}),e.$set(Q),b[6]!==null&&b[0]==="sidebar"?A?O[0]&65&&M(A,1):(A=yt(b),A.c(),M(A,1),A.m(r,w)):A&&(x(),R(A,1,1,()=>{A=null}),$()),b[0]==="menu"?C?O[0]&1&&M(C,1):(C=wt(b),C.c(),M(C,1),C.m(r,k)):C&&(x(),R(C,1,1,()=>{C=null}),$()),b[0]==="submissions"?y?(y.p(b,O),O[0]&1&&M(y,1)):(y=Lt(b),y.c(),M(y,1),y.m(r,g)):y&&(x(),R(y,1,1,()=>{y=null}),$()),b[0]==="tools"?I?O[0]&1&&M(I,1):(I=bt(b),I.c(),M(I,1),I.m(r,v)):I&&(x(),R(I,1,1,()=>{I=null}),$()),b[0]==="search"?p?(p.p(b,O),O[0]&1&&M(p,1)):(p=kt(b),p.c(),M(p,1),p.m(r,Z)):p&&(x(),R(p,1,1,()=>{p=null}),$()),b[7]===!1?P?(P.p(b,O),O[0]&128&&M(P,1)):(P=Ct(b),P.c(),M(P,1),P.m(r,null)):P&&(x(),R(P,1,1,()=>{P=null}),$())},i:function(b){U||(M(G),M(a.$$.fragment,b),M(e.$$.fragment,b),M(A),M(C),M(y),M(I),M(p),M(P),U=!0)},o:function(b){R(G),R(a.$$.fragment,b),R(e.$$.fragment,b),R(A),R(C),R(y),R(I),R(p),R(P),U=!1},d:function(b){b&&(E(n),E(r)),G&&G.d(b),ie(a),ie(e),A&&A.d(),C&&C.d(),y&&y.d(),I&&I.d(),p&&p.d(),P&&P.d(),z=!1,bn(F)}};return N("SvelteRegisterBlock",{block:H,id:Pt.name,type:"component",source:"",ctx:s}),H}function Dn(s,n,r){let a,u,e,t,i,o,l;J(le,"currentSidebar"),Y(s,le,p=>r(0,a=p)),J(Se,"isPopupOpen"),Y(s,Se,p=>r(2,u=p)),J(ce,"darkMode"),Y(s,ce,p=>r(3,e=p)),J(ze,"currentViewStore"),Y(s,ze,p=>r(4,t=p)),J(Ue,"selectedMarkerId"),Y(s,Ue,p=>r(6,o=p)),J(Ye,"bannerClosed"),Y(s,Ye,p=>r(7,l=p));let{$$slots:c={},$$scope:h}=n;ye("Page",c,[]);let f=25,_=25,d=10,w="https://www.veterans.gc.ca/images/remembrance/memorials/national-inventory-canadian-memorials/mem/";const k=zt([Nt,Ce,le,Oe],([p,P,H,m])=>H==="tools"&&m.length>0?m:p.filter(b=>{const[O,Q]=b.latLng;return P.contains(K.latLng(O,Q))}));J(k,"visibleMarkers"),Y(s,k,p=>r(5,i=p));function g(p){console.log("updating view");const{latLng:P}=p.detail;r(1,d=12),ze.set({lat:P[0],lng:P[1]}),le.set("search")}function v(p,P){console.log("showing details"),p&&typeof p.stopPropagation=="function"&&p.stopPropagation(),U("sidebar"),Ue.set(P)}function Z(p){a!=="search"&&a!=="submissions"&&a!=="tools"&&!p.target.closest(".sdbbtn")&&!p.target.closest(".sidebar")&&(U(null),Ue.set(null))}function U(p){le.set(p)}function z(){console.log("closing sidebar"),U(null)}function F(){U(a==="menu"?null:"menu")}function G(){U(a==="tools"?null:"tools")}function A(){U("submissions")}const C=[];Object.keys(n).forEach(p=>{!~C.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&jn.warn(`<Page> was created with unknown prop '${p}'`)});const y=(p,{detail:P})=>{console.log(P),v(P.event,P.id),p.close()},I=({detail:p})=>{console.log(p),v(p.event,p.id)};return s.$capture_state=()=>({derived:zt,L:K,fade:$e,Leaflet:ln,Marker:cn,Popup:un,PopupContent:hn,Sidebar:en,MenuSidebar:tn,Search:$t,SearchResults:pn,SubmissionSidebar:nn,Banner:on,menuIconPath:rn,filterIconPath:sn,markersStore:Nt,filteredStore:Oe,currentViewStore:ze,mapBoundsStore:Ce,darkMode:ce,selectedMarkerId:Ue,currentSidebar:le,isPopupOpen:Se,bannerClosed:Ye,ToolsSidebar:an,width:f,height:_,zoomLevel:d,baseUrl:w,visibleMarkers:k,handleUpdateView:g,showDetails:v,handleDivClick:Z,setCurrentSidebar:U,closeSidebar:z,showMenu:F,showTools:G,openSubmissions:A,$currentSidebar:a,$isPopupOpen:u,$darkMode:e,$currentViewStore:t,$visibleMarkers:i,$selectedMarkerId:o,$bannerClosed:l}),s.$inject_state=p=>{"width"in p&&r(8,f=p.width),"height"in p&&r(9,_=p.height),"zoomLevel"in p&&r(1,d=p.zoomLevel),"baseUrl"in p&&r(10,w=p.baseUrl)},n&&"$$inject"in n&&s.$inject_state(n.$$inject),s.$$.update=()=>{s.$$.dirty[0]&1&&console.log(a)},[a,d,u,e,t,i,o,l,f,_,w,k,g,v,Z,z,F,G,A,y,I]}class Wn extends ge{constructor(n){super(n),ve(this,n,Dn,Pt,pe,{},null,[-1,-1]),N("SvelteRegisterComponent",{component:this,tagName:"Page",options:n,id:Pt.name})}}export{Wn as component,qn as universal};
